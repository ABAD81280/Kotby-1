(self.webpackChunktest3=self.webpackChunktest3||[]).push([[179],{6304:(ze,K,P)=>{"use strict";P.d(K,{Dh:()=>ee,GT:()=>$,cc:()=>ae,on:()=>ce,pX:()=>L,xv:()=>ne});var l=P(5879),N=P(120);ze=P.hmd(ze);const D=["ngOnDestroy"],L=(_e,De,Ue,Ve={})=>new Proxy(_e,{get:(se,be)=>Ue.runOutsideAngular(()=>{var re;if(_e[be])return!(null===(re=Ve?.spy)||void 0===re)&&re.get&&Ve.spy.get(be,_e[be]),_e[be];if(D.indexOf(be)>-1)return()=>{};const he=De.toPromise().then(Ae=>{const J=Ae&&Ae[be];return"function"==typeof J?J.bind(Ae):J&&J.then?J.then(qe=>Ue.run(()=>qe)):Ue.run(()=>J)});return new Proxy(()=>{},{get:(Ae,J)=>he[J],apply:(Ae,J,qe)=>he.then(He=>{var Ye;const At=He&&He(...qe);return!(null===(Ye=Ve?.spy)||void 0===Ye)&&Ye.apply&&Ve.spy.apply(be,qe,At),At})})})}),$=(_e,De)=>{De.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Ve=>{Object.defineProperty(_e.prototype,Ve,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Ve))})})};class W{constructor(De){return De}}const ee=new l.OlP("angularfire2.app.options"),ne=new l.OlP("angularfire2.app.name");function ce(_e,De,Ue){const se="object"==typeof Ue&&Ue||{};se.name=se.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const re=N.Z.apps.filter(he=>he&&he.name===se.name)[0]||De.runOutsideAngular(()=>N.Z.initializeApp(_e,se));try{JSON.stringify(_e)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new W(re)}const U=(_e,...De)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...De)};function ae(_e,De,Ue,Ve,se){const[,be,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===_e)||[];if(be)return function ge(_e,De){try{return _e.toString()===De.toString()}catch{return _e===De}}(se,re)||(xe("error",`${De} was already initialized on the ${Ue} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),xe("warn",{is:se,was:re})),be;{const he=Ve();return globalThis.\u0275AngularfireInstanceCache.push([_e,he,se]),he}}const Be=!!ze.hot,xe=(_e,...De)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(ze,K,P)=>{"use strict";P.d(K,{$:()=>Ng,A:()=>G,D:()=>ge,I:()=>vg,J:()=>Al,L:()=>et,N:()=>Es,P:()=>en,Q:()=>Xu,R:()=>mv,U:()=>Wy,V:()=>mu,W:()=>So,X:()=>Jo,Y:()=>Sg,Z:()=>Dg,_:()=>Rl,a:()=>$h,a0:()=>_D,a1:()=>rr,a2:()=>oO,a3:()=>aO,a4:()=>Ew,a5:()=>Na,a6:()=>Pl,a7:()=>Mg,a8:()=>Og,a9:()=>ww,aA:()=>J,aB:()=>Hl,aC:()=>er,aD:()=>ao,aE:()=>jl,aF:()=>im,aG:()=>wv,aH:()=>nr,aL:()=>Ml,aO:()=>Gs,aa:()=>Qy,ab:()=>Tw,ac:()=>Jy,ad:()=>Aw,ae:()=>Lh,af:()=>bw,ai:()=>vD,aj:()=>uO,ak:()=>Dw,an:()=>Rg,ao:()=>kl,aq:()=>Gg,ar:()=>jh,as:()=>He,at:()=>dt,au:()=>ke,av:()=>se,aw:()=>ja,ax:()=>ef,ay:()=>fn,az:()=>be,b:()=>zg,c:()=>xo,d:()=>nm,e:()=>Bl,f:()=>Kh,g:()=>$w,h:()=>Ua,i:()=>Ro,j:()=>Av,k:()=>Eu,l:()=>_v,m:()=>Yl,o:()=>Kw,p:()=>ne,r:()=>yv,s:()=>yn,u:()=>Or});var l=P(5861),N=P(9058),D=P(534),L=P(7582),$=P(7879),W=P(4537);const ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ge=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Be=function ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new $.Yd("@firebase/auth");function Ve(T,..._){De.logLevel<=$.in.ERROR&&De.error(`Auth (${D.SDK_VERSION}): ${T}`,..._)}function se(T,..._){throw Ae(T,..._)}function be(T,..._){return Ae(T,..._)}function re(T,_,v){const C=Object.assign(Object.assign({},Be()),{[_]:v});return new N.LL("auth","Firebase",C).create(_,{appName:T.name})}function he(T,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&se(T,"argument-error"),re(T,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ae(T,..._){if("string"!=typeof T){const v=_[0],C=[..._.slice(1)];return C[0]&&(C[0].appName=T.name),T._errorFactory.create(v,...C)}return xe.create(T,..._)}function J(T,_,...v){if(!T)throw Ae(_,...v)}function qe(T){const _="INTERNAL ASSERTION FAILED: "+T;throw Ve(_),new Error(_)}function He(T,_){T||qe(_)}function Ye(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function At(){return"http:"===xt()||"https:"===xt()}function xt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Xi{constructor(_,v){this.shortDelay=_,this.longDelay=v,He(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function $r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(At()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function oo(T,_){He(T.emulator,"Emulator should always be set here");const{url:v}=T.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class Ee{static initialize(_,v,C){this.fetchImpl=_,v&&(this.headersImpl=v),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Re=new Xi(3e4,6e4);function me(T,_){return T.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:T.tenantId}):_}function Ne(T,_,v,C){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,l.Z)(function*(T,_,v,C,x={}){return pt(T,x,(0,l.Z)(function*(){let O={},ie={};C&&("GET"===_?ie=C:O={body:JSON.stringify(C)});const ve=(0,N.xO)(Object.assign({key:T.config.apiKey},ie)).slice(1),Qe=yield T._getAdditionalHeaders();return Qe["Content-Type"]="application/json",T.languageCode&&(Qe["X-Firebase-Locale"]=T.languageCode),Ee.fetch()(Jt(T,T.config.apiHost,v,ve),Object.assign({method:_,headers:Qe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function pt(T,_,v){return Je.apply(this,arguments)}function Je(){return(Je=(0,l.Z)(function*(T,_,v){T._canInitEmulator=!1;const C=Object.assign(Object.assign({},we),_);try{const x=new Ot(T),O=yield Promise.race([v(),x.promise]);x.clearNetworkTimeout();const ie=yield O.json();if("needConfirmation"in ie)throw Sn(T,"account-exists-with-different-credential",ie);if(O.ok&&!("errorMessage"in ie))return ie;{const ve=O.ok?ie.errorMessage:ie.error.message,[Qe,tt]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qe)throw Sn(T,"credential-already-in-use",ie);if("EMAIL_EXISTS"===Qe)throw Sn(T,"email-already-in-use",ie);if("USER_DISABLED"===Qe)throw Sn(T,"user-disabled",ie);const It=C[Qe]||Qe.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw re(T,It,tt);se(T,It)}}catch(x){if(x instanceof N.ZR)throw x;se(T,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function Qt(T,_,v,C){return vt.apply(this,arguments)}function vt(){return(vt=(0,l.Z)(function*(T,_,v,C,x={}){const O=yield Ne(T,_,v,C,x);return"mfaPendingCredential"in O&&se(T,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Jt(T,_,v,C){const x=`${_}${v}?${C}`;return T.config.emulator?oo(T.config,x):`${T.config.apiScheme}://${x}`}class Ot{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,C)=>{this.timer=setTimeout(()=>C(be(this.auth,"network-request-failed")),Re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(T,_,v){const C={appName:T.name};v.email&&(C.email=v.email),v.phoneNumber&&(C.phoneNumber=v.phoneNumber);const x=be(T,_,C);return x.customData._tokenResponse=v,x}function Xn(){return(Xn=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function lr(){return(lr=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function es(){return(es=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Ri(T){if(T)try{const _=new Date(Number(T));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Co(){return(Co=(0,l.Z)(function*(T,_=!1){const v=(0,N.m9)(T),C=yield v.getIdToken(_),x=Ut(C);J(x&&x.exp&&x.auth_time&&x.iat,v.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ie=O?.sign_in_provider;return{claims:x,token:C,authTime:Ri(bt(x.auth_time)),issuedAtTime:Ri(bt(x.iat)),expirationTime:Ri(bt(x.exp)),signInProvider:ie||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function bt(T){return 1e3*Number(T)}function Ut(T){const[_,v,C]=T.split(".");if(void 0===_||void 0===v||void 0===C)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,N.tV)(v);return x?JSON.parse(x):(Ve("Failed to decode base64 JWT payload"),null)}catch(x){return Ve("Caught error parsing JWT payload as JSON",x?.toString()),null}}function _n(T,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,l.Z)(function*(T,_,v=!1){if(v)return _;try{return yield _}catch(C){throw C instanceof N.ZR&&function Is({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(C)&&T.auth.currentUser===T&&(yield T.auth.signOut()),C}})).apply(this,arguments)}class Xt{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const C=this.getInterval(_);this.timerId=setTimeout((0,l.Z)(function*(){yield v.iteration()}),C)}iteration(){var _=this;return(0,l.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&_.schedule(!0))}_.schedule()})()}}class hr{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zo(T){return gn.apply(this,arguments)}function gn(){return gn=(0,l.Z)(function*(T){var _;const v=T.auth,C=yield T.getIdToken(),x=yield _n(T,function vs(T,_){return es.apply(this,arguments)}(v,{idToken:C}));J(x?.users.length,v,"internal-error");const O=x.users[0];T._notifyReloadListener(O);const ie=null!==(_=O.providerUserInfo)&&void 0!==_&&_.length?function js(T){return T.map(_=>{var{providerId:v}=_,C=(0,L._T)(_,["providerId"]);return{providerId:v,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(O.providerUserInfo):[],ve=function fr(T,_){return[...T.filter(C=>!_.some(x=>x.providerId===C.providerId)),..._]}(T.providerData,ie),It=!!T.isAnonymous&&!(T.email&&O.passwordHash||ve?.length),tn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ve,metadata:new hr(O.createdAt,O.lastLoginAt),isAnonymous:It};Object.assign(T,tn)}),gn.apply(this,arguments)}function jt(){return(jt=(0,l.Z)(function*(T){const _=(0,N.m9)(T);yield zo(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Ao(){return(Ao=(0,l.Z)(function*(T,_){const v=yield pt(T,{},(0,l.Z)(function*(){const C=(0,N.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:x,apiKey:O}=T.config,ie=Jt(T,x,"/v1/token",`key=${O}`),ve=yield T._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",Ee.fetch()(ie,{method:"POST",headers:ve,body:C})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){J(_.idToken,"internal-error"),J(typeof _.idToken<"u","internal-error"),J(typeof _.refreshToken<"u","internal-error");const v="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Lt(T){const _=Ut(T);return J(_,"internal-error"),J(typeof _.exp<"u","internal-error"),J(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var C=this;return(0,l.Z)(function*(){return J(!C.accessToken||C.refreshToken,_,"user-token-expired"),v||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(_,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var C=this;return(0,l.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ie}=yield function $s(T,_){return Ao.apply(this,arguments)}(_,v);C.updateTokensAndExpiration(x,O,Number(ie))})()}updateTokensAndExpiration(_,v,C){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(_,v){const{refreshToken:C,accessToken:x,expirationTime:O}=v,ie=new Gr;return C&&(J("string"==typeof C,"internal-error",{appName:_}),ie.refreshToken=C),x&&(J("string"==typeof x,"internal-error",{appName:_}),ie.accessToken=x),O&&(J("number"==typeof O,"internal-error",{appName:_}),ie.expirationTime=O),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new Gr,this.toJSON())}_performRefresh(){return qe("not implemented")}}function Hr(T,_){J("string"==typeof T||typeof T>"u","internal-error",{appName:_})}class ni{constructor(_){var{uid:v,auth:C,stsTokenManager:x}=_,O=(0,L._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new hr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,l.Z)(function*(){const C=yield _n(v,v.stsTokenManager.getToken(v.auth,_));return J(C,v.auth,"internal-error"),v.accessToken!==C&&(v.accessToken=C,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),C})()}getIdTokenResult(_){return function xi(T){return Co.apply(this,arguments)}(this,_)}reload(){return function Ra(T){return jt.apply(this,arguments)}(this)}_assign(_){this!==_&&(J(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const v=new ni(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(_){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var C=this;return(0,l.Z)(function*(){let x=!1;_.idToken&&_.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(_),x=!0),v&&(yield zo(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var _=this;return(0,l.Z)(function*(){const v=yield _.getIdToken();return yield _n(_,function Jn(T,_){return Xn.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var C,x,O,ie,ve,Qe,tt,It;const tn=null!==(C=v.displayName)&&void 0!==C?C:void 0,Zr=null!==(x=v.email)&&void 0!==x?x:void 0,ho=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,uf=null!==(ie=v.photoURL)&&void 0!==ie?ie:void 0,Pv=null!==(ve=v.tenantId)&&void 0!==ve?ve:void 0,Tu=null!==(Qe=v._redirectEventId)&&void 0!==Qe?Qe:void 0,ia=null!==(tt=v.createdAt)&&void 0!==tt?tt:void 0,Cu=null!==(It=v.lastLoginAt)&&void 0!==It?It:void 0,{uid:cf,emailVerified:ed,isAnonymous:Nv,providerData:dm,stsTokenManager:kv}=v;J(cf&&kv,_,"internal-error");const kD=Gr.fromJSON(this.name,kv);J("string"==typeof cf,_,"internal-error"),Hr(tn,_.name),Hr(Zr,_.name),J("boolean"==typeof ed,_,"internal-error"),J("boolean"==typeof Nv,_,"internal-error"),Hr(ho,_.name),Hr(uf,_.name),Hr(Pv,_.name),Hr(Tu,_.name),Hr(ia,_.name),Hr(Cu,_.name);const Mv=new ni({uid:cf,auth:_,email:Zr,emailVerified:ed,displayName:tn,isAnonymous:Nv,photoURL:uf,phoneNumber:ho,tenantId:Pv,stsTokenManager:kD,createdAt:ia,lastLoginAt:Cu});return dm&&Array.isArray(dm)&&(Mv.providerData=dm.map(MD=>Object.assign({},MD))),Tu&&(Mv._redirectEventId=Tu),Mv}static _fromIdTokenResponse(_,v,C=!1){return(0,l.Z)(function*(){const x=new Gr;x.updateFromServerResponse(v);const O=new ni({uid:v.localId,auth:_,stsTokenManager:x,isAnonymous:C});return yield zo(O),O})()}}const ts=new Map;function er(T){He(T instanceof Function,"Expected a class definition");let _=ts.get(T);return _?(He(_ instanceof T,"Instance stored in cache mismatched with class"),_):(_=new T,ts.set(T,_),_)}const Es=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(v,C){var x=this;return(0,l.Z)(function*(){x.storage[v]=C})()}_get(v){var C=this;return(0,l.Z)(function*(){const x=C.storage[v];return void 0===x?null:x})()}_remove(v){var C=this;return(0,l.Z)(function*(){delete C.storage[v]})()}_addListener(v,C){}_removeListener(v,C){}}return T.type="NONE",T})();function ao(T,_,v){return`firebase:${T}:${_}:${v}`}class X{constructor(_,v,C){this.persistence=_,this.auth=v,this.userKey=C;const{config:x,name:O}=this.auth;this.fullUserKey=ao(this.userKey,x.apiKey,O),this.fullPersistenceKey=ao("persistence",x.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,l.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?ni._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,l.Z)(function*(){if(v.persistence===_)return;const C=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,C?v.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,C="authUser"){return(0,l.Z)(function*(){if(!v.length)return new X(er(Es),_,C);const x=(yield Promise.all(v.map(function(){var tt=(0,l.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let O=x[0]||er(Es);const ie=ao(C,_.config.apiKey,_.name);let ve=null;for(const tt of v)try{const It=yield tt._get(ie);if(It){const tn=ni._fromJSON(_,It);tt!==O&&(ve=tn),O=tt;break}}catch{}const Qe=x.filter(tt=>tt._shouldAllowMigration);return O._shouldAllowMigration&&Qe.length?(O=Qe[0],ve&&(yield O._set(ie,ve.toJSON())),yield Promise.all(v.map(function(){var tt=(0,l.Z)(function*(It){if(It!==O)try{yield It._remove(ie)}catch{}});return function(It){return tt.apply(this,arguments)}}())),new X(O,_,C)):new X(O,_,C)})()}}function Y(T){const _=T.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(oe(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(F(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Xe(_))return"Blackberry";if(Nt(_))return"Webos";if(B(_))return"Safari";if((_.includes("chrome/")||M(_))&&!_.includes("edge/"))return"Chrome";if(ke(_))return"Android";{const C=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function F(T=(0,N.z$)()){return/firefox\//i.test(T)}function B(T=(0,N.z$)()){const _=T.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function M(T=(0,N.z$)()){return/crios\//i.test(T)}function oe(T=(0,N.z$)()){return/iemobile/i.test(T)}function ke(T=(0,N.z$)()){return/android/i.test(T)}function Xe(T=(0,N.z$)()){return/blackberry/i.test(T)}function Nt(T=(0,N.z$)()){return/webos/i.test(T)}function dt(T=(0,N.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function fn(T=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function Ht(T=(0,N.z$)()){return dt(T)||ke(T)||Nt(T)||Xe(T)||/windows phone/i.test(T)||oe(T)}function pu(T,_=[]){let v;switch(T){case"Browser":v=Y((0,N.z$)());break;case"Worker":v=`${Y((0,N.z$)())}-${T}`;break;default:v=T}const C=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${D.SDK_VERSION}/${C}`}function de(){return(de=(0,l.Z)(function*(T){return(yield Ne(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $e(T,_){return mt.apply(this,arguments)}function mt(){return(mt=(0,l.Z)(function*(T,_){return Ne(T,"GET","/v2/recaptchaConfig",me(T,_))})).apply(this,arguments)}function ut(T){return void 0!==T&&void 0!==T.getResponse}function $t(T){return void 0!==T&&void 0!==T.enterprise}class mn{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function tr(T){return new Promise((_,v)=>{const C=document.createElement("script");C.setAttribute("src",T),C.onload=_,C.onerror=x=>{const O=be("internal-error");O.customData=x,v(O)},C.type="text/javascript",C.charset="UTF-8",function Nr(){var T,_;return null!==(_=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==_?_:document}().appendChild(C)})}function yi(T){return`__${T}${Math.floor(1e6*Math.random())}`}class Ch{constructor(_){this.type="recaptcha-enterprise",this.auth=nr(_)}verify(_="verify",v=!1){var C=this;return(0,l.Z)(function*(){function O(){return O=(0,l.Z)(function*(ve){if(!v){if(null==ve.tenantId&&null!=ve._agentRecaptchaConfig)return ve._agentRecaptchaConfig.siteKey;if(null!=ve.tenantId&&void 0!==ve._tenantRecaptchaConfigs[ve.tenantId])return ve._tenantRecaptchaConfigs[ve.tenantId].siteKey}return new Promise(function(){var Qe=(0,l.Z)(function*(tt,It){$e(ve,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const Zr=new mn(tn);return null==ve.tenantId?ve._agentRecaptchaConfig=Zr:ve._tenantRecaptchaConfigs[ve.tenantId]=Zr,tt(Zr.siteKey)}It(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{It(tn)})});return function(tt,It){return Qe.apply(this,arguments)}}())}),O.apply(this,arguments)}function ie(ve,Qe,tt){const It=window.grecaptcha;$t(It)?It.enterprise.ready(()=>{It.enterprise.execute(ve,{action:_}).then(tn=>{Qe(tn)}).catch(()=>{Qe("NO_RECAPTCHA")})}):tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ve,Qe)=>{(function x(ve){return O.apply(this,arguments)})(C.auth).then(tt=>{if(!v&&$t(window.grecaptcha))ie(tt,ve,Qe);else{if(typeof window>"u")return void Qe(new Error("RecaptchaVerifier is only supported in browser"));tr("https://www.google.com/recaptcha/enterprise.js?render="+tt).then(()=>{ie(tt,ve,Qe)}).catch(It=>{Qe(It)})}}).catch(tt=>{Qe(tt)})})})()}}function Zo(T,_,v){return wl.apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(T,_,v,C=!1){const x=new Ch(T);let O;try{O=yield x.verify(v)}catch{O=yield x.verify(v,!0)}const ie=Object.assign({},_);return Object.assign(ie,C?{captchaResp:O}:{captchaResponse:O}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}class Tl{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const C=O=>new Promise((ie,ve)=>{try{ie(_(O))}catch(Qe){ve(Qe)}});C.onAbort=v,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,l.Z)(function*(){if(v.auth.currentUser===_)return;const C=[];try{for(const x of v.queue)yield x(_),x.onAbort&&C.push(x.onAbort)}catch(x){C.reverse();for(const O of C)try{O()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Cl{constructor(_,v,C,x){this.app=_,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=C,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cw(this),this.idTokenSubscription=new cw(this),this.beforeStateQueue=new Tl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(_,v){var C=this;return v&&(this._popupRedirectResolver=er(v)),this._initializationPromise=this.queue((0,l.Z)(function*(){var x,O;if(!C._deleted&&(C.persistenceManager=yield X.create(C,_),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(v),C.lastNotifiedUid=(null===(O=C.currentUser)||void 0===O?void 0:O.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,l.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,l.Z)(function*(){var C;const x=yield v.assertedPersistence.getCurrentUser();let O=x,ie=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ve=null===(C=v.redirectUser)||void 0===C?void 0:C._redirectEventId,Qe=O?._redirectEventId,tt=yield v.tryRedirectSignIn(_);(!ve||ve===Qe)&&tt?.user&&(O=tt.user,ie=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(ie)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ve){O=x,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ve))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return J(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(_){var v=this;return(0,l.Z)(function*(){let C=null;try{C=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch{yield v._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,l.Z)(function*(){try{yield zo(_)}catch(C){if("auth/network-request-failed"!==C?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function bn(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var _=this;return(0,l.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,l.Z)(function*(){const C=_?(0,N.m9)(_):null;return C&&J(C.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(C&&C._clone(v))})()}_updateCurrentUser(_,v=!1){var C=this;return(0,l.Z)(function*(){if(!C._deleted)return _&&J(C.tenantId===_.tenantId,C,"tenant-id-mismatch"),v||(yield C.beforeStateQueue.runMiddleware(_)),C.queue((0,l.Z)(function*(){yield C.directlySetCurrentUser(_),C.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,l.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,l.Z)(function*(){yield v.assertedPersistence.setPersistence(er(_))}))}initializeRecaptchaConfig(){var _=this;return(0,l.Z)(function*(){const v=yield $e(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new mn(v);null==_.tenantId?_._agentRecaptchaConfig=C:_._tenantRecaptchaConfigs[_.tenantId]=C,C.emailPasswordEnabled&&new Ch(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new N.LL("auth","Firebase",_())}onAuthStateChanged(_,v,C){return this.registerStateListener(this.authStateSubscription,_,v,C)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,C){return this.registerStateListener(this.idTokenSubscription,_,v,C)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var C=this;return(0,l.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(v);return null===_?x.removeCurrentUser():x.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,l.Z)(function*(){if(!v.redirectPersistenceManager){const C=_&&er(_)||v._popupRedirectResolver;J(C,v,"argument-error"),v.redirectPersistenceManager=yield X.create(v,[er(C._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,l.Z)(function*(){var C,x;return v._isInitialized&&(yield v.queue((0,l.Z)(function*(){}))),(null===(C=v._currentUser)||void 0===C?void 0:C._redirectEventId)===_?v._currentUser:(null===(x=v.redirectUser)||void 0===x?void 0:x._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,l.Z)(function*(){if(_===v.currentUser)return v.queue((0,l.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,C,x){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return J(ie,this,"internal-error"),ie.then(()=>O(this.currentUser)),"function"==typeof v?_.addObserver(v,C,x):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,l.Z)(function*(){v.currentUser&&v.currentUser!==_&&v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh(),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=pu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,l.Z)(function*(){var v;const C={"X-Client-Version":_.clientVersion};_.app.options.appId&&(C["X-Firebase-gmpid"]=_.app.options.appId);const x=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();x&&(C["X-Firebase-Client"]=x);const O=yield _._getAppCheckToken();return O&&(C["X-Firebase-AppCheck"]=O),C})()}_getAppCheckToken(){var _=this;return(0,l.Z)(function*(){var v;const C=yield null===(v=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return C?.error&&function Ue(T,..._){De.logLevel<=$.in.WARN&&De.warn(`Auth (${D.SDK_VERSION}): ${T}`,..._)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function nr(T){return(0,N.m9)(T)}class cw{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,N.ne)(v=>this.observer=v)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vg(T,_,v){const C=nr(T);J(C._canInitEmulator,C,"emulator-config-failed"),J(/^https?:\/\//.test(_),C,"invalid-emulator-scheme");const x=!!v?.disableWarnings,O=ns(_),{host:ie,port:ve}=function Ig(T){const _=ns(T),v=/(\/\/)?([^?#/]+)/.exec(T.substr(_.length));if(!v)return{host:"",port:null};const C=v[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const O=x[1];return{host:O,port:Eg(C.substr(O.length+1))}}{const[O,ie]=C.split(":");return{host:O,port:Eg(ie)}}}(_);C.config.emulator={url:`${O}//${ie}${null===ve?"":`:${ve}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ie,port:ve,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function dw(){function T(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function ns(T){const _=T.indexOf(":");return _<0?"":T.substr(0,_+1)}function Eg(T){if(!T)return null;const _=Number(T);return isNaN(_)?null:_}class Al{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return qe("not implemented")}_getIdTokenResponse(_){return qe("not implemented")}_linkToIdToken(_,v){return qe("not implemented")}_getReauthenticationResolver(_){return qe("not implemented")}}function wg(T,_){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:resetPassword",me(T,_))})).apply(this,arguments)}function Hy(T,_){return qy.apply(this,arguments)}function qy(){return(qy=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ws(){return(ws=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:update",me(T,_))})).apply(this,arguments)}function bh(T,_){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithPassword",me(T,_))})).apply(this,arguments)}function Sh(T,_){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:sendOobCode",me(T,_))})).apply(this,arguments)}function Ag(){return(Ag=(0,l.Z)(function*(T,_){return Sh(T,_)})).apply(this,arguments)}function Dh(T,_){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,l.Z)(function*(T,_){return Sh(T,_)})).apply(this,arguments)}function xh(T,_){return on.apply(this,arguments)}function on(){return(on=(0,l.Z)(function*(T,_){return Sh(T,_)})).apply(this,arguments)}function ii(){return(ii=(0,l.Z)(function*(T,_){return Sh(T,_)})).apply(this,arguments)}function ki(){return(ki=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithEmailLink",me(T,_))})).apply(this,arguments)}function Ph(){return(Ph=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithEmailLink",me(T,_))})).apply(this,arguments)}class xa extends Al{constructor(_,v,C,x=null){super("password",C),this._email=_,this._password=v,this._tenantId=x}static _fromEmailAndPassword(_,v){return new xa(_,v,"password")}static _fromEmailAndCode(_,v,C=null){return new xa(_,v,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,l.Z)(function*(){var C;switch(v.signInMethod){case"password":const x={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=_._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const O=yield Zo(_,x,"signInWithPassword");return bh(_,O)}return bh(_,x).catch(function(){var O=(0,l.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ve=yield Zo(_,x,"signInWithPassword");return bh(_,ve)}return Promise.reject(ie)});return function(ie){return O.apply(this,arguments)}}());case"emailLink":return function Ju(T,_){return ki.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:se(_,"internal-error")}})()}_linkToIdToken(_,v){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return Hy(_,{idToken:v,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function zy(T,_){return Ph.apply(this,arguments)}(_,{idToken:v,email:C._email,oobCode:C._password});default:se(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Ko(T,_){return bg.apply(this,arguments)}function bg(){return(bg=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithIdp",me(T,_))})).apply(this,arguments)}class et extends Al{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new et(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):se("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:C,signInMethod:x}=v,O=(0,L._T)(v,["providerId","signInMethod"]);if(!C||!x)return null;const ie=new et(C,x);return ie.idToken=O.idToken||void 0,ie.accessToken=O.accessToken||void 0,ie.secret=O.secret,ie.nonce=O.nonce,ie.pendingToken=O.pendingToken||null,ie}_getIdTokenResponse(_){return Ko(_,this.buildRequest())}_linkToIdToken(_,v){const C=this.buildRequest();return C.idToken=v,Ko(_,C)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Ko(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,N.xO)(v)}return _}}function On(){return(On=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:sendVerificationCode",me(T,_))})).apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",me(T,_))})).apply(this,arguments)}function gu(){return(gu=(0,l.Z)(function*(T,_){const v=yield Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",me(T,_));if(v.temporaryProof)throw Sn(T,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const pr={USER_NOT_FOUND:"user-not-found"};function Pa(){return(Pa=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",me(T,Object.assign(Object.assign({},_),{operation:"REAUTH"})),pr)})).apply(this,arguments)}class Pt extends Al{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new Pt({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new Pt({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function Ts(T,_){return Yo.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function Mi(T,_){return gu.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Qo(T,_){return Pa.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:C,verificationCode:x}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:C,code:x}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:C,phoneNumber:x,temporaryProof:O}=_;return C||v||x||O?new Pt({verificationId:v,verificationCode:C,phoneNumber:x,temporaryProof:O}):null}}class Cs{constructor(_){var v,C,x,O,ie,ve;const Qe=(0,N.zd)((0,N.pd)(_)),tt=null!==(v=Qe.apiKey)&&void 0!==v?v:null,It=null!==(C=Qe.oobCode)&&void 0!==C?C:null,tn=function Sl(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Qe.mode)&&void 0!==x?x:null);J(tt&&It&&tn,"argument-error"),this.apiKey=tt,this.operation=tn,this.code=It,this.continueUrl=null!==(O=Qe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ie=Qe.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(ve=Qe.tenantId)&&void 0!==ve?ve:null}static parseLink(_){const v=function hw(T){const _=(0,N.zd)((0,N.pd)(T)).link,v=_?(0,N.zd)((0,N.pd)(_)).deep_link_id:null,C=(0,N.zd)((0,N.pd)(T)).deep_link_id;return(C?(0,N.zd)((0,N.pd)(C)).link:null)||C||v||_||T}(_);try{return new Cs(v)}catch{return null}}}let Xu=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(v,C){return xa._fromEmailAndPassword(v,C)}static credentialWithLink(v,C){const x=Cs.parseLink(C);return J(x,"argument-error"),xa._fromEmailAndCode(v,x.code,x.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class As{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Oi extends As{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Jo extends Oi{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return J("providerId"in v&&"signInMethod"in v,"argument-error"),et._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return J(_.idToken||_.accessToken,"argument-error"),et._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Jo.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Jo.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:O,nonce:ie,providerId:ve}=_;if(!C&&!x&&!v&&!O||!ve)return null;try{return new Jo(ve)._credential({idToken:v,accessToken:C,nonce:ie,pendingToken:O})}catch{return null}}}let Wy=(()=>{class T extends Oi{constructor(){super("facebook.com")}static credential(v){return et._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),mu=(()=>{class T extends Oi{constructor(){super("google.com"),this.addScope("profile")}static credential(v,C){return et._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:C})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:x}=v;if(!C&&!x)return null;try{return T.credential(C,x)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),So=(()=>{class T extends Oi{constructor(){super("github.com")}static credential(v){return et._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class Gs extends Al{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return Ko(_,this.buildRequest())}_linkToIdToken(_,v){const C=this.buildRequest();return C.idToken=v,Ko(_,C)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Ko(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:C,signInMethod:x,pendingToken:O}=v;return C&&x&&O&&C===x?new Gs(C,O):null}static _create(_,v){return new Gs(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sg extends As{constructor(_){J(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Sg.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Sg.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=Gs.fromJSON(_);return J(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:C}=_;if(!v||!C)return null;try{return Gs._create(C,v)}catch{return null}}}let Dg=(()=>{class T extends Oi{constructor(){super("twitter.com")}static credential(v,C){return et._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:C})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=v;if(!C||!x)return null;try{return T.credential(C,x)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Dl(T,_){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signUp",me(T,_))})).apply(this,arguments)}class Fi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,C,x=!1){return(0,l.Z)(function*(){const O=yield ni._fromIdTokenResponse(_,C,x),ie=ec(C);return new Fi({user:O,providerId:ie,_tokenResponse:C,operationType:v})})()}static _forOperation(_,v,C){return(0,l.Z)(function*(){yield _._updateTokensIfNecessary(C,!0);const x=ec(C);return new Fi({user:_,providerId:x,_tokenResponse:C,operationType:v})})()}}function ec(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Rl(T){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,l.Z)(function*(T){var _;const v=nr(T);if(yield v._initializationPromise,null!==(_=v.currentUser)&&void 0!==_&&_.isAnonymous)return new Fi({user:v.currentUser,providerId:null,operationType:"signIn"});const C=yield Dl(v,{returnSecureToken:!0}),x=yield Fi._fromIdTokenResponse(v,"signIn",C,!0);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}class Zy extends N.ZR{constructor(_,v,C,x){var O;super(v.code,v.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Zy.prototype),this.customData={appName:_.name,tenantId:null!==(O=_.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(_,v,C,x){return new Zy(_,v,C,x)}}function rs(T,_,v,C){return("reauthenticate"===_?v._getReauthenticationResolver(T):v._getIdTokenResponse(T)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Zy._fromErrorAndOperation(T,O,_,C):O})}function vi(T){return new Set(T.map(({providerId:_})=>_).filter(_=>!!_))}function Rg(T,_){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,l.Z)(function*(T,_){const v=(0,N.m9)(T);yield tc(!0,v,_);const{providerUserInfo:C}=yield function Dn(T,_){return lr.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),x=vi(C||[]);return v.providerData=v.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),Xo.apply(this,arguments)}function xl(T,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,l.Z)(function*(T,_,v=!1){const C=yield _n(T,_._linkToIdToken(T.auth,yield T.getIdToken()),v);return Fi._forOperation(T,"link",C)})).apply(this,arguments)}function tc(T,_,v){return xg.apply(this,arguments)}function xg(){return(xg=(0,l.Z)(function*(T,_,v){yield zo(_);const x=!1===T?"provider-already-linked":"no-such-provider";J(vi(_.providerData).has(v)===T,_.auth,x)})).apply(this,arguments)}function Ky(T,_){return fw.apply(this,arguments)}function fw(){return(fw=(0,l.Z)(function*(T,_,v=!1){const{auth:C}=T,x="reauthenticate";try{const O=yield _n(T,rs(C,x,_,T),v);J(O.idToken,C,"internal-error");const ie=Ut(O.idToken);J(ie,C,"internal-error");const{sub:ve}=ie;return J(T.uid===ve,C,"user-mismatch"),Fi._forOperation(T,x,O)}catch(O){throw"auth/user-not-found"===O?.code&&se(C,"user-mismatch"),O}})).apply(this,arguments)}function pw(T,_){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,l.Z)(function*(T,_,v=!1){const C="signIn",x=yield rs(T,C,_),O=yield Fi._fromIdTokenResponse(T,C,x);return v||(yield T._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Ng(T,_){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,l.Z)(function*(T,_){return pw(nr(T),_)})).apply(this,arguments)}function _D(T,_){return gw.apply(this,arguments)}function gw(){return(gw=(0,l.Z)(function*(T,_){const v=(0,N.m9)(T);return yield tc(!1,v,_.providerId),xl(v,_)})).apply(this,arguments)}function rr(T,_){return mw.apply(this,arguments)}function mw(){return(mw=(0,l.Z)(function*(T,_){return Ky((0,N.m9)(T),_)})).apply(this,arguments)}function _w(){return(_w=(0,l.Z)(function*(T,_){return Qt(T,"POST","/v1/accounts:signInWithCustomToken",me(T,_))})).apply(this,arguments)}function oO(T,_){return yw.apply(this,arguments)}function yw(){return yw=(0,l.Z)(function*(T,_){const v=nr(T),C=yield function sO(T,_){return _w.apply(this,arguments)}(v,{token:_,returnSecureToken:!0}),x=yield Fi._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(x.user),x}),yw.apply(this,arguments)}class kg{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?vw._fromServerResponse(_,v):"totpInfo"in v?kh._fromServerResponse(_,v):se(_,"internal-error")}}class vw extends kg{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new vw(v)}}class kh extends kg{constructor(_){super("totp",_)}static _fromServerResponse(_,v){return new kh(v)}}function nc(T,_,v){var C;J((null===(C=v.url)||void 0===C?void 0:C.length)>0,T,"invalid-continue-uri"),J(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(J(v.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(J(v.android.packageName.length>0,T,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function aO(T,_,v){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,l.Z)(function*(T,_,v){var C;const x=nr(T),O={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=x._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const ie=yield Zo(x,O,"getOobCode",!0);v&&nc(x,ie,v),yield Dh(x,ie)}else v&&nc(x,O,v),yield Dh(x,O).catch(function(){var ie=(0,l.Z)(function*(ve){if("auth/missing-recaptcha-token"!==ve.code)return Promise.reject(ve);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Qe=yield Zo(x,O,"getOobCode",!0);v&&nc(x,Qe,v),yield Dh(x,Qe)}});return function(ve){return ie.apply(this,arguments)}}())}),Iw.apply(this,arguments)}function Ew(T,_,v){return ea.apply(this,arguments)}function ea(){return(ea=(0,l.Z)(function*(T,_,v){yield wg((0,N.m9)(T),{oobCode:_,newPassword:v})})).apply(this,arguments)}function Na(T,_){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,l.Z)(function*(T,_){yield function mD(T,_){return ws.apply(this,arguments)}((0,N.m9)(T),{oobCode:_})}),Mh.apply(this,arguments)}function Pl(T,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,l.Z)(function*(T,_){const v=(0,N.m9)(T),C=yield wg(v,{oobCode:_}),x=C.requestType;switch(J(x,v,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(C.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(C.mfaInfo,v,"internal-error");default:J(C.email,v,"internal-error")}let O=null;return C.mfaInfo&&(O=kg._fromServerResponse(nr(v),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Mg(T,_){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,l.Z)(function*(T,_){const{data:v}=yield Pl((0,N.m9)(T),_);return v.email})).apply(this,arguments)}function Og(T,_,v){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,l.Z)(function*(T,_,v){var C;const x=nr(T),O={returnSecureToken:!0,email:_,password:v,clientType:"CLIENT_TYPE_WEB"};let ie;if(null!==(C=x._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const tt=yield Zo(x,O,"signUpPassword");ie=Dl(x,tt)}else ie=Dl(x,O).catch(function(){var tt=(0,l.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tn=yield Zo(x,O,"signUpPassword");return Dl(x,tn)}return Promise.reject(It)});return function(It){return tt.apply(this,arguments)}}());const ve=yield ie.catch(tt=>Promise.reject(tt)),Qe=yield Fi._fromIdTokenResponse(x,"signIn",ve);return yield x._updateCurrentUser(Qe.user),Qe}),Lg.apply(this,arguments)}function ww(T,_,v){return Ng((0,N.m9)(T),Xu.credential(_,v))}function Qy(T,_,v){return rc.apply(this,arguments)}function rc(){return rc=(0,l.Z)(function*(T,_,v){var C;const x=nr(T),O={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function ie(ve,Qe){J(Qe.handleCodeInApp,x,"argument-error"),Qe&&nc(x,ve,Qe)}if(null!==(C=x._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const ve=yield Zo(x,O,"getOobCode",!0);ie(ve,v),yield xh(x,ve)}else ie(O,v),yield xh(x,O).catch(function(){var ve=(0,l.Z)(function*(Qe){if("auth/missing-recaptcha-token"!==Qe.code)return Promise.reject(Qe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tt=yield Zo(x,O,"getOobCode",!0);ie(tt,v),yield xh(x,tt)}});return function(Qe){return ve.apply(this,arguments)}}())}),rc.apply(this,arguments)}function Tw(T,_){const v=Cs.parseLink(_);return"EMAIL_SIGNIN"===v?.operation}function Jy(T,_,v){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T),x=Xu.credentialWithLink(_,v||Ye());return J(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Ng(C,x)})).apply(this,arguments)}function Fg(){return(Fg=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:createAuthUri",me(T,_))})).apply(this,arguments)}function Aw(T,_){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,l.Z)(function*(T,_){const C={identifier:_,continueUri:At()?Ye():"http://localhost"},{signinMethods:x}=yield function Cw(T,_){return Fg.apply(this,arguments)}((0,N.m9)(T),C);return x||[]}),Nl.apply(this,arguments)}function Lh(T,_){return ka.apply(this,arguments)}function ka(){return ka=(0,l.Z)(function*(T,_){const v=(0,N.m9)(T),x={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};_&&nc(v.auth,x,_);const{email:O}=yield function bl(T,_){return Ag.apply(this,arguments)}(v.auth,x);O!==T.email&&(yield T.reload())}),ka.apply(this,arguments)}function bw(T,_,v){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:_};v&&nc(C.auth,O,v);const{email:ie}=yield function ri(T,_){return ii.apply(this,arguments)}(C.auth,O);ie!==T.email&&(yield T.reload())}),Xy.apply(this,arguments)}function Sw(){return(Sw=(0,l.Z)(function*(T,_){return Ne(T,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function vD(T,_){return ev.apply(this,arguments)}function ev(){return ev=(0,l.Z)(function*(T,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const C=(0,N.m9)(T),O={idToken:yield C.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},ie=yield _n(C,function yD(T,_){return Sw.apply(this,arguments)}(C.auth,O));C.displayName=ie.displayName||null,C.photoURL=ie.photoUrl||null;const ve=C.providerData.find(({providerId:Qe})=>"password"===Qe);ve&&(ve.displayName=C.displayName,ve.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ie)}),ev.apply(this,arguments)}function uO(T,_){return Vg((0,N.m9)(T),_,null)}function Dw(T,_){return Vg((0,N.m9)(T),null,_)}function Vg(T,_,v){return tv.apply(this,arguments)}function tv(){return(tv=(0,l.Z)(function*(T,_,v){const{auth:C}=T,O={idToken:yield T.getIdToken(),returnSecureToken:!0};_&&(O.email=_),v&&(O.password=v);const ie=yield _n(T,Hy(C,O));yield T._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Fh{constructor(_,v,C={}){this.isNewUser=_,this.providerId=v,this.profile=C}}class ID extends Fh{constructor(_,v,C,x){super(_,v,C),this.username=x}}class Vh extends Fh{constructor(_,v){super(_,"facebook.com",v)}}class Rw extends ID{constructor(_,v){super(_,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class rv extends Fh{constructor(_,v){super(_,"google.com",v)}}class Ug extends ID{constructor(_,v,C){super(_,"twitter.com",v,C)}}function kl(T){const{user:_,_tokenResponse:v}=T;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function nv(T){var _,v;if(!T)return null;const{providerId:C}=T,x=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},O=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!C&&T?.idToken){const ie=null===(v=null===(_=Ut(T.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(ie)return new Fh(O,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!C)return null;switch(C){case"facebook.com":return new Vh(O,x);case"github.com":return new Rw(O,x);case"google.com":return new rv(O,x);case"twitter.com":return new Ug(O,x,T.screenName||null);case"custom":case"anonymous":return new Fh(O,null);default:return new Fh(O,C,x)}}(v)}class ta{constructor(_,v,C){this.type=_,this.credential=v,this.auth=C}static _fromIdtoken(_,v){return new ta("enroll",_,v)}static _fromMfaPendingCredential(_){return new ta("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,C;if(_?.multiFactorSession){if(null!==(v=_.multiFactorSession)&&void 0!==v&&v.pendingCredential)return ta._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(C=_.multiFactorSession)&&void 0!==C&&C.idToken)return ta._fromIdtoken(_.multiFactorSession.idToken)}return null}}class ic{constructor(_,v,C){this.session=_,this.hints=v,this.signInResolver=C}static _fromError(_,v){const C=nr(_),x=v.customData._serverResponse,O=(x.mfaInfo||[]).map(ve=>kg._fromServerResponse(C,ve));J(x.mfaPendingCredential,C,"internal-error");const ie=ta._fromMfaPendingCredential(x.mfaPendingCredential);return new ic(ie,O,function(){var ve=(0,l.Z)(function*(Qe){const tt=yield Qe._process(C,ie);delete x.mfaInfo,delete x.mfaPendingCredential;const It=Object.assign(Object.assign({},x),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(v.operationType){case"signIn":const tn=yield Fi._fromIdTokenResponse(C,v.operationType,It);return yield C._updateCurrentUser(tn.user),tn;case"reauthenticate":return J(v.user,C,"internal-error"),Fi._forOperation(v.user,v.operationType,It);default:se(C,"internal-error")}});return function(Qe){return ve.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,l.Z)(function*(){return v.signInResolver(_)})()}}function Gg(T,_){var v;const C=(0,N.m9)(T),x=_;return J(_.customData.operationType,C,"argument-error"),J(null===(v=x.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,C,"argument-error"),ic._fromError(C,x)}class Bh{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(C=>kg._fromServerResponse(_.auth,C)))})}static _fromUser(_){return new Bh(_)}getSession(){var _=this;return(0,l.Z)(function*(){return ta._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,v){var C=this;return(0,l.Z)(function*(){const x=_,O=yield C.getSession(),ie=yield _n(C.user,x._process(C.user.auth,O,v));return yield C.user._updateTokensIfNecessary(ie),C.user.reload()})()}unenroll(_){var v=this;return(0,l.Z)(function*(){const C="string"==typeof _?_:_.uid,x=yield v.user.getIdToken();try{const O=yield _n(v.user,function sv(T,_){return Ne(T,"POST","/v2/accounts/mfaEnrollment:withdraw",me(T,_))}(v.user.auth,{idToken:x,mfaEnrollmentId:C}));v.enrolledFactors=v.enrolledFactors.filter(({uid:ie})=>ie!==C),yield v.user._updateTokensIfNecessary(O),yield v.user.reload()}catch(O){throw O}})()}}const Rn=new WeakMap;function jh(T){const _=(0,N.m9)(T);return Rn.has(_)||Rn.set(_,Bh._fromUser(_)),Rn.get(_)}const na="__sak";class Ui{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(na,"1"),this.storage.removeItem(na),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const zg=(()=>{class T extends Ui{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,C)=>this.onStorageEvent(v,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function CD(){const T=(0,N.z$)();return B(T)||dt(T)}()&&function Ni(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ht(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),O=this.localCache[C];x!==O&&v(C,O,x)}}onStorageEvent(v,C=!1){if(!v.key)return void this.forAllChangedKeys((ve,Qe,tt)=>{this.notifyListeners(ve,tt)});const x=v.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(x);if(v.newValue!==ve)null!==v.newValue?this.storage.setItem(x,v.newValue):this.storage.removeItem(x);else if(this.localCache[x]===v.newValue&&!C)return}const O=()=>{const ve=this.storage.getItem(x);!C&&this.localCache[x]===ve||this.notifyListeners(x,ve)},ie=this.storage.getItem(x);!function Pn(){return(0,N.w1)()&&10===document.documentMode}()||ie===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,C){this.localCache[v]=C;const x=this.listeners[v];if(x)for(const O of Array.from(x))O(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,C){var x=()=>super._set,O=this;return(0,l.Z)(function*(){yield x().call(O,v,C),O.localCache[v]=JSON.stringify(C)})()}_get(v){var C=()=>super._get,x=this;return(0,l.Z)(function*(){const O=yield C().call(x,v);return x.localCache[v]=JSON.stringify(O),O})()}_remove(v){var C=()=>super._remove,x=this;return(0,l.Z)(function*(){yield C().call(x,v),delete x.localCache[v]})()}}return T.type="LOCAL",T})(),$h=(()=>{class T extends Ui{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,C){}_removeListener(v,C){}}return T.type="SESSION",T})();let ov=(()=>{class T{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const C=this.receivers.find(O=>O.isListeningto(v));if(C)return C;const x=new T(v);return this.receivers.push(x),x}isListeningto(v){return this.eventTarget===v}handleEvent(v){var C=this;return(0,l.Z)(function*(){const x=v,{eventId:O,eventType:ie,data:ve}=x.data,Qe=C.handlersMap[ie];if(!Qe?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ie});const tt=Array.from(Qe).map(function(){var tn=(0,l.Z)(function*(Zr){return Zr(x.origin,ve)});return function(Zr){return tn.apply(this,arguments)}}()),It=yield function Ma(T){return Promise.all(T.map(function(){var _=(0,l.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(C){return{fulfilled:!1,reason:C}}});return function(v){return _.apply(this,arguments)}}()))}(tt);x.ports[0].postMessage({status:"done",eventId:O,eventType:ie,response:It})})()}_subscribe(v,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(C)}_unsubscribe(v,C){this.handlersMap[v]&&C&&this.handlersMap[v].delete(C),(!C||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function Ml(T="",_=10){let v="";for(let C=0;C<_;C++)v+=Math.floor(10*Math.random());return T+v}class Mw{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,C=50){var x=this;return(0,l.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ie,ve;return new Promise((Qe,tt)=>{const It=Ml("",20);O.port1.start();const tn=setTimeout(()=>{tt(new Error("unsupported_event"))},C);ve={messageChannel:O,onMessage(Zr){const ho=Zr;if(ho.data.eventId===It)switch(ho.data.status){case"ack":clearTimeout(tn),ie=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),Qe(ho.data.response);break;default:clearTimeout(tn),clearTimeout(ie),tt(new Error("invalid_response"))}}},x.handlers.add(ve),O.port1.addEventListener("message",ve.onMessage),x.target.postMessage({eventType:_,eventId:It,data:v},[O.port2])}).finally(()=>{ve&&x.removeMessageHandler(ve)})})()}}function wr(){return window}function av(){return typeof wr().WorkerGlobalScope<"u"&&"function"==typeof wr().importScripts}function Gh(){return(Gh=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cv="firebaseLocalStorageDb",oc="firebaseLocalStorage",Oa="fbase_key";class Ol{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Zg(T,_){return T.transaction([oc],_?"readwrite":"readonly").objectStore(oc)}function lv(){const T=indexedDB.open(cv,1);return new Promise((_,v)=>{T.addEventListener("error",()=>{v(T.error)}),T.addEventListener("upgradeneeded",()=>{const C=T.result;try{C.createObjectStore(oc,{keyPath:Oa})}catch(x){v(x)}}),T.addEventListener("success",(0,l.Z)(function*(){const C=T.result;C.objectStoreNames.contains(oc)?_(C):(C.close(),yield function Lw(){const T=indexedDB.deleteDatabase(cv);return new Ol(T).toPromise()}(),_(yield lv()))}))})}function dv(T,_,v){return Me.apply(this,arguments)}function Me(){return(Me=(0,l.Z)(function*(T,_,v){const C=Zg(T,!0).put({[Oa]:_,value:v});return new Ol(C).toPromise()})).apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(T,_){const v=Zg(T,!1).get(_),C=yield new Ol(v).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Kg(T,_){const v=Zg(T,!0).delete(_);return new Ol(v).toPromise()}const Ro=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,l.Z)(function*(){return v.db||(v.db=yield lv()),v.db})()}_withRetries(v){var C=this;return(0,l.Z)(function*(){let x=0;for(;;)try{const O=yield C._openDb();return yield v(O)}catch(O){if(x++>3)throw O;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,l.Z)(function*(){return av()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,l.Z)(function*(){v.receiver=ov._getInstance(function uv(){return av()?self:null}()),v.receiver._subscribe("keyChanged",function(){var C=(0,l.Z)(function*(x,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(x,O){return C.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var C=(0,l.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return C.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,l.Z)(function*(){var C,x;if(v.activeServiceWorker=yield function Mt(){return Gh.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Mw(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);O&&null!==(C=O[0])&&void 0!==C&&C.fulfilled&&null!==(x=O[0])&&void 0!==x&&x.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var C=this;return(0,l.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function bD(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:v},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const v=yield lv();return yield dv(v,na,"1"),yield Kg(v,na),!0}catch{}return!1})()}_withPendingWrite(v){var C=this;return(0,l.Z)(function*(){C.pendingWrites++;try{yield v()}finally{C.pendingWrites--}})()}_set(v,C){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(O=>dv(O,v,C)),x.localCache[v]=C,x.notifyServiceWorker(v)}))})()}_get(v){var C=this;return(0,l.Z)(function*(){const x=yield C._withRetries(O=>function un(T,_){return uo.apply(this,arguments)}(O,v));return C.localCache[v]=x,x})()}_remove(v){var C=this;return(0,l.Z)(function*(){return C._withPendingWrite((0,l.Z)(function*(){return yield C._withRetries(x=>Kg(x,v)),delete C.localCache[v],C.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,l.Z)(function*(){const C=yield v._withRetries(ie=>{const ve=Zg(ie,!1).getAll();return new Ol(ve).toPromise()});if(!C)return[];if(0!==v.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ie,value:ve}of C)O.add(ie),JSON.stringify(v.localCache[ie])!==JSON.stringify(ve)&&(v.notifyListeners(ie,ve),x.push(ie));for(const ie of Object.keys(v.localCache))v.localCache[ie]&&!O.has(ie)&&(v.notifyListeners(ie,null),x.push(ie));return x})()}notifyListeners(v,C){this.localCache[v]=C;const x=this.listeners[v];if(x)for(const O of Array.from(x))O(C)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})(),oi=1e12;class La{constructor(_){this.auth=_,this.counter=oi,this._widgets=new Map}render(_,v){const C=this.counter;return this._widgets.set(C,new Uw(_,this.auth.name,v||{})),this.counter++,C}reset(_){var v;const C=_||oi;null===(v=this._widgets.get(C))||void 0===v||v.delete(),this._widgets.delete(C)}getResponse(_){var v;return(null===(v=this._widgets.get(_||oi))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,l.Z)(function*(){var C;return null===(C=v._widgets.get(_||oi))||void 0===C||C.execute(),""})()}}class Uw{constructor(_,v,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof _?document.getElementById(_):_;J(x,"argument-error",{appName:v}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fl(T){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<T;C++)_.push(v.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qs=yi("rcb"),Bw=new Xi(3e4,6e4);class pv{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=wr().grecaptcha)||void 0===_||!_.render)}load(_,v=""){return J(function SD(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(v),_,"argument-error"),this.shouldResolveImmediately(v)&&ut(wr().grecaptcha)?Promise.resolve(wr().grecaptcha):new Promise((C,x)=>{const O=wr().setTimeout(()=>{x(be(_,"network-request-failed"))},Bw.get());wr()[qs]=()=>{wr().clearTimeout(O),delete wr()[qs];const ve=wr().grecaptcha;if(!ve||!ut(ve))return void x(be(_,"internal-error"));const Qe=ve.render;ve.render=(tt,It)=>{const tn=Qe(tt,It);return this.counter++,tn},this.hostLanguage=v,C(ve)},tr(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:qs,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),x(be(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var v;return!(null===(v=wr().grecaptcha)||void 0===v||!v.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gv{load(_){return(0,l.Z)(function*(){return new La(_)})()}clearedOneInstance(){}}const Qg="recaptcha",jw={theme:"light",type:"image"};class mv{constructor(_,v=Object.assign({},jw),C){this.parameters=v,this.type=Qg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(C),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof _?document.getElementById(_):_;J(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gv:new pv,this.validateStartingState()}verify(){var _=this;return(0,l.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),C=_.getAssertedRecaptcha();return C.getResponse(v)||new Promise(O=>{const ie=ve=>{ve&&(_.tokenChangeListeners.delete(ie),O(ve))};_.tokenChangeListeners.add(ie),_.isInvisible&&C.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(C=>C(v)),"function"==typeof _)_(v);else if("string"==typeof _){const C=wr()[_];"function"==typeof C&&C(v)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,l.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const C=document.createElement("div");v.appendChild(C),v=C}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,l.Z)(function*(){J(At()&&!av(),_.auth,"internal-error"),yield function DD(){let T=null;return new Promise(_=>{"complete"!==document.readyState?(T=()=>_(),window.addEventListener("load",T)):_()}).catch(_=>{throw T&&window.removeEventListener("load",T),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function Ce(T){return de.apply(this,arguments)}(_.auth);J(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jg{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=Pt._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function yn(T,_,v){return zr.apply(this,arguments)}function zr(){return(zr=(0,l.Z)(function*(T,_,v){const C=nr(T),x=yield Ul(C,_,(0,N.m9)(v));return new Jg(x,O=>Ng(C,O))})).apply(this,arguments)}function _v(T,_,v){return qh.apply(this,arguments)}function qh(){return(qh=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T);yield tc(!1,C,"phone");const x=yield Ul(C.auth,_,(0,N.m9)(v));return new Jg(x,O=>_D(C,O))})).apply(this,arguments)}function yv(T,_,v){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T),x=yield Ul(C.auth,_,(0,N.m9)(v));return new Jg(x,O=>rr(C,O))})).apply(this,arguments)}function Ul(T,_,v){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,l.Z)(function*(T,_,v){var C;const x=yield v.verify();try{let O;if(J("string"==typeof x,T,"argument-error"),J(v.type===Qg,T,"argument-error"),O="string"==typeof _?{phoneNumber:_}:_,"session"in O){const ie=O.session;if("phoneNumber"in O)return J("enroll"===ie.type,T,"internal-error"),(yield function kw(T,_){return Ne(T,"POST","/v2/accounts/mfaEnrollment:start",me(T,_))}(T,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{J("signin"===ie.type,T,"internal-error");const ve=(null===(C=O.multiFactorHint)||void 0===C?void 0:C.uid)||O.multiFactorUid;return J(ve,T,"missing-multi-factor-info"),(yield function hv(T,_){return Ne(T,"POST","/v2/accounts/mfaSignIn:start",me(T,_))}(T,{mfaPendingCredential:ie.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Gt(T,_){return On.apply(this,arguments)}(T,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ie}}finally{v._reset()}}),Xg.apply(this,arguments)}function Or(T,_){return bs.apply(this,arguments)}function bs(){return(bs=(0,l.Z)(function*(T,_){yield xl((0,N.m9)(T),_)})).apply(this,arguments)}let en=(()=>{class T{constructor(v){this.providerId=T.PROVIDER_ID,this.auth=nr(v)}verifyPhoneNumber(v,C){return Ul(this.auth,v,(0,N.m9)(C))}static credential(v,C){return Pt._fromVerification(v,C)}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:C,temporaryProof:x}=v;return C&&x?Pt._fromTokenResponse(C,x):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Rt(T,_){return _?er(_):(J(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class em extends Al{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Ko(_,this._buildIdpRequest())}_linkToIdToken(_,v){return Ko(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return Ko(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function vv(T){return pw(T.auth,new em(T),T.bypassAuthState)}function Iv(T){const{auth:_,user:v}=T;return J(v,_,"internal-error"),Ky(v,new em(T),T.bypassAuthState)}function tm(T){return zh.apply(this,arguments)}function zh(){return(zh=(0,l.Z)(function*(T){const{auth:_,user:v}=T;return J(v,_,"internal-error"),xl(v,new em(T),T.bypassAuthState)})).apply(this,arguments)}class ac{constructor(_,v,C,x,O=!1){this.auth=_,this.resolver=C,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,l.Z)(function*(C,x){_.pendingPromise={resolve:C,reject:x};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(O){_.reject(O)}});return function(C,x){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,l.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:O,tenantId:ie,error:ve,type:Qe}=_;if(ve)return void v.reject(ve);const tt={auth:v.auth,requestUri:C,sessionId:x,tenantId:ie||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Qe)(tt))}catch(It){v.reject(It)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return vv;case"linkViaPopup":case"linkViaRedirect":return tm;case"reauthViaPopup":case"reauthViaRedirect":return Iv;default:se(this.auth,"internal-error")}}resolve(_){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ss=new Xi(2e3,1e4);function xo(T,_,v){return uc.apply(this,arguments)}function uc(){return(uc=(0,l.Z)(function*(T,_,v){const C=nr(T);he(T,_,As);const x=Rt(C,v);return new Ss(C,"signInViaPopup",_,x).executeNotNull()})).apply(this,arguments)}function Bl(T,_,v){return cc.apply(this,arguments)}function cc(){return(cc=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T);he(C.auth,_,As);const x=Rt(C.auth,v);return new Ss(C.auth,"reauthViaPopup",_,x,C).executeNotNull()})).apply(this,arguments)}function nm(T,_,v){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T);he(C.auth,_,As);const x=Rt(C.auth,v);return new Ss(C.auth,"linkViaPopup",_,x,C).executeNotNull()})).apply(this,arguments)}let Ss=(()=>{class T extends ac{constructor(v,C,x,O,ie){super(v,C,O,ie),this.provider=x,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var v=this;return(0,l.Z)(function*(){const C=yield v.execute();return J(C,v.auth,"internal-error"),C})()}onExecution(){var v=this;return(0,l.Z)(function*(){He(1===v.filter.length,"Popup operations only handle one event");const C=Ml();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],C),v.authWindow.associatedEvent=C,v.resolver._originValidation(v.auth).catch(x=>{v.reject(x)}),v.resolver._isIframeWebStorageSupported(v.auth,x=>{x||v.reject(be(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const v=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,ss.get())};v()}}return T.currentPopupAction=null,T})();const Fa="pendingRedirect",co=new Map;class Tr extends ac{constructor(_,v,C=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,C),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,l.Z)(function*(){let C=co.get(v.auth._key());if(!C){try{const O=(yield function Va(T,_){return Ev.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;C=()=>Promise.resolve(O)}catch(x){C=()=>Promise.reject(x)}co.set(v.auth._key(),C)}return v.bypassAuthState||co.set(v.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,C=this;return(0,l.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(C,_);if("unknown"!==_.type){if(_.eventId){const x=yield C.auth._redirectUserForId(_.eventId);if(x)return C.user=x,v().call(C,_);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ev(){return(Ev=(0,l.Z)(function*(T,_){const v=Cv(_),C=Tv(T);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(v));return yield C._remove(v),x})).apply(this,arguments)}function Zh(T,_){return rm.apply(this,arguments)}function rm(){return(rm=(0,l.Z)(function*(T,_){return Tv(T)._set(Cv(_),"true")})).apply(this,arguments)}function wv(){co.clear()}function im(T,_){co.set(T._key(),_)}function Tv(T){return er(T._redirectPersistence)}function Cv(T){return ao(Fa,T.config.apiKey,T.name)}function Kh(T,_,v){return function lc(T,_,v){return Yh.apply(this,arguments)}(T,_,v)}function Yh(){return(Yh=(0,l.Z)(function*(T,_,v){const C=nr(T);he(T,_,As),yield C._initializationPromise;const x=Rt(C,v);return yield Zh(x,C),x._openRedirect(C,_,"signInViaRedirect")})).apply(this,arguments)}function Ua(T,_,v){return function Qh(T,_,v){return _u.apply(this,arguments)}(T,_,v)}function _u(){return(_u=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T);he(C.auth,_,As),yield C.auth._initializationPromise;const x=Rt(C.auth,v);yield Zh(x,C.auth);const O=yield dc(C);return x._openRedirect(C.auth,_,"reauthViaRedirect",O)})).apply(this,arguments)}function $w(T,_,v){return function sm(T,_,v){return Jh.apply(this,arguments)}(T,_,v)}function Jh(){return(Jh=(0,l.Z)(function*(T,_,v){const C=(0,N.m9)(T);he(C.auth,_,As),yield C.auth._initializationPromise;const x=Rt(C.auth,v);yield tc(!1,C,_.providerId),yield Zh(x,C.auth);const O=yield dc(C);return x._openRedirect(C.auth,_,"linkViaRedirect",O)})).apply(this,arguments)}function Av(T,_){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,l.Z)(function*(T,_){return yield nr(T)._initializationPromise,jl(T,_,!1)})).apply(this,arguments)}function jl(T,_){return yu.apply(this,arguments)}function yu(){return(yu=(0,l.Z)(function*(T,_,v=!1){const C=nr(T),x=Rt(C,_),ie=yield new Tr(C,x,v).execute();return ie&&!v&&(delete ie.user._redirectEventId,yield C._persistUserIfCurrent(ie.user),yield C._setRedirectUser(null,_)),ie})).apply(this,arguments)}function dc(T){return $l.apply(this,arguments)}function $l(){return($l=(0,l.Z)(function*(T){const _=Ml(`${T.uid}:::`);return T._redirectEventId=_,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),_})).apply(this,arguments)}class Hl{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(_,C)&&(v=!0,this.sendToConsumer(_,C),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function om(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hc(T);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var C;if(_.error&&!hc(_)){const x=(null===(C=_.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";v.onError(be(this.auth,x))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const C=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&C}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xh(_))}saveEventToCache(_){this.cachedEventUids.add(Xh(_)),this.lastProcessedEventTime=Date.now()}}function Xh(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(_=>_).join("-")}function hc({type:T,error:_}){return"unknown"===T&&"auth/no-auth-event"===_?.code}function ef(T){return ql.apply(this,arguments)}function ql(){return(ql=(0,l.Z)(function*(T,_={}){return Ne(T,"GET","/v1/projects",_)})).apply(this,arguments)}const Bi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lo=/^https?/;function bv(){return(bv=(0,l.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:_}=yield ef(T);for(const v of _)try{if(Gw(v))return}catch{}se(T,"unauthorized-domain")})).apply(this,arguments)}function Gw(T){const _=Ye(),{protocol:v,hostname:C}=new URL(_);if(T.startsWith("chrome-extension://")){const ie=new URL(T);return""===ie.hostname&&""===C?"chrome-extension:"===v&&T.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&ie.hostname===C}if(!lo.test(v))return!1;if(Bi.test(T))return C===T;const x=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const ra=new Xi(3e4,6e4);function fc(){const T=wr().___jsl;if(T?.H)for(const _ of Object.keys(T.H))if(T.H[_].r=T.H[_].r||[],T.H[_].L=T.H[_].L||[],T.H[_].r=[...T.H[_].L],T.CP)for(let v=0;v<T.CP.length;v++)T.CP[v]=null}let gr=null;const tf=new Xi(5e3,15e3),um="__/auth/iframe",RD="emulator/auth/iframe",qw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zl(T){const _=T.config;J(_.authDomain,T,"auth-domain-config-required");const v=_.emulator?oo(_,RD):`https://${T.config.authDomain}/${um}`,C={apiKey:_.apiKey,appName:T.name,v:D.SDK_VERSION},x=Sv.get(T.config.apiHost);x&&(C.eid=x);const O=T._getFrameworks();return O.length&&(C.fw=O.join(",")),`${v}?${(0,N.xO)(C).slice(1)}`}function vu(){return vu=(0,l.Z)(function*(T){const _=yield function Hw(T){return gr=gr||function am(T){return new Promise((_,v)=>{var C,x,O;function ie(){fc(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{fc(),v(be(T,"network-request-failed"))},timeout:ra.get()})}if(null!==(x=null===(C=wr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)_(gapi.iframes.getContext());else{if(null===(O=wr().gapi)||void 0===O||!O.load){const ve=yi("iframefcb");return wr()[ve]=()=>{gapi.load?ie():v(be(T,"network-request-failed"))},tr(`https://apis.google.com/js/api.js?onload=${ve}`).catch(Qe=>v(Qe))}ie()}}).catch(_=>{throw gr=null,_})}(T),gr}(T),v=wr().gapi;return J(v,T,"internal-error"),_.open({where:document.body,url:zl(T),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qw,dontclear:!0},C=>new Promise(function(){var x=(0,l.Z)(function*(O,ie){yield C.restyle({setHideOnLeave:!1});const ve=be(T,"network-request-failed"),Qe=wr().setTimeout(()=>{ie(ve)},tf.get());function tt(){wr().clearTimeout(Qe),O(C)}C.ping(tt).then(tt,()=>{ie(ve)})});return function(O,ie){return x.apply(this,arguments)}}()))}),vu.apply(this,arguments)}const zw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class PD{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zl="__/auth/handler",rf="emulator/auth/handler",Dv=encodeURIComponent("fac");function ja(T,_,v,C,x,O){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,l.Z)(function*(T,_,v,C,x,O){J(T.config.authDomain,T,"auth-domain-config-required"),J(T.config.apiKey,T,"invalid-api-key");const ie={apiKey:T.config.apiKey,appName:T.name,authType:v,redirectUrl:C,v:D.SDK_VERSION,eventId:x};if(_ instanceof As){_.setDefaultLanguage(T.languageCode),ie.providerId=_.providerId||"",(0,N.xb)(_.getCustomParameters())||(ie.customParameters=JSON.stringify(_.getCustomParameters()));for(const[It,tn]of Object.entries(O||{}))ie[It]=tn}if(_ instanceof Oi){const It=_.getScopes().filter(tn=>""!==tn);It.length>0&&(ie.scopes=It.join(","))}T.tenantId&&(ie.tid=T.tenantId);const ve=ie;for(const It of Object.keys(ve))void 0===ve[It]&&delete ve[It];const Qe=yield T._getAppCheckToken(),tt=Qe?`#${Dv}=${encodeURIComponent(Qe)}`:"";return`${function Ww({config:T}){return T.emulator?oo(T,rf):`https://${T.authDomain}/${Zl}`}(T)}?${(0,N.xO)(ve).slice(1)}${tt}`})).apply(this,arguments)}const Gn="webStorageSupport",Eu=class Rv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$h,this._completeRedirectFn=jl,this._overrideRedirectResult=im}_openPopup(_,v,C,x){var O=this;return(0,l.Z)(function*(){var ie;He(null===(ie=O.eventManagers[_._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const ve=yield ja(_,v,C,Ye(),x);return function nf(T,_,v,C=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ie=Math.max((window.screen.availWidth-C)/2,0).toString();let ve="";const Qe=Object.assign(Object.assign({},zw),{width:C.toString(),height:x.toString(),top:O,left:ie}),tt=(0,N.z$)().toLowerCase();v&&(ve=M(tt)?"_blank":v),F(tt)&&(_=_||"http://localhost",Qe.scrollbars="yes");const It=Object.entries(Qe).reduce((Zr,[ho,uf])=>`${Zr}${ho}=${uf},`,"");if(function kt(T=(0,N.z$)()){var _;return dt(T)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(tt)&&"_self"!==ve)return function lm(T,_){const v=document.createElement("a");v.href=T,v.target=_;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(C)}(_||"",ve),new PD(null);const tn=window.open(_||"",ve,It);J(tn,T,"popup-blocked");try{tn.focus()}catch{}return new PD(tn)}(_,ve,Ml())})()}_openRedirect(_,v,C,x){var O=this;return(0,l.Z)(function*(){return yield O._originValidation(_),function Wg(T){wr().location.href=T}(yield ja(_,v,C,Ye(),x)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:x,promise:O}=this.eventManagers[v];return x?Promise.resolve(x):(He(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(_);return this.eventManagers[v]={promise:C},C.catch(()=>{delete this.eventManagers[v]}),C}initAndGetManager(_){var v=this;return(0,l.Z)(function*(){const C=yield function Wl(T){return vu.apply(this,arguments)}(_),x=new Hl(_);return C.register("authEvent",O=>(J(O?.authEvent,_,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:x},v.iframes[_._key()]=C,x})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(Gn,{type:Gn},x=>{var O;const ie=null===(O=x?.[0])||void 0===O?void 0:O[Gn];void 0!==ie&&v(!!ie),se(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ba(T){return bv.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return Ht()||B()||dt()}};class sf{constructor(_){this.factorId=_}_process(_,v,C){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,C);case"signin":return this._finalizeSignIn(_,v.credential);default:return qe("unexpected MultiFactorSessionType")}}}class Wr extends sf{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Wr(_)}_finalizeEnroll(_,v,C){return function Hg(T,_){return Ne(T,"POST","/v2/accounts/mfaEnrollment:finalize",me(T,_))}(_,{idToken:v,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function fv(T,_){return Ne(T,"POST","/v2/accounts/mfaSignIn:finalize",me(T,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yl=(()=>{class T{constructor(){}static assertion(v){return Wr._fromCredential(v)}}return T.FACTOR_ID="phone",T})();var Jl="@firebase/auth";class af{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,l.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(C=>{_(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);v&&(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xv=(0,N.Pz)("authIdTokenMaxAge")||300;let mc=null;const Zw=T=>function(){var _=(0,l.Z)(function*(v){const C=v&&(yield v.getIdTokenResult()),x=C&&((new Date).getTime()-Date.parse(C.issuedAtTime))/1e3;if(x&&x>xv)return;const O=C?.token;mc!==O&&(mc=O,yield fetch(T,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(v){return _.apply(this,arguments)}}();function Kw(T=(0,D.getApp)()){const _=(0,D._getProvider)(T,"auth");if(_.isInitialized())return _.getImmediate();const v=function Ah(T,_){const v=(0,D._getProvider)(T,"auth");if(v.isInitialized()){const x=v.getImmediate(),O=v.getOptions();if((0,N.vZ)(O,_??{}))return x;se(x,"already-initialized")}return v.initialize({options:_})}(T,{popupRedirectResolver:Eu,persistence:[Ro,zg,$h]}),C=(0,N.Pz)("authTokenSyncURL");if(C){const O=Zw(C);(function iv(T,_,v){(0,N.m9)(T).beforeAuthStateChanged(_,v)})(v,O,()=>O(v.currentUser)),function xw(T,_,v,C){(0,N.m9)(T).onIdTokenChanged(_,v,C)}(v,ie=>O(ie))}const x=(0,N.q4)("auth");return x&&vg(v,`http://${x}`),v}!function pc(T){(0,D._registerComponent)(new W.wA("auth",(_,{options:v})=>{const C=_.getProvider("app").getImmediate(),x=_.getProvider("heartbeat"),O=_.getProvider("app-check-internal"),{apiKey:ie,authDomain:ve}=C.options;J(ie&&!ie.includes(":"),"invalid-api-key",{appName:C.name});const Qe={apiKey:ie,authDomain:ve,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pu(T)},tt=new Cl(C,x,O,Qe);return function lw(T,_){const v=_?.persistence||[],C=(Array.isArray(v)?v:[v]).map(er);_?.errorMap&&T._updateErrorMap(_.errorMap),T._initializeWithPersistence(C,_?.popupRedirectResolver)}(tt,v),tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,C)=>{_.getProvider("auth-internal").initialize()})),(0,D._registerComponent)(new W.wA("auth-internal",_=>{const v=nr(_.getProvider("auth").getImmediate());return new af(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,D.registerVersion)(Jl,"0.23.2",function Ii(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,D.registerVersion)(Jl,"0.23.2","esm2017")}("Browser")},9058:(ze,K,P)=>{"use strict";P.d(K,{$s:()=>er,BH:()=>re,DV:()=>lr,G6:()=>oo,GJ:()=>Xn,L:()=>ce,LL:()=>Ze,P0:()=>Ve,Pz:()=>be,Sg:()=>he,UG:()=>qe,UI:()=>es,US:()=>W,Wl:()=>vt,Yr:()=>Xi,ZB:()=>Q,ZR:()=>Ne,aH:()=>se,b$:()=>At,cI:()=>Qt,dS:()=>js,eu:()=>we,g5:()=>D,gK:()=>gn,gQ:()=>Lt,h$:()=>ne,hl:()=>Ee,hu:()=>N,jU:()=>He,m9:()=>ao,ne:()=>_n,p$:()=>G,pd:()=>Ut,q4:()=>Ue,r3:()=>Dn,ru:()=>Ye,tV:()=>U,uI:()=>J,ug:()=>$s,vZ:()=>Ri,w1:()=>$r,w9:()=>Jn,xO:()=>Co,xb:()=>vs,z$:()=>Ae,zI:()=>Re,zd:()=>bt});const l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},N=function(X,Y){if(!X)throw D(Y)},D=function(X){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+X)},L=function(X){const Y=[];let F=0;for(let B=0;B<X.length;B++){let M=X.charCodeAt(B);M<128?Y[F++]=M:M<2048?(Y[F++]=M>>6|192,Y[F++]=63&M|128):55296==(64512&M)&&B+1<X.length&&56320==(64512&X.charCodeAt(B+1))?(M=65536+((1023&M)<<10)+(1023&X.charCodeAt(++B)),Y[F++]=M>>18|240,Y[F++]=M>>12&63|128,Y[F++]=M>>6&63|128,Y[F++]=63&M|128):(Y[F++]=M>>12|224,Y[F++]=M>>6&63|128,Y[F++]=63&M|128)}return Y},W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,Y){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let M=0;M<X.length;M+=3){const oe=X[M],ke=M+1<X.length,Xe=ke?X[M+1]:0,Nt=M+2<X.length,dt=Nt?X[M+2]:0;let Pn=(15&Xe)<<2|dt>>6,Ht=63&dt;Nt||(Ht=64,ke||(Pn=64)),B.push(F[oe>>2],F[(3&oe)<<4|Xe>>4],F[Pn],F[Ht])}return B.join("")},encodeString(X,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(X):this.encodeByteArray(L(X),Y)},decodeString(X,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(X):function(X){const Y=[];let F=0,B=0;for(;F<X.length;){const M=X[F++];if(M<128)Y[B++]=String.fromCharCode(M);else if(M>191&&M<224){const oe=X[F++];Y[B++]=String.fromCharCode((31&M)<<6|63&oe)}else if(M>239&&M<365){const Nt=((7&M)<<18|(63&X[F++])<<12|(63&X[F++])<<6|63&X[F++])-65536;Y[B++]=String.fromCharCode(55296+(Nt>>10)),Y[B++]=String.fromCharCode(56320+(1023&Nt))}else{const oe=X[F++],ke=X[F++];Y[B++]=String.fromCharCode((15&M)<<12|(63&oe)<<6|63&ke)}}return Y.join("")}(this.decodeStringToByteArray(X,Y))},decodeStringToByteArray(X,Y){this.init_();const F=Y?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let M=0;M<X.length;){const oe=F[X.charAt(M++)],Xe=M<X.length?F[X.charAt(M)]:0;++M;const dt=M<X.length?F[X.charAt(M)]:64;++M;const kt=M<X.length?F[X.charAt(M)]:64;if(++M,null==oe||null==Xe||null==dt||null==kt)throw new ee;B.push(oe<<2|Xe>>4),64!==dt&&(B.push(Xe<<4&240|dt>>2),64!==kt&&B.push(dt<<6&192|kt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}};class ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ne=function(X){const Y=L(X);return W.encodeByteArray(Y,!0)},ce=function(X){return ne(X).replace(/\./g,"")},U=function(X){try{return W.decodeString(X,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function G(X){return Q(void 0,X)}function Q(X,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return Y}for(const F in Y)!Y.hasOwnProperty(F)||!ae(F)||(X[F]=Q(X[F],Y[F]));return X}function ae(X){return"__proto__"!==X}const De=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const X=process.env.__FIREBASE_DEFAULTS__;return X?JSON.parse(X):void 0})()||(()=>{if(typeof document>"u")return;let X;try{X=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=X&&U(X[1]);return Y&&JSON.parse(Y)})()}catch(X){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${X}`)}},Ue=X=>{var Y,F;return null===(F=null===(Y=De())||void 0===Y?void 0:Y.emulatorHosts)||void 0===F?void 0:F[X]},Ve=X=>{const Y=Ue(X);if(!Y)return;const F=Y.lastIndexOf(":");if(F<=0||F+1===Y.length)throw new Error(`Invalid host ${Y} with no separate hostname and port!`);const B=parseInt(Y.substring(F+1),10);return"["===Y[0]?[Y.substring(1,F-1),B]:[Y.substring(0,F),B]},se=()=>{var X;return null===(X=De())||void 0===X?void 0:X.config},be=X=>{var Y;return null===(Y=De())||void 0===Y?void 0:Y[`_${X}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,F)=>{this.resolve=Y,this.reject=F})}wrapCallback(Y){return(F,B)=>{F?this.reject(F):this.resolve(B),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(F):Y(F,B))}}}function he(X,Y){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=Y||"demo-project",M=X.iat||0,oe=X.sub||X.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:M,exp:M+3600,auth_time:M,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},X);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ke)),""].join(".")}function Ae(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function qe(){var X;const Y=null===(X=De())||void 0===X?void 0:X.forceEnvironment;if("node"===Y)return!0;if("browser"===Y)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return"object"==typeof self&&self.self===self}function Ye(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function At(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $r(){const X=Ae();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Xi(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN}function oo(){return!qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ee(){try{return"object"==typeof indexedDB}catch{return!1}}function we(){return new Promise((X,Y)=>{try{let F=!0;const B="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(B);M.onsuccess=()=>{M.result.close(),F||self.indexedDB.deleteDatabase(B),X(!0)},M.onupgradeneeded=()=>{F=!1},M.onerror=()=>{var oe;Y((null===(oe=M.error)||void 0===oe?void 0:oe.message)||"")}}catch(F){Y(F)}})}function Re(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(Y,F,B){super(F),this.code=Y,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(Y,F,B){this.service=Y,this.serviceName=F,this.errors=B}create(Y,...F){const B=F[0]||{},M=`${this.service}/${Y}`,oe=this.errors[Y],ke=oe?function pt(X,Y){return X.replace(Je,(F,B)=>{const M=Y[B];return null!=M?String(M):`<${B}?>`})}(oe,B):"Error";return new Ne(M,`${this.serviceName}: ${ke} (${M}).`,B)}}const Je=/\{\$([^}]+)}/g;function Qt(X){return JSON.parse(X)}function vt(X){return JSON.stringify(X)}const Jt=function(X){let Y={},F={},B={},M="";try{const oe=X.split(".");Y=Qt(U(oe[0])||""),F=Qt(U(oe[1])||""),M=oe[2],B=F.d||{},delete F.d}catch{}return{header:Y,claims:F,data:B,signature:M}},Jn=function(X){const F=Jt(X).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},Xn=function(X){const Y=Jt(X).claims;return"object"==typeof Y&&!0===Y.admin};function Dn(X,Y){return Object.prototype.hasOwnProperty.call(X,Y)}function lr(X,Y){if(Object.prototype.hasOwnProperty.call(X,Y))return X[Y]}function vs(X){for(const Y in X)if(Object.prototype.hasOwnProperty.call(X,Y))return!1;return!0}function es(X,Y,F){const B={};for(const M in X)Object.prototype.hasOwnProperty.call(X,M)&&(B[M]=Y.call(F,X[M],M,X));return B}function Ri(X,Y){if(X===Y)return!0;const F=Object.keys(X),B=Object.keys(Y);for(const M of F){if(!B.includes(M))return!1;const oe=X[M],ke=Y[M];if(dr(oe)&&dr(ke)){if(!Ri(oe,ke))return!1}else if(oe!==ke)return!1}for(const M of B)if(!F.includes(M))return!1;return!0}function dr(X){return null!==X&&"object"==typeof X}function Co(X){const Y=[];for(const[F,B]of Object.entries(X))Array.isArray(B)?B.forEach(M=>{Y.push(encodeURIComponent(F)+"="+encodeURIComponent(M))}):Y.push(encodeURIComponent(F)+"="+encodeURIComponent(B));return Y.length?"&"+Y.join("&"):""}function bt(X){const Y={};return X.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[M,oe]=B.split("=");Y[decodeURIComponent(M)]=decodeURIComponent(oe)}}),Y}function Ut(X){const Y=X.indexOf("?");if(!Y)return"";const F=X.indexOf("#",Y);return X.substring(Y,F>0?F:void 0)}class Lt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,F){F||(F=0);const B=this.W_;if("string"==typeof Y)for(let kt=0;kt<16;kt++)B[kt]=Y.charCodeAt(F)<<24|Y.charCodeAt(F+1)<<16|Y.charCodeAt(F+2)<<8|Y.charCodeAt(F+3),F+=4;else for(let kt=0;kt<16;kt++)B[kt]=Y[F]<<24|Y[F+1]<<16|Y[F+2]<<8|Y[F+3],F+=4;for(let kt=16;kt<80;kt++){const Pn=B[kt-3]^B[kt-8]^B[kt-14]^B[kt-16];B[kt]=4294967295&(Pn<<1|Pn>>>31)}let dt,fn,M=this.chain_[0],oe=this.chain_[1],ke=this.chain_[2],Xe=this.chain_[3],Nt=this.chain_[4];for(let kt=0;kt<80;kt++){kt<40?kt<20?(dt=Xe^oe&(ke^Xe),fn=1518500249):(dt=oe^ke^Xe,fn=1859775393):kt<60?(dt=oe&ke|Xe&(oe|ke),fn=2400959708):(dt=oe^ke^Xe,fn=3395469782);const Pn=(M<<5|M>>>27)+dt+Nt+fn+B[kt]&4294967295;Nt=Xe,Xe=ke,ke=4294967295&(oe<<30|oe>>>2),oe=M,M=Pn}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+oe&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+Nt&4294967295}update(Y,F){if(null==Y)return;void 0===F&&(F=Y.length);const B=F-this.blockSize;let M=0;const oe=this.buf_;let ke=this.inbuf_;for(;M<F;){if(0===ke)for(;M<=B;)this.compress_(Y,M),M+=this.blockSize;if("string"==typeof Y){for(;M<F;)if(oe[ke]=Y.charCodeAt(M),++ke,++M,ke===this.blockSize){this.compress_(oe),ke=0;break}}else for(;M<F;)if(oe[ke]=Y[M],++ke,++M,ke===this.blockSize){this.compress_(oe),ke=0;break}}this.inbuf_=ke,this.total_+=F}digest(){const Y=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&F,F/=256;this.compress_(this.buf_);let B=0;for(let M=0;M<5;M++)for(let oe=24;oe>=0;oe-=8)Y[B]=this.chain_[M]>>oe&255,++B;return Y}}function _n(X,Y){const F=new Pi(X,Y);return F.subscribe.bind(F)}class Pi{constructor(Y,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{Y(this)}).catch(B=>{this.error(B)})}next(Y){this.forEachObserver(F=>{F.next(Y)})}error(Y){this.forEachObserver(F=>{F.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,F,B){let M;if(void 0===Y&&void 0===F&&void 0===B)throw new Error("Missing Observer.");M=function Xt(X,Y){if("object"!=typeof X||null===X)return!1;for(const F of Y)if(F in X&&"function"==typeof X[F])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:F,complete:B},void 0===M.next&&(M.next=hr),void 0===M.error&&(M.error=hr),void 0===M.complete&&(M.complete=hr);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),oe}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,Y)}sendOne(Y,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{F(this.observers[Y])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}function gn(X,Y){return`${X} failed: ${Y} argument `}const js=function(X){const Y=[];let F=0;for(let B=0;B<X.length;B++){let M=X.charCodeAt(B);if(M>=55296&&M<=56319){const oe=M-55296;B++,N(B<X.length,"Surrogate pair missing trail surrogate."),M=65536+(oe<<10)+(X.charCodeAt(B)-56320)}M<128?Y[F++]=M:M<2048?(Y[F++]=M>>6|192,Y[F++]=63&M|128):M<65536?(Y[F++]=M>>12|224,Y[F++]=M>>6&63|128,Y[F++]=63&M|128):(Y[F++]=M>>18|240,Y[F++]=M>>12&63|128,Y[F++]=M>>6&63|128,Y[F++]=63&M|128)}return Y},$s=function(X){let Y=0;for(let F=0;F<X.length;F++){const B=X.charCodeAt(F);B<128?Y++:B<2048?Y+=2:B>=55296&&B<=56319?(Y+=4,F++):Y+=3}return Y},Gr=1e3,Hr=2,ni=144e5,ts=.5;function er(X,Y=Gr,F=Hr){const B=Y*Math.pow(F,X),M=Math.round(ts*B*(Math.random()-.5)*2);return Math.min(ni,B+M)}function ao(X){return X&&X._delegate?X._delegate:X}},2274:(ze,K,P)=>{"use strict";var l=P(5879);let N=null;function D(){return N}class ${}const W=new l.OlP("DocumentToken");let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(ce)},providedIn:"platform"})}return n})();const ne=new l.OlP("Location Initialized");let ce=(()=>{class n extends ee{constructor(){super(),this._doc=(0,l.f3M)(W),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return D().getBaseHref(this._doc)}onPopState(t){const r=D().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=D().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Q(n){return n&&"?"!==n[0]?"?"+n:n}let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Be)},providedIn:"root"})}return n})();const ge=new l.OlP("appBaseHref");let Be=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(W).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Q(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Q(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Q(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(ee),l.LFG(ge,8))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xe=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Q(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Q(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(ee),l.LFG(ge,8))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})(),_e=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function se(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(Ve(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Q(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Q;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(l.LFG(ae))};static#i=this.\u0275prov=l.Yz7({token:n,factory:function(){return function De(){return new _e((0,l.LFG)(ae))}()},providedIn:"root"})}return n})();function Ve(n){return n.replace(/\/index.html$/,"")}function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Tl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Tl(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,o),nr(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{nr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function nr(n,e){n.context.$implicit=e.item}let Ah=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vg("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vg("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.s_b),l.Y36(l.Rgc))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class lw{constructor(){this.$implicit=null,this.ngIf=null}}function vg(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class bh{createSubscription(e,t){return(0,l.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,l.rg0)(()=>e.unsubscribe())}}class Tg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Sh=new Tg,Cg=new bh;let bl=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,l.QGY)(t))return Sh;if((0,l.F4k)(t))return Cg;throw function ws(n,e){return new l.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.sBO,16))};static#t=this.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),pr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();function Cs(n){return"server"===n}let Oi=(()=>{class n{static#e=this.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Jo((0,l.LFG)(W),window)})}return n})();class Jo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Wy(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class So{}class rv extends ${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ug extends rv{static makeCurrent(){!function L(n){N||(N=n)}(new Ug)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ED(){return kl=kl||document.querySelector("base"),kl?kl.getAttribute("href"):null}();return null==t?null:function xw(n){Bg=Bg||document.createElement("a"),Bg.setAttribute("href",n);const e=Bg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bo(document.cookie,e)}}let Bg,kl=null,wD=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const Pw=new l.OlP("EventManagerPlugins");let Nw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new l.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(Pw),l.LFG(l.R0b))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class jg{constructor(e){this._doc=e}}const $g="ng-app-id";let Uh=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cs(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${$g}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute($g),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute($g,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W),l.LFG(l.AFp),l.LFG(l.Ojb,8),l.LFG(l.Lbi))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ic=/%COMP%/g,Do=new l.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Rn(n,e){return e.map(t=>t.replace(ic,n))}let jh=(()=>{class n{constructor(t,r,i,s,o,d,f,g=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=d,this.ngZone=f,this.nonce=g,this.rendererByCompId=new Map,this.platformIsServer=Cs(d),this.defaultRenderer=new na(t,o,f,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===l.ifc.ShadowDom&&(r={...r,encapsulation:l.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof zg?i.applyToHost(t):i instanceof is&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,d=this.ngZone,f=this.eventManager,g=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,E=this.platformIsServer;switch(r.encapsulation){case l.ifc.Emulated:s=new zg(f,g,r,this.appId,y,o,d,E);break;case l.ifc.ShadowDom:return new sc(f,g,t,r,o,d,this.nonce,E);default:s=new is(f,g,r,y,o,d,E)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(Nw),l.LFG(Uh),l.LFG(l.AFp),l.LFG(Do),l.LFG(W),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(l.Ojb))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class na{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ta[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new l.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ta[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ta[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=D().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function qg(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sc extends na{constructor(e,t,r,i,s,o,d,f){super(e,s,o,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=Rn(i.id,i.styles);for(const y of g){const E=document.createElement("style");d&&E.setAttribute("nonce",d),E.textContent=y,this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class is extends na{constructor(e,t,r,i,s,o,d,f){super(e,s,o,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=f?Rn(f,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class zg extends is{constructor(e,t,r,i,s,o,d,f){const g=i+"-"+r.id;super(e,t,r,s,o,d,f,g),this.contentAttr=function sv(n){return"_ngcontent-%COMP%".replace(ic,n)}(g),this.hostAttr=function Bh(n){return"_nghost-%COMP%".replace(ic,n)}(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let AD=(()=>{class n extends jg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const $h=["alt","control","meta","shift"],Ma={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ov={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ml=(()=>{class n extends jg{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>D().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),o="code."),$h.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),o+=g+".")}),o+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=o,f}static matchEventFullKeyCode(t,r){let i=Ma[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),$h.forEach(o=>{o!==i&&(0,ov[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const cv=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Mt(){Ug.makeCurrent()},multi:!0},{provide:W,useFactory:function bD(){return(0,l.RDi)(document),document},deps:[]}]),Ow=new l.OlP(""),oc=[{provide:l.rWj,useClass:class iv{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new l.vHH(5103,!1);return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const d=function(f){o=o||f,s--,0==s&&r(o)};i.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?D().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Oa=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Gh(){return new l.qLn},deps:[]},{provide:Pw,useClass:AD,multi:!0,deps:[W,l.R0b,l.Lbi]},{provide:Pw,useClass:Ml,multi:!0,deps:[W]},jh,Uh,Nw,{provide:l.FYo,useExisting:jh},{provide:So,useClass:wD,deps:[]},[]];let Ol=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(Ow,12))};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({providers:[...Oa,...oc],imports:[pr,l.hGG]})}return n})(),Me=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W))};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function dv(){return new Me((0,l.LFG)(W))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let qs=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(r){let i=null;return i=r?new(r||n):l.LFG(Yg),i},providedIn:"root"})}return n})(),Yg=(()=>{class n extends qs{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case l.q3G.NONE:return r;case l.q3G.HTML:return(0,l.qzn)(r,"HTML")?(0,l.z3N)(r):(0,l.EiD)(this._doc,String(r)).toString();case l.q3G.STYLE:return(0,l.qzn)(r,"Style")?(0,l.z3N)(r):r;case l.q3G.SCRIPT:if((0,l.qzn)(r,"Script"))return(0,l.z3N)(r);throw new l.vHH(5200,!1);case l.q3G.URL:return(0,l.qzn)(r,"URL")?(0,l.z3N)(r):(0,l.mCW)(String(r));case l.q3G.RESOURCE_URL:if((0,l.qzn)(r,"ResourceURL"))return(0,l.z3N)(r);throw new l.vHH(5201,!1);default:throw new l.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W))};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Bw(n){return new Yg(n.get(W))}(l.LFG(l.zs3)),i},providedIn:"root"})}return n})();var yn=P(2459),zr=P(5592);const{isArray:_v}=Array,{getPrototypeOf:qh,prototype:yv,keys:Vl}=Object;function Ul(n){if(1===n.length){const e=n[0];if(_v(e))return{args:e,keys:null};if(function Xg(n){return n&&"object"==typeof n&&qh(n)===yv}(e)){const t=Vl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Or=P(4829),bs=P(4564),en=P(8251),Rt=P(7398);const{isArray:em}=Array;function Iv(n){return(0,Rt.U)(e=>function vv(n,e){return em(e)?n(...e):n(e)}(n,e))}function tm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let ac=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.Qsj),l.Y36(l.SBq))};static#t=this.\u0275dir=l.lG2({type:n})}return n})(),ss=(()=>{class n extends ac{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}();static#t=this.\u0275dir=l.lG2({type:n,features:[l.qOj]})}return n})();const xo=new l.OlP("NgValueAccessor"),cc={provide:xo,useExisting:(0,l.Gpc)(()=>Ss),multi:!0},Wh=new l.OlP("CompositionEventMode");let Ss=(()=>{class n extends ac{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nm(){const n=D()?D().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Wh,8))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&l.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[l._Bn([cc]),l.qOj]})}return n})();const Tr=new l.OlP("NgValidators"),Va=new l.OlP("NgAsyncValidators");function Qh(n){return null!=n}function _u(n){return(0,l.QGY)(n)?(0,yn.D)(n):n}function $w(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sm(n,e){return e.map(t=>t(n))}function Av(n){return n.map(e=>function Jh(n){return!n.validate}(e)?e:t=>e.validate(t))}function jl(n){return null!=n?function Ds(n){if(!n)return null;const e=n.filter(Qh);return 0==e.length?null:function(t){return $w(sm(t,e))}}(Av(n)):null}function dc(n){return null!=n?function yu(n){if(!n)return null;const e=n.filter(Qh);return 0==e.length?null:function(t){return function zh(...n){const e=(0,bs.jO)(n),{args:t,keys:r}=Ul(n),i=new zr.y(s=>{const{length:o}=t;if(!o)return void s.complete();const d=new Array(o);let f=o,g=o;for(let y=0;y<o;y++){let E=!1;(0,Or.Xf)(t[y]).subscribe((0,en.x)(s,b=>{E||(E=!0,g--),d[y]=b},()=>f--,void 0,()=>{(!f||!E)&&(g||s.next(r?tm(r,d):d),s.complete())}))}});return e?i.pipe(Iv(e)):i}(sm(t,e).map(_u)).pipe((0,Rt.U)($w))}}(Av(n)):null}function $l(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xh(n){return n?Array.isArray(n)?n:[n]:[]}function hc(n,e){return Array.isArray(n)?n.includes(e):n===e}function om(n,e){const t=Xh(e);return Xh(n).forEach(i=>{hc(t,i)||t.push(i)}),t}function ef(n,e){return Xh(e).filter(t=>!hc(n,t))}class ql{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Bi extends ql{get formDirective(){return null}get path(){return null}}class lo extends ql{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ba{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ra=(()=>{class n extends Ba{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(lo,2))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]})}return n})();const nf="VALID",lm="INVALID",Zl="PENDING",rf="DISABLED";function Dv(n){return(Gn(n)?n.validators:n)||null}function Kl(n,e){return(Gn(e)?e.asyncValidators:n)||null}function Gn(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Rv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")}function Eu(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new l.vHH(1002,"")})}class sf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nf}get invalid(){return this.status===lm}get pending(){return this.status==Zl}get disabled(){return this.status===rf}get enabled(){return this.status!==rf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(om(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(om(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ef(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ef(e,this._rawAsyncValidators))}hasValidator(e){return hc(this._rawValidators,e)}hasAsyncValidator(e){return hc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nf||this.status===Zl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rf:nf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zl,this._hasOwnPendingAsyncValidator=!0;const t=_u(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?rf:this.errors?lm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zl)?Zl:this._anyControlsHaveStatus(lm)?lm:nf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gn(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ja(n){return Array.isArray(n)?jl(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ww(n){return Array.isArray(n)?dc(n):n||null}(this._rawAsyncValidators)}}class Wr extends sf{constructor(e,t,r){super(Dv(t),Kl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Eu(this,0,e),Object.keys(e).forEach(r=>{Rv(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class wu extends Wr{}const Po=new l.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Jl}),Jl="always";function af(n,e,t=Jl){(function xv(n,e){const t=function Gl(n){return n._rawValidators}(n);null!==e.validator?n.setValidators($l(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Hl(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators($l(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();pc(e._rawValidators,i),pc(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Zw(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&T(n,e)})}(n,e),function _(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Kw(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&T(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function T(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Cu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function cf(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ed=class extends sf{constructor(e=null,t,r){super(Dv(t),Kl(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gn(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cf(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){cf(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},FD={provide:lo,useExisting:(0,l.Gpc)(()=>$a)},dO=(()=>Promise.resolve())();let $a=(()=>{class n extends lo{constructor(t,r,i,s,o,d){super(),this._changeDetectorRef=o,this.callSetDisabledState=d,this.control=new ed,this._registered=!1,this.name="",this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Zr(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Ss?t=s:function It(n){return Object.getPrototypeOf(n.constructor)===ss}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){af(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,l.VuI)(r);dO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Xl(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(Bi,9),l.Y36(Tr,10),l.Y36(Va,10),l.Y36(xo,10),l.Y36(l.sBO,8),l.Y36(Po,8))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([FD]),l.qOj,l.TTD]})}return n})(),fO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();const UD=new l.OlP("NgModelWithFormControlWarning");let r1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[fO]})}return n})();class i1 extends sf{constructor(e,t,r){super(Dv(t),Kl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Eu(this,0,e),e.forEach((r,i)=>{Rv(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function sT(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let df=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return sT(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Wr(i,s)}record(t,r=null){const i=this._reduceControls(t);return new wu(i,r)}control(t,r,i){let s={};return this.useNonNullable?(sT(r)?s=r:(s.validators=r,s.asyncValidators=i),new ed(t,{...s,nonNullable:!0})):new ed(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new i1(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ed||t instanceof sf?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$v=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Po,useValue:t.callSetDisabledState??Jl}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[r1]})}return n})(),TO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Po,useValue:t.callSetDisabledState??Jl}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[r1]})}return n})();var hf=P(4674),wt=P(2096),sa=P(5619),gm=P(2737),o1=P(7103);function ff(...n){const e=(0,bs.yG)(n),t=(0,bs.jO)(n),{args:r,keys:i}=Ul(n);if(0===r.length)return(0,yn.D)([],e);const s=new zr.y(function aT(n,e,t=gm.y){return r=>{Gv(e,()=>{const{length:i}=n,s=new Array(i);let o=i,d=i;for(let f=0;f<i;f++)Gv(e,()=>{const g=(0,yn.D)(n[f],e);let y=!1;g.subscribe((0,en.x)(r,E=>{s[f]=E,y||(y=!0,d--),d||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>tm(i,o):gm.y));return t?s.pipe(Iv(t)):s}function Gv(n,e,t){n?(0,o1.f)(t,n,e):e()}const Hv=(0,P(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var td=P(7537);function Au(...n){return function a1(){return(0,td.J)(1)}()((0,yn.D)(n,(0,bs.yG)(n)))}function uT(n){return new zr.y(e=>{(0,Or.Xf)(n()).subscribe(e)})}var u1=P(8407);function mm(n,e){const t=(0,hf.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}var nd=P(6232),rd=P(7394),os=P(9360);function qv(){return(0,os.e)((n,e)=>{let t=null;n._refCount++;const r=(0,en.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cT extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,os.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,en.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rd.w0.EMPTY)}return e}refCount(){return qv()(this)}}var oa=P(8645),ir=P(4664);function id(n){return n<=0?()=>nd.E:(0,os.e)((e,t)=>{let r=0;e.subscribe((0,en.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yc(...n){const e=(0,bs.yG)(n);return(0,os.e)((t,r)=>{(e?Au(n,t,e):Au(n,t)).subscribe(r)})}function Ei(n,e){return(0,os.e)((t,r)=>{let i=0;t.subscribe((0,en.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var $i=P(1631);function pf(n){return(0,os.e)((e,t)=>{let r=!1;e.subscribe((0,en.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _m(n=c1){return(0,os.e)((e,t)=>{let r=!1;e.subscribe((0,en.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function c1(){return new Hv}function Ga(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((i,s)=>n(i,s,r)):gm.y,id(1),t?pf(e):_m(()=>new Hv))}function Ha(n,e){return(0,hf.m)(e)?(0,$i.z)(n,e,1):(0,$i.z)(n,1)}function Gi(n,e,t){const r=(0,hf.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,os.e)((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let d=!0;i.subscribe((0,en.x)(s,f=>{var g;null===(g=r.next)||void 0===g||g.call(r,f),s.next(f)},()=>{var f;d=!1,null===(f=r.complete)||void 0===f||f.call(r),s.complete()},f=>{var g;d=!1,null===(g=r.error)||void 0===g||g.call(r,f),s.error(f)},()=>{var f,g;d&&(null===(f=r.unsubscribe)||void 0===f||f.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):gm.y}function vc(n){return(0,os.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,en.x)(t,void 0,void 0,o=>{s=(0,Or.Xf)(n(o,vc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function zv(n,e){return(0,os.e)(function bO(n,e,t,r,i){return(s,o)=>{let d=t,f=e,g=0;s.subscribe((0,en.x)(o,y=>{const E=g++;f=d?n(f,y,E):(d=!0,y),r&&o.next(f)},i&&(()=>{d&&o.next(f),o.complete()})))}}(n,e,arguments.length>=2,!0))}function lT(n){return n<=0?()=>nd.E:(0,os.e)((e,t)=>{let r=[];e.subscribe((0,en.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ic(n){return(0,os.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var dT=P(2420);const Zt="primary",ym=Symbol("RouteTitle");class ZG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function mf(n){return new ZG(n)}function hT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],d=n[s];if(o.startsWith(":"))i[o.substring(1)]=d;else if(o!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Rs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!vm(n[i],e[i]))return!1;return!0}function vm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Wv(n){return n.length>0?n[n.length-1]:null}function bu(n){return function CO(n){return!!n&&(n instanceof zr.y||(0,hf.m)(n.lift)&&(0,hf.m)(n.subscribe))}(n)?n:(0,l.QGY)(n)?(0,yn.D)(Promise.resolve(n)):(0,wt.of)(n)}const h1={exact:function f1(n,e,t){if(!sd(n.segments,e.segments)||!No(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!f1(n.children[r],e.children[r],t))return!1;return!0},subset:p1},fT={exact:function DO(n,e){return Rs(n,e)},subset:function RO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vm(n[t],e[t]))},ignored:()=>!0};function Ec(n,e,t){return h1[t.paths](n.root,e.root,t.matrixParams)&&fT[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function p1(n,e,t){return g1(n,e,e.segments,t)}function g1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!sd(i,t)||e.hasChildren()||!No(i,t,r))}if(n.segments.length===t.length){if(!sd(n.segments,t)||!No(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!p1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(sd(n.segments,i)&&No(n.segments,i,r)&&n.children[Zt])&&g1(n.children[Zt],e,s,r)}}function No(n,e,t){return e.every((r,i)=>fT[t](n[i].parameters,r.parameters))}class aa{constructor(e=new Mn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return NO.serialize(this)}}class Mn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kv(this)}}class Im{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=mf(this.parameters)),this._parameterMap}toString(){return gT(this)}}function sd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Em=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return new Zv},providedIn:"root"})}return n})();class Zv{parse(e){const t=new OO(e);return new aa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wm(e.root,!0)}`,r=function YG(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${od(t)}=${od(i)}`).join("&"):`${od(t)}=${od(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Su(n){return encodeURI(n)}(e.fragment)}`:""}`}}const NO=new Zv;function Kv(n){return n.segments.map(e=>gT(e)).join("/")}function wm(n,e){if(!n.hasChildren())return Kv(n);if(e){const t=n.children[Zt]?wm(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Zt&&r.push(`${i}:${wm(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function PO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Zt?[wm(n.children[Zt],!1)]:[`${i}:${wm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${Kv(n)}/${t[0]}`:`${Kv(n)}/(${t.join("//")})`}}function m1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function od(n){return m1(n).replace(/%3B/gi,";")}function ad(n){return m1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tm(n){return decodeURIComponent(n)}function pT(n){return Tm(n.replace(/\+/g,"%20"))}function gT(n){return`${ad(n.path)}${function KG(n){return Object.keys(n).map(e=>`;${ad(e)}=${ad(n[e])}`).join("")}(n.parameters)}`}const QG=/^[^\/()?;#]+/;function Cm(n){const e=n.match(QG);return e?e[0]:""}const mT=/^[^\/()?;=#]+/,XG=/^[^=?&#]+/,kO=/^[^&#]+/;class OO{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mn([],{}):new Mn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Mn(e,t)),r}parseSegment(){const e=Cm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new Im(Tm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function JG(n){const e=n.match(mT);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Cm(this.remaining);i&&(r=i,this.capture(r))}e[Tm(t)]=Tm(r)}parseQueryParam(e){const t=function _1(n){const e=n.match(XG);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function MO(n){const e=n.match(kO);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=pT(t),s=pT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Cm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zt]:new Mn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function y1(n){return n.segments.length>0?new Mn([],{[Zt]:n}):n}function _T(n){const e={};for(const r of Object.keys(n.children)){const s=_T(n.children[r]);if(r===Zt&&0===s.segments.length&&s.hasChildren())for(const[o,d]of Object.entries(s.children))e[o]=d;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Yv(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Mn(n.segments.concat(e.segments),e.children)}return n}(new Mn(n.segments,e))}function wc(n){return n instanceof aa}function v1(n){let e;const i=y1(function t(s){const o={};for(const f of s.children){const g=t(f);o[f.outlet]=g}const d=new Mn(s.url,o);return s===n&&(e=d),d}(n.root));return e??i}function Tc(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return bm(i,i,i,t,r);const s=function LO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new I1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([f,g])=>{d[f]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new I1(t,e,r)}(e);if(s.toRoot())return bm(i,i,new Mn([],{}),t,r);const o=function FO(n,e,t){if(n.isAbsolute)return new Jv(e,!0,0);if(!t)return new Jv(e,!1,NaN);if(null===t.parent)return new Jv(t,!0,0);const r=Qv(n.commands[0])?0:1;return function E1(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new l.vHH(4005,!1);i=r.segments.length}return new Jv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),d=o.processChildren?Du(o.segmentGroup,o.index,s.commands):VO(o.segmentGroup,o.index,s.commands);return bm(i,o.segmentGroup,d,t,r)}function Qv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Am(n){return"object"==typeof n&&null!=n&&n.outlets}function bm(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([f,g])=>{s[f]=Array.isArray(g)?g.map(y=>`${y}`):`${g}`}),o=n===e?t:vT(n,e,t);const d=y1(_T(o));return new aa(d,s,i)}function vT(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:vT(s,e,t)}),new Mn(n.segments,r)}class I1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qv(r[0]))throw new l.vHH(4003,!1);const i=r.find(Am);if(i&&i!==Wv(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VO(n,e,t){if(n||(n=new Mn([],{})),0===n.segments.length&&n.hasChildren())return Du(n,e,t);const r=function xn(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],d=t[r];if(Am(d))break;const f=`${d}`,g=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&g&&"object"==typeof g&&void 0===g.outlets){if(!Xv(f,g,o))return s;r+=2}else{if(!Xv(f,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Mn(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new Mn(n.segments.slice(r.pathIndex),n.children),Du(s,0,i)}return r.match&&0===i.length?new Mn(n.segments,{}):r.match&&!n.hasChildren()?ud(n,e,t):r.match?Du(n,0,i):ud(n,e,t)}function Du(n,e,t){if(0===t.length)return new Mn(n.segments,{});{const r=function e9(n){return Am(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=Du(n.children[Zt],e,t);return new Mn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=VO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Mn(n.segments,i)}}function ud(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Am(s)){const f=w1(s.outlets);return new Mn(r,f)}if(0===i&&Qv(t[0])){r.push(new Im(n.segments[e].path,IT(t[0]))),i++;continue}const o=Am(s)?s.outlets[Zt]:`${s}`,d=i<t.length-1?t[i+1]:null;o&&d&&Qv(d)?(r.push(new Im(o,IT(d))),i+=2):(r.push(new Im(o,{})),i++)}return new Mn(r,{})}function w1(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ud(new Mn([],{}),0,r))}),e}function IT(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Xv(n,e,t){return n==t.path&&Rs(e,t.parameters)}const cd="imperative";class qa{constructor(e,t){this.id=e,this.url=t}}class Sm extends qa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ru extends qa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cc extends qa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dm extends qa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class _f extends qa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class T1 extends qa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ET extends qa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C1 extends qa{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class A1 extends qa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ld extends qa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TT{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ua{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class yf{}class xm{constructor(e){this.url=e}}class jO{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vf,this.attachRef=null}}let vf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=AT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return AT(e,this._root).map(t=>t.value)}}function CT(n,e){if(n===e.value)return e;for(const t of e.children){const r=CT(n,t);if(r)return r}return null}function AT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=AT(n,t);if(r.length)return r.unshift(e),r}return[]}class xu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ac(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bT extends dd{constructor(e,t){super(e),this.snapshot=t,R1(this,e)}toString(){return this.snapshot.toString()}}function b1(n,e){const t=function S1(n,e){const o=new t0([],{},{},"",{},Zt,e,null,{});return new D1("",new xu(o,[]))}(0,e),r=new sa.X([new Im("",{})]),i=new sa.X({}),s=new sa.X({}),o=new sa.X({}),d=new sa.X(""),f=new bc(r,i,o,d,s,Zt,e,t.root);return f.snapshot=t.root,new bT(new xu(f,[]),t)}class bc{constructor(e,t,r,i,s,o,d,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,Rt.U)(g=>g[ym]))??(0,wt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>mf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>mf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $O(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function n9(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class t0{get title(){return this.data?.[ym]}constructor(e,t,r,i,s,o,d,f,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=d,this.routeConfig=f,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D1 extends dd{constructor(e,t){super(t),this.url=e,R1(this,t)}toString(){return GO(this._root)}}function R1(n,e){e.value._routerState=n,e.children.forEach(t=>R1(n,t))}function GO(n){const e=n.children.length>0?` { ${n.children.map(GO).join(", ")} } `:"";return`${n.value}${e}`}function If(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rs(e.params,t.params)||n.paramsSubject.next(t.params),function SO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Rs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ST(n,e){const t=Rs(n.params,e.params)&&function xO(n,e){return sd(n,e)&&n.every((t,r)=>Rs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ST(n.parent,e.parent))}let Pm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.parentContexts=(0,l.f3M)(vf),this.location=(0,l.f3M)(l.s_b),this.changeDetector=(0,l.f3M)(l.sBO),this.environmentInjector=(0,l.f3M)(l.lqb),this.inputBinder=(0,l.f3M)(Pu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new DT(t,d,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.TTD]})}return n})();class DT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bc?this.route:e===vf?this.childContexts:this.parent.get(e,t)}}const Pu=new l.OlP("");let n0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=ff([r.queryParams,r.params,r.data]).pipe((0,ir.w)(([s,o,d],f)=>(d={...s,...o,...d},0===f?(0,wt.of)(d):Promise.resolve(d)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=(0,l.qFp)(r.component);if(o)for(const{templateName:d}of o.inputs)t.activatedComponentRef.setInput(d,s[d]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function Nu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function r0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nu(n,r,i);return Nu(n,r)})}(n,e,t);return new xu(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(d=>Nu(n,d)),o}}const r=function Ef(n){return new bc(new sa.X(n.url),new sa.X(n.params),new sa.X(n.queryParams),new sa.X(n.fragment),new sa.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Nu(n,s));return new xu(r,i)}}const Nm="ngNavigationCancelingError";function s0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=wc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=km(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function km(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nm]=!0,r.cancellationCode=e,t&&(r.url=t),r}function o0(n){return n&&n[Nm]}let hd=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(r,i){1&r&&l._UZ(0,"router-outlet")},dependencies:[Pm],encapsulation:2})}return n})();function xT(n){const e=n.children&&n.children.map(xT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=hd),t}function zs(n){return n.outlet||Zt}function Mm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class a0{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),If(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ac(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ac(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Rm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new BO(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(If(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(d.contexts),o.attachRef=d.componentRef,o.route=d.route.value,o.outlet&&o.outlet.attach(d.componentRef,d.route.value),If(d.route.value),this.activateChildRoutes(e,null,o.children)}else{const d=Mm(i.snapshot);o.attachRef=null,o.route=i,o.injector=d,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class N1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Om{constructor(e,t){this.component=e,this.route=t}}function ZO(n,e,t){const r=n._root;return Fm(r,e?e._root:null,t,[r.value])}function Lm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function Fm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ac(e);return n.children.forEach(o=>{(function Vm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const f=function KO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sd(n.url,e.url)||!Rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ST(n,e)||!Rs(n.queryParams,e.queryParams);default:return!ST(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new N1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Fm(n,e,s.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Om(d.outlet.component,o))}else o&&za(e,d,i),i.canActivateChecks.push(new N1(r)),Fm(n,null,s.component?d?d.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,d])=>za(d,t.getContext(o),i)),i}function za(n,e,t){const r=Ac(n),i=n.value;Object.entries(r).forEach(([s,o])=>{za(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Om(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ku(n){return"function"==typeof n}function t2(n){return n instanceof Hv||"EmptyError"===n?.name}const wf=Symbol("INITIAL_VALUE");function fd(){return(0,ir.w)(n=>ff(n.map(e=>e.pipe(id(1),yc(wf)))).pipe((0,Rt.U)(e=>{for(const t of e)if(!0!==t){if(t===wf)return wf;if(!1===t||t instanceof aa)return t}return!0}),Ei(e=>e!==wf),id(1)))}function MT(n){return(0,u1.z)(Gi(e=>{if(wc(e))throw s0(0,e)}),(0,Rt.U)(e=>!0===e))}class Um{constructor(e){this.segmentGroup=e||null}}class a2{constructor(e){this.urlTree=e}}function Sc(n){return mm(new Um(n))}function Mu(n){return mm(new a2(n))}class c9{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new l.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,wt.of)(r);if(i.numberOfChildren>1||!i.children[Zt])return mm(new l.vHH(4e3,!1));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new aa(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);r[i]=t[d]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([d,f])=>{o[d]=this.createSegmentGroup(e,f,r,i)}),new Mn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const LT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FT(n,e,t,r,i){const s=ko(n,e,t);return s.matched?(r=function HO(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function ca(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,wt.of)(!0);const s=i.map(o=>{const d=Lm(o,n);return bu(function O1(n){return n&&ku(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,wt.of)(s).pipe(fd(),MT())}(r,e,t).pipe((0,Rt.U)(o=>!0===o?s:{...LT}))):(0,wt.of)(s)}function ko(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...LT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hT)(t,n,e);if(!i)return{...LT};const s={};Object.entries(i.posParams??{}).forEach(([d,f])=>{s[d]=f.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function VT(n,e,t,r){return t.length>0&&function wi(n,e,t){return t.some(r=>Tf(n,e,r)&&zs(r)!==Zt)}(n,t,r)?{segmentGroup:new Mn(e,l9(r,new Mn(t,n.children))),slicedSegments:[]}:0===t.length&&function l2(n,e,t){return t.some(r=>Tf(n,e,r))}(n,t,r)?{segmentGroup:new Mn(n.segments,c2(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Mn(n.segments,n.children),slicedSegments:t}}function c2(n,e,t,r,i){const s={};for(const o of r)if(Tf(n,t,o)&&!i[zs(o)]){const d=new Mn([],{});s[zs(o)]=d}return{...i,...s}}function l9(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&zs(r)!==Zt){const i=new Mn([],{});t[zs(r)]=i}return t}function Tf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class U1{constructor(e,t,r,i,s,o,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new c9(this.urlSerializer,this.urlTree)}noMatchError(e){return new l.vHH(4002,!1)}recognize(){const e=VT(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(vc(t=>{if(t instanceof a2)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Um?this.noMatchError(t):t}),(0,Rt.U)(t=>{const r=new t0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),i=new xu(r,t),s=new D1("",i),o=function yT(n,e,t=null,r=null){return Tc(v1(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(vc(r=>{throw r instanceof Um?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=$O(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,yn.D)(i).pipe(Ha(s=>{const o=r.children[s],d=function PT(n,e){const t=n.filter(r=>zs(r)===e);return t.push(...n.filter(r=>zs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,d,o,s)}),zv((s,o)=>(s.push(...o),s)),pf(null),function l1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((i,s)=>n(i,s,r)):gm.y,lT(1),t?pf(e):_m(()=>new Hv))}(),(0,$i.z)(s=>{if(null===s)return Sc(r);const o=BT(s);return function B1(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),(0,wt.of)(o)}))}processSegment(e,t,r,i,s,o){return(0,yn.D)(t).pipe(Ha(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,s,o).pipe(vc(f=>{if(f instanceof Um)return(0,wt.of)(null);throw f}))),Ga(d=>!!d),vc(d=>{if(t2(d))return function h2(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,wt.of)([]):Sc(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,s,o,d){return function d2(n,e,t,r){return!!(zs(n)===r||r!==Zt&&Tf(e,t,n))&&("**"===n.path||ko(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Sc(i):Sc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Mu(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,$i.z)(o=>{const d=new Mn(o,{});return this.processSegment(e,t,d,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:d,consumedSegments:f,remainingSegments:g,positionalParamSegments:y}=ko(t,i,s);if(!d)return Sc(t);const E=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,y);return i.redirectTo.startsWith("/")?Mu(E):this.applyRedirects.lineralizeSegments(i,E).pipe((0,$i.z)(b=>this.processSegment(e,r,t,b.concat(g),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let d;if("**"===r.path){const f=i.length>0?Wv(i).parameters:{},g=new t0(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j1(r),zs(r),r.component??r._loadedComponent??null,r,$1(r));d=(0,wt.of)({snapshot:g,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=FT(t,r,i,e).pipe((0,Rt.U)(({matched:f,consumedSegments:g,remainingSegments:y,parameters:E})=>f?{snapshot:new t0(g,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j1(r),zs(r),r.component??r._loadedComponent??null,r,$1(r)),consumedSegments:g,remainingSegments:y}:null));return d.pipe((0,ir.w)(f=>null===f?Sc(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,ir.w)(({routes:g})=>{const y=r._loadedInjector??e,{snapshot:E,consumedSegments:b,remainingSegments:R}=f,{segmentGroup:V,slicedSegments:q}=VT(t,b,R,g);if(0===q.length&&V.hasChildren())return this.processChildren(y,g,V).pipe((0,Rt.U)(fe=>null===fe?null:[new xu(E,fe)]));if(0===g.length&&0===q.length)return(0,wt.of)([new xu(E,[])]);const Z=zs(r)===s;return this.processSegment(y,g,V,q,Z?Zt:s,!0).pipe((0,Rt.U)(fe=>[new xu(E,fe)]))}))))}getChildConfig(e,t,r){return t.children?(0,wt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,wt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function V1(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,wt.of)(!0);const s=i.map(o=>{const d=Lm(o,n);return bu(function M1(n){return n&&ku(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,wt.of)(s).pipe(fd(),MT())}(e,t,r).pipe((0,$i.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Gi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function u2(n){return mm(km(!1,3))}())):(0,wt.of)({routes:[],injector:e})}}function f2(n){const e=n.value.routeConfig;return e&&""===e.path}function BT(n){const e=[],t=new Set;for(const r of n){if(!f2(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=BT(r.children);e.push(new xu(r.value,i))}return e.filter(r=>!t.has(r))}function j1(n){return n.data||{}}function $1(n){return n.resolve||{}}function H1(n){return"string"==typeof n.title||null===n.title}function u0(n){return(0,ir.w)(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,Rt.U)(()=>e)):(0,wt.of)(e)})}const pd=new l.OlP("ROUTES");let Bm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.f3M)(l.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,wt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bu(t.loadComponent()).pipe((0,Rt.U)(jT),Gi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ic(()=>{this.componentLoaders.delete(t)})),i=new cT(r,()=>new oa.x).pipe(qv());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,wt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function jm(n,e,t,r){return bu(n.loadChildren()).pipe((0,Rt.U)(jT),(0,$i.z)(i=>i instanceof l.YKP||Array.isArray(i)?(0,wt.of)(i):(0,yn.D)(e.compileModuleAsync(i))),(0,Rt.U)(i=>{r&&r(n);let s,o,d=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(pd,[],{optional:!0,self:!0}).flat()),{routes:o.map(xT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ic(()=>{this.childrenLoaders.delete(r)})),o=new cT(s,()=>new oa.x).pipe(qv());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jT(n){return function c0(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $m=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oa.x,this.transitionAbortSubject=new oa.x,this.configLoader=(0,l.f3M)(Bm),this.environmentInjector=(0,l.f3M)(l.lqb),this.urlSerializer=(0,l.f3M)(Em),this.rootContexts=(0,l.f3M)(vf),this.inputBindingEnabled=null!==(0,l.f3M)(Pu,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,wt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new wT(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new UO(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new sa.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cd,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ei(s=>0!==s.id),(0,Rt.U)(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),(0,ir.w)(s=>{this.currentTransition=s;let o=!1,d=!1;return(0,wt.of)(s).pipe(Gi(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ir.w)(f=>{const g=f.currentBrowserUrl.toString(),y=!t.navigated||f.extractedUrl.toString()!==g||g!==f.currentUrlTree.toString();if(!y&&"reload"!==(f.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new Dm(f.id,this.urlSerializer.serialize(f.rawUrl),b,0)),f.resolve(null),nd.E}if(t.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return(0,wt.of)(f).pipe((0,ir.w)(b=>{const R=this.transitions?.getValue();return this.events.next(new Sm(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions?.getValue()?nd.E:Promise.resolve(b)}),function g2(n,e,t,r,i,s){return(0,$i.z)(o=>function UT(n,e,t,r,i,s,o="emptyOnly"){return new U1(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe((0,Rt.U)(({state:d,tree:f})=>({...o,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Gi(b=>{s.targetSnapshot=b.targetSnapshot,s.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects};const R=new T1(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(R)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){const{id:b,extractedUrl:R,source:V,restoredState:q,extras:Z}=f,fe=new Sm(b,this.urlSerializer.serialize(R),V,q);this.events.next(fe);const Se=b1(0,this.rootComponentType).snapshot;return this.currentTransition=s={...f,targetSnapshot:Se,urlAfterRedirects:R,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}},(0,wt.of)(s)}{const b="";return this.events.next(new Dm(f.id,this.urlSerializer.serialize(f.extractedUrl),b,1)),f.resolve(null),nd.E}}),Gi(f=>{const g=new ET(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),(0,Rt.U)(f=>(this.currentTransition=s={...f,guards:ZO(f.targetSnapshot,f.currentSnapshot,this.rootContexts)},s)),function n2(n,e){return(0,$i.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?(0,wt.of)({...t,guardsResult:!0}):function r2(n,e,t,r){return(0,yn.D)(n).pipe((0,$i.z)(i=>function u9(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,wt.of)(!0);const o=s.map(d=>{const f=Mm(e)??i,g=Lm(d,f);return bu(function XO(n){return n&&ku(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):f.runInContext(()=>g(n,e,t,r))).pipe(Ga())});return(0,wt.of)(o).pipe(fd())}(i.component,i.route,t,e,r)),Ga(i=>!0!==i,!0))}(o,r,i,n).pipe((0,$i.z)(d=>d&&function YO(n){return"boolean"==typeof n}(d)?function L1(n,e,t,r){return(0,yn.D)(e).pipe(Ha(i=>Au(function F1(n,e){return null!==n&&e&&e(new e0(n)),(0,wt.of)(!0)}(i.route.parent,r),function i2(n,e){return null!==n&&e&&e(new TT(n)),(0,wt.of)(!0)}(i.route,r),function o2(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function k1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>uT(()=>{const d=o.guards.map(f=>{const g=Mm(o.node)??t,y=Lm(f,g);return bu(function JO(n){return n&&ku(n.canActivateChild)}(y)?y.canActivateChild(r,n):g.runInContext(()=>y(r,n))).pipe(Ga())});return(0,wt.of)(d).pipe(fd())}));return(0,wt.of)(s).pipe(fd())}(n,i.path,t),function s2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wt.of)(!0);const i=r.map(s=>uT(()=>{const o=Mm(e)??t,d=Lm(s,o);return bu(function QO(n){return n&&ku(n.canActivate)}(d)?d.canActivate(e,n):o.runInContext(()=>d(e,n))).pipe(Ga())}));return(0,wt.of)(i).pipe(fd())}(n,i.route,t))),Ga(i=>!0!==i,!0))}(r,s,n,e):(0,wt.of)(d)),(0,Rt.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,f=>this.events.next(f)),Gi(f=>{if(s.guardsResult=f.guardsResult,wc(f.guardsResult))throw s0(0,f.guardsResult);const g=new C1(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(g)}),Ei(f=>!!f.guardsResult||(this.cancelNavigationTransition(f,"",3),!1)),u0(f=>{if(f.guards.canActivateChecks.length)return(0,wt.of)(f).pipe(Gi(g=>{const y=new A1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}),(0,ir.w)(g=>{let y=!1;return(0,wt.of)(g).pipe(function G1(n,e){return(0,$i.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,wt.of)(t);let s=0;return(0,yn.D)(i).pipe(Ha(o=>function Cf(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!H1(i)&&(s[ym]=i.title),function Ou(n,e,t,r){const i=function Af(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,wt.of)({});const s={};return(0,yn.D)(i).pipe((0,$i.z)(o=>function m2(n,e,t,r){const i=Mm(e)??r,s=Lm(n,i);return bu(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ga(),Gi(d=>{s[o]=d}))),lT(1),function d1(n){return(0,Rt.U)(()=>n)}(s),vc(o=>t2(o)?nd.E:mm(o)))}(s,n,e,r).pipe((0,Rt.U)(o=>(n._resolvedData=o,n.data=$O(n,t).resolve,i&&H1(i)&&(n.data[ym]=i.title),null)))}(o.route,r,n,e)),Gi(()=>s++),lT(1),(0,$i.z)(o=>s===i.length?(0,wt.of)(t):nd.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Gi({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(g,"",2)}}))}),Gi(g=>{const y=new ld(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}))}),u0(f=>{const g=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe(Gi(b=>{y.component=b}),(0,Rt.U)(()=>{})));for(const b of y.children)E.push(...g(b));return E};return ff(g(f.targetSnapshot.root)).pipe(pf(),id(1))}),u0(()=>this.afterPreactivation()),(0,Rt.U)(f=>{const g=function RT(n,e,t){const r=Nu(n,e._root,t?t._root:void 0);return new bT(r,e)}(t.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=s={...f,targetRouterState:g},s}),Gi(()=>{this.events.next(new yf)}),((n,e,t,r)=>(0,Rt.U)(i=>(new a0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),id(1),Gi({next:f=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ru(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),t.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{o=!0}}),function gf(n){return(0,os.e)((e,t)=>{(0,Or.Xf)(n).subscribe((0,en.x)(t,()=>t.complete(),dT.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Gi(f=>{throw f}))),Ic(()=>{o||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),vc(f=>{if(d=!0,o0(f))this.events.next(new Cc(s.id,this.urlSerializer.serialize(s.extractedUrl),f.message,f.cancellationCode)),function r9(n){return o0(n)&&wc(n.url)}(f)?this.events.next(new xm(f.url)):s.resolve(!1);else{this.events.next(new _f(s.id,this.urlSerializer.serialize(s.extractedUrl),f,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(f))}catch(g){s.reject(g)}}return nd.E}))}))}cancelNavigationTransition(t,r,i){const s=new Cc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q1(n){return n!==cd}let z1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[ym]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(_2)},providedIn:"root"})}return n})(),_2=(()=>{class n extends z1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(Me))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(d9)},providedIn:"root"})}return n})();class W1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let d9=(()=>{class n extends W1{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}();static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const l0=new l.OlP("",{providedIn:"root",factory:()=>({})});let h9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(f9)},providedIn:"root"})}return n})(),f9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bf||{});function $T(n,e){n.events.pipe(Ei(t=>t instanceof Ru||t instanceof Cc||t instanceof _f||t instanceof Dm),(0,Rt.U)(t=>t instanceof Ru||t instanceof Dm?bf.COMPLETE:t instanceof Cc&&(0===t.code||1===t.code)?bf.REDIRECTING:bf.FAILED),Ei(t=>t!==bf.REDIRECTING),id(1)).subscribe(()=>{e()})}function p9(n){throw n}function d0(n,e,t){return e.parse("/")}const g9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,l.f3M)(l.c2e),this.isNgZoneEnabled=!1,this._events=new oa.x,this.options=(0,l.f3M)(l0,{optional:!0})||{},this.pendingTasks=(0,l.f3M)(l.HDt),this.errorHandler=this.options.errorHandler||p9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||d0,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,l.f3M)(h9),this.routeReuseStrategy=(0,l.f3M)(y2),this.titleStrategy=(0,l.f3M)(z1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,l.f3M)(pd,{optional:!0})?.flat()??[],this.navigationTransitions=(0,l.f3M)($m),this.urlSerializer=(0,l.f3M)(Em),this.location=(0,l.f3M)(_e),this.componentInputBindingEnabled=!!(0,l.f3M)(Pu,{optional:!0}),this.eventsSubscription=new rd.w0,this.isNgZoneEnabled=(0,l.f3M)(l.R0b)instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new aa,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=b1(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(GT(r)&&this._events.next(r));if(r instanceof Sm)q1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Dm)this.rawUrlTree=i.rawUrl;else if(r instanceof T1){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof yf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Cc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof xm){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||q1(i.source)};this.scheduleNavigation(s,cd,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof _f&&this.restoreHistory(i,!0),r instanceof Ru&&(this.navigated=!0),GT(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cd,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(xT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:d,preserveFragment:f}=r,g=f?this.currentUrlTree.fragment:o;let E,y=null;switch(d){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}null!==y&&(y=this.removeEmptyProps(y));try{E=v1(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),E=this.currentUrlTree.root}return Tc(E,t,y,g??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=wc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,cd,null,r)}navigate(t,r={skipLocationChange:!1}){return function v2(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new l.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...g9}:!1===r?{...Z1}:r,wc(t))return Ec(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Ec(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let d,f,g;o?(d=o.resolve,f=o.reject,g=o.promise):g=new Promise((E,b)=>{d=E,f=b});const y=this.pendingTasks.add();return $T(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:d,reject:f,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(E=>Promise.reject(E))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GT(n){return!(n instanceof yf||n instanceof xm)}class HT{}let E2=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ei(t=>t instanceof Ru),Ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,d=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,yn.D)(i).pipe((0,td.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,wt.of)(null);const s=i.pipe((0,$i.z)(o=>null===o?(0,wt.of)(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){const o=this.loader.loadComponent(r);return(0,yn.D)([s,o]).pipe((0,td.J)())}return s})}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(sr),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(HT),l.LFG(Bm))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Sf=new l.OlP("");let gd=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ru?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Dm&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ua&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ua(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){l.$Z()};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function Wa(n,e){return{\u0275kind:n,\u0275providers:e}}function f0(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(sr),i=n.get(X1);1===n.get(zT)&&r.initialNavigation(),n.get(tR,null,l.XFs.Optional)?.setUpPreloading(),n.get(Sf,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const X1=new l.OlP("",{factory:()=>new oa.x}),zT=new l.OlP("",{providedIn:"root",factory:()=>1}),tR=new l.OlP("");function C2(n){return Wa(0,[{provide:tR,useExisting:E2},{provide:HT,useExisting:n}])}const Ws=new l.OlP("ROUTER_FORROOT_GUARD"),D2=[_e,{provide:Em,useClass:Zv},sr,vf,{provide:bc,useFactory:function Df(n){return n.routerState.root},deps:[sr]},Bm,[]];function R2(){return new l.PXZ("Router",sr)}let x2=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[D2,[],{provide:pd,multi:!0,useValue:t},{provide:Ws,useFactory:N2,deps:[[sr,new l.FiY,new l.tp0]]},{provide:l0,useValue:r||{}},r?.useHash?{provide:ae,useClass:xe}:{provide:ae,useClass:Be},{provide:Sf,useFactory:()=>{const n=(0,l.f3M)(Oi),e=(0,l.f3M)(l.R0b),t=(0,l.f3M)(l0),r=(0,l.f3M)($m),i=(0,l.f3M)(Em);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gd(i,r,n,e,t)}},r?.preloadingStrategy?C2(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:R2},r?.initialNavigation?k2(r):[],r?.bindToComponentInputs?Wa(8,[n0,{provide:Pu,useExisting:n0}]).\u0275providers:[],[{provide:ZT,useFactory:f0},{provide:l.tb,multi:!0,useExisting:ZT}]]}}static forChild(t){return{ngModule:n,providers:[{provide:pd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(Ws,8))};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();function N2(n){return"guarded"}function k2(n){return["disabled"===n.initialNavigation?Wa(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(sr);return()=>{e.setUpLocationChangeListener()}}},{provide:zT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wa(2,[{provide:zT,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(ne,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(sr),s=e.get(X1);$T(i,()=>{r(!0)}),e.get($m).afterPreactivation=()=>(r(!0),s.closed?(0,wt.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ZT=new l.OlP("");var ht,j=P(5861),ct=P(534),ai=P(4537),Zn=P(7879),z=P(9058),O2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mo={},Rf=Rf||{},Ft=O2||self;function KT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var p0="closure_uid_"+(1e9*Math.random()>>>0),sR=0;function YT(n,e,t){return n.call.apply(n.bind,arguments)}function Lu(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function as(n,e,t){return(as=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YT:Lu).apply(null,arguments)}function g0(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),d=2;d<arguments.length;d++)o[d-2]=arguments[d];return e.prototype[i].apply(r,o)}}function Dc(){this.s=this.s,this.o=this.o}Dc.prototype.s=!1,Dc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function iR(n){Object.prototype.hasOwnProperty.call(n,p0)&&n[p0]||(n[p0]=++sR)}(this)},Dc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aR=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Pf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(KT(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hi.prototype.h=function(){this.defaultPrevented=!0};var m0=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch{}return n}();function _0(n){return/^[\s\xa0]*$/.test(n)}function y0(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function la(n){return-1!=y0().indexOf(n)}function v0(n){return v0[" "](n),n}v0[" "]=function(){};var XT,n,F2=la("Opera"),md=la("Trident")||la("MSIE"),QT=la("Edge"),_d=QT||md,uR=la("Gecko")&&!(-1!=y0().toLowerCase().indexOf("webkit")&&!la("Edge"))&&!(la("Trident")||la("MSIE"))&&!la("Edge"),cR=-1!=y0().toLowerCase().indexOf("webkit")&&!la("Edge");function JT(){var n=Ft.document;return n?n.documentMode:void 0}e:{var eC="",yd=(n=y0(),uR?/rv:([^\);]+)(\)|;)/.exec(n):QT?/Edge\/([\d\.]+)/.exec(n):md?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cR?/WebKit\/(\S+)/.exec(n):F2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(yd&&(eC=yd?yd[1]:""),md){var tC=JT();if(null!=tC&&tC>parseFloat(eC)){XT=String(tC);break e}}XT=eC}var V2=Ft.document&&md&&(JT()||parseInt(XT,10))||void 0;function Hm(n,e){if(Hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uR){e:{try{v0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:U2[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hm.$.h.call(this)}}Yr(Hm,Hi);var U2={2:"touch",3:"pen",4:"mouse"};Hm.prototype.h=function(){Hm.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qm="closure_listenable_"+(1e6*Math.random()|0),B2=0;function dR(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++B2,this.fa=this.ia=!1}function kf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function rC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hR(n){const e={};for(const t in n)e[t]=n[t];return e}const fR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pR(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<fR.length;s++)t=fR[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function E0(n){this.src=n,this.g={},this.h=0}function iC(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=aR(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(kf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function sC(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}E0.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=sC(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new dR(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var oC="closure_lm_"+(1e6*Math.random()|0),w0={};function aC(n,e,t,r,i){if(r&&r.once)return uC(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)aC(n,e[s],t,r,i);return null}return t=dC(t),n&&n[qm]?n.O(e,t,xf(r)?!!r.capture:!!r,i):gR(n,e,t,!1,r,i)}function gR(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=xf(i)?!!i.capture:!!i,d=lC(n);if(d||(n[oC]=d=new E0(n)),(t=d.add(e,t,r,o,s)).proxy)return t;if(r=function C9(){const e=j2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)m0||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uC(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)uC(n,e[s],t,r,i);return null}return t=dC(t),n&&n[qm]?n.P(e,t,xf(r)?!!r.capture:!!r,i):gR(n,e,t,!0,r,i)}function cC(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)cC(n,e[s],t,r,i);else r=xf(r)?!!r.capture:!!r,t=dC(t),n&&n[qm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=sC(s=n.g[e],t,r,i))&&(kf(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=lC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=sC(e,t,r,i)),(t=-1<n?e[n]:null)&&mR(t))}function mR(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[qm])iC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lC(e))?(iC(t,n),0==t.h&&(t.src=null,e[oC]=null)):kf(n)}}}function zm(n){return n in w0?w0[n]:w0[n]="on"+n}function j2(n,e){if(n.fa)n=!0;else{e=new Hm(e,this);var t=n.listener,r=n.la||n.src;n.ia&&mR(n),n=t.call(r,e)}return n}function lC(n){return(n=n[oC])instanceof E0?n:null}var Wm="__closure_events_fn_"+(1e9*Math.random()>>>0);function dC(n){return"function"==typeof n?n:(n[Wm]||(n[Wm]=function(e){return n.handleEvent(e)}),n[Wm])}function Un(){Dc.call(this),this.i=new E0(this),this.S=this,this.J=null}function Lr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Hi(e,n);else if(e instanceof Hi)e.target=e.target||n;else{var i=e;pR(e=new Hi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=ui(o,r,!0,e)&&i}if(i=ui(o=e.g=n,r,!0,e)&&i,i=ui(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=ui(o=e.g=t[s],r,!1,e)&&i}function ui(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var d=o.listener,f=o.la||o.src;o.ia&&iC(n.i,o),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Yr(Un,Dc),Un.prototype[qm]=!0,Un.prototype.removeEventListener=function(n,e,t,r){cC(this,n,e,t,r)},Un.prototype.N=function(){if(Un.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kf(t[r]);delete n.g[e],n.h--}}this.J=null},Un.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Un.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fu=Ft.JSON.stringify;function Oo(){var n=Rc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vd=new class T0{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Mf,n=>n.reset());class Mf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Of(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Lf(n){Ft.setTimeout(()=>{throw n},0)}let Za,Ka=!1,Rc=new class hC{constructor(){this.h=this.g=null}add(e,t){const r=vd.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Id=()=>{const n=Ft.Promise.resolve(void 0);Za=()=>{n.then(Ff)}};var Ff=()=>{for(var n;n=Oo();){try{n.h.call(n.g)}catch(t){Lf(t)}var e=vd;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ka=!1};function Zm(n,e){Un.call(this),this.h=n||1,this.g=e||Ft,this.j=as(this.qb,this),this.l=Date.now()}function C0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function A0(n,e,t){if("function"==typeof n)t&&(n=as(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=as(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function fC(n){n.g=A0(()=>{n.g=null,n.i&&(n.i=!1,fC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(Zm,Un),(ht=Zm.prototype).ga=!1,ht.T=null,ht.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lr(this,"tick"),this.ga&&(C0(this),this.start()))}},ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.N=function(){Zm.$.N.call(this),C0(this),delete this.g};class _R extends Dc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fC(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vf(n){Dc.call(this),this.h=n,this.g={}}Yr(Vf,Dc);var pC=[];function gC(n,e,t,r){Array.isArray(t)||(t&&(pC[0]=t.toString()),t=pC);for(var i=0;i<t.length;i++){var s=aC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function mC(n){rC(n.g,function(e,t){this.g.hasOwnProperty(t)&&mR(e)},n),n.g={}}function Uf(){this.g=!0}function Km(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function H2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Fu(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vf.prototype.N=function(){Vf.$.N.call(this),mC(this)},Vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Uf.prototype.Ea=function(){this.g=!1},Uf.prototype.info=function(){};var Bf={},yR=null;function _C(){return yR=yR||new Un}function vR(n){Hi.call(this,Bf.Ta,n)}function Ym(n){const e=_C();Lr(e,new vR(e))}function IR(n,e){Hi.call(this,Bf.STAT_EVENT,n),this.stat=e}function qi(n){const e=_C();Lr(e,new IR(e,n))}function jf(n,e){Hi.call(this,Bf.Ua,n),this.size=e}function Ed(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Bf.Ta="serverreachability",Yr(vR,Hi),Bf.STAT_EVENT="statevent",Yr(IR,Hi),Bf.Ua="timingevent",Yr(jf,Hi);var wd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Td(){}function ER(){}Td.prototype.h=null;var wC,Vu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function IC(){Hi.call(this,"d")}function EC(){Hi.call(this,"c")}function b0(){}function Cd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Vf(this),this.P=S0,this.V=new Zm(n=_d?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qm}function Qm(){this.i=null,this.g="",this.h=!1}Yr(IC,Hi),Yr(EC,Hi),Yr(b0,Td),b0.prototype.g=function(){return new XMLHttpRequest},b0.prototype.i=function(){return{}},wC=new b0;var S0=45e3,wR={},D0={};function TC(n,e,t){n.L=1,n.v=N0(Lo(e)),n.s=t,n.S=!0,R0(n,null)}function R0(n,e){n.G=Date.now(),Jm(n),n.A=Lo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),xC(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Qm,n.g=zR(n.l,t?e:null,!n.s),0<n.O&&(n.M=new _R(as(n.Pa,n,n.g),n.O)),gC(n.U,n.g,"readystatechange",n.nb),e=n.I?hR(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ym(),function $2(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",d=s.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");if(1<g.length){var y=g[0];g=g[1];var E=y.split("_");o=2<=E.length&&"type"==E[1]?o+(y+"=")+g+"&":o+(y+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function TR(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function CC(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=q2(n,t),i==D0){4==e&&(n.o=4,qi(14),r=!1),Km(n.j,n.m,null,"[Incomplete Response]");break}if(i==wR){n.o=4,qi(15),Km(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Km(n.j,n.m,i,null),bC(n,i)}TR(n)&&i!=D0&&i!=wR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),B0(e),e.M=!0,qi(11))):(Km(n.j,n.m,t,"[Invalid Chunked Response]"),Ad(n),$f(n))}function q2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?D0:(t=Number(e.substring(t,r)),isNaN(t)?wR:(r+=1)+t>e.length?D0:(e=e.slice(r,r+t),n.C=r+t,e))}function Jm(n){n.Y=Date.now()+n.P,AC(n,n.P)}function AC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ed(as(n.lb,n),e)}function Xm(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function $f(n){0==n.l.H||n.J||Fo(n.l,n)}function Ad(n){Xm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,C0(n.V),mC(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function bC(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||t_(t.i,n)))if(!n.K&&t_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Zs(t),F0(t)}UC(t),qi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ed(as(t.ib,t),6e3));if(1>=k0(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pc(t,11)}else if((n.K||t.g==n)&&Zs(t),!_0(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.V=g[0],g=g[1],2==t.H)if("c"==g[0]){t.K=g[1],t.pa=g[2];const y=g[3];null!=y&&(t.ra=y,t.l.info("VER="+t.ra));const E=g[4];null!=E&&(t.Ga=E,t.l.info("SVER="+t.Ga));const b=g[5];null!=b&&"number"==typeof b&&0<b&&(t.L=r=1.5*b,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const V=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=r.i;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(M0(s,s.h),s.h=null))}if(r.F){const q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(r.Da=q,Kn(r.I,r.F,q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=qR(r,r.J?r.pa:null,r.Y),o.K){PC(r.i,o);var d=o,f=r.L;f&&d.setTimeout(f),d.B&&(Xm(d),Jm(d)),r.g=o}else fa(r);0<t.j.length&&V0(t)}else"stop"!=g[0]&&"close"!=g[0]||Pc(t,7);else 3==t.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Pc(t,7):FC(t):"noop"!=g[0]&&t.h&&t.h.Aa(g),t.A=0)}Ym()}catch{}}function x0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(KT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function CR(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(KT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function z2(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(KT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ht=Cd.prototype).setTimeout=function(n){this.P=n},ht.nb=function(n){n=n.target;const e=this.M;e&&3==Ja(n)?e.l():this.Pa(n)},ht.Pa=function(n){try{if(n==this.g)e:{const y=Ja(this.g);var e=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||_d||this.g&&(this.h.h||this.g.ja()||BR(this.g)))){this.J||4!=y||7==e||Ym(),Xm(this);var t=this.g.da();this.ca=t;t:if(TR(this)){var r=BR(this.g);n="";var i=r.length,s=4==Ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ad(this),$f(this);var o="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function A9(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,y,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_0(d)){var g=d;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,qi(12),Ad(this),$f(this);break e}Km(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bC(this,t)}this.S?(CC(this,y,o),_d&&this.i&&3==y&&(gC(this.U,this.V,"tick",this.mb),this.V.start())):(Km(this.j,this.m,o,null),bC(this,o)),4==y&&Ad(this),this.i&&!this.J&&(4==y?Fo(this.l,this):(this.i=!1,Jm(this)))}else(function jR(n){const e={};n=(n.g&&2<=Ja(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_0(n[r]))continue;var t=Of(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function I0(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,qi(12)):(this.o=0,qi(13)),Ad(this),$f(this)}}}catch{}},ht.mb=function(){if(this.g){var n=Ja(this.g),e=this.g.ja();this.C<e.length&&(Xm(this),CC(this,n,e),this.i&&4!=n&&Jm(this))}},ht.cancel=function(){this.J=!0,Ad(this)},ht.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function G2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ym(),qi(17)),Ad(this),this.o=2,$f(this)):AC(this,this.Y-n)};var P0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ya){this.h=n.h,Gf(this,n.j),this.s=n.s,this.g=n.g,e_(this,n.m),this.l=n.l;var e=n.i,t=new Hf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),AR(this,t),this.o=n.o}else n&&(e=String(n).match(P0))?(this.h=!1,Gf(this,e[1]||"",!0),this.s=bd(e[2]||""),this.g=bd(e[3]||"",!0),e_(this,e[4]),this.l=bd(e[5]||"",!0),AR(this,e[6]||"",!0),this.o=bd(e[7]||"")):(this.h=!1,this.i=new Hf(null,this.h))}function Lo(n){return new Ya(n)}function Gf(n,e,t){n.j=t?bd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function e_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AR(n,e,t){e instanceof Hf?(n.i=e,function RR(n,e){e&&!n.j&&(Qa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(RC(this,r),xC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Sd(e,SR)),n.i=new Hf(e,n.h))}function Kn(n,e,t){n.i.set(e,t)}function N0(n){return Kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ya.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sd(e,SC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sd(e,SC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sd(t,"/"==t.charAt(0)?K2:Z2,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sd(t,DC)),n.join("")};var SC=/[#\/\?@]/g,Z2=/[#\?:]/g,K2=/[#\?]/g,SR=/[#\?@]/g,DC=/#/g;function Hf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qa(n){n.g||(n.g=new Map,n.h=0,n.i&&function W2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RC(n,e){Qa(n),e=Dd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function DR(n,e){return Qa(n),e=Dd(n,e),n.g.has(e)}function xC(n,e,t){RC(n,e),0<t.length&&(n.i=null,n.g.set(Dd(n,e),Pf(t)),n.h+=t.length)}function Dd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PR(n){this.l=n||Y2,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=Hf.prototype).add=function(n,e){Qa(this),this.i=null,n=Dd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){Qa(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ht.ta=function(){Qa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ht.Z=function(n){Qa(this);let e=[];if("string"==typeof n)DR(this,n)&&(e=e.concat(this.g.get(Dd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return Qa(this),this.i=null,DR(this,n=Dd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Y2=10;function NR(n){return!!n.h||!!n.g&&n.g.size>=n.j}function k0(n){return n.h?1:n.g?n.g.size:0}function t_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function M0(n,e){n.g?n.g.add(e):n.h=e}function PC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function NC(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Pf(n.i)}PR.prototype.cancel=function(){if(this.i=NC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var kR=class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}};function MR(){this.g=new kR}function OR(n,e,t){const r=t||"";try{x0(n,function(i,s){let o=i;xf(i)&&(o=Fu(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function n_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xc(n){this.l=n.ec||null,this.j=n.ob||!1}function da(n,e){Un.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=kC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yr(xc,Td),xc.prototype.g=function(){return new da(this.l,this.j)},xc.prototype.i=function(n){return function(){return n}}({}),Yr(da,Un);var kC=0;function FR(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Rd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ha(n)}function ha(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=da.prototype).open=function(n,e){if(this.readyState!=kC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ha(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rd(this)),this.readyState=kC},ht.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FR(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ht.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rd(this):ha(this),3==this.readyState&&FR(this)}},ht.Za=function(n){this.g&&(this.response=this.responseText=n,Rd(this))},ht.Ya=function(n){this.g&&(this.response=n,Rd(this))},ht.ka=function(){this.g&&Rd(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MC=Ft.JSON.parse;function Cr(n){Un.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=O0,this.L=this.M=!1}Yr(Cr,Un);var O0="",b9=/^https?$/i,S9=["POST","PUT"];function VR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,OC(n),Ar(n)}function OC(n){n.F||(n.F=!0,Lr(n,"complete"),Lr(n,"error"))}function UR(n){if(n.h&&typeof Rf<"u"&&(!n.C[1]||4!=Ja(n)||2!=n.da()))if(n.v&&4==Ja(n))A0(n.La,0,n);else if(Lr(n,"readystatechange"),4==Ja(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(P0)[1]||null;!i&&Ft.self&&Ft.self.location&&(i=Ft.self.location.protocol.slice(0,-1)),r=!b9.test(i?i.toLowerCase():"")}t=r}if(t)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var s=2<Ja(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",OC(n)}}finally{Ar(n)}}}function Ar(n,e){if(n.g){LC(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Lr(n,"ready");try{t.onreadystatechange=r}catch{}}}function LC(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Ja(n){return n.g?n.g.readyState:0}function BR(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case O0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $R(n){let e="";return rC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function L0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$R(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Kn(n,e,t))}function qf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xd(n){this.Ga=0,this.j=[],this.l=new Uf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qf("baseRetryDelayMs",5e3,n),this.hb=qf("retryDelaySeedMs",1e4,n),this.eb=qf("forwardChannelMaxRetries",2,n),this.xa=qf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new PR(n&&n.concurrentRequestLimit),this.Ja=new MR,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function FC(n){if(VC(n),3==n.H){var e=n.W++,t=Lo(n.I);if(Kn(t,"SID",n.K),Kn(t,"RID",e),Kn(t,"TYPE","terminate"),zf(n,t),(e=new Cd(n,n.l,e)).L=2,e.v=N0(Lo(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=zR(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jm(e)}HR(n)}function F0(n){n.g&&(B0(n),n.g.cancel(),n.g=null)}function VC(n){F0(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),Zs(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function V0(n){if(!NR(n.i)&&!n.m){n.m=!0;var e=n.Na;Za||Id(),Ka||(Za(),Ka=!0),Rc.add(e,n),n.C=0}}function J2(n,e){var t;t=e?e.m:n.W++;const r=Lo(n.I);Kn(r,"SID",n.K),Kn(r,"RID",t),Kn(r,"AID",n.V),zf(n,r),n.o&&n.s&&L0(r,n.o,n.s),t=new Cd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=U0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),M0(n.i,t),TC(t,r,e)}function zf(n,e){n.na&&rC(n.na,function(t,r){Kn(e,r,t)}),n.h&&x0({},function(t,r){Kn(e,r,t)})}function U0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?as(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let g=i[f].g;const y=i[f].map;if(g-=s,0>g)s=Math.max(0,i[f].g-100),d=!1;else try{OR(y,o,"req"+g+"_")}catch{r&&r(y)}}if(d){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function fa(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Za||Id(),Ka||(Za(),Ka=!0),Rc.add(e,n),n.A=0}}function UC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ed(as(n.Ma,n),BC(n,n.A)),n.A++,0))}function B0(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function pa(n){n.g=new Cd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Lo(n.wa);Kn(e,"RID","rpc"),Kn(e,"SID",n.K),Kn(e,"AID",n.V),Kn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Kn(e,"TO",n.qa),Kn(e,"TYPE","xmlhttp"),zf(n,e),n.o&&n.s&&L0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=N0(Lo(e)),t.s=null,t.S=!0,R0(t,n)}function Zs(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Fo(n,e){var t=null;if(n.g==e){Zs(n),B0(n),n.g=null;var r=2}else{if(!t_(n.i,e))return;t=e.F,PC(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Lr(r=_C(),new jf(r,t)),V0(n)}else fa(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function GR(n,e){return!(k0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ed(as(n.Na,n,e),BC(n,n.C)),n.C++,0)))}(n,e)||2==r&&UC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pc(n,5);break;case 4:Pc(n,10);break;case 3:Pc(n,6);break;default:Pc(n,2)}}function BC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=as(n.pb,n);t||(t=new Ya("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Gf(t,"https"),N0(t)),function LR(n,e){const t=new Uf;if(Ft.Image){const r=new Image;r.onload=g0(n_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=g0(n_,t,r,"TestLoadImage: error",!1,e),r.onabort=g0(n_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=g0(n_,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qi(2);n.H=0,n.h&&n.h.za(e),HR(n),VC(n)}function HR(n){if(n.H=0,n.ma=[],n.h){const e=NC(n.i);(0!=e.length||0!=n.j.length)&&(Nf(n.ma,e),Nf(n.ma,n.j),n.i.i.length=0,Pf(n.j),n.j.length=0),n.h.ya()}}function qR(n,e,t){var r=t instanceof Ya?Lo(t):new Ya(t);if(""!=r.g)e&&(r.g=e+"."+r.g),e_(r,r.m);else{var i=Ft.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ya(null);r&&Gf(s,r),e&&(s.g=e),i&&e_(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Kn(r,t,e),Kn(r,"VER",n.ra),zf(n,r),r}function zR(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cr(t&&n.Ha&&!n.va?new xc({ob:!0}):n.va)).Oa(n.J),e}function WR(){}function Wf(){if(md&&!(10<=Number(V2)))throw Error("Environmental error: no available transport.")}function zi(n,e){Un.call(this),this.g=new xd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_0(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zf(this)}function ZR(n){IC.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jC(){EC.call(this),this.status=1}function Zf(n){this.g=n}function Vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function j0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Tn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ht=Cr.prototype).Oa=function(n){this.M=n},ht.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wC.g(),this.C=function vC(n){return n.h||(n.h=n.i())}(this.u?this.u:wC),this.g.onreadystatechange=as(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void VR(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ft.FormData&&n instanceof Ft.FormData,!(0<=aR(S9,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LC(this),0<this.B&&((this.L=function Q2(n){return md&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=as(this.ua,this)):this.A=A0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){VR(this,s)}},ht.ua=function(){typeof Rf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),Ar(this))},ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ar(this,!0)),Cr.$.N.call(this)},ht.La=function(){this.s||(this.G||this.v||this.l?UR(this):this.kb())},ht.kb=function(){UR(this)},ht.isActive=function(){return!!this.g},ht.da=function(){try{return 2<Ja(this)?this.g.status:-1}catch{return-1}},ht.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ht.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),MC(e)}},ht.Ia=function(){return this.m},ht.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=xd.prototype).ra=8,ht.H=1,ht.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Cd(this,this.l,n);let s=this.s;if(this.U&&(s?(s=hR(s),pR(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=U0(this,i,e),Kn(t=Lo(this.I),"RID",n),Kn(t,"CVER",22),this.F&&Kn(t,"X-HTTP-Session-Id",this.F),zf(this,t),s&&(this.O?e="headers="+encodeURIComponent(String($R(s)))+"&"+e:this.o&&L0(t,this.o,s)),M0(this.i,i),this.bb&&Kn(t,"TYPE","init"),this.P?(Kn(t,"$req",e),Kn(t,"SID","null"),i.aa=!0,TC(i,t,null)):TC(i,t,e),this.H=2}}else 3==this.H&&(n?J2(this,n):0==this.j.length||NR(this.i)||J2(this))},ht.Ma=function(){if(this.u=null,pa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ed(as(this.jb,this),n)}},ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qi(10),F0(this),pa(this))},ht.ib=function(){null!=this.v&&(this.v=null,F0(this),UC(this),qi(19))},ht.pb=function(n){n?(this.l.info("Successfully pinged google.com"),qi(2)):(this.l.info("Failed to ping google.com"),qi(1))},ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(ht=WR.prototype).Ba=function(){},ht.Aa=function(){},ht.za=function(){},ht.ya=function(){},ht.isActive=function(){return!0},ht.Va=function(){},Wf.prototype.g=function(n,e){return new zi(n,e)},Yr(zi,Un),zi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;qi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=qR(n,null,n.Y),V0(n)},zi.prototype.close=function(){FC(this.g)},zi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Fu(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&V0(e)},zi.prototype.N=function(){this.g.h=null,delete this.j,FC(this.g),delete this.g,zi.$.N.call(this)},Yr(ZR,IC),Yr(jC,EC),Yr(Zf,WR),Zf.prototype.Ba=function(){Lr(this.g,"a")},Zf.prototype.Aa=function(n){Lr(this.g,new ZR(n))},Zf.prototype.za=function(n){Lr(this.g,new jC)},Zf.prototype.ya=function(){Lr(this.g,"b")},Yr(Vo,function X2(){this.blockSize=-1}),Vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)j0(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){j0(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){j0(this,r),i=0;break}}this.h=i,this.i+=e},Vo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var eL={};function $0(n){return-128<=n&&128>n?function L2(n,e){var t=eL;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Tn([0|e],0>e?-1:0)}):new Tn([0|n],0>n?-1:0)}function ga(n){if(isNaN(n)||!isFinite(n))return Kf;if(0>n)return Ti(ga(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=GC;return new Tn(e,0)}var GC=4294967296,Kf=$0(0),r_=$0(1),i_=$0(16777216);function Xa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function fo(n){return-1==n.h}function Ti(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Tn(t,~n.h).add(r_)}function s_(n,e){return n.add(Ti(e))}function o_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Yf(n,e){this.g=n,this.h=e}function a_(n,e){if(Xa(e))throw Error("division by zero");if(Xa(n))return new Yf(Kf,Kf);if(fo(n))return e=a_(Ti(n),e),new Yf(Ti(e.g),Ti(e.h));if(fo(e))return e=a_(n,Ti(e)),new Yf(Ti(e.g),e.h);if(30<n.g.length){if(fo(n)||fo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=r_,r=e;0>=r.X(n);)t=HC(t),r=HC(r);var i=Qf(t,1),s=Qf(r,1);for(r=Qf(r,2),t=Qf(t,2);!Xa(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Qf(r,1),t=Qf(t,1)}return e=s_(n,i.R(e)),new Yf(i,e)}for(i=Kf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ga(t)).R(e);fo(o)||0<o.X(n);)o=(s=ga(t-=r)).R(e);Xa(s)&&(s=r_),i=i.add(s),n=s_(n,o)}return new Yf(i,n)}function HC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Tn(t,n.h)}function Qf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Tn(i,n.h)}(ht=Tn.prototype).ea=function(){if(fo(this))return-Ti(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:GC+r)*e,e*=GC}return n},ht.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Xa(this))return"0";if(fo(this))return"-"+Ti(this).toString(n);for(var e=ga(Math.pow(n,6)),t=this,r="";;){var i=a_(t,e).g,s=((0<(t=s_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Xa(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ht.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ht.X=function(n){return fo(n=s_(this,n))?-1:Xa(n)?0:1},ht.abs=function(){return fo(this)?Ti(this):this},ht.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Tn(t,-2147483648&t[t.length-1]?-1:0)},ht.R=function(n){if(Xa(this)||Xa(n))return Kf;if(fo(this))return fo(n)?Ti(this).R(Ti(n)):Ti(Ti(this).R(n));if(fo(n))return Ti(this.R(Ti(n)));if(0>this.X(i_)&&0>n.X(i_))return ga(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),d=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=o*f,o_(t,2*r+2*i),t[2*r+2*i+1]+=s*f,o_(t,2*r+2*i+1),t[2*r+2*i+1]+=o*d,o_(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,o_(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Tn(t,0)},ht.gb=function(n){return a_(this,n).h},ht.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Tn(t,this.h&n.h)},ht.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Tn(t,this.h|n.h)},ht.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Tn(t,this.h^n.h)},Wf.prototype.createWebChannel=Wf.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,wd.NO_ERROR=0,wd.TIMEOUT=8,wd.HTTP_ERROR=6,yC.COMPLETE="complete",ER.EventType=Vu,Vu.OPEN="a",Vu.CLOSE="b",Vu.ERROR="c",Vu.MESSAGE="d",Un.prototype.listen=Un.prototype.O,Cr.prototype.listenOnce=Cr.prototype.P,Cr.prototype.getLastError=Cr.prototype.Sa,Cr.prototype.getLastErrorCode=Cr.prototype.Ia,Cr.prototype.getStatus=Cr.prototype.da,Cr.prototype.getResponseJson=Cr.prototype.Wa,Cr.prototype.getResponseText=Cr.prototype.ja,Cr.prototype.send=Cr.prototype.ha,Cr.prototype.setWithCredentials=Cr.prototype.Oa,Vo.prototype.digest=Vo.prototype.l,Vo.prototype.reset=Vo.prototype.reset,Vo.prototype.update=Vo.prototype.j,Tn.prototype.add=Tn.prototype.add,Tn.prototype.multiply=Tn.prototype.R,Tn.prototype.modulo=Tn.prototype.gb,Tn.prototype.compare=Tn.prototype.X,Tn.prototype.toNumber=Tn.prototype.ea,Tn.prototype.toString=Tn.prototype.toString,Tn.prototype.getBits=Tn.prototype.D,Tn.fromNumber=ga,Tn.fromString=function $C(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ti($C(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ga(Math.pow(e,8)),r=Kf,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=ga(Math.pow(e,s)),r=r.R(s).add(ga(o))):r=(r=r.R(t)).add(ga(o))}return r};var tL=Mo.createWebChannelTransport=function(){return new Wf},nL=Mo.getStatEventTarget=function(){return _C()},qC=Mo.ErrorCode=wd,rL=Mo.EventType=yC,iL=Mo.Event=Bf,KR=Mo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},G0=(Mo.FetchXmlHttpFactory=xc,Mo.WebChannel=ER),sL=Mo.XhrIo=Cr,oL=Mo.Md5=Vo,Jf=Mo.Integer=Tn;const YR="@firebase/firestore";class Ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let Xf="10.4.0";const Nc=new Zn.Yd("@firebase/firestore");function ep(){return Nc.logLevel}function Ge(n,...e){if(Nc.logLevel<=Zn.in.DEBUG){const t=e.map(H0);Nc.debug(`Firestore (${Xf}): ${n}`,...t)}}function br(n,...e){if(Nc.logLevel<=Zn.in.ERROR){const t=e.map(H0);Nc.error(`Firestore (${Xf}): ${n}`,...t)}}function Ks(n,...e){if(Nc.logLevel<=Zn.in.WARN){const t=e.map(H0);Nc.warn(`Firestore (${Xf}): ${n}`,...t)}}function H0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${Xf}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function Et(n,e){n||_t()}function rt(n,e){return n}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ci.UNAUTHENTICATED))}shutdown(){}}class cL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tp{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const g=o;e.enqueueRetryable((0,j.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},f=g=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new kc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Ci(e)}}class x9{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zC{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new x9(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.R=t.token,new lL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function P9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Pd{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=P9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function np(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Ln(0,0))}static max(){return new Tt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mc{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Mc{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const Ys=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends Mc{construct(e,t,r){return new Fr(e,t,r)}static isValidIdentifier(e){return Ys.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new je(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new je(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new je(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(o=!o,i++):"."!==d||o?(r+=d,i++):(s(),i++)}if(s(),o)throw new je(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(cn.fromString(e))}static fromName(e){return new it(cn.fromString(e).popFirst(5))}static empty(){return new it(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new cn(e.slice()))}}function nx(n){return new Wi(n.readTime,n.key,-1)}class Wi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wi(Tt.min(),it.empty(),-1)}static max(){return new Wi(Tt.max(),it.empty(),-1)}}function ZC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(n){return q0.apply(this,arguments)}function q0(){return q0=(0,j.Z)(function*(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==rx)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),q0.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,o=!1;e.forEach(d=>{++i,d.next(()=>{++s,o&&s===i&&t()},f=>r(f))}),o=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,o=new Array(s);let d=0;for(let f=0;f<s;f++){const g=f;t(e[g]).next(y=>{o[g]=y,++d,d===s&&r(o)},y=>i(y))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Fc(n){return"IndexedDbTransactionError"===n.name}let Qs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function l_(n){return null==n}function d_(n){return 0===n&&1/n==-1/0}function eA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ip(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ip(this.root,e,this.comparator,!1)}getReverseIterator(){return new ip(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ip(this.root,e,this.comparator,!0)}}class ip{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Zi.RED,this.left=i??Zi.EMPTY,this.right=s??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dx(this.data.getIterator())}getIteratorFrom(e){return new dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Js{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new Js([])}unionWith(e){let t=new Bn(Fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return np(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hx("Invalid base64 string: "+s):s}}(e);return new li(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const SL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uc(n){if(Et(!!n),"string"==typeof n){let e=0;const t=SL.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function eu(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function Z0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function K0(n){const e=n.mapValue.fields.__previous_value__;return Z0(e)?K0(e):e}function op(n){const e=Uc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class DL{constructor(e,t,r,i,s,o,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g}}class Md{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Md("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Md&&e.projectId===this.projectId&&e.database===this.database}}const Bc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function tu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Z0(n)?4:gx(n)?9007199254740991:10:_t()}function Uo(n,e){if(n===e)return!0;const t=tu(n);if(t!==tu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return op(n).isEqual(op(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Uc(i.timestampValue),d=Uc(s.timestampValue);return o.seconds===d.seconds&&o.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,eu(n.bytesValue).isEqual(eu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return mr(i.geoPointValue.latitude)===mr(s.geoPointValue.latitude)&&mr(i.geoPointValue.longitude)===mr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mr(i.integerValue)===mr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mr(i.doubleValue),d=mr(s.doubleValue);return o===d?d_(o)===d_(d):isNaN(o)&&isNaN(d)}return!1}(n,e);case 9:return np(n.arrayValue.values||[],e.arrayValue.values||[],Uo);case 10:return function(i,s){const o=i.mapValue.fields||{},d=s.mapValue.fields||{};if(eA(o)!==eA(d))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===d[f]||!Uo(o[f],d[f])))return!1;return!0}(n,e);default:return _t()}var s}function ap(n,e){return void 0!==(n.values||[]).find(t=>Uo(t,e))}function nu(n,e){if(n===e)return 0;const t=tu(n),r=tu(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const d=mr(s.integerValue||s.doubleValue),f=mr(o.integerValue||o.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return fx(n.timestampValue,e.timestampValue);case 4:return fx(op(n),op(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(s,o){const d=eu(s),f=eu(o);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const d=s.split("/"),f=o.split("/");for(let g=0;g<d.length&&g<f.length;g++){const y=Bt(d[g],f[g]);if(0!==y)return y}return Bt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const d=Bt(mr(s.latitude),mr(o.latitude));return 0!==d?d:Bt(mr(s.longitude),mr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const d=s.values||[],f=o.values||[];for(let g=0;g<d.length&&g<f.length;++g){const y=nu(d[g],f[g]);if(y)return y}return Bt(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Bc.mapValue&&o===Bc.mapValue)return 0;if(s===Bc.mapValue)return 1;if(o===Bc.mapValue)return-1;const d=s.fields||{},f=Object.keys(d),g=o.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const b=Bt(f[E],y[E]);if(0!==b)return b;const R=nu(d[f[E]],g[y[E]]);if(0!==R)return R}return Bt(f.length,y.length)}(n.mapValue,e.mapValue);default:throw _t()}}function fx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Uc(n),r=Uc(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function up(n){return g_(n)}function g_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Uc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?eu(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=g_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${g_(t.fields[o])}`;return i+"}"}(n.mapValue):_t()}function jc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bu(n){return!!n&&"integerValue"in n}function cp(n){return!!n&&"arrayValue"in n}function px(n){return!!n&&"nullValue"in n}function RL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lp(n){return!!n&&"mapValue"in n}function Od(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Od(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Od(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gx(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Od(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((o,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}o?r[d.lastSegment()]=Od(o):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());lp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new di(Od(this.value))}}function nA(n){const e=[];return Vc(n.fields,(t,r)=>{const i=new Fr([t]);if(lp(r)){const s=nA(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Js(e)}class qn{constructor(e,t,r,i,s,o,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=d}static newInvalidDocument(e){return new qn(e,0,Tt.min(),Tt.min(),Tt.min(),di.empty(),0)}static newFoundDocument(e,t,r,i){return new qn(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new qn(e,2,t,Tt.min(),Tt.min(),di.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Tt.min(),Tt.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ju{constructor(e,t){this.position=e,this.inclusive=t}}function rA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?it.comparator(it.fromName(o.referenceValue),t.key):nu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vx(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Uo(n.position[t],e.position[t]))return!1;return!0}class dp{constructor(e,t="asc"){this.field=e,this.dir=t}}function xL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ix{}class ln extends Ix{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new NL(e,t,r):"array-contains"===t?new OL(e,r):"in"===t?new Ax(e,r):"not-in"===t?new LL(e,r):"array-contains-any"===t?new FL(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kL(e,r):new ML(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nu(t,this.value)):null!==t&&tu(this.value)===tu(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends Ix{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Fn(e,t)}matches(e){return Ld(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ld(n){return"and"===n.op}function sA(n){return function PL(n){for(const e of n.filters)if(e instanceof Fn)return!1;return!0}(n)&&Ld(n)}function oA(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+up(n.value);if(sA(n))return n.filters.map(e=>oA(e)).join(",");{const e=n.filters.map(t=>oA(t)).join(",");return`${n.op}(${e})`}}function Ex(n,e){return n instanceof ln?(r=n,(i=e)instanceof ln&&r.op===i.op&&r.field.isEqual(i.field)&&Uo(r.value,i.value)):n instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,d)=>s&&Ex(o,i.filters[d]),!0)}(n,e):void _t();var r,i}function Tx(n){return n instanceof ln?`${(t=n).field.canonicalString()} ${t.op} ${up(t.value)}`:n instanceof Fn?function(t){return t.op.toString()+" {"+t.getFilters().map(Tx).join(" ,")+"}"}(n):"Filter";var t}class NL extends ln{constructor(e,t,r){super(e,t,r),this.key=it.fromName(r.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class kL extends ln{constructor(e,t){super(e,"in",t),this.keys=Cx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ML extends ln{constructor(e,t){super(e,"not-in",t),this.keys=Cx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>it.fromName(r.referenceValue))}class OL extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cp(t)&&ap(t.arrayValue,this.value)}}class Ax extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ap(this.value.arrayValue,t)}}class LL extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ap(this.value.arrayValue,t)}}class FL extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ap(this.value.arrayValue,r))}}class m_{constructor(e,t=null,r=[],i=[],s=null,o=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=d,this.he=null}}function J0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new m_(n,e,t,r,i,s,o)}function $c(n){const e=rt(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),l_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>up(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>up(r)).join(",")),e.he=t}return e.he}function hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ex(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vx(n.startAt,e.startAt)&&vx(n.endAt,e.endAt)}function __(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Gc{constructor(e,t=null,r=[],i=[],s=null,o="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=d,this.endAt=f,this.Pe=null,this.Ie=null,this.de=null}}function Fd(n){return new Gc(n)}function Sx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function X0(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function cA(n){return null!==n.collectionGroup}function ru(n){const e=rt(n);if(null===e.Pe){e.Pe=[];const t=X0(e),r=uA(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new dp(t)),e.Pe.push(new dp(Fr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new dp(Fr.keyField(),s))}}}return e.Pe}function Ps(n){const e=rt(n);return e.Ie||(e.Ie=function eI(n,e){if("F"===n.limitType)return J0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new dp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ju(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ju(n.startAt.position,n.startAt.inclusive):null;return J0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,ru(n))),e.Ie}function lA(n,e){e.getFirstInequalityField(),X0(n);const t=n.filters.concat([e]);return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dA(n,e,t){return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function v_(n,e){return hp(Ps(n),Ps(e))&&n.limitType===e.limitType}function UL(n){return`${$c(Ps(n))}|lt:${n.limitType}`}function iu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Tx(i)).join(", ")}]`),l_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>up(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>up(i)).join(",")),`Target(${r})`}(Ps(n))}; limitType=${n.limitType})`}function I_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):it.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ru(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,d,f){const g=rA(o,d,f);return o.inclusive?g<=0:g<0}(r.startAt,ru(r),i)||r.endAt&&!function(o,d,f){const g=rA(o,d,f);return o.inclusive?g>=0:g>0}(r.endAt,ru(r),i)));var r,i}function Rx(n){return(e,t)=>{let r=!1;for(const i of ru(n)){const s=tI(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function tI(n,e,t){const r=n.field.isKeyField()?it.comparator(e.key,t.key):function(s,o,d){const f=o.data.field(s),g=d.data.field(s);return null!==f&&null!==g?nu(f,g):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}class su{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}}const BL=new Hn(it.comparator);function Ns(){return BL}const E_=new Hn(it.comparator);function w_(...n){let e=E_;for(const t of n)e=e.insert(t.key,t);return e}function xx(n){let e=E_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function va(){return T_()}function Px(){return T_()}function T_(){return new su(n=>n.toString(),(n,e)=>n.isEqual(e))}const Nx=new Hn(it.comparator),nI=new Bn(it.comparator);function Kt(...n){let e=nI;for(const t of n)e=e.add(t);return e}const jL=new Bn(Bt);function hA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d_(e)?"-0":e}}function iI(n){return{integerValue:""+n}}function fA(n,e){return function gL(n){return"number"==typeof n&&Number.isInteger(n)&&!d_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?iI(e):hA(n,e)}class sI{constructor(){this._=void 0}}function kx(n,e,t){return n instanceof fp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Z0(s)&&(s=K0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof $u?oI(n,e):n instanceof Hc?aI(n,e):function(i,s){const o=Ox(i,s),d=Lx(o)+Lx(i.Te);return Bu(o)&&Bu(i.Te)?iI(d):hA(i.serializer,d)}(n,e)}function Mx(n,e,t){return n instanceof $u?oI(n,e):n instanceof Hc?aI(n,e):t}function Ox(n,e){return n instanceof qc?Bu(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class fp extends sI{}class $u extends sI{constructor(e){super(),this.elements=e}}function oI(n,e){const t=Fx(e);for(const r of n.elements)t.some(i=>Uo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hc extends sI{constructor(e){super(),this.elements=e}}function aI(n,e){let t=Fx(e);for(const r of n.elements)t=t.filter(i=>!Uo(i,r));return{arrayValue:{values:t}}}class qc extends sI{constructor(e,t){super(),this.serializer=e,this.Te=t}}function Lx(n){return mr(n.integerValue||n.doubleValue)}function Fx(n){return cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vx{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function A_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class b_{}function pA(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gp(n.key,zn.none()):new pp(n.key,n.data,zn.none());{const t=n.data,r=di.empty();let i=new Bn(Fr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ou(n.key,r,new Js(i.toArray()),zn.none())}}function Ux(n,e,t){n instanceof pp?function(i,s,o){const d=i.value.clone(),f=us(i.fieldTransforms,s,o.transformResults);d.setAll(f),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ou?function(i,s,o){if(!A_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const d=us(i.fieldTransforms,s,o.transformResults),f=s.data;f.setAll(mA(i)),f.setAll(d),s.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function S_(n,e,t,r){return n instanceof pp?function(s,o,d,f){if(!A_(s.precondition,o))return d;const g=s.value.clone(),y=Vd(s.fieldTransforms,f,o);return g.setAll(y),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof ou?function(s,o,d,f){if(!A_(s.precondition,o))return d;const g=Vd(s.fieldTransforms,f,o),y=o.data;return y.setAll(mA(s)),y.setAll(g),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(E=>E.field))}(n,e,t,r):(d=t,A_(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):d);var o,d}function Bx(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Ox(r.transform,i||null);null!=s&&(null===t&&(t=di.empty()),t.set(r.field,s))}return t||null}function gA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&np(r,i,(s,o)=>function $L(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof $u&&i instanceof $u||r instanceof Hc&&i instanceof Hc?np(r.elements,i.elements,Uo):r instanceof qc&&i instanceof qc?Uo(r.Te,i.Te):r instanceof fp&&i instanceof fp);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class pp extends b_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ou extends b_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function us(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,d=e.data.field(s.field);r.set(s.field,Mx(o,d,t[i]))}return r}function Vd(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,kx(s,o,e))}return r}class gp extends b_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends b_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ux(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=S_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=S_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Px();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let d=this.applyToLocalView(o,s.mutatedFields);d=t.has(i.key)?null:d;const f=pA(o,d);null!==f&&r.set(i.key,f),o.isValidDocument()||o.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&np(this.mutations,e.mutations,(t,r)=>gA(t,r))&&np(this.baseMutations,e.baseMutations,(t,r)=>gA(t,r))}}class $x{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=Nx;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $x(e,t,r,i)}}class uI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class O9{constructor(e,t){this.count=e,this.unchangedNames=t}}var hi,wn;function Gx(n){if(void 0===n)return br("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case hi.OK:return Ie.OK;case hi.CANCELLED:return Ie.CANCELLED;case hi.UNKNOWN:return Ie.UNKNOWN;case hi.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case hi.INTERNAL:return Ie.INTERNAL;case hi.UNAVAILABLE:return Ie.UNAVAILABLE;case hi.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case hi.NOT_FOUND:return Ie.NOT_FOUND;case hi.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case hi.ABORTED:return Ie.ABORTED;case hi.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case hi.DATA_LOSS:return Ie.DATA_LOSS;default:return _t()}}(wn=hi||(hi={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";const qx=new Jf([4294967295,4294967295],0);function zx(n){const e=function Hx(){return new TextEncoder}().encode(n),t=new oL;return t.update(e),new Uint8Array(t.digest())}function Wx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jf([t,r],0),new Jf([i,s],0)]}class vA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ud(`Invalid padding: ${t}`);if(r<0)throw new Ud(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ud(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ud(`Invalid padding when bitmap length is 0: ${t}`);this.Ae=8*e.length-t,this.Re=Jf.fromNumber(this.Ae)}Ve(e,t,r){let i=e.add(t.multiply(Jf.fromNumber(r)));return 1===i.compare(qx)&&(i=new Jf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const t=zx(e),[r,i]=Wx(t);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vA(s,i,t);return r.forEach(d=>o.insert(d)),o}insert(e){if(0===this.Ae)return;const t=zx(e),[r,i]=Wx(t);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,D_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yp(Tt.min(),i,new Hn(Bt),Ns(),Kt())}}class D_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new D_(r,t,Kt(),Kt(),Kt())}}class Bd{constructor(e,t,r,i){this.ge=e,this.removedTargetIds=t,this.key=r,this.pe=i}}class cI{constructor(e,t){this.targetId=e,this.ye=t}}class GL{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class IA{constructor(){this.we=0,this.Se=jd(),this.be=li.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=Kt(),t=Kt(),r=Kt();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_t()}}),new D_(this.be,this.De,e,t,r)}Oe(){this.Ce=!1,this.Se=jd()}Ne(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class HL{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ns(),this.Ue=EA(),this.We=new Hn(Bt)}Ge(e){for(const t of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(t,e.pe):this.je(t,e.key,e.pe);for(const t of e.removedTargetIds)this.je(t,e.key,e.pe)}He(e){this.forEachTarget(e,t=>{const r=this.Je(t);switch(e.state){case 0:this.Ye(t)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(t);break;case 3:this.Ye(t)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(t)&&(this.Ze(t),r.Me(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((r,i)=>{this.Ye(i)&&t(i)})}Xe(e){const t=e.targetId,r=e.ye.count,i=this.et(t);if(i){const s=i.target;if(__(s))if(0===r){const o=new it(s.path);this.je(t,o,qn.newNoDocument(o,Tt.min()))}else Et(1===r);else{const o=this.tt(t);if(o!==r){const d=this.nt(e),f=d?this.rt(d,e,o):1;0!==f&&(this.Ze(t),this.We=this.We.insert(t,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const t=e.ye.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,d;try{o=eu(r).toUint8Array()}catch(f){if(f instanceof hx)return Ks("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new vA(o,i,s)}catch(f){return Ks(f instanceof Ud?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return 0===d.Ae?null:d}rt(e,t,r){return t.ye.count===r-this.ot(e,t.targetId)?0:2}ot(e,t){const r=this.Qe.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Qe.st(),d=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(d)||(this.je(t,s,null),i++)}),i}_t(e){const t=new Map;this.Ke.forEach((s,o)=>{const d=this.et(o);if(d){if(s.current&&__(d.target)){const f=new it(d.target.path);null!==this.$e.get(f)||this.ut(o,f)||this.je(o,f,qn.newNoDocument(f,e))}s.Fe&&(t.set(o,s.xe()),s.Oe())}});let r=Kt();this.Ue.forEach((s,o)=>{let d=!0;o.forEachWhile(f=>{const g=this.et(f);return!g||"TargetPurposeLimboResolution"===g.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new yp(e,t,this.We,this.$e,r);return this.$e=Ns(),this.Ue=EA(),this.We=new Hn(Bt),i}ze(e,t){if(!this.Ye(e))return;const r=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,r),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}je(e,t,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,t)?i.Ne(t,1):i.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),r&&(this.$e=this.$e.insert(t,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let t=this.Ke.get(e);return t||(t=new IA,this.Ke.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Bn(Bt),this.Ue=this.Ue.insert(e,t)),t}Ye(e){const t=null!==this.et(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}et(e){const t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new IA),this.Qe.getRemoteKeysForTarget(e).forEach(t=>{this.je(e,t,null)})}ut(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}function EA(){return new Hn(it.comparator)}function jd(){return new Hn(it.comparator)}const qL={asc:"ASCENDING",desc:"DESCENDING"},Zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wA={and:"AND",or:"OR"};class L9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TA(n,e){return n.useProto3Json||l_(e)?e:{value:e}}function R_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zL(n,e){return R_(n,e.toTimestamp())}function Vr(n){return Et(!!n),Tt.fromTimestamp(function(t){const r=Uc(t);return new Ln(r.seconds,r.nanos)}(n))}function lI(n,e){return(r=n,new cn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function CA(n){const e=cn.fromString(n);return Et(fI(e)),e}function x_(n,e){return lI(n.databaseId,e.path)}function Ia(n,e){const t=CA(e);if(t.get(1)!==n.databaseId.projectId)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(AA(t))}function dI(n,e){return lI(n.databaseId,e)}function P_(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AA(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Qx(n,e,t){return{name:x_(n,e),fields:t.value.mapValue.fields}}function ZL(n,e){return{documents:[dI(n,e.path)]}}function hI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return QL(Fn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(g=>{return{field:$d((E=g).field),direction:V9(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=TA(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),t;var f}function KL(n){let e=function Yx(n){const e=CA(n);return 4===e.length?cn.emptyPath():AA(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(1===r);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=function(E){const b=YL(E);return b instanceof Fn&&sA(b)?b.getFilters():[b]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(b=>{return new dp(N_((V=b).field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction));var V}));let d=null;t.limit&&(d=function(E){let b;return b="object"==typeof E?E.value:E,l_(b)?null:b}(t.limit));let f=null;var E;t.startAt&&(f=new ju((E=t.startAt).values||[],!!E.before));let g=null;return t.endAt&&(g=function(E){return new ju(E.values||[],!E.before)}(t.endAt)),function VL(n,e,t,r,i,s,o,d){return new Gc(n,e,t,r,i,s,o,d)}(e,i,o,s,d,"F",f,g)}function YL(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=N_(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=N_(t.unaryFilter.field);return ln.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=N_(t.unaryFilter.field);return ln.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=N_(t.unaryFilter.field);return ln.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(n):void 0!==n.fieldFilter?ln.create(N_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Fn.create(t.compositeFilter.filters.map(r=>YL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _t()}}(t.compositeFilter.op))}(n):_t();var t}function V9(n){return qL[n]}function U9(n){return Zx[n]}function B9(n){return wA[n]}function $d(n){return{fieldPath:n.canonicalString()}}function N_(n){return Fr.fromServerFormat(n.fieldPath)}function QL(n){return n instanceof ln?function(t){if("=="===t.op){if(RL(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NAN"}};if(px(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(RL(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NOT_NAN"}};if(px(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$d(t.field),op:U9(t.op),value:t.value}}}(n):n instanceof Fn?function(t){const r=t.getFilters().map(i=>QL(i));return 1===r.length?r[0]:{compositeFilter:{op:B9(t.op),filters:r}}}(n):_t()}function eP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class au{constructor(e,t,r,i,s=Tt.min(),o=Tt.min(),d=li.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tP{constructor(e){this.ht=e}}function RA(n){const e=KL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dA(e,e.limit,"L"):e}class Hd{constructor(){}dt(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.At(t,13):(this.At(t,15),d_(r)?t.Rt(0):t.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt(`${r.seconds||""}`),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(eu(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(t,45),t.Rt(r.latitude||0),t.Rt(r.longitude||0)}else"mapValue"in e?gx(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):_t()}ft(e,t){this.At(t,25),this.Dt(e,t)}Dt(e,t){t.Vt(e)}St(e,t){const r=e.fields||{};this.At(t,55);for(const i of Object.keys(r))this.ft(i,t),this.Tt(r[i],t)}bt(e,t){const r=e.values||[];this.At(t,50);for(const i of r)this.Tt(i,t)}wt(e,t){this.At(t,37),it.fromName(e).path.forEach(r=>{this.At(t,60),this.Dt(r,t)})}At(e,t){e.Rt(t)}gt(e){e.Rt(2)}}Hd.Ct=new Hd;class fP{constructor(){this.an=new II}addToCollectionParentIndex(e,t){return this.an.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Wi.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class II{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(cn.comparator)).toArray()}}new Uint8Array(0);class cs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class Tp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Tp(0)}static Ln(){return new Tp(-1)}}class bI{constructor(){this.changes=new su(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class j9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&S_(r.mutation,i,Js.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=va();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=w_();return s.forEach((d,f)=>{o=o.insert(d,f.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=va();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,d)=>{t.set(o,d)})})}computeViews(e,t,r,i){let s=Ns();const o=T_(),d=T_();return t.forEach((f,g)=>{const y=r.get(g.key);i.has(g.key)&&(void 0===y||y.mutation instanceof ou)?s=s.insert(g.key,g):void 0!==y?(o.set(g.key,y.mutation.getFieldMask()),S_(y.mutation,g,y.mutation.getFieldMask(),Ln.now())):o.set(g.key,Js.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((g,y)=>o.set(g,y)),t.forEach((g,y)=>{var E;return d.set(g,new j9(y,null!==(E=o.get(g))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(e,t){const r=T_();let i=new Hn((o,d)=>o-d),s=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const d of o)d.keys().forEach(f=>{const g=t.get(f);if(null===g)return;let y=r.get(f)||Js.empty();y=d.applyToLocalView(g,y),r.set(f,y);const E=(i.get(d.batchId)||Kt()).add(f);i=i.insert(d.batchId,E)})}).next(()=>{const o=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,y=f.value,E=Px();y.forEach(b=>{if(!s.has(b)){const R=pA(t.get(b),r.get(b));null!==R&&E.set(b,R),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,g,E))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return it.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(va());let d=-1,f=s;return o.next(g=>le.forEach(g,(y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(y)?le.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,f,g,Kt())).next(y=>({batchId:d,changes:xx(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(r=>{let i=w_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=w_();return this.indexManager.getCollectionParents(e,s).next(d=>le.forEach(d,f=>{const g=(E=t,b=f.child(s),new Gc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,b;return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(y=>{y.forEach((E,b)=>{o=o.insert(E,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((f,g)=>{const y=g.getKey();null===o.get(y)&&(o=o.insert(y,qn.newInvalidDocument(y)))});let d=w_();return o.forEach((f,g)=>{const y=s.get(f);void 0!==y&&S_(y.mutation,g,Js.empty(),Ln.now()),I_(t,g)&&(d=d.insert(f,g))}),d})}}class $9{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return le.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:Vr(i.createTime)}),le.resolve();var i}getNamedQuery(e,t){return le.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:RA(i.bundledQuery),readTime:Vr(i.readTime)}),le.resolve();var i}}class CP{constructor(){this.overlays=new Hn(it.comparator),this.Pr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=va();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.It(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=va(),s=t.length+1,o=new it(t.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Hn((g,y)=>g-y);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=s.get(g.largestBatchId);null===y&&(y=va(),s=s.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=va(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,y)=>d.set(g,y)),!(d.size()>=i)););return le.resolve(d)}It(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uI(t,r));let s=this.Pr.get(t);void 0===s&&(s=Kt(),this.Pr.set(t,s)),this.Pr.set(t,s.add(r.key))}}class LA{constructor(){this.Ir=new Bn(Ai.dr),this.Tr=new Bn(Ai.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new Ai(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new it(new cn([])),r=new Ai(t,e),i=new Ai(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const t=new it(new cn([])),r=new Ai(t,e),i=new Ai(t,e+1);let s=Kt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ai(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.yr=t}static dr(e,t){return it.comparator(e.key,t.key)||Bt(e.yr,t.yr)}static Er(e,t){return Bt(e.yr,t.yr)||it.comparator(e.key,t.key)}}class aF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Bn(Ai.dr)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.wr;this.wr++;const o=new jx(s,t,r,i);this.mutationQueue.push(o);for(const d of i)this.Sr=this.Sr.add(new Ai(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,t){return le.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const d=this.br(o.yr);s.push(d)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Bt);return t.forEach(i=>{const s=new Ai(i,0),o=new Ai(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],d=>{r=r.add(d.yr)})}),le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;it.isDocumentKey(s)||(s=s.child(""));const o=new Ai(new it(s),0);let d=new Bn(Bt);return this.Sr.forEachWhile(f=>{const g=f.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(d=d.add(f.yr)),!0)},o),le.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Et(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return le.forEach(t.mutations,i=>{const s=new Ai(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new Ai(t,0),i=this.Sr.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class G9{constructor(e){this.Fr=e,this.docs=new Hn(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Ns();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qn.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ns();const o=t.path,d=new it(o.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!o.isPrefixOf(g.path))break;g.path.length>o.length+1||ZC(nx(y),r)<=0||(i.has(y.key)||I_(t,y))&&(s=s.insert(y.key,y.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){_t()}Mr(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new H9(this)}getSize(e){return le.resolve(this.size)}}class H9 extends bI{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class q9{constructor(e){this.persistence=e,this.Or=new su(t=>$c(t),hp),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Nr=0,this.Br=new LA,this.targetCount=0,this.Lr=Tp.Bn()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),le.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Tp(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Qn(t),le.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Or.forEach((o,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Ar(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Br.Vr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.mr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.pr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Br.containsKey(t))}}class AP{constructor(e,t){this.kr={},this.overlays={},this.qr=new Qs(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new q9(this),this.indexManager=new fP,this.remoteDocumentCache=new G9(r=>this.referenceDelegate.$r(r)),this.serializer=new tP(t),this.Ur=new $9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new aF(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new z9(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,t){return le.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class z9 extends hL{constructor(e){super(),this.currentSequenceNumber=e}}class SI{constructor(e){this.persistence=e,this.jr=new LA,this.Hr=null}static Jr(e){return new SI(e)}get Yr(){if(this.Hr)return this.Hr;throw _t()}addReference(e,t,r){return this.jr.addReference(r,t),this.Yr.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.jr.removeReference(r,t),this.Yr.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Yr.add(t.toString()),le.resolve()}removeTarget(e,t){this.jr.mr(t.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Wr(){this.Hr=new Set}Gr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Yr,r=>{const i=it.fromPath(r);return this.Zr(e,i).next(s=>{s||t.removeEntry(i,Tt.min())})}).next(()=>(this.Hr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zr(e,t).next(r=>{r?this.Yr.delete(t.toString()):this.Yr.add(t.toString())})}$r(e){return 0}Zr(e,t){return le.or([()=>le.resolve(this.jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zr(e,t)])}}class FA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Qi=r,this.Ki=i}static $i(e,t){let r=Kt(),i=Kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FA(e,t.fromCache,r,i)}}class VA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class RI{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Hi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VA;return this.Yi(e,t,o).next(d=>{if(s.result=d,this.Wi)return this.Zi(e,t,o,d.size)})}).next(()=>s.result)}Zi(e,t,r,i){return r.documentReadCount<this.Gi?(ep()<=Zn.in.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),le.resolve()):(ep()<=Zn.in.DEBUG&&Ge("QueryEngine","Query:",iu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(ep()<=Zn.in.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(t))):le.resolve())}Hi(e,t){if(Sx(t))return le.resolve(null);let r=Ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=dA(t,null,"F"),r=Ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Kt(...s);return this.ji.getDocuments(e,o).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const g=this.Xi(t,d);return this.es(t,g,o,f.readTime)?this.Hi(e,dA(t,null,"F")):this.ts(e,g,t,f)}))})))}Ji(e,t,r,i){return Sx(t)||i.isEqual(Tt.min())?le.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(t,s);return this.es(t,o,r,i)?le.resolve(null):(ep()<=Zn.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),iu(t)),this.ts(e,o,t,function tx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Wi(i,it.empty(),e)}(i,-1)).next(d=>d))})}Xi(e,t){let r=new Bn(Rx(e));return t.forEach((i,s)=>{I_(e,s)&&(r=r.add(s))}),r}es(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,t,r){return ep()<=Zn.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",iu(t)),this.ji.getDocumentsMatchingQuery(e,t,Wi.min(),r)}ts(e,t,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class xI{constructor(e,t,r,i){this.persistence=e,this.ns=t,this.serializer=i,this.rs=new Hn(Bt),this.ss=new su(s=>$c(s),hp),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oF(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.rs))}}function lF(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,j.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.us(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],d=[];let f=Kt();for(const g of i){o.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of s){d.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(g=>({cs:g,removedBatchIds:o,addedBatchIds:d}))})})}),SP.apply(this,arguments)}function RP(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Kr.getLastRemoteSnapshotVersion(t))}function hF(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yd(n,e,t){return PI.apply(this,arguments)}function PI(){return PI=(0,j.Z)(function*(n,e,t){const r=rt(n),i=r.rs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fc(o))throw o;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}),PI.apply(this,arguments)}function NI(n,e,t){const r=rt(n);let i=Tt.min(),s=Kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(f,g,y){const E=rt(f),b=E.ss.get(y);return void 0!==b?le.resolve(E.rs.get(b)):E.Kr.getTargetData(g,y)}(r,o,Ps(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,d.targetId).next(f=>{s=f})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,t?i:Tt.min(),t?s:Kt())).next(d=>(function kI(n,e,t){let r=n.os.get(e)||Tt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.os.set(e,r)}(r,function Dx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,Ps:s})))}class FI{constructor(){this.activeTargetIds=function rI(){return jL}()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MP{constructor(){this.ro=new FI,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,t,r){this.io[e]=t}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new FI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OP{so(e){}shutdown(){}}class GA{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let HA=null;function qA(){return null===HA?HA=268435456+Math.round(2147483648*Math.random()):HA++,"0x"+HA.toString(16)}const zA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LP{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const Yi="WebChannelConnection";class pF extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(t,r,i,s,o){const d=qA(),f=this.Do(t,r);Ge("RestConnection",`Sending RPC '${t}' ${d}:`,f,i);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(g,s,o),this.vo(t,f,g,i).then(y=>(Ge("RestConnection",`Received RPC '${t}' ${d}: `,y),y),y=>{throw Ks("RestConnection",`RPC '${t}' ${d} failed with error: `,y,"url: ",f,"request:",i),y})}Fo(t,r,i,s,o,d){return this.bo(t,r,i,s,o)}Co(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Xf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}Do(t,r){return`${this.po}/v1/${r}:${zA[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=qA();return new Promise((o,d)=>{const f=new sL;f.setWithCredentials(!0),f.listenOnce(rL.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case qC.NO_ERROR:const y=f.getResponseJson();Ge(Yi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),o(y);break;case qC.TIMEOUT:Ge(Yi,`RPC '${e}' ${s} timed out`),d(new je(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case qC.HTTP_ERROR:const E=f.getStatus();if(Ge(Yi,`RPC '${e}' ${s} failed with status:`,E,"response text:",f.getResponseText()),E>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b?.error;if(R&&R.status&&R.message){const V=function(Z){const fe=Z.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(fe)>=0?fe:Ie.UNKNOWN}(R.status);d(new je(V,R.message))}else d(new je(Ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new je(Ie.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ge(Yi,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);Ge(Yi,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",g,r,15)})}Mo(e,t,r){const i=qA(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tL(),d=nL(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Co(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=s.join("");Ge(Yi,`Creating RPC '${e}' stream ${i}: ${y}`,f);const E=o.createWebChannel(y,f);let b=!1,R=!1;const V=new LP({ho:Z=>{R?Ge(Yi,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(b||(Ge(Yi,`Opening RPC '${e}' stream ${i} transport.`),E.open(),b=!0),Ge(Yi,`RPC '${e}' stream ${i} sending:`,Z),E.send(Z))},Po:()=>E.close()}),q=(Z,fe,Se)=>{Z.listen(fe,ye=>{try{Se(ye)}catch(Le){setTimeout(()=>{throw Le},0)}})};return q(E,G0.EventType.OPEN,()=>{R||Ge(Yi,`RPC '${e}' stream ${i} transport opened.`)}),q(E,G0.EventType.CLOSE,()=>{R||(R=!0,Ge(Yi,`RPC '${e}' stream ${i} transport closed`),V.mo())}),q(E,G0.EventType.ERROR,Z=>{R||(R=!0,Ks(Yi,`RPC '${e}' stream ${i} transport errored:`,Z),V.mo(new je(Ie.UNAVAILABLE,"The operation could not be completed")))}),q(E,G0.EventType.MESSAGE,Z=>{var fe;if(!R){const Se=Z.data[0];Et(!!Se);const Le=Se.error||(null===(fe=Se[0])||void 0===fe?void 0:fe.error);if(Le){Ge(Yi,`RPC '${e}' stream ${i} received error:`,Le);const nt=Le.status;let at=function(fu){const iO=hi[fu];if(void 0!==iO)return Gx(iO)}(nt),rn=Le.message;void 0===at&&(at=Ie.INTERNAL,rn="Unknown error status: "+nt+" with message "+Le.message),R=!0,V.mo(new je(at,rn)),E.close()}else Ge(Yi,`RPC '${e}' stream ${i} received:`,Se),V.fo(Se)}}),q(d,iL.STAT_EVENT,Z=>{Z.stat===KR.PROXY?Ge(Yi,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===KR.NOPROXY&&Ge(Yi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.Vo()},0),V}}function UI(){return typeof document<"u"?document:null}function j_(n){return new L9(n,!0)}class BI{constructor(e,t,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=t,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const t=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class WA{constructor(e,t,r,i,s,o,d,f){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new BI(e,t)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return(0,j.Z)(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return(0,j.Z)(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,t){var r=this;return(0,j.Z)(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):t&&t.code===Ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(t)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),t=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===t&&this.__(r,i)},r=>{e(()=>{const i=new je(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,t){const r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo((0,j.Z)(function*(){e.state=0,e.start()}))}a_(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return t=>{this._i.enqueueAndForget(()=>this.Go===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z9 extends WA{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}u_(e,t){return this.connection.Mo("Listen",e,t)}onMessage(e){this.Ho.reset();const t=function Xx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:_t(),i=e.targetChange.targetIds||[],s=function(g,y){return g.useProto3Json?(Et(void 0===y||"string"==typeof y),li.fromBase64String(y||"")):(Et(void 0===y||y instanceof Uint8Array),li.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,d=o&&function(g){const y=void 0===g.code?Ie.UNKNOWN:Gx(g.code);return new je(y,g.message||"")}(o);t=new GL(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Ia(n,r.document.name),s=Vr(r.document.updateTime),o=r.document.createTime?Vr(r.document.createTime):Tt.min(),d=new di({mapValue:{fields:r.document.fields}}),f=qn.newFoundDocument(i,s,o,d);t=new Bd(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ia(n,r.document),s=r.readTime?Vr(r.readTime):Tt.min(),o=qn.newNoDocument(i,s);t=new Bd([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ia(n,r.document);t=new Bd([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _t();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new O9(i,s);t=new cI(r.targetId,o)}}var g;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Tt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Tt.min():o.readTime?Vr(o.readTime):Tt.min()}(e);return this.listener.c_(t,r)}l_(e){const t={};t.database=P_(this.serializer),t.addTarget=function(s,o){let d;const f=o.target;if(d=__(f)?{documents:ZL(s,f)}:{query:hI(s,f)},d.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){d.resumeToken=Kx(s,o.resumeToken);const g=TA(s,o.expectedCount);null!==g&&(d.expectedCount=g)}else if(o.snapshotVersion.compareTo(Tt.min())>0){d.readTime=R_(s,o.snapshotVersion.toTimestamp());const g=TA(s,o.expectedCount);null!==g&&(d.expectedCount=g)}return d}(this.serializer,e);const r=function F9(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.n_(t)}h_(e){const t={};t.database=P_(this.serializer),t.removeTarget=e,this.n_(t)}}class gF extends WA{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,t){return this.connection.Mo("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const t=function WL(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(i,s){let o=Vr(i.updateTime?i.updateTime:s);return o.isEqual(Tt.min())&&(o=Vr(s)),new Vx(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.T_(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=P_(this.serializer),this.n_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function vp(n,e){let t;if(e instanceof pp)t={update:Qx(n,e.key,e.value)};else if(e instanceof gp)t={delete:x_(n,e.key)};else if(e instanceof ou)t={update:Qx(n,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof _A))return _t();t={verify:x_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const d=o.transform;if(d instanceof fp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qc)return{fieldPath:o.field.canonicalString(),increment:d.Te};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:zL(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:_t()),t;var s}(this.serializer,r))};this.n_(t)}}class K9 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new je(Ie.UNKNOWN,i.toString())})}Fo(e,t,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(Ie.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class Y9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(br(t),this.p_=!1):Ge("OnlineStateTracker",t)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class _F{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(d=>{r.enqueueAndForget((0,j.Z)(function*(){var f;Qd(o)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,j.Z)(function*(y){const E=rt(y);E.F_.add(4),yield G_(E),E.O_.set("Unknown"),E.F_.delete(4),yield $_(E)}),function g(y){return f.apply(this,arguments)})(o))}))}),this.O_=new Y9(r,i)}}function $_(n){return VP.apply(this,arguments)}function VP(){return VP=(0,j.Z)(function*(n){if(Qd(n))for(const e of n.M_)yield e(!0)}),VP.apply(this,arguments)}function G_(n){return UP.apply(this,arguments)}function UP(){return UP=(0,j.Z)(function*(n){for(const e of n.M_)yield e(!1)}),UP.apply(this,arguments)}function ZA(n,e){const t=rt(n);t.v_.has(e.targetId)||(t.v_.set(e.targetId,e),jP(t)?BP(t):Qc(t).Yo()&&KA(t,e))}function jI(n,e){const t=rt(n),r=Qc(t);t.v_.delete(e),r.Yo()&&yF(t,e),0===t.v_.size&&(r.Yo()?r.e_():Qd(t)&&t.O_.set("Unknown"))}function KA(n,e){if(n.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qc(n).l_(e)}function yF(n,e){n.N_.Le(e),Qc(n).h_(e)}function BP(n){n.N_=new HL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.v_.get(e)||null,st:()=>n.datastore.serializer.databaseId}),Qc(n).start(),n.O_.y_()}function jP(n){return Qd(n)&&!Qc(n).Jo()&&n.v_.size>0}function Qd(n){return 0===rt(n).F_.size}function vF(n){n.N_=void 0}function IF(n){return $P.apply(this,arguments)}function $P(){return $P=(0,j.Z)(function*(n){n.v_.forEach((e,t)=>{KA(n,e)})}),$P.apply(this,arguments)}function a(n,e){return u.apply(this,arguments)}function u(){return u=(0,j.Z)(function*(n,e){vF(n),jP(n)?(n.O_.b_(e),BP(n)):n.O_.set("Unknown")}),u.apply(this,arguments)}function c(n,e,t){return h.apply(this,arguments)}function h(){return h=(0,j.Z)(function*(n,e,t){if(n.O_.set("Online"),e instanceof GL&&2===e.state&&e.cause)try{yield(r=(0,j.Z)(function*(s,o){const d=o.cause;for(const f of o.targetIds)s.v_.has(f)&&(yield s.remoteSyncer.rejectListen(f,d),s.v_.delete(f),s.N_.removeTarget(f))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield p(n,r)}else if(e instanceof Bd?n.N_.Ge(e):e instanceof cI?n.N_.Xe(e):n.N_.He(e),!t.isEqual(Tt.min()))try{const r=yield RP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const d=s.N_._t(o);return d.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=s.v_.get(g);y&&s.v_.set(g,y.withResumeToken(f.resumeToken,o))}}),d.targetMismatches.forEach((f,g)=>{const y=s.v_.get(f);if(!y)return;s.v_.set(f,y.withResumeToken(li.EMPTY_BYTE_STRING,y.snapshotVersion)),yF(s,f);const E=new au(y.target,f,g,y.sequenceNumber);KA(s,E)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield p(n,r)}var r}),h.apply(this,arguments)}function p(n,e,t){return m.apply(this,arguments)}function m(){return m=(0,j.Z)(function*(n,e,t){if(!Fc(e))throw e;n.F_.add(1),yield G_(n),n.O_.set("Offline"),t||(t=()=>RP(n.localStore)),n.asyncQueue.enqueueRetryable((0,j.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.F_.delete(1),yield $_(n)}))}),m.apply(this,arguments)}function I(n,e){return e().catch(t=>p(n,t,e))}function w(n){return A.apply(this,arguments)}function A(){return A=(0,j.Z)(function*(n){const e=rt(n),t=Jc(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;S(e);)try{const i=yield hF(e.localStore,r);if(null===i){0===e.C_.length&&t.e_();break}r=i.batchId,k(e,i)}catch(i){yield p(e,i)}H(e)&&te(e)}),A.apply(this,arguments)}function S(n){return Qd(n)&&n.C_.length<10}function k(n,e){n.C_.push(e);const t=Jc(n);t.Yo()&&t.I_&&t.d_(e.mutations)}function H(n){return Qd(n)&&!Jc(n).Jo()&&n.C_.length>0}function te(n){Jc(n).start()}function ue(n){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,j.Z)(function*(n){Jc(n).A_()}),Pe.apply(this,arguments)}function We(n){return st.apply(this,arguments)}function st(){return st=(0,j.Z)(function*(n){const e=Jc(n);for(const t of n.C_)e.d_(t.mutations)}),st.apply(this,arguments)}function Ct(n,e,t){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,j.Z)(function*(n,e,t){const r=n.C_.shift(),i=$x.from(r,e,t);yield I(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield w(n)}),Oe.apply(this,arguments)}function Vt(n,e){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,j.Z)(function*(n,e){var t;e&&Jc(n).I_&&(yield(t=(0,j.Z)(function*(i,s){if(function mp(n){switch(n){default:return _t();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}(d=s.code)&&d!==Ie.ABORTED){const o=i.C_.shift();Jc(i).Xo(),yield I(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield w(i)}var d}),function r(i,s){return t.apply(this,arguments)})(n,e)),H(n)&&te(n)}),Yt.apply(this,arguments)}function Nn(n,e){return ls.apply(this,arguments)}function ls(){return ls=(0,j.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t.F_.add(3),yield G_(t),r&&t.O_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.F_.delete(3),yield $_(t)}),ls.apply(this,arguments)}function Yc(){return Yc=(0,j.Z)(function*(n,e){const t=rt(n);e?(t.F_.delete(2),yield $_(t)):e||(t.F_.add(2),yield G_(t),t.O_.set("Unknown"))}),Yc.apply(this,arguments)}function Qc(n){return n.B_||(n.B_=function(t,r,i){const s=rt(t);return s.V_(),new Z9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Io:IF.bind(null,n),Eo:a.bind(null,n),c_:c.bind(null,n)}),n.M_.push(function(){var e=(0,j.Z)(function*(t){t?(n.B_.Xo(),jP(n)?BP(n):n.O_.set("Unknown")):(yield n.B_.stop(),vF(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Jc(n){return n.L_||(n.L_=function(t,r,i){const s=rt(t);return s.V_(),new gF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Io:ue.bind(null,n),Eo:Vt.bind(null,n),E_:We.bind(null,n),T_:Ct.bind(null,n)}),n.M_.push(function(){var e=(0,j.Z)(function*(t){t?(n.L_.Xo(),yield w(n)):(yield n.L_.stop(),n.C_.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.C_.length} pending writes`),n.C_=[]))});return function(t){return e.apply(this,arguments)}}())),n.L_}class YA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,d=new YA(e,t,o,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $I(n,e){if(br("AsyncQueue",`${e}: ${n}`),Fc(n))return new je(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}class GI{constructor(e){this.comparator=e?(t,r)=>e(t,r)||it.comparator(t.key,r.key):(t,r)=>it.comparator(t.key,r.key),this.keyedMap=w_(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new GI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof GI)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new GI;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Q9{constructor(){this.k_=new Hn(it.comparator)}track(e){const t=e.doc.key,r=this.k_.get(t);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(t):1===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):_t():this.k_=this.k_.insert(t,e)}q_(){const e=[];return this.k_.inorderTraversal((t,r)=>{e.push(r)}),e}}class HI{constructor(e,t,r,i,s,o,d,f,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(d=>{o.push({type:0,doc:d})}),new HI(e,t,GI.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ZX{constructor(){this.Q_=void 0,this.listeners=[]}}class KX{constructor(){this.queries=new su(e=>UL(e),v_),this.onlineState="Unknown",this.K_=new Set}}function wF(){return wF=(0,j.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new ZX),i)try{s.Q_=yield t.onListen(r)}catch(o){const d=$I(o,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.U_(t.onlineState),s.Q_&&e.W_(s.Q_)&&AF(t)}),wF.apply(this,arguments)}function CF(){return CF=(0,j.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),CF.apply(this,arguments)}function YX(n,e){const t=rt(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const d of o.listeners)d.W_(i)&&(r=!0);o.Q_=i}}r&&AF(t)}function QX(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function AF(n){n.K_.forEach(e=>{e.next()})}class bF{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new HI(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=HI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class eH{constructor(e){this.key=e}}class tH{constructor(e){this.key=e}}class nH{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Kt(),this.mutatedKeys=Kt(),this.ua=Rx(e),this.ca=new GI(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new Q9,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,E)=>{const b=i.get(y),R=I_(this.query,E)?E:null,V=!!b&&this.mutatedKeys.has(b.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Z=!1;b&&R?b.data.isEqual(R.data)?V!==q&&(r.track({type:3,doc:R}),Z=!0):this.Ia(b,R)||(r.track({type:2,doc:R}),Z=!0,(f&&this.ua(R,f)>0||g&&this.ua(R,g)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),Z=!0):b&&!R&&(r.track({type:1,doc:b}),Z=!0,(f||g)&&(d=!0)),Z&&(R?(o=o.add(R),s=q?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const y="F"===this.query.limitType?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{ca:o,Pa:r,es:d,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((g,y)=>function(b,R){const V=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return V(b)-V(R)}(g.type,y.type)||this.ua(g.doc,y.doc)),this.da(r);const o=t?this.Ta():[],d=0===this.aa.size&&this.current?1:0,f=d!==this._a;return this._a=d,0!==s.length||f?{snapshot:new HI(this.query,e.ca,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Q9,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=Kt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new tH(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new eH(r))}),t}Ra(e){this.oa=e.Ps,this.aa=Kt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return HI.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class eee{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tee{constructor(e){this.key=e,this.ma=!1}}class nee{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new su(d=>UL(d),v_),this.pa=new Map,this.ya=new Set,this.wa=new Hn(it.comparator),this.Sa=new Map,this.ba=new LA,this.Da={},this.Ca=new Map,this.va=Tp.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function ree(n,e){return SF.apply(this,arguments)}function SF(){return SF=(0,j.Z)(function*(n,e){const t=function YF(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oee.bind(null,e),e.fa.c_=YX.bind(null,e.eventManager),e.fa.xa=QX.bind(null,e.eventManager),e}(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield function Kd(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Kr.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Kr.allocateTargetId(r).next(o=>(i=new au(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.rs=t.rs.insert(r.targetId,r),t.ss.set(e,r.targetId)),r})}(t.localStore,Ps(e)),d=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function DF(n,e,t,r,i){return RF.apply(this,arguments)}(t,e,r,"current"===d,o.resumeToken),t.isPrimaryClient&&ZA(t.remoteStore,o)}return i}),SF.apply(this,arguments)}function RF(){return RF=(0,j.Z)(function*(n,e,t,r,i){n.Ma=(E,b,R)=>{return(V=(0,j.Z)(function*(Z,fe,Se,ye){let Le=fe.view.ha(Se);Le.es&&(Le=yield NI(Z.localStore,fe.query,!1).then(({documents:rn})=>fe.view.ha(rn,Le)));const nt=ye&&ye.targetChanges.get(fe.targetId),at=fe.view.applyChanges(Le,Z.isPrimaryClient,nt);return UF(Z,fe.targetId,at.Ea),at.snapshot}),function q(Z,fe,Se,ye){return V.apply(this,arguments)})(n,E,b,R);var V};const s=yield NI(n.localStore,e,!0),o=new nH(e,s.Ps),d=o.ha(s.documents),f=D_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=o.applyChanges(d,n.isPrimaryClient,f);UF(n,t,g.Ea);const y=new eee(e,t,o);return n.ga.set(e,y),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),g.snapshot}),RF.apply(this,arguments)}function iee(n,e){return xF.apply(this,arguments)}function xF(){return xF=(0,j.Z)(function*(n,e){const t=rt(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!v_(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Yd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),jI(t.remoteStore,r.targetId),qI(t,r.targetId)}).catch(ma))):(qI(t,r.targetId),yield Yd(t.localStore,r.targetId,!0))}),xF.apply(this,arguments)}function PF(){return PF=(0,j.Z)(function*(n,e,t){const r=function QF(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uee.bind(null,e),e}(n);try{const i=yield function(o,d){const f=rt(o),g=Ln.now(),y=d.reduce((R,V)=>R.add(V.key),Kt());let E,b;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=Ns(),q=Kt();return f._s.getEntries(R,y).next(Z=>{V=Z,V.forEach((fe,Se)=>{Se.isValidDocument()||(q=q.add(fe))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,V)).next(Z=>{E=Z;const fe=[];for(const Se of d){const ye=Bx(Se,E.get(Se.key).overlayedDocument);null!=ye&&fe.push(new ou(Se.key,ye,nA(ye.value.mapValue),zn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,g,fe,d)}).next(Z=>{b=Z;const fe=Z.applyToLocalDocumentSet(E,q);return f.documentOverlayCache.saveOverlays(R,Z.batchId,fe)})}).then(()=>({batchId:b.batchId,changes:xx(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,d,f){let g=o.Da[o.currentUser.toKey()];g||(g=new Hn(Bt)),g=g.insert(d,f),o.Da[o.currentUser.toKey()]=g}(r,i.batchId,t),yield Jd(r,i.changes),yield w(r.remoteStore)}catch(i){const s=$I(i,"Failed to persist write");t.reject(s)}}),PF.apply(this,arguments)}function rH(n,e){return NF.apply(this,arguments)}function NF(){return NF=(0,j.Z)(function*(n,e){const t=rt(n);try{const r=yield function dF(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.rs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t._s.newChangeBuffer({trackRemovals:!0});i=t.rs;const d=[];e.targetChanges.forEach((y,E)=>{const b=i.get(E);if(!b)return;d.push(t.Kr.removeMatchingKeys(s,y.removedDocuments,E).next(()=>t.Kr.addMatchingKeys(s,y.addedDocuments,E)));let R=b.withSequenceNumber(s.currentSequenceNumber);var q,Z,fe;null!==e.targetMismatches.get(E)?R=R.withResumeToken(li.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(E,R),Z=R,fe=y,(0===(q=b).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&d.push(t.Kr.updateTargetData(s,R))});let f=Ns(),g=Kt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(function xP(n,e,t){let r=Kt(),i=Kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ns();return t.forEach((d,f)=>{const g=s.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Tt.min())?(e.removeEntry(d,f.readTime),o=o.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||0===f.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(f),o=o.insert(d,f)):Ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),{ls:o,hs:i}})}(s,o,e.documentUpdates).next(y=>{f=y.ls,g=y.hs})),!r.isEqual(Tt.min())){const y=t.Kr.getLastRemoteSnapshotVersion(s).next(E=>t.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(y)}return le.waitFor(d).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,g)).next(()=>f)}).then(s=>(t.rs=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Sa.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Et(o.ma):i.removedDocuments.size>0&&(Et(o.ma),o.ma=!1))}),yield Jd(t,r,e)}catch(r){yield ma(r)}}),NF.apply(this,arguments)}function iH(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,o)=>{const d=o.view.U_(e);d.snapshot&&i.push(d.snapshot)}),function(o,d){const f=rt(o);f.onlineState=d;let g=!1;f.queries.forEach((y,E)=>{for(const b of E.listeners)b.U_(d)&&(g=!0)}),g&&AF(f)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oee(n,e,t){return kF.apply(this,arguments)}function kF(){return kF=(0,j.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Hn(it.comparator);o=o.insert(s,qn.newNoDocument(s,Tt.min()));const d=Kt().add(s),f=new yp(Tt.min(),new Map,new Hn(Bt),o,d);yield rH(r,f),r.wa=r.wa.remove(s),r.Sa.delete(e),BF(r)}else yield Yd(r.localStore,e,!1).then(()=>qI(r,e,t)).catch(ma)}),kF.apply(this,arguments)}function aee(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,j.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function DP(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t._s.newChangeBuffer({trackRemovals:!0});return function(d,f,g,y){const E=g.batch,b=E.keys();let R=le.resolve();return b.forEach(V=>{R=R.next(()=>y.getEntry(f,V)).next(q=>{const Z=g.docVersions.get(V);Et(null!==Z),q.version.compareTo(Z)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),y.addEntry(q)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=Kt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(f=f.add(d.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);VF(t,r,null),FF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jd(t,i)}catch(i){yield ma(i)}}),MF.apply(this,arguments)}function uee(n,e,t){return OF.apply(this,arguments)}function OF(){return OF=(0,j.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(o,d){const f=rt(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return f.mutationQueue.lookupMutationBatch(g,d).next(E=>(Et(null!==E),y=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>f.localDocuments.getDocuments(g,y))})}(r.localStore,e);VF(r,e,t),FF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jd(r,i)}catch(i){yield ma(i)}}),OF.apply(this,arguments)}function FF(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function VF(n,e,t){const r=rt(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function qI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.mr(e).forEach(r=>{n.ba.containsKey(r)||sH(n,r)})}function sH(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(jI(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),BF(n))}function UF(n,e,t){for(const r of t)r instanceof eH?(n.ba.addReference(r.key,e),lee(n,r)):r instanceof tH?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||sH(n,r.key)):_t()}function lee(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.ya.add(r),BF(n))}function BF(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new it(cn.fromString(e)),r=n.va.next();n.Sa.set(r,new tee(t)),n.wa=n.wa.insert(t,r),ZA(n.remoteStore,new au(Ps(Fd(t.path)),r,"TargetPurposeLimboResolution",Qs.ae))}}function Jd(n,e,t){return jF.apply(this,arguments)}function jF(){return jF=(0,j.Z)(function*(n,e,t){const r=rt(n),i=[],s=[],o=[];var d;r.ga.isEmpty()||(r.ga.forEach((d,f)=>{o.push(r.Ma(f,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const y=FA.$i(f.targetId,g);s.push(y)}}))}),yield Promise.all(o),r.fa.c_(i),yield(d=(0,j.Z)(function*(g,y){const E=rt(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>le.forEach(y,R=>le.forEach(R.Qi,V=>E.persistence.referenceDelegate.addReference(b,R.targetId,V)).next(()=>le.forEach(R.Ki,V=>E.persistence.referenceDelegate.removeReference(b,R.targetId,V)))))}catch(b){if(!Fc(b))throw b;Ge("LocalStore","Failed to update sequence numbers: "+b)}for(const b of y){const R=b.targetId;if(!b.fromCache){const V=E.rs.get(R),Z=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);E.rs=E.rs.insert(R,Z)}}}),function f(g,y){return d.apply(this,arguments)})(r.localStore,s))}),jF.apply(this,arguments)}function dee(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,j.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield lF(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(d=>{d.forEach(f=>{f.reject(new je(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jd(t,r.cs)}var s}),$F.apply(this,arguments)}function hee(n,e){const t=rt(n),r=t.Sa.get(e);if(r&&r.ma)return Kt().add(r.key);{let i=Kt();const s=t.pa.get(e);if(!s)return i;for(const o of s){const d=t.ga.get(o);i=i.unionWith(d.view.la)}return i}}class GP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,j.Z)(function*(){t.serializer=j_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function cF(n,e,t,r){return new xI(n,e,t,r)}(this.persistence,new RI,e.initialUser,this.serializer)}createPersistence(e){return new AP(SI.Jr,this.serializer)}createSharedClientState(e){return new MP}terminate(){var e=this;return(0,j.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zI{initialize(e,t){var r=this;return(0,j.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=dee.bind(null,r.syncEngine),yield function Ea(n,e){return Yc.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KX}createDatastore(e){const t=j_(e.databaseInfo.databaseId),r=new pF(e.databaseInfo);return new K9(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>iH(this.syncEngine,t,0),d=GA.C()?new GA:new OP,new _F(r,i,s,o,d);var r,i,s,o,d}createSyncEngine(e,t){return function(i,s,o,d,f,g,y){const E=new nee(i,s,o,d,f,g);return y&&(E.Fa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,j.Z)(function*(r){const i=rt(r);Ge("RemoteStore","RemoteStore shutting down."),i.F_.add(5),yield G_(i),i.x_.shutdown(),i.O_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class HP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Aee{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ci.UNAUTHENTICATED,this.clientId=Pd.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,j.Z)(function*(d){Ge("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ge("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,j.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,j.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$I(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function qP(n,e){return JF.apply(this,arguments)}function JF(){return JF=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,j.Z)(function*(s){r.isEqual(s)||(yield lF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),JF.apply(this,arguments)}function XF(n,e){return eV.apply(this,arguments)}function eV(){return eV=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function tV(n){return nV.apply(this,arguments)}(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Nn(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Nn(e.remoteStore,s)),n._onlineComponents=e}),eV.apply(this,arguments)}function nV(){return nV=(0,j.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qP(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function dH(n){return"FirebaseError"===n.name?n.code===Ie.FAILED_PRECONDITION||n.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Ks("Error using user provided cache. Falling back to memory cache: "+t),yield qP(n,new GP)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),yield qP(n,new GP);return n._offlineComponents}),nV.apply(this,arguments)}function zP(n){return rV.apply(this,arguments)}function rV(){return rV=(0,j.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield XF(n,n._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield XF(n,new zI))),n._onlineComponents}),rV.apply(this,arguments)}function sV(){return sV=(0,j.Z)(function*(n){const e=yield zP(n),t=e.eventManager;return t.onListen=ree.bind(null,e.syncEngine),t.onUnlisten=iee.bind(null,e.syncEngine),t}),sV.apply(this,arguments)}function mH(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function(s,o,d,f,g){const y=new HP({next:b=>{o.enqueueAndForget(()=>function TF(n,e){return CF.apply(this,arguments)}(s,E)),b.fromCache&&"server"===f.source?g.reject(new je(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new bF(d,y,{includeMetadataChanges:!0,Z_:!0});return function EF(n,e){return wF.apply(this,arguments)}(s,E)}(yield function ZI(n){return sV.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function _H(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const yH=new Map;function oV(n,e,t){if(!t)throw new je(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vH(n){if(!it.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IH(n){if(it.isDocumentKey(n))throw new je(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WP(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":_t()}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WP(n);throw new je(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class wH{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new je(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Lee(n,e,t,r){if(!0===e&&!0===r)throw new je(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_H(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new je(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class QA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wH(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new uL;switch(r.type){case"firstParty":return new zC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=yH.get(t);r&&(Ge("ComponentProvider","Removing Datastore"),yH.delete(t),r.terminate())}(this),Promise.resolve()}}class ks{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class fi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class Xc extends ks{constructor(e,t,r){super(e,t,Fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new it(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function Xd(n,e,...t){if(n=(0,z.m9)(n),oV("collection","path",e),n instanceof QA){const r=cn.fromString(e,...t);return IH(r),new Xc(n,null,r)}{if(!(n instanceof fi||n instanceof Xc))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return IH(r),new Xc(n.firestore,null,r)}}function JA(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Pd.V()),oV("doc","path",e),n instanceof QA){const r=cn.fromString(e,...t);return vH(r),new fi(n,null,new it(r))}{if(!(n instanceof fi||n instanceof Xc))throw new je(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return vH(r),new fi(n.firestore,n instanceof Xc?n.converter:null,new it(r))}}class Vee{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new BI(this,"async_queue_retry"),this.ou=()=>{const t=UI();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const e=UI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const t=UI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const t=new Qr;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return(0,j.Z)(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(t){if(!Fc(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const t=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,br("INTERNAL UNHANDLED ERROR: ",function(o){let d=o.message||"";return o.stack&&(d=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),d}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=t,t}enqueueAfterDelay(e,t,r){this._u(),this.su.indexOf(e)>-1&&(t=0);const i=YA.createAndSchedule(this,e,t,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&_t()}verifyOperationInProgress(){}lu(){var e=this;return(0,j.Z)(function*(){let t;do{t=e.Za,yield t}while(t!==e.Za)})()}hu(e){for(const t of this.tu)if(t.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const t=this.tu.indexOf(e);this.tu.splice(t,1)}}class or extends QA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vee,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CH(this),this._firestoreClient.terminate()}}function wa(n,e){const t="object"==typeof n?n:(0,ct.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ct._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,z.P0)("firestore");s&&function Fee(n,e,t,r={}){var i;const s=(n=vn(n,QA))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Ci.MOCK_USER;else{d=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new je(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ci(g)}n._authCredentials=new cL(new kc(d,f))}}(i,...s)}return i}function pi(n){return n._firestoreClient||CH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CH(n){var e,t,r;const i=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new DL(n._databaseId,f,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,_H(y.experimentalLongPollingOptions),y.useFetchStreams));var f,y;n._firestoreClient=new Aee(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class H_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new H_(li.fromBase64String(e))}catch(t){throw new je(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new H_(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class KI{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uV{constructor(e){this._methodName=e}}class cV{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const jee=/^__.*__$/;class $ee{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new pp(e,this.data,t,this.fieldTransforms)}}class SH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class ZP{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new ZP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return YP(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(DH(this.Tu)&&jee.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class Gee{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||j_(e)}wu(e,t,r,i=!1){return new ZP({Tu:e,methodName:t,yu:r,path:Fr.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YI(n){const e=n._freezeSettings(),t=j_(n._databaseId);return new Gee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lV(n,e,t,r,i,s={}){const o=n.wu(s.merge||s.mergeFields?2:0,e,t,i);hV("Data must be an object, but it was:",o,r);const d=kH(r,o);let f,g;if(s.merge)f=new Js(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const E of s.mergeFields){const b=tb(e,E,t);if(!o.contains(b))throw new je(Ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);OH(y,b)||y.push(b)}f=new Js(y),g=o.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,g=o.fieldTransforms;return new $ee(new di(d),f,g)}class eb extends uV{_toFieldTransform(e){if(2!==e.Tu)throw e.gu(1===e.Tu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eb}}function q_(n,e){if(MH(n=(0,z.m9)(n)))return hV("Unsupported field value:",e,n),kH(n,e);if(n instanceof uV)return function(r,i){if(!DH(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ru&&4!==e.Tu)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const d of r){let f=q_(d,i.fu(o));null==f&&(f={nullValue:"NULL_VALUE"}),s.push(f),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,z.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return fA(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Ln.fromDate(r);return{timestampValue:R_(i.serializer,s)}}if(r instanceof Ln){const s=new Ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:R_(i.serializer,s)}}if(r instanceof cV)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof H_)return{bytesValue:Kx(i.serializer,r._byteString)};if(r instanceof fi){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${WP(r)}`)}(n,e)}function kH(n,e){const t={};return lx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(n,(r,i)=>{const s=q_(i,e.Au(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function MH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof cV||n instanceof H_||n instanceof fi||n instanceof uV)}function hV(n,e,t){if(!MH(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=WP(t);throw e.gu("an object"===r?n+" a custom object":n+" "+r)}var i}function tb(n,e,t){if((e=(0,z.m9)(e))instanceof KI)return e._internalPath;if("string"==typeof e)return KP(n,e);throw YP("Field path arguments must be of type string or ",n,!1,void 0,t)}const Wee=new RegExp("[~\\*/\\[\\]]");function KP(n,e,t){if(e.search(Wee)>=0)throw YP(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new KI(...e.split("."))._internalPath}catch{throw YP(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function YP(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${r}`),o&&(f+=` in document ${i}`),f+=")"),new je(Ie.INVALID_ARGUMENT,d+n+f)}function OH(n,e){return n.some(t=>t.isEqual(e))}class fV{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zee extends fV{data(){return super.data()}}function QP(n,e){return"string"==typeof e?KP(n,e):e instanceof KI?e._internalPath:e._delegate._internalPath}class pV{}class FH extends pV{}function eh(n,e,...t){let r=[];e instanceof pV&&r.push(e),r=r.concat(t),function(s){const o=s.filter(f=>f instanceof QI).length,d=s.filter(f=>f instanceof nb).length;if(o>1||o>0&&d>0)throw new je(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class nb extends FH{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nb(e,t,r)}_apply(e){const t=this._parse(e);return $H(e._query,t),new ks(e.firestore,e.converter,lA(e._query,t))}_parse(e){const t=YI(e.firestore);return function(s,o,d,f,g,y,E){let b;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){jH(E,y);const R=[];for(const V of E)R.push(BH(f,s,V));b={arrayValue:{values:R}}}else b=BH(f,s,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||jH(E,y),b=function NH(n,e,t,r=!1){return q_(t,n.wu(r?4:3,e))}(d,"where",E,"in"===y||"not-in"===y);return ln.create(g,y,b)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function z_(n,e,t){const r=e,i=QP("where",n);return nb._create(i,r,t)}class QI extends pV{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new QI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const d=s.getFlattenedFilters();for(const f of d)$H(o,f),o=lA(o,f)}(e._query,t),new ks(e.firestore,e.converter,lA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class gV extends FH{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gV(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new dp(s,o);return function(g,y){if(null===uA(g)){const E=X0(g);null!==E&&GH(0,E,y.field)}}(i,d),d}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Gc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function VH(n,e="asc"){const t=e,r=QP("orderBy",n);return gV._create(r,t)}function BH(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new je(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(e)&&-1!==t.indexOf("/"))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!it.isDocumentKey(r))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jc(n,new it(r))}if(t instanceof fi)return jc(n,t._key);throw new je(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WP(t)}.`)}function jH(n,e){if(!Array.isArray(n)||0===n.length)throw new je(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $H(n,e){if(e.isInequality()){const r=X0(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=uA(n);null!==s&&GH(0,i,s)}const t=function(i,s){for(const o of i)for(const d of o.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new je(Ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function GH(n,e,t){if(!t.isEqual(e))throw new je(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Kee{convertValue(e,t="none"){switch(tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new cV(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=K0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){const t=Uc(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Et(fI(r));const i=new Md(r.get(1),r.get(3)),s=new it(r.popFirst(5));return i.isEqual(t)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class W_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JI extends fV{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QP("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tN extends JI{data(e={}){return super.data(e)}}class XI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new W_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tN(this._firestore,this._userDataWriter,r.key,r,new W_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new tN(i._firestore,i._userDataWriter,d.doc.key,d.doc,new W_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const f=new tN(i._firestore,i._userDataWriter,d.doc.key,d.doc,new W_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return 0!==d.type&&(g=o.indexOf(d.doc.key),o=o.delete(d.doc.key)),1!==d.type&&(o=o.add(d.doc),y=o.indexOf(d.doc.key)),{type:Qee(d.type),doc:f,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}class Rp extends Kee{constructor(e){super(),this.firestore=e}convertBytes(e){return new H_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,t)}}function th(n){n=vn(n,ks);const e=vn(n.firestore,or),t=pi(e),r=new Rp(e);return function LH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),mH(t,n._query).then(i=>new XI(e,r,n,i))}function _V(n,e,t,...r){n=vn(n,fi);const i=vn(n.firestore,or),s=YI(i);let o;return o="string"==typeof(e=(0,z.m9)(e))||e instanceof KI?function PH(n,e,t,r,i,s){const o=n.wu(1,e,t),d=[tb(e,r,t)],f=[i];if(s.length%2!=0)throw new je(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)d.push(tb(e,s[b])),f.push(s[b+1]);const g=[],y=di.empty();for(let b=d.length-1;b>=0;--b)if(!OH(g,d[b])){const R=d[b];let V=f[b];V=(0,z.m9)(V);const q=o.mu(R);if(V instanceof eb)g.push(R);else{const Z=q_(V,q);null!=Z&&(g.push(R),y.set(R,Z))}}const E=new Js(g);return new SH(y,E,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function xH(n,e,t,r){const i=n.wu(1,e,t);hV("Data must be an object, but it was:",i,r);const s=[],o=di.empty();Vc(r,(f,g)=>{const y=KP(e,f,t);g=(0,z.m9)(g);const E=i.mu(y);if(g instanceof eb)s.push(y);else{const b=q_(g,E);null!=b&&(s.push(y),o.set(y,b))}});const d=new Js(s);return new SH(o,d,i.fieldTransforms)}(s,"updateDoc",n._key,e),rb(i,[o.toMutation(n._key,zn.exists(!0))])}function qH(n,e){const t=vn(n.firestore,or),r=JA(n),i=function mV(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return rb(t,[lV(YI(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,zn.exists(!1))]).then(()=>r)}function rb(n,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function see(n,e,t){return PF.apply(this,arguments)}(yield function iV(n){return zP(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(pi(n),e)}!function(e,t=!0){Xf=ct.SDK_VERSION,(0,ct._registerComponent)(new ai.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),d=new or(new tp(r.getProvider("auth-internal")),new QR(r.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new je(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Md(g.options.projectId,y)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(YR,"4.2.0",e),(0,ct.registerVersion)(YR,"4.2.0","esm2017")}();class dte extends rd.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const iN={setInterval(n,e,...t){const{delegate:r}=iN;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=iN;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var hte=P(9039);class KH extends dte{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return iN.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&iN.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,hte.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const IV={now:()=>(IV.delegate||Date).now(),delegate:void 0};class ib{constructor(e,t=ib.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}ib.now=IV.now;class YH extends ib{constructor(e,t=ib.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const EV=new YH(KH);(0,ct.registerVersion)("firebase","9.23.0","app");const gte=(n,e)=>e.some(t=>n instanceof t);let QH,JH;const XH=new WeakMap,wV=new WeakMap,e7=new WeakMap,TV=new WeakMap,CV=new WeakMap;let AV={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return wV.get(n);if("objectStoreNames"===e)return n.objectStoreNames||e7.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xp(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function wte(n){return"function"==typeof n?function Ete(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _te(){return JH||(JH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(bV(this),e),xp(XH.get(this))}:function(...e){return xp(n.apply(bV(this),e))}:function(e,...t){const r=n.call(bV(this),e,...t);return e7.set(r,e.sort?e.sort():[e]),xp(r)}}(n):(n instanceof IDBTransaction&&function vte(n){if(wV.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});wV.set(n,e)}(n),gte(n,function mte(){return QH||(QH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,AV):n)}function xp(n){if(n instanceof IDBRequest)return function yte(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(xp(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&XH.set(t,n)}).catch(()=>{}),CV.set(e,n),e}(n);if(TV.has(n))return TV.get(n);const e=wte(n);return e!==n&&(TV.set(n,e),CV.set(e,n)),e}const bV=n=>CV.get(n),Cte=["get","getKey","getAll","getAllKeys","count"],Ate=["put","add","delete","clear"],SV=new Map;function t7(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(SV.get(e))return SV.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ate.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Cte.includes(t))return;const s=function(){var o=(0,j.Z)(function*(d,...f){const g=this.transaction(d,i?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(f.shift())),(yield Promise.all([y[t](...f),i&&g.done]))[0]});return function(f){return o.apply(this,arguments)}}();return SV.set(e,s),s}!function Ite(n){AV=n(AV)}(n=>({...n,get:(e,t,r)=>t7(e,t)||n.get(e,t,r),has:(e,t)=>!!t7(e,t)||n.has(e,t)}));const n7="@firebase/installations",DV="0.6.4",r7=1e4,i7=`w:${DV}`,s7="FIS_v2",bte="https://firebaseinstallations.googleapis.com/v1",Ste=36e5,nh=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function o7(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function RV({projectId:n}){return`${bte}/projects/${n}/installations`}function a7(n){return{token:n.token,requestStatus:2,expiresIn:Pte(n.expiresIn),creationTime:Date.now()}}function xV(n,e){return PV.apply(this,arguments)}function PV(){return PV=(0,j.Z)(function*(n,e){const r=(yield e.json()).error;return nh.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),PV.apply(this,arguments)}function u7({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function NV(n){return kV.apply(this,arguments)}function kV(){return kV=(0,j.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),kV.apply(this,arguments)}function Pte(n){return Number(n.replace("s","000"))}function MV(){return MV=(0,j.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=RV(n),i=u7(n),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const d={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:s7,appId:n.appId,sdkVersion:i7})},f=yield NV(()=>fetch(r,d));if(f.ok){const g=yield f.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:a7(g.authToken)}}throw yield xV("Create Installation",f)}),MV.apply(this,arguments)}function l7(n){return new Promise(e=>{setTimeout(e,n)})}const Ote=/^[cdef][\w-]{21}$/,OV="";function Lte(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Fte(n){return function Mte(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Ote.test(t)?t:OV}catch{return OV}}function eE(n){return`${n.appName}!${n.appId}`}const tE=new Map;function d7(n,e){const t=eE(n);h7(t,e),function Bte(n,e){const t=function f7(){return!Z_&&"BroadcastChannel"in self&&(Z_=new BroadcastChannel("[Firebase] FID Change"),Z_.onmessage=n=>{h7(n.data.key,n.data.fid)}),Z_}();t&&t.postMessage({key:n,fid:e}),function p7(){0===tE.size&&Z_&&(Z_.close(),Z_=null)}()}(t,e)}function h7(n,e){const t=tE.get(n);if(t)for(const r of t)r(e)}let Z_=null;const jte="firebase-installations-database",$te=1,K_="firebase-installations-store";let LV=null;function FV(){return LV||(LV=function Tte(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),d=xp(o);return r&&o.addEventListener("upgradeneeded",f=>{r(xp(o.result),f.oldVersion,f.newVersion,xp(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),d.then(f=>{s&&f.addEventListener("close",()=>s()),i&&f.addEventListener("versionchange",()=>i())}).catch(()=>{}),d}(jte,$te,{upgrade:(n,e)=>{0===e&&n.createObjectStore(K_)}})),LV}function sN(n,e){return VV.apply(this,arguments)}function VV(){return VV=(0,j.Z)(function*(n,e){const t=eE(n),i=(yield FV()).transaction(K_,"readwrite"),s=i.objectStore(K_),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&d7(n,e.fid),e}),VV.apply(this,arguments)}function UV(n){return BV.apply(this,arguments)}function BV(){return BV=(0,j.Z)(function*(n){const e=eE(n),r=(yield FV()).transaction(K_,"readwrite");yield r.objectStore(K_).delete(e),yield r.done}),BV.apply(this,arguments)}function sb(n,e){return jV.apply(this,arguments)}function jV(){return jV=(0,j.Z)(function*(n,e){const t=eE(n),i=(yield FV()).transaction(K_,"readwrite"),s=i.objectStore(K_),o=yield s.get(t),d=e(o);return void 0===d?yield s.delete(t):yield s.put(d,t),yield i.done,d&&(!o||o.fid!==d.fid)&&d7(n,d.fid),d}),jV.apply(this,arguments)}function $V(n){return GV.apply(this,arguments)}function GV(){return GV=(0,j.Z)(function*(n){let e;const t=yield sb(n.appConfig,r=>{const i=function Gte(n){return m7(n||{fid:Lte(),registrationStatus:0})}(r),s=function Hte(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(nh.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function qte(n,e){return HV.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:zte(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===OV?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),GV.apply(this,arguments)}function HV(){return HV=(0,j.Z)(function*(n,e){try{const t=yield function kte(n,e){return MV.apply(this,arguments)}(n,e);return sN(n.appConfig,t)}catch(t){throw o7(t)&&409===t.customData.serverCode?yield UV(n.appConfig):yield sN(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),HV.apply(this,arguments)}function zte(n){return qV.apply(this,arguments)}function qV(){return qV=(0,j.Z)(function*(n){let e=yield g7(n.appConfig);for(;1===e.registrationStatus;)yield l7(100),e=yield g7(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield $V(n);return r||t}return e}),qV.apply(this,arguments)}function g7(n){return sb(n,e=>{if(!e)throw nh.create("installation-not-found");return m7(e)})}function m7(n){return function Wte(n){return 1===n.registrationStatus&&n.registrationTime+r7<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function zV(){return zV=(0,j.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Kte(n,{fid:e}){return`${RV(n)}/${e}/authTokens:generate`}(n,t),i=function c7(n,{refreshToken:e}){const t=u7(n);return t.append("Authorization",function Nte(n){return`${s7} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const d={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:i7,appId:n.appId}})},f=yield NV(()=>fetch(r,d));if(f.ok)return a7(yield f.json());throw yield xV("Generate Auth Token",f)}),zV.apply(this,arguments)}function WV(n){return ZV.apply(this,arguments)}function ZV(){return ZV=(0,j.Z)(function*(n,e=!1){let t;const r=yield sb(n.appConfig,s=>{if(!y7(s))throw nh.create("not-registered");const o=s.authToken;if(!e&&function Jte(n){return 2===n.requestStatus&&!function Xte(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Ste}(n)}(o))return s;if(1===o.requestStatus)return t=function Yte(n,e){return KV.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw nh.create("app-offline");const d=function ene(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function Qte(n,e){return YV.apply(this,arguments)}(n,d),d}});return t?yield t:r.authToken}),ZV.apply(this,arguments)}function KV(){return KV=(0,j.Z)(function*(n,e){let t=yield _7(n.appConfig);for(;1===t.authToken.requestStatus;)yield l7(100),t=yield _7(n.appConfig);const r=t.authToken;return 0===r.requestStatus?WV(n,e):r}),KV.apply(this,arguments)}function _7(n){return sb(n,e=>{if(!y7(e))throw nh.create("not-registered");return function tne(n){return 1===n.requestStatus&&n.requestTime+r7<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function YV(){return YV=(0,j.Z)(function*(n,e){try{const t=yield function Zte(n,e){return zV.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield sN(n.appConfig,r),t}catch(t){if(!o7(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield sN(n.appConfig,r)}else yield UV(n.appConfig);throw t}}),YV.apply(this,arguments)}function y7(n){return void 0!==n&&2===n.registrationStatus}function QV(){return QV=(0,j.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield $V(e);return r?r.catch(console.error):WV(e).catch(console.error),t.fid}),QV.apply(this,arguments)}function JV(){return JV=(0,j.Z)(function*(n,e=!1){const t=n;return yield function ine(n){return XV.apply(this,arguments)}(t),(yield WV(t,e)).token}),JV.apply(this,arguments)}function XV(){return XV=(0,j.Z)(function*(n){const{registrationPromise:e}=yield $V(n);e&&(yield e)}),XV.apply(this,arguments)}function nU(n){return nh.create("missing-app-config-values",{valueName:n})}const v7="installations",cne=n=>{const e=n.getProvider("app").getImmediate(),t=function ane(n){if(!n||!n.options)throw nU("App Configuration");if(!n.name)throw nU("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw nU(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,ct._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},lne=n=>{const e=n.getProvider("app").getImmediate(),t=(0,ct._getProvider)(e,v7).getImmediate();return{getId:()=>function nne(n){return QV.apply(this,arguments)}(t),getToken:i=>function rne(n){return JV.apply(this,arguments)}(t,i)}};(function dne(){(0,ct._registerComponent)(new ai.wA(v7,cne,"PUBLIC")),(0,ct._registerComponent)(new ai.wA("installations-internal",lne,"PRIVATE"))})(),(0,ct.registerVersion)(n7,DV),(0,ct.registerVersion)(n7,DV,"esm2017");const rU="@firebase/remote-config",jo=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wne{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,j.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Tne(n=navigator){return n.languages&&n.languages[0]||n.language}class Cne{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return(0,j.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,d={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},f={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:Tne()},g={method:"POST",headers:d,body:JSON.stringify(f)},y=fetch(o,g),E=new Promise((fe,Se)=>{e.signal.addEventListener(()=>{const ye=new Error("The operation was aborted.");ye.name="AbortError",Se(ye)})});let b;try{yield Promise.race([y,E]),b=yield y}catch(fe){let Se="fetch-client-network";throw"AbortError"===fe?.name&&(Se="fetch-timeout"),jo.create(Se,{originalErrorMessage:fe?.message})}let R=b.status;const V=b.headers.get("ETag")||void 0;let q,Z;if(200===b.status){let fe;try{fe=yield b.json()}catch(Se){throw jo.create("fetch-client-parse",{originalErrorMessage:Se?.message})}q=fe.entries,Z=fe.state}if("INSTANCE_STATE_UNSPECIFIED"===Z?R=500:"NO_CHANGE"===Z?R=304:("NO_TEMPLATE"===Z||"EMPTY_CONFIG"===Z)&&(q={}),304!==R&&200!==R)throw jo.create("fetch-status",{httpStatus:R});return{status:R,eTag:V,config:q}})()}}class Sne{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,j.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,j.Z)(function*(){yield function Ane(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(jo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function bne(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class xne{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function aN(n,e){const t=n.target.error||void 0;return jo.create(e,{originalErrorMessage:t&&t?.message})}const Y_="app_namespace_store";class Mne{constructor(e,t,r,i=function kne(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(aN(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Y_,{keyPath:"compositeKey"})}}catch(t){e(jo.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,j.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const d=r.transaction([Y_],"readonly").objectStore(Y_),f=t.createCompositeKey(e);try{const g=d.get(f);g.onerror=y=>{s(aN(y,"storage-get"))},g.onsuccess=y=>{const E=y.target.result;i(E?E.value:void 0)}}catch(g){s(jo.create("storage-get",{originalErrorMessage:g?.message}))}})})()}set(e,t){var r=this;return(0,j.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const f=i.transaction([Y_],"readwrite").objectStore(Y_),g=r.createCompositeKey(e);try{const y=f.put({compositeKey:g,value:t});y.onerror=E=>{o(aN(E,"storage-set"))},y.onsuccess=()=>{s()}}catch(y){o(jo.create("storage-set",{originalErrorMessage:y?.message}))}})})()}delete(e){var t=this;return(0,j.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const d=r.transaction([Y_],"readwrite").objectStore(Y_),f=t.createCompositeKey(e);try{const g=d.delete(f);g.onerror=y=>{s(aN(y,"storage-delete"))},g.onsuccess=()=>{i()}}catch(g){s(jo.create("storage-delete",{originalErrorMessage:g?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class One{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,j.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const d=yield i;d&&(e.activeConfig=d)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Fne(){return uU.apply(this,arguments)}function uU(){return(uU=(0,j.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function Lne(){(0,ct._registerComponent)(new ai.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jo.create("registration-window");if(!(0,z.hl)())throw jo.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:d}=r.options;if(!s)throw jo.create("registration-project-id");if(!o)throw jo.create("registration-api-key");if(!d)throw jo.create("registration-app-id");const f=new Mne(d,r.name,t=t||"firebase"),g=new One(f),y=new Zn.Yd(rU);y.logLevel=Zn.in.ERROR;const E=new Cne(i,ct.SDK_VERSION,t,s,o,d),b=new Sne(E,f),R=new wne(b,f,g,y),V=new xne(r,R,g,f,y);return function vne(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(V),V},"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(rU,"0.4.4"),(0,ct.registerVersion)(rU,"0.4.4","esm2017")}();const Vne=(n,e)=>e.some(t=>n instanceof t);let T7,C7;const A7=new WeakMap,cU=new WeakMap,b7=new WeakMap,lU=new WeakMap,dU=new WeakMap;let hU={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return cU.get(n);if("objectStoreNames"===e)return n.objectStoreNames||b7.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rh(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function qne(n){return"function"==typeof n?function Hne(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Bne(){return C7||(C7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(fU(this),e),rh(A7.get(this))}:function(...e){return rh(n.apply(fU(this),e))}:function(e,...t){const r=n.call(fU(this),e,...t);return b7.set(r,e.sort?e.sort():[e]),rh(r)}}(n):(n instanceof IDBTransaction&&function $ne(n){if(cU.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});cU.set(n,e)}(n),Vne(n,function Une(){return T7||(T7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,hU):n)}function rh(n){if(n instanceof IDBRequest)return function jne(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(rh(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&A7.set(t,n)}).catch(()=>{}),dU.set(e,n),e}(n);if(lU.has(n))return lU.get(n);const e=qne(n);return e!==n&&(lU.set(n,e),dU.set(e,n)),e}const fU=n=>dU.get(n);function S7(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),d=rh(o);return r&&o.addEventListener("upgradeneeded",f=>{r(rh(o.result),f.oldVersion,f.newVersion,rh(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),d.then(f=>{s&&f.addEventListener("close",()=>s()),i&&f.addEventListener("versionchange",()=>i())}).catch(()=>{}),d}function pU(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),rh(t).then(()=>{})}const zne=["get","getKey","getAll","getAllKeys","count"],Wne=["put","add","delete","clear"],gU=new Map;function D7(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(gU.get(e))return gU.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Wne.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zne.includes(t))return;const s=function(){var o=(0,j.Z)(function*(d,...f){const g=this.transaction(d,i?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(f.shift())),(yield Promise.all([y[t](...f),i&&g.done]))[0]});return function(f){return o.apply(this,arguments)}}();return gU.set(e,s),s}!function Gne(n){hU=n(hU)}(n=>({...n,get:(e,t,r)=>D7(e,t)||n.get(e,t,r),has:(e,t)=>!!D7(e,t)||n.has(e,t)}));const Zne="/firebase-messaging-sw.js",Kne="/firebase-cloud-messaging-push-scope",R7="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yne="https://fcmregistrations.googleapis.com/v1",x7="google.c.a.c_id",Qne="google.c.a.c_l",Jne="google.c.a.ts";var uN=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(uN||{});function ih(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tre(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const mU="fcm_token_details_db",nre=5,P7="fcm_token_object_Store";function _U(){return _U=(0,j.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(mU))return null;let e=null;return(yield S7(mU,nre,{upgrade:(r=(0,j.Z)(function*(i,s,o,d){var f;if(s<2||!i.objectStoreNames.contains(P7))return;const g=d.objectStore(P7),y=yield g.index("fcmSenderId").get(n);if(yield g.clear(),y)if(2===s){const E=y;if(!E.auth||!E.p256dh||!E.endpoint)return;e={token:E.fcmToken,createTime:null!==(f=E.createTime)&&void 0!==f?f:Date.now(),subscriptionOptions:{auth:E.auth,p256dh:E.p256dh,endpoint:E.endpoint,swScope:E.swScope,vapidKey:"string"==typeof E.vapidKey?E.vapidKey:ih(E.vapidKey)}}}else if(3===s){const E=y;e={token:E.fcmToken,createTime:E.createTime,subscriptionOptions:{auth:ih(E.auth),p256dh:ih(E.p256dh),endpoint:E.endpoint,swScope:E.swScope,vapidKey:ih(E.vapidKey)}}}else if(4===s){const E=y;e={token:E.fcmToken,createTime:E.createTime,subscriptionOptions:{auth:ih(E.auth),p256dh:ih(E.p256dh),endpoint:E.endpoint,swScope:E.swScope,vapidKey:ih(E.vapidKey)}}}}),function(s,o,d,f){return r.apply(this,arguments)})})).close(),yield pU(mU),yield pU("fcm_vapid_details_db"),yield pU("undefined"),function ire(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),_U.apply(this,arguments)}const sre="firebase-messaging-database",ore=1,Q_="firebase-messaging-store";let yU=null;function vU(){return yU||(yU=S7(sre,ore,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Q_)}})),yU}function N7(n){return IU.apply(this,arguments)}function IU(){return IU=(0,j.Z)(function*(n){const e=CU(n),r=yield(yield vU()).transaction(Q_).objectStore(Q_).get(e);if(r)return r;{const i=yield function rre(n){return _U.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield EU(n,i),i}}),IU.apply(this,arguments)}function EU(n,e){return wU.apply(this,arguments)}function wU(){return wU=(0,j.Z)(function*(n,e){const t=CU(n),i=(yield vU()).transaction(Q_,"readwrite");return yield i.objectStore(Q_).put(e,t),yield i.done,e}),wU.apply(this,arguments)}function TU(){return TU=(0,j.Z)(function*(n){const e=CU(n),r=(yield vU()).transaction(Q_,"readwrite");yield r.objectStore(Q_).delete(e),yield r.done}),TU.apply(this,arguments)}function CU({appConfig:n}){return n.appId}const Ms=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cre(n,e){return AU.apply(this,arguments)}function AU(){return AU=(0,j.Z)(function*(n,e){const t=yield RU(n),r=M7(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(DU(n.appConfig),i)).json()}catch(o){throw Ms.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Ms.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Ms.create("token-subscribe-no-token");return s.token}),AU.apply(this,arguments)}function bU(){return bU=(0,j.Z)(function*(n,e){const t=yield RU(n),r=M7(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${DU(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ms.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Ms.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Ms.create("token-update-no-token");return s.token}),bU.apply(this,arguments)}function k7(n,e){return SU.apply(this,arguments)}function SU(){return SU=(0,j.Z)(function*(n,e){const r={method:"DELETE",headers:yield RU(n)};try{const s=yield(yield fetch(`${DU(n.appConfig)}/${e}`,r)).json();if(s.error)throw Ms.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Ms.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),SU.apply(this,arguments)}function DU({projectId:n}){return`${Yne}/projects/${n}/registrations`}function RU(n){return xU.apply(this,arguments)}function xU(){return xU=(0,j.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),xU.apply(this,arguments)}function M7({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==R7&&(i.web.applicationPubKey=r),i}const dre=6048e5;function PU(){return PU=(0,j.Z)(function*(n){const e=yield function pre(n,e){return OU.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ih(e.getKey("auth")),p256dh:ih(e.getKey("p256dh"))},r=yield N7(n.firebaseDependencies);if(r){if(function gre(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+dre?function fre(n,e){return kU.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield k7(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return L7(n.firebaseDependencies,t)}return L7(n.firebaseDependencies,t)}),PU.apply(this,arguments)}function NU(){return NU=(0,j.Z)(function*(n){const e=yield N7(n.firebaseDependencies);e&&(yield k7(n.firebaseDependencies,e.token),yield function are(n){return TU.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),NU.apply(this,arguments)}function kU(){return kU=(0,j.Z)(function*(n,e){try{const t=yield function lre(n,e){return bU.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield EU(n.firebaseDependencies,r),t}catch(t){throw yield function O7(n){return NU.apply(this,arguments)}(n),t}}),kU.apply(this,arguments)}function L7(n,e){return MU.apply(this,arguments)}function MU(){return MU=(0,j.Z)(function*(n,e){const r={token:yield cre(n,e),createTime:Date.now(),subscriptionOptions:e};return yield EU(n,r),r.token}),MU.apply(this,arguments)}function OU(){return OU=(0,j.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tre(e)})}),OU.apply(this,arguments)}function F7(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function mre(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function _re(n,e){e.data&&(n.data=e.data)}(e,n),function yre(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const d=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;d&&(n.fcmOptions.link=d);const f=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;f&&(n.fcmOptions.analyticsLabel=f)}(e,n),e}function V7(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function LU(n){return Ms.create("missing-app-config-values",{valueName:n})}V7("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),V7("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ere{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Ire(n){if(!n||!n.options)throw LU("App Configuration Object");if(!n.name)throw LU("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw LU(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function FU(){return FU=(0,j.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Zne,{scope:Kne}),n.swRegistration.update().catch(()=>{})}catch(e){throw Ms.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),FU.apply(this,arguments)}function VU(){return VU=(0,j.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function U7(n){return FU.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ms.create("invalid-sw-registration");n.swRegistration=e}}),VU.apply(this,arguments)}function UU(){return UU=(0,j.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=R7)}),UU.apply(this,arguments)}function BU(){return BU=(0,j.Z)(function*(n,e){if(!navigator)throw Ms.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ms.create("permission-blocked");return yield function Tre(n,e){return UU.apply(this,arguments)}(n,e?.vapidKey),yield function wre(n,e){return VU.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function hre(n){return PU.apply(this,arguments)}(n)}),BU.apply(this,arguments)}function jU(){return jU=(0,j.Z)(function*(n,e,t){const r=function Are(n){switch(n){case uN.NOTIFICATION_CLICKED:return"notification_open";case uN.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[x7],message_name:t[Qne],message_time:t[Jne],message_device_time:Math.floor(Date.now()/1e3)})}),jU.apply(this,arguments)}function $U(){return $U=(0,j.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===uN.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(F7(t)):n.onMessageHandler.next(F7(t)));const r=t.data;(function vre(n){return"object"==typeof n&&!!n&&x7 in n})(r)&&"1"===r["google.c.a.e"]&&(yield function Cre(n,e,t){return jU.apply(this,arguments)}(n,t.messageType,r))}),$U.apply(this,arguments)}const j7="@firebase/messaging",Sre=n=>{const e=new Ere(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function bre(n,e){return $U.apply(this,arguments)}(e,t)),e},Dre=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function B7(n,e){return BU.apply(this,arguments)}(e,r)}};function G7(){return GU.apply(this,arguments)}function GU(){return(GU=(0,j.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rre(){(0,ct._registerComponent)(new ai.wA("messaging",Sre,"PUBLIC")),(0,ct._registerComponent)(new ai.wA("messaging-internal",Dre,"PRIVATE")),(0,ct.registerVersion)(j7,"0.12.4"),(0,ct.registerVersion)(j7,"0.12.4","esm2017")}();const cN="analytics",Nre="firebase_id",kre="origin",Mre=6e4,Ore="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zU="https://www.googletagmanager.com/gtag/js",ds=new Zn.Yd("@firebase/analytics"),po=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Fre(n){if(!n.startsWith(zU)){const e=po.create("invalid-gtag-resource",{gtagURL:n});return ds.warn(e.message),""}return n}function H7(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function WU(){return WU=(0,j.Z)(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const f=(yield H7(t)).find(g=>g.measurementId===i);f&&(yield e[f.appId])}}catch(d){ds.error(d)}n("config",i,s)}),WU.apply(this,arguments)}function ZU(){return ZU=(0,j.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const d=yield H7(t);for(const f of o){const g=d.find(E=>E.measurementId===f),y=g&&e[g.appId];if(!y){s=[];break}s.push(y)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){ds.error(s)}}),ZU.apply(this,arguments)}const zre=30,q7=new class Zre{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Kre(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function KU(){return KU=(0,j.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Kre(r)},s=Ore.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let d="";try{const f=yield o.json();null!==(e=f.error)&&void 0!==e&&e.message&&(d=f.error.message)}catch{}throw po.create("config-fetch-failed",{httpStatus:o.status,responseMessage:d})}return o.json()}),KU.apply(this,arguments)}function YU(){return YU=(0,j.Z)(function*(n,e=q7,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw po.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw po.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new eie;return setTimeout((0,j.Z)(function*(){d.abort()}),void 0!==t?t:Mre),z7({appId:r,apiKey:i,measurementId:s},o,d,e)}),YU.apply(this,arguments)}function z7(n,e,t){return QU.apply(this,arguments)}function QU(){return QU=(0,j.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=q7){var s;const{appId:o,measurementId:d}=n;try{yield function Jre(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(po.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(f){if(d)return ds.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:o,measurementId:d};throw f}try{const f=yield function Yre(n){return KU.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),f}catch(f){const g=f;if(!function Xre(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(g)){if(i.deleteThrottleMetadata(o),d)return ds.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:o,measurementId:d};throw f}const y=503===Number(null===(s=g?.customData)||void 0===s?void 0:s.httpStatus)?(0,z.$s)(t,i.intervalMillis,zre):(0,z.$s)(t,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(o,E),ds.debug(`Calling attemptFetch again in ${y} millis`),z7(n,E,r,i)}}),QU.apply(this,arguments)}class eie{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let JU,sB;function XU(){return XU=(0,j.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),XU.apply(this,arguments)}function tB(){return tB=(0,j.Z)(function*(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();n("config",yield e,{update:!0,user_id:t})}),tB.apply(this,arguments)}function oB(){return oB=(0,j.Z)(function*(){if(!(0,z.hl)())return ds.warn(po.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return ds.warn(po.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),oB.apply(this,arguments)}function aB(){return aB=(0,j.Z)(function*(n,e,t,r,i,s,o){var d;const f=function Qre(n){return YU.apply(this,arguments)}(n);f.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&ds.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>ds.error(R)),e.push(f);const g=function aie(){return oB.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[y,E]=yield Promise.all([f,g]);(function qre(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(zU)&&t.src.includes(n))return t;return null})(s)||function Ure(n,e){const t=function Vre(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Fre}),r=document.createElement("script"),i=`${zU}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,y.measurementId),sB&&(i("consent","default",sB),function W7(n){sB=n}(void 0)),i("js",new Date);const b=null!==(d=o?.config)&&void 0!==d?d:{};return b[kre]="firebase",b.update=!0,null!=E&&(b[Nre]=E),i("config",y.measurementId,b),JU&&(i("set",JU),function Z7(n){JU=n}(void 0)),y.measurementId}),aB.apply(this,arguments)}class cie{constructor(e){this.app=e}_delete(){return delete el[this.app.options.appId],Promise.resolve()}}let el={},K7=[];const Y7={};let J7,tl,lN="dataLayer",uB=!1;function die(n,e,t){!function lie(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=po.create("invalid-analytics-context",{errorInfo:e});ds.warn(t.message)}}();const r=n.options.appId;if(!r)throw po.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw po.create("no-api-key");ds.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=el[r])throw po.create("already-exists",{id:r});if(!uB){!function Bre(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(lN);const{wrappedGtag:s,gtagCore:o}=function Hre(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Gre(n,e,t,r){function s(){return s=(0,j.Z)(function*(o,...d){try{if("event"===o){const[f,g]=d;yield function $re(n,e,t,r,i){return ZU.apply(this,arguments)}(n,e,t,f,g)}else if("config"===o){const[f,g]=d;yield function jre(n,e,t,r,i,s){return WU.apply(this,arguments)}(n,e,t,r,f,g)}else if("consent"===o){const[f]=d;n("consent","update",f)}else if("get"===o){const[f,g,y]=d;n("get",f,g,y)}else if("set"===o){const[f]=d;n("set",f)}else n(o,...d)}catch(f){ds.error(f)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(el,K7,Y7,lN,"gtag");tl=s,J7=o,uB=!0}return el[r]=function uie(n,e,t,r,i,s,o){return aB.apply(this,arguments)}(n,K7,Y7,e,J7,lN,t),new cie(n)}function hie(n=(0,ct.getApp)()){n=(0,z.m9)(n);const e=(0,ct._getProvider)(n,cN);return e.isInitialized()?e.getImmediate():function fie(n,e={}){const t=(0,ct._getProvider)(n,cN);if(t.isInitialized()){const i=t.getImmediate();if((0,z.vZ)(e,t.getOptions()))return i;throw po.create("already-initialized")}return t.initialize({options:e})}(n)}function pie(){return cB.apply(this,arguments)}function cB(){return(cB=(0,j.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}function gie(n,e,t){n=(0,z.m9)(n),function rie(n,e,t,r){return tB.apply(this,arguments)}(tl,el[n.app.options.appId],e,t).catch(r=>ds.error(r))}function X7(n,e,t,r){n=(0,z.m9)(n),function tie(n,e,t,r,i){return XU.apply(this,arguments)}(tl,el[n.app.options.appId],e,t,r).catch(i=>ds.error(i))}const eq="@firebase/analytics";!function mie(){(0,ct._registerComponent)(new ai.wA(cN,(e,{options:t})=>die(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,ct._registerComponent)(new ai.wA("analytics-internal",function n(e){try{const t=e.getProvider(cN).getImmediate();return{logEvent:(r,i,s)=>X7(t,r,i,s)}}catch(t){throw po.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,ct.registerVersion)(eq,"0.10.0"),(0,ct.registerVersion)(eq,"0.10.0","esm2017")}();const vie=new class yie extends YH{}(class _ie extends KH{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var J_=P(3093),ob=P(5137);const Pp=new l.GfV("7.6.1"),dB="__angularfire_symbol__analyticsIsSupportedValue",hB="__angularfire_symbol__analyticsIsSupported",fB="__angularfire_symbol__remoteConfigIsSupportedValue",pB="__angularfire_symbol__remoteConfigIsSupported",gB="__angularfire_symbol__messagingIsSupportedValue",mB="__angularfire_symbol__messagingIsSupported";globalThis[hB]||(globalThis[hB]=pie().then(n=>globalThis[dB]=n).catch(()=>globalThis[dB]=!1)),globalThis[mB]||(globalThis[mB]=G7().then(n=>globalThis[gB]=n).catch(()=>globalThis[gB]=!1)),globalThis[pB]||(globalThis[pB]=Fne().then(n=>globalThis[fB]=n).catch(()=>globalThis[fB]=!1));const dN={async:()=>globalThis[hB],sync:()=>{const n=globalThis[dB];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}};function ab(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ub=(n,e)=>{const t=e?[e]:(0,ct.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function nE(){}class nq{constructor(e,t=vie){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Iie{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nE,{},nE,nE)),t.pipe(Gi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Np=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new nq(Zone.current)),this.insideAngular=t.run(()=>new nq(Zone.current,EV)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X_(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ey(n){return X_().ngZone.run(()=>n())}function rq(n){return n.pipe((0,J_.Q)(X_().outsideAngular))}function go(n){return X_(),function wie(n){return function(t){return(t=t.lift(new Iie(n.ngZone))).pipe((0,ob.R)(n.outsideAngular),(0,J_.Q)(n.insideAngular))}}(X_())(n)}const Tie=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ey(()=>n.apply(void 0,r))},kp=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=ey(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nE,{},nE,nE)))),r[s]=Tie(r[s],t));const i=function Eie(n){return X_().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof zr.y){const s=X_();return i.pipe((0,ob.R)(s.outsideAngular),(0,J_.Q)(s.insideAngular))}return ey(()=>i)}return i instanceof zr.y?i.pipe(go):i instanceof Promise?ey(()=>new Promise((s,o)=>i.then(d=>ey(()=>s(d)),d=>ey(()=>o(d))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ey(()=>i)};function hN(){return(0,os.e)((n,e)=>{let t,r=!1;n.subscribe((0,en.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var gt,iq=P(3997),mo=P(6304),sq=(P(8661),P(3106)),Cie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qu={},yB=yB||{},Wt=Cie||self;function fN(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vB="closure_uid_"+(1e9*Math.random()>>>0),bie=0;function Sie(n,e,t){return n.call.apply(n.bind,arguments)}function Die(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xs(n,e,t){return(Xs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sie:Die).apply(null,arguments)}function pN(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function hs(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),d=2;d<arguments.length;d++)o[d-2]=arguments[d];return e.prototype[i].apply(r,o)}}function Mp(){this.s=this.s,this.o=this.o}Mp.prototype.s=!1,Mp.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Aie(n){Object.prototype.hasOwnProperty.call(n,vB)&&n[vB]||(n[vB]=++bie)}(this)},Mp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oq=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function IB(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function aq(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(fN(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function eo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}eo.prototype.h=function(){this.defaultPrevented=!0};var xie=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",()=>{},e),Wt.removeEventListener("test",()=>{},e)}catch{}return n}();function lb(n){return/^[\s\xa0]*$/.test(n)}function gN(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function nl(n){return-1!=gN().indexOf(n)}function EB(n){return EB[" "](n),n}EB[" "]=function(){};var TB,Nie=nl("Opera"),rE=nl("Trident")||nl("MSIE"),uq=nl("Edge"),wB=uq||rE,cq=nl("Gecko")&&!(-1!=gN().toLowerCase().indexOf("webkit")&&!nl("Edge"))&&!(nl("Trident")||nl("MSIE"))&&!nl("Edge"),kie=-1!=gN().toLowerCase().indexOf("webkit")&&!nl("Edge");function lq(){var n=Wt.document;return n?n.documentMode:void 0}e:{var CB="",AB=function(){var n=gN();return cq?/rv:([^\);]+)(\)|;)/.exec(n):uq?/Edge\/([\d\.]+)/.exec(n):rE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kie?/WebKit\/(\S+)/.exec(n):Nie?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(AB&&(CB=AB?AB[1]:""),rE){var bB=lq();if(null!=bB&&bB>parseFloat(CB)){TB=String(bB);break e}}TB=CB}var Mie=Wt.document&&rE&&(lq()||parseInt(TB,10))||void 0;function db(n,e){if(eo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cq){e:{try{EB(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Oie[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&db.$.h.call(this)}}hs(db,eo);var Oie={2:"touch",3:"pen",4:"mouse"};db.prototype.h=function(){db.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hb="closure_listenable_"+(1e6*Math.random()|0),Lie=0;function Fie(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Lie,this.fa=this.ia=!1}function mN(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function DB(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hq(n){const e={};for(const t in n)e[t]=n[t];return e}const fq="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pq(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<fq.length;s++)t=fq[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _N(n){this.src=n,this.g={},this.h=0}function RB(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=oq(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mN(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xB(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}_N.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=xB(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new Fie(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var PB="closure_lm_"+(1e6*Math.random()|0),NB={};function gq(n,e,t,r,i){if(r&&r.once)return _q(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gq(n,e[s],t,r,i);return null}return t=LB(t),n&&n[hb]?n.O(e,t,cb(r)?!!r.capture:!!r,i):mq(n,e,t,!1,r,i)}function mq(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=cb(i)?!!i.capture:!!i,d=MB(n);if(d||(n[PB]=d=new _N(n)),(t=d.add(e,t,r,o,s)).proxy)return t;if(r=function Uie(){const e=Bie;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)xie||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(vq(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _q(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_q(n,e[s],t,r,i);return null}return t=LB(t),n&&n[hb]?n.P(e,t,cb(r)?!!r.capture:!!r,i):mq(n,e,t,!0,r,i)}function yq(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yq(n,e[s],t,r,i);else r=cb(r)?!!r.capture:!!r,t=LB(t),n&&n[hb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xB(s=n.g[e],t,r,i))&&(mN(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=MB(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xB(e,t,r,i)),(t=-1<n?e[n]:null)&&kB(t))}function kB(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[hb])RB(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vq(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=MB(e))?(RB(t,n),0==t.h&&(t.src=null,e[PB]=null)):mN(n)}}}function vq(n){return n in NB?NB[n]:NB[n]="on"+n}function Bie(n,e){if(n.fa)n=!0;else{e=new db(e,this);var t=n.listener,r=n.la||n.src;n.ia&&kB(n),n=t.call(r,e)}return n}function MB(n){return(n=n[PB])instanceof _N?n:null}var OB="__closure_events_fn_"+(1e9*Math.random()>>>0);function LB(n){return"function"==typeof n?n:(n[OB]||(n[OB]=function(e){return n.handleEvent(e)}),n[OB])}function fs(){Mp.call(this),this.i=new _N(this),this.S=this,this.J=null}function Os(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new eo(e,n);else if(e instanceof eo)e.target=e.target||n;else{var i=e;pq(e=new eo(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=yN(o,r,!0,e)&&i}if(i=yN(o=e.g=n,r,!0,e)&&i,i=yN(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=yN(o=e.g=t[s],r,!1,e)&&i}function yN(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var d=o.listener,f=o.la||o.src;o.ia&&RB(n.i,o),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}hs(fs,Mp),fs.prototype[hb]=!0,fs.prototype.removeEventListener=function(n,e,t,r){yq(this,n,e,t,r)},fs.prototype.N=function(){if(fs.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mN(t[r]);delete n.g[e],n.h--}}this.J=null},fs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fs.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var FB=Wt.JSON.stringify;function $ie(){var n=VB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Iq=new class jie{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Hie,n=>n.reset());class Hie{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qie(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function zie(n){Wt.setTimeout(()=>{throw n},0)}let fb,pb=!1,VB=new class Gie{constructor(){this.h=this.g=null}add(e,t){const r=Iq.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Eq=()=>{const n=Wt.Promise.resolve(void 0);fb=()=>{n.then(Wie)}};var Wie=()=>{for(var n;n=$ie();){try{n.h.call(n.g)}catch(t){zie(t)}var e=Iq;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pb=!1};function vN(n,e){fs.call(this),this.h=n||1,this.g=e||Wt,this.j=Xs(this.qb,this),this.l=Date.now()}function UB(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function BB(n,e,t){if("function"==typeof n)t&&(n=Xs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function wq(n){n.g=BB(()=>{n.g=null,n.i&&(n.i=!1,wq(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hs(vN,fs),(gt=vN.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Os(this,"tick"),this.ga&&(UB(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){vN.$.N.call(this),UB(this),delete this.g};class Zie extends Mp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wq(this)}N(){super.N(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gb(n){Mp.call(this),this.h=n,this.g={}}hs(gb,Mp);var Tq=[];function Cq(n,e,t,r){Array.isArray(t)||(t&&(Tq[0]=t.toString()),t=Tq);for(var i=0;i<t.length;i++){var s=gq(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Aq(n){DB(n.g,function(e,t){this.g.hasOwnProperty(t)&&kB(e)},n),n.g={}}function IN(){this.g=!0}function iE(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Jie(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return FB(t)}catch{return e}}(n,t)+(r?" "+r:"")})}gb.prototype.N=function(){gb.$.N.call(this),Aq(this)},gb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},IN.prototype.Ea=function(){this.g=!1},IN.prototype.info=function(){};var ty={},bq=null;function EN(){return bq=bq||new fs}function Sq(n){eo.call(this,ty.Ta,n)}function mb(n){const e=EN();Os(e,new Sq(e))}function Dq(n,e){eo.call(this,ty.STAT_EVENT,n),this.stat=e}function _o(n){const e=EN();Os(e,new Dq(e,n))}function Rq(n,e){eo.call(this,ty.Ua,n),this.size=e}function _b(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}ty.Ta="serverreachability",hs(Sq,eo),ty.STAT_EVENT="statevent",hs(Dq,eo),ty.Ua="timingevent",hs(Rq,eo);var wN={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xq={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jB(){}function Nq(){}jB.prototype.h=null;var HB,yb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $B(){eo.call(this,"d")}function GB(){eo.call(this,"c")}function TN(){}function vb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new gb(this),this.P=Xie,this.V=new vN(n=wB?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kq}function kq(){this.i=null,this.g="",this.h=!1}hs($B,eo),hs(GB,eo),hs(TN,jB),TN.prototype.g=function(){return new XMLHttpRequest},TN.prototype.i=function(){return{}},HB=new TN;var Xie=45e3,qB={},CN={};function zB(n,e,t){n.L=1,n.v=DN(sh(e)),n.s=t,n.S=!0,Mq(n,null)}function Mq(n,e){n.G=Date.now(),Ib(n),n.A=sh(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Hq(t.i,"t",r),n.C=0,t=n.l.J,n.h=new kq,n.g=pz(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Zie(Xs(n.Pa,n,n.g),n.O)),Cq(n.U,n.g,"readystatechange",n.nb),e=n.I?hq(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),mb(),function Kie(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",d=s.split("&"),f=0;f<d.length;f++){var g=d[f].split("=");if(1<g.length){var y=g[0];g=g[1];var E=y.split("_");o=2<=E.length&&"type"==E[1]?o+(y+"=")+g+"&":o+(y+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Oq(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Lq(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=ese(n,t),i==CN){4==e&&(n.o=4,_o(14),r=!1),iE(n.j,n.m,null,"[Incomplete Response]");break}if(i==qB){n.o=4,_o(15),iE(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}iE(n.j,n.m,i,null),WB(n,i)}Oq(n)&&i!=CN&&i!=qB&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_o(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),e4(e),e.M=!0,_o(11))):(iE(n.j,n.m,t,"[Invalid Chunked Response]"),ny(n),Eb(n))}function ese(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?CN:(t=Number(e.substring(t,r)),isNaN(t)?qB:(r+=1)+t>e.length?CN:(e=e.slice(r,r+t),n.C=r+t,e))}function Ib(n){n.Y=Date.now()+n.P,Fq(n,n.P)}function Fq(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_b(Xs(n.lb,n),e)}function AN(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Eb(n){0==n.l.H||n.J||lz(n.l,n)}function ny(n){AN(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,UB(n.V),Aq(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function WB(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ZB(t.i,n)))if(!n.K&&ZB(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;MN(t),NN(t)}XB(t),_o(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=_b(Xs(t.ib,t),6e3));if(1>=Wq(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else iy(t,11)}else if((n.K||t.g==n)&&MN(t),!lb(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.V=g[0],g=g[1],2==t.H)if("c"==g[0]){t.K=g[1],t.pa=g[2];const y=g[3];null!=y&&(t.ra=y,t.l.info("VER="+t.ra));const E=g[4];null!=E&&(t.Ga=E,t.l.info("SVER="+t.Ga));const b=g[5];null!=b&&"number"==typeof b&&0<b&&(t.L=r=1.5*b,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const V=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=r.i;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(KB(s,s.h),s.h=null))}if(r.F){const q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(r.Da=q,_r(r.I,r.F,q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=fz(r,r.J?r.pa:null,r.Y),o.K){Zq(r.i,o);var d=o,f=r.L;f&&d.setTimeout(f),d.B&&(AN(d),Ib(d)),r.g=o}else uz(r);0<t.j.length&&kN(t)}else"stop"!=g[0]&&"close"!=g[0]||iy(t,7);else 3==t.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?iy(t,7):JB(t):"noop"!=g[0]&&t.h&&t.h.Aa(g),t.A=0)}mb()}catch{}}function Vq(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fN(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function nse(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fN(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function tse(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fN(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(gt=vb.prototype).setTimeout=function(n){this.P=n},gt.nb=function(n){n=n.target;const e=this.M;e&&3==rl(n)?e.l():this.Pa(n)},gt.Pa=function(n){try{if(n==this.g)e:{const y=rl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||wB||this.g&&(this.h.h||this.g.ja()||nz(this.g)))){this.J||4!=y||7==e||mb(),AN(this);var t=this.g.da();this.ca=t;t:if(Oq(this)){var r=nz(this.g);n="";var i=r.length,s=4==rl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ny(this),Eb(this);var o="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Yie(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,y,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lb(d)){var g=d;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,_o(12),ny(this),Eb(this);break e}iE(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,WB(this,t)}this.S?(Lq(this,y,o),wB&&this.i&&3==y&&(Cq(this.U,this.V,"tick",this.mb),this.V.start())):(iE(this.j,this.m,o,null),WB(this,o)),4==y&&ny(this),this.i&&!this.J&&(4==y?lz(this.l,this):(this.i=!1,Ib(this)))}else(function Ise(n){const e={};n=(n.g&&2<=rl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(lb(n[r]))continue;var t=qie(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function Vie(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,_o(12)):(this.o=0,_o(13)),ny(this),Eb(this)}}}catch{}},gt.mb=function(){if(this.g){var n=rl(this.g),e=this.g.ja();this.C<e.length&&(AN(this),Lq(this,n,e),this.i&&4!=n&&Ib(this))}},gt.cancel=function(){this.J=!0,ny(this)},gt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Qie(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(mb(),_o(17)),ny(this),this.o=2,Eb(this)):Fq(this,this.Y-n)};var Uq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ry(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ry){this.h=n.h,bN(this,n.j),this.s=n.s,this.g=n.g,SN(this,n.m),this.l=n.l;var e=n.i,t=new Cb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Bq(this,t),this.o=n.o}else n&&(e=String(n).match(Uq))?(this.h=!1,bN(this,e[1]||"",!0),this.s=wb(e[2]||""),this.g=wb(e[3]||"",!0),SN(this,e[4]),this.l=wb(e[5]||"",!0),Bq(this,e[6]||"",!0),this.o=wb(e[7]||"")):(this.h=!1,this.i=new Cb(null,this.h))}function sh(n){return new ry(n)}function bN(n,e,t){n.j=t?wb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function SN(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Bq(n,e,t){e instanceof Cb?(n.i=e,function cse(n,e){e&&!n.j&&(Op(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($q(this,r),Hq(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Tb(e,ase)),n.i=new Cb(e,n.h))}function _r(n,e,t){n.i.set(e,t)}function DN(n){return _r(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Tb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ise),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ise(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ry.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Tb(e,jq,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Tb(e,jq,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Tb(t,"/"==t.charAt(0)?ose:sse,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Tb(t,use)),n.join("")};var jq=/[#\/\?@]/g,sse=/[#\?:]/g,ose=/[#\?]/g,ase=/[#\?@]/g,use=/#/g;function Cb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Op(n){n.g||(n.g=new Map,n.h=0,n.i&&function rse(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $q(n,e){Op(n),e=sE(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Gq(n,e){return Op(n),e=sE(n,e),n.g.has(e)}function Hq(n,e,t){$q(n,e),0<t.length&&(n.i=null,n.g.set(sE(n,e),IB(t)),n.h+=t.length)}function sE(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function qq(n){this.l=n||dse,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ka&&Wt.g.Ka()&&Wt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Cb.prototype).add=function(n,e){Op(this),this.i=null,n=sE(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){Op(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},gt.ta=function(){Op(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},gt.Z=function(n){Op(this);let e=[];if("string"==typeof n)Gq(this,n)&&(e=e.concat(this.g.get(sE(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},gt.set=function(n,e){return Op(this),this.i=null,Gq(this,n=sE(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var dse=10;function zq(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Wq(n){return n.h?1:n.g?n.g.size:0}function ZB(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function KB(n,e){n.g?n.g.add(e):n.h=e}function Zq(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Kq(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return IB(n.i)}qq.prototype.cancel=function(){if(this.i=Kq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var hse=class{stringify(n){return Wt.JSON.stringify(n,void 0)}parse(n){return Wt.JSON.parse(n,void 0)}};function fse(){this.g=new hse}function pse(n,e,t){const r=t||"";try{Vq(n,function(i,s){let o=i;cb(i)&&(o=FB(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RN(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ab(n){this.l=n.fc||null,this.j=n.ob||!1}function xN(n,e){fs.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=YB,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hs(Ab,jB),Ab.prototype.g=function(){return new xN(this.l,this.j)},Ab.prototype.i=function(n){return function(){return n}}({}),hs(xN,fs);var YB=0;function Yq(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function bb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sb(n)}function Sb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=xN.prototype).open=function(n,e){if(this.readyState!=YB)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sb(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Wt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bb(this)),this.readyState=YB},gt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sb(this)),this.g&&(this.readyState=3,Sb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yq(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bb(this):Sb(this),3==this.readyState&&Yq(this)}},gt.Za=function(n){this.g&&(this.response=this.responseText=n,bb(this))},gt.Ya=function(n){this.g&&(this.response=n,bb(this))},gt.ka=function(){this.g&&bb(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xN.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mse=Wt.JSON.parse;function Jr(n){fs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qq,this.L=this.M=!1}hs(Jr,fs);var Qq="",_se=/^https?$/i,yse=["POST","PUT"];function Jq(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Xq(n),PN(n)}function Xq(n){n.F||(n.F=!0,Os(n,"complete"),Os(n,"error"))}function ez(n){if(n.h&&typeof yB<"u"&&(!n.C[1]||4!=rl(n)||2!=n.da()))if(n.v&&4==rl(n))BB(n.La,0,n);else if(Os(n,"readystatechange"),4==rl(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(Uq)[1]||null;!i&&Wt.self&&Wt.self.location&&(i=Wt.self.location.protocol.slice(0,-1)),r=!_se.test(i?i.toLowerCase():"")}t=r}if(t)Os(n,"complete"),Os(n,"success");else{n.m=6;try{var s=2<rl(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",Xq(n)}}finally{PN(n)}}}function PN(n,e){if(n.g){tz(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Os(n,"ready");try{t.onreadystatechange=r}catch{}}}function tz(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function rl(n){return n.g?n.g.readyState:0}function nz(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Qq:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rz(n){let e="";return DB(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function QB(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=rz(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):_r(n,e,t))}function Db(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iz(n){this.Ga=0,this.j=[],this.l=new IN,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Db("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Db("baseRetryDelayMs",5e3,n),this.hb=Db("retryDelaySeedMs",1e4,n),this.eb=Db("forwardChannelMaxRetries",2,n),this.xa=Db("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new qq(n&&n.concurrentRequestLimit),this.Ja=new fse,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function JB(n){if(sz(n),3==n.H){var e=n.W++,t=sh(n.I);if(_r(t,"SID",n.K),_r(t,"RID",e),_r(t,"TYPE","terminate"),Rb(n,t),(e=new vb(n,n.l,e)).L=2,e.v=DN(sh(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon)try{t=Wt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=pz(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ib(e)}hz(n)}function NN(n){n.g&&(e4(n),n.g.cancel(),n.g=null)}function sz(n){NN(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),MN(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function kN(n){if(!zq(n.i)&&!n.m){n.m=!0;var e=n.Na;fb||Eq(),pb||(fb(),pb=!0),VB.add(e,n),n.C=0}}function oz(n,e){var t;t=e?e.m:n.W++;const r=sh(n.I);_r(r,"SID",n.K),_r(r,"RID",t),_r(r,"AID",n.V),Rb(n,r),n.o&&n.s&&QB(r,n.o,n.s),t=new vb(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=az(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),KB(n.i,t),zB(t,r,e)}function Rb(n,e){n.na&&DB(n.na,function(t,r){_r(e,r,t)}),n.h&&Vq({},function(t,r){_r(e,r,t)})}function az(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Xs(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let g=i[f].g;const y=i[f].map;if(g-=s,0>g)s=Math.max(0,i[f].g-100),d=!1;else try{pse(y,o,"req"+g+"_")}catch{r&&r(y)}}if(d){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function uz(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;fb||Eq(),pb||(fb(),pb=!0),VB.add(e,n),n.A=0}}function XB(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=_b(Xs(n.Ma,n),dz(n,n.A)),n.A++,0))}function e4(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function cz(n){n.g=new vb(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=sh(n.wa);_r(e,"RID","rpc"),_r(e,"SID",n.K),_r(e,"AID",n.V),_r(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&_r(e,"TO",n.qa),_r(e,"TYPE","xmlhttp"),Rb(n,e),n.o&&n.s&&QB(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=DN(sh(e)),t.s=null,t.S=!0,Mq(t,n)}function MN(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function lz(n,e){var t=null;if(n.g==e){MN(n),e4(n),n.g=null;var r=2}else{if(!ZB(n.i,e))return;t=e.F,Zq(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Os(r=EN(),new Rq(r,t)),kN(n)}else uz(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Ese(n,e){return!(Wq(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=_b(Xs(n.Na,n,e),dz(n,n.C)),n.C++,0)))}(n,e)||2==r&&XB(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:iy(n,5);break;case 4:iy(n,10);break;case 3:iy(n,6);break;default:iy(n,2)}}function dz(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function iy(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Xs(n.pb,n);t||(t=new ry("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||bN(t,"https"),DN(t)),function gse(n,e){const t=new IN;if(Wt.Image){const r=new Image;r.onload=pN(RN,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pN(RN,t,r,"TestLoadImage: error",!1,e),r.onabort=pN(RN,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pN(RN,t,r,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _o(2);n.H=0,n.h&&n.h.za(e),hz(n),sz(n)}function hz(n){if(n.H=0,n.ma=[],n.h){const e=Kq(n.i);(0!=e.length||0!=n.j.length)&&(aq(n.ma,e),aq(n.ma,n.j),n.i.i.length=0,IB(n.j),n.j.length=0),n.h.ya()}}function fz(n,e,t){var r=t instanceof ry?sh(t):new ry(t);if(""!=r.g)e&&(r.g=e+"."+r.g),SN(r,r.m);else{var i=Wt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ry(null);r&&bN(s,r),e&&(s.g=e),i&&SN(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&_r(r,t,e),_r(r,"VER",n.ra),Rb(n,r),r}function pz(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Ha&&!n.va?new Ab({ob:!0}):n.va)).Oa(n.J),e}function gz(){}function ON(){if(rE&&!(10<=Number(Mie)))throw Error("Environmental error: no available transport.")}function Ta(n,e){fs.call(this),this.g=new iz(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!lb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lb(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oE(this)}function mz(n){$B.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _z(){GB.call(this),this.status=1}function oE(n){this.g=n}function zu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function t4(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function jn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(gt=Jr.prototype).Oa=function(n){this.M=n},gt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():HB.g(),this.C=function Pq(n){return n.h||(n.h=n.i())}(this.u?this.u:HB),this.g.onreadystatechange=Xs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void Jq(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Wt.FormData&&n instanceof Wt.FormData,!(0<=oq(yse,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tz(this),0<this.B&&((this.L=function vse(n){return rE&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xs(this.ua,this)):this.A=BB(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Jq(this,s)}},gt.ua=function(){typeof yB<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Os(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Os(this,"complete"),Os(this,"abort"),PN(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),PN(this,!0)),Jr.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?ez(this):this.kb())},gt.kb=function(){ez(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<rl(this)?this.g.status:-1}catch{return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mse(e)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=iz.prototype).ra=8,gt.H=1,gt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new vb(this,this.l,n);let s=this.s;if(this.U&&(s?(s=hq(s),pq(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=az(this,i,e),_r(t=sh(this.I),"RID",n),_r(t,"CVER",22),this.F&&_r(t,"X-HTTP-Session-Id",this.F),Rb(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(rz(s)))+"&"+e:this.o&&QB(t,this.o,s)),KB(this.i,i),this.bb&&_r(t,"TYPE","init"),this.P?(_r(t,"$req",e),_r(t,"SID","null"),i.aa=!0,zB(i,t,null)):zB(i,t,e),this.H=2}}else 3==this.H&&(n?oz(this,n):0==this.j.length||zq(this.i)||oz(this))},gt.Ma=function(){if(this.u=null,cz(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=_b(Xs(this.jb,this),n)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_o(10),NN(this),cz(this))},gt.ib=function(){null!=this.v&&(this.v=null,NN(this),XB(this),_o(19))},gt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),_o(2)):(this.l.info("Failed to ping google.com"),_o(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=gz.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},ON.prototype.g=function(n,e){return new Ta(n,e)},hs(Ta,fs),Ta.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;_o(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=fz(n,null,n.Y),kN(n)},Ta.prototype.close=function(){JB(this.g)},Ta.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=FB(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&kN(e)},Ta.prototype.N=function(){this.g.h=null,delete this.j,JB(this.g),delete this.g,Ta.$.N.call(this)},hs(mz,$B),hs(_z,GB),hs(oE,gz),oE.prototype.Ba=function(){Os(this.g,"a")},oE.prototype.Aa=function(n){Os(this.g,new mz(n))},oE.prototype.za=function(n){Os(this.g,new _z)},oE.prototype.ya=function(){Os(this.g,"b")},hs(zu,function wse(){this.blockSize=-1}),zu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)t4(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){t4(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){t4(this,r),i=0;break}}this.h=i,this.i+=e},zu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Tse={};function n4(n){return-128<=n&&128>n?function Pie(n,e){var t=Tse;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new jn([0|e],0>e?-1:0)}):new jn([0|n],0>n?-1:0)}function il(n){if(isNaN(n)||!isFinite(n))return aE;if(0>n)return Ls(il(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=r4;return new jn(e,0)}var r4=4294967296,aE=n4(0),i4=n4(1),vz=n4(16777216);function oh(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function uu(n){return-1==n.h}function Ls(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new jn(t,~n.h).add(i4)}function LN(n,e){return n.add(Ls(e))}function FN(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function xb(n,e){this.g=n,this.h=e}function VN(n,e){if(oh(e))throw Error("division by zero");if(oh(n))return new xb(aE,aE);if(uu(n))return e=VN(Ls(n),e),new xb(Ls(e.g),Ls(e.h));if(uu(e))return e=VN(n,Ls(e)),new xb(Ls(e.g),e.h);if(30<n.g.length){if(uu(n)||uu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=i4,r=e;0>=r.X(n);)t=Iz(t),r=Iz(r);var i=uE(t,1),s=uE(r,1);for(r=uE(r,2),t=uE(t,2);!oh(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=uE(r,1),t=uE(t,1)}return e=LN(n,i.R(e)),new xb(i,e)}for(i=aE;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=il(t)).R(e);uu(o)||0<o.X(n);)o=(s=il(t-=r)).R(e);oh(s)&&(s=i4),i=i.add(s),n=LN(n,o)}return new xb(i,n)}function Iz(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new jn(t,n.h)}function uE(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new jn(i,n.h)}(gt=jn.prototype).ea=function(){if(uu(this))return-Ls(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:r4+r)*e,e*=r4}return n},gt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(oh(this))return"0";if(uu(this))return"-"+Ls(this).toString(n);for(var e=il(Math.pow(n,6)),t=this,r="";;){var i=VN(t,e).g,s=((0<(t=LN(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(oh(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},gt.X=function(n){return uu(n=LN(this,n))?-1:oh(n)?0:1},gt.abs=function(){return uu(this)?Ls(this):this},gt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new jn(t,-2147483648&t[t.length-1]?-1:0)},gt.R=function(n){if(oh(this)||oh(n))return aE;if(uu(this))return uu(n)?Ls(this).R(Ls(n)):Ls(Ls(this).R(n));if(uu(n))return Ls(this.R(Ls(n)));if(0>this.X(vz)&&0>n.X(vz))return il(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),d=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=o*f,FN(t,2*r+2*i),t[2*r+2*i+1]+=s*f,FN(t,2*r+2*i+1),t[2*r+2*i+1]+=o*d,FN(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,FN(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new jn(t,0)},gt.gb=function(n){return VN(this,n).h},gt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new jn(t,this.h&n.h)},gt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new jn(t,this.h|n.h)},gt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new jn(t,this.h^n.h)},ON.prototype.createWebChannel=ON.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,wN.NO_ERROR=0,wN.TIMEOUT=8,wN.HTTP_ERROR=6,xq.COMPLETE="complete",Nq.EventType=yb,yb.OPEN="a",yb.CLOSE="b",yb.ERROR="c",yb.MESSAGE="d",fs.prototype.listen=fs.prototype.O,Jr.prototype.listenOnce=Jr.prototype.P,Jr.prototype.getLastError=Jr.prototype.Sa,Jr.prototype.getLastErrorCode=Jr.prototype.Ia,Jr.prototype.getStatus=Jr.prototype.da,Jr.prototype.getResponseJson=Jr.prototype.Wa,Jr.prototype.getResponseText=Jr.prototype.ja,Jr.prototype.send=Jr.prototype.ha,Jr.prototype.setWithCredentials=Jr.prototype.Oa,zu.prototype.digest=zu.prototype.l,zu.prototype.reset=zu.prototype.reset,zu.prototype.update=zu.prototype.j,jn.prototype.add=jn.prototype.add,jn.prototype.multiply=jn.prototype.R,jn.prototype.modulo=jn.prototype.gb,jn.prototype.compare=jn.prototype.X,jn.prototype.toNumber=jn.prototype.ea,jn.prototype.toString=jn.prototype.toString,jn.prototype.getBits=jn.prototype.D,jn.fromNumber=il,jn.fromString=function yz(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ls(yz(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=il(Math.pow(e,8)),r=aE,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=il(Math.pow(e,s)),r=r.R(s).add(il(o))):r=(r=r.R(t)).add(il(o))}return r};var Cse=qu.createWebChannelTransport=function(){return new ON},Ase=qu.getStatEventTarget=function(){return EN()},s4=qu.ErrorCode=wN,bse=qu.EventType=xq,Sse=qu.Event=ty,Ez=qu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Dse=qu.FetchXmlHttpFactory=Ab,UN=qu.WebChannel=Nq,Rse=qu.XhrIo=Jr,xse=qu.Md5=zu,cE=qu.Integer=jn;const wz="@firebase/firestore";class ps{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ps.UNAUTHENTICATED=new ps(null),ps.GOOGLE_CREDENTIALS=new ps("google-credentials-uid"),ps.FIRST_PARTY=new ps("first-party-uid"),ps.MOCK_USER=new ps("mock-user");let lE="9.23.0";const Lp=new Zn.Yd("@firebase/firestore");function o4(){return Lp.logLevel}function Ke(n,...e){if(Lp.logLevel<=Zn.in.DEBUG){const t=e.map(a4);Lp.debug(`Firestore (${lE}): ${n}`,...t)}}function gi(n,...e){if(Lp.logLevel<=Zn.in.ERROR){const t=e.map(a4);Lp.error(`Firestore (${lE}): ${n}`,...t)}}function cu(n,...e){if(Lp.logLevel<=Zn.in.WARN){const t=e.map(a4);Lp.warn(`Firestore (${lE}): ${n}`,...t)}}function a4(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function yt(n="Unexpected state"){const e=`FIRESTORE (${lE}) INTERNAL ASSERTION FAILED: `+n;throw gi(e),new Error(e)}function St(n,e){n||yt()}function ft(n,e){return n}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Tz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ps.UNAUTHENTICATED))}shutdown(){}}class Mse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ose{constructor(e){this.t=e,this.currentUser=ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let o=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const g=o;e.enqueueRetryable((0,j.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},f=g=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new Tz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new ps(e)}}class Lse{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ps.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Fse{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Lse(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vse{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.T=t.token,new Cz(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Use(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Az{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Use(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function dE(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bz(n){return n+"\0"}class Sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Sr(0,0))}static max(){return new Dt(new Sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pb{constructor(e,t,r){void 0===t?t=0:t>e.length&&yt(),void 0===r?r=e.length-t:r>e.length-t&&yt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends Pb{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(Te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const Bse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends Pb{construct(e,t,r){return new Xr(e,t,r)}static isValidIdentifier(e){return Bse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Fe(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Fe(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Fe(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(o=!o,i++):"."!==d||o?(r+=d,i++):(s(),i++)}if(s(),o)throw new Fe(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(t)}static emptyPath(){return new Xr([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(Cn.fromString(e))}static fromName(e){return new lt(Cn.fromString(e).popFirst(5))}static empty(){return new lt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new Cn(e.slice()))}}class BN{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function u4(n){return n.fields.find(e=>2===e.kind)}function sy(n){return n.fields.filter(e=>2!==e.kind)}BN.UNKNOWN_ID=-1;class jN{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nb(0,Ca.min())}}function Sz(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Sr(t+1,0):new Sr(t,r));return new Ca(i,lt.empty(),e)}function Dz(n){return new Ca(n.readTime,n.key,-1)}class Ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ca(Dt.min(),lt.empty(),-1)}static max(){return new Ca(Dt.max(),lt.empty(),-1)}}function c4(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=lt.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const Rz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fp(n){return l4.apply(this,arguments)}function l4(){return l4=(0,j.Z)(function*(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==Rz)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),l4.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,s=0,o=!1;e.forEach(d=>{++i,d.next(()=>{++s,o&&s===i&&t()},f=>r(f))}),o=!0,s===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const s=e.length,o=new Array(s);let d=0;for(let f=0;f<s;f++){const g=f;t(e[g]).next(y=>{o[g]=y,++d,d===s&&r(o)},y=>i(y))}})}static doWhile(e,t){return new pe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class $N{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Qi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new kb(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=d4(r.target.error);this.v.reject(new kb(e,i))}}static open(e,t,r,i){try{return new $N(t,e.transaction(i,r))}catch(s){throw new kb(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hse(t)}}class Wu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Wu.S((0,z.z$)())&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),oy(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(Wu.C())return!0;const e=(0,z.z$)(),t=Wu.S(e),r=0<t&&t<10,i=Wu.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,j.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new kb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const d=o.target.error;i("VersionError"===d.name?new Fe(Te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Fe(Te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new kb(e,d))},s.onupgradeneeded=o=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,j.Z)(function*(){const o="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const f=$N.open(s.db,e,o?"readonly":"readwrite",r),g=i(f).next(y=>(f.P(),y)).catch(y=>(f.abort(y),pe.reject(y))).toPromise();return g.catch(()=>{}),yield f.R,g}catch(f){const g=f,y="FirebaseError"!==g.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),s.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gse{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return oy(this.L.delete())}}class kb extends Fe{constructor(e,t){super(Te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vp(n){return"IndexedDbTransactionError"===n.name}class Hse{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oy(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),oy(this.store.add(e))}get(e){return oy(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),oy(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),oy(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(o,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new pe((s,o)=>{i.onerror=d=>{o(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,o,d)=>d.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=s=>{const o=d4(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(d=>{d?o.continue():r()}):r()}})}W(e,t){const r=[];return new pe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const d=o.target.result;if(!d)return void i();const f=new Gse(d),g=t(d.primaryKey,d.value,f);if(g instanceof pe){const y=g.catch(E=>(f.done(),pe.reject(E)));r.push(y)}f.isDone?i():null===f.K?d.continue():d.continue(f.K)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oy(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=d4(r.target.error);t(i)}})}let Pz=!1;function d4(n){const e=Wu.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pz||(Pz=!0,setTimeout(()=>{throw r},0)),r}}return n}class qse{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,j.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Vp(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Fp(r)}yield t.et(6e4)}))}}class zse{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,j.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return pe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ke("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,i).next(d=>{i-=d,r.add(o)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(i,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>o.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Dz(s);c4(o,r)>0&&(r=o)}),new Ca(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Aa=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Mb(n){return null==n}function Ob(n){return 0===n&&1/n==-1/0}function Nz(n){return"number"==typeof n&&Number.isInteger(n)&&!Ob(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function to(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kz(e)),e=Wse(n.get(t),e);return kz(e)}function Wse(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function kz(n){return n+"\x01\x01"}function sl(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&yt(),n.charAt(o+1)){case"\x01":const d=n.substring(s,o);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:yt()}s=o+2}return new Cn(r)}const Mz=["userId","batchId"];function GN(n,e){return[n,to(e)]}function Oz(n,e,t){return[n,to(e),t]}const Zse={},Kse=["prefixPath","collectionGroup","readTime","documentId"],Yse=["prefixPath","collectionGroup","documentId"],Qse=["collectionGroup","readTime","prefixPath","documentId"],Jse=["canonicalId","targetId"],Xse=["targetId","path"],eoe=["path","targetId"],toe=["collectionId","parent"],noe=["indexId","uid"],roe=["uid","sequenceNumber"],ioe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],soe=["indexId","uid","orderedDocumentKey"],ooe=["userId","collectionPath","documentId"],aoe=["userId","collectionPath","largestBatchId"],uoe=["userId","collectionGroup","largestBatchId"],Lz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],coe=[...Lz,"documentOverlays"],Fz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vz=Fz,loe=[...Vz,"indexConfiguration","indexState","indexEntries"];class h4 extends xz{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function gs(n,e){const t=ft(n);return Wu.M(t.ht,e)}function Uz(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Up(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||Fs.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fs.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new HN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new HN(this.root,e,this.comparator,!1)}getReverseIterator(){return new HN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new HN(this.root,e,this.comparator,!0)}}class HN{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Fs.RED,this.left=i??Fs.EMPTY,this.right=s??Fs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Fs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Fs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}Fs.EMPTY=null,Fs.RED=!0,Fs.BLACK=!1,Fs.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Fs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yr{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jz(this.data.getIterator())}getIteratorFrom(e){return new jz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yr(this.comparator);return t.data=e,t}}class jz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hE(n){return n.hasNext()?n.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(Xr.comparator)}static empty(){return new $o([])}unionWith(e){let t=new yr(Xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dE(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $z extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ji{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $z("Invalid base64 string: "+i):i}}(e);return new Ji(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ji(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ji.EMPTY_BYTE_STRING=new Ji("");const hoe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bp(n){if(St(!!n),"string"==typeof n){let e=0;const t=hoe.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ei(n.seconds),nanos:ei(n.nanos)}}function ei(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ah(n){return"string"==typeof n?Ji.fromBase64String(n):Ji.fromUint8Array(n)}function qN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zN(n){const e=n.mapValue.fields.__previous_value__;return qN(e)?zN(e):e}function Lb(n){const e=Bp(n.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}class foe{constructor(e,t,r,i,s,o,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g}}class jp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jp&&e.projectId===this.projectId&&e.database===this.database}}const $p={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},WN={nullValue:"NULL_VALUE"};function Gp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qN(n)?4:zz(n)?9007199254740991:10:yt()}function ol(n,e){if(n===e)return!0;const t=Gp(n);if(t!==Gp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lb(n).isEqual(Lb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Bp(r.timestampValue),o=Bp(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ah(n.bytesValue).isEqual(ah(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ei(r.geoPointValue.latitude)===ei(i.geoPointValue.latitude)&&ei(r.geoPointValue.longitude)===ei(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ei(r.integerValue)===ei(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ei(r.doubleValue),o=ei(i.doubleValue);return s===o?Ob(s)===Ob(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return dE(n.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Uz(s)!==Uz(o))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===o[d]||!ol(s[d],o[d])))return!1;return!0}(n,e);default:return yt()}var i}function Fb(n,e){return void 0!==(n.values||[]).find(t=>ol(t,e))}function Hp(n,e){if(n===e)return 0;const t=Gp(n),r=Gp(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=ei(i.integerValue||i.doubleValue),d=ei(s.integerValue||s.doubleValue);return o<d?-1:o>d?1:o===d?0:isNaN(o)?isNaN(d)?0:-1:1}(n,e);case 3:return Gz(n.timestampValue,e.timestampValue);case 4:return Gz(Lb(n),Lb(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,s){const o=ah(i),d=ah(s);return o.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),d=s.split("/");for(let f=0;f<o.length&&f<d.length;f++){const g=zt(o[f],d[f]);if(0!==g)return g}return zt(o.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=zt(ei(i.latitude),ei(s.latitude));return 0!==o?o:zt(ei(i.longitude),ei(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],d=s.values||[];for(let f=0;f<o.length&&f<d.length;++f){const g=Hp(o[f],d[f]);if(g)return g}return zt(o.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===$p.mapValue&&s===$p.mapValue)return 0;if(i===$p.mapValue)return 1;if(s===$p.mapValue)return-1;const o=i.fields||{},d=Object.keys(o),f=s.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const E=zt(d[y],g[y]);if(0!==E)return E;const b=Hp(o[d[y]],f[g[y]]);if(0!==b)return b}return zt(d.length,g.length)}(n.mapValue,e.mapValue);default:throw yt()}}function Gz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=Bp(n),r=Bp(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function fE(n){return f4(n)}function f4(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Bp(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ah(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=f4(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const d of i)o?o=!1:s+=",",s+=`${d}:${f4(r.fields[d])}`;return s+"}"}(n.mapValue):yt();var e}function ay(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function p4(n){return!!n&&"integerValue"in n}function Vb(n){return!!n&&"arrayValue"in n}function Hz(n){return!!n&&"nullValue"in n}function qz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KN(n){return!!n&&"mapValue"in n}function Ub(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Up(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ub(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ub(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function poe(n){return"nullValue"in n?WN:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ay(jp.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:yt()}function goe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ay(jp.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$p:yt()}function Wz(n,e){const t=Hp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Zz(n,e){const t=Hp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Vs{constructor(e){this.value=e}static empty(){return new Vs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KN(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ub(t)}setAll(e){let t=Xr.emptyPath(),r={},i=[];e.forEach((o,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}o?r[d.lastSegment()]=Ub(o):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KN(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KN(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Up(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vs(Ub(this.value))}}function Kz(n){const e=[];return Up(n.fields,(t,r)=>{const i=new Xr([t]);if(KN(r)){const s=Kz(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new $o(e)}class vr{constructor(e,t,r,i,s,o,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=d}static newInvalidDocument(e){return new vr(e,0,Dt.min(),Dt.min(),Dt.min(),Vs.empty(),0)}static newFoundDocument(e,t,r,i){return new vr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new vr(e,2,t,Dt.min(),Dt.min(),Vs.empty(),0)}static newUnknownDocument(e,t){return new vr(e,3,t,Dt.min(),Dt.min(),Vs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qp{constructor(e,t){this.position=e,this.inclusive=t}}function Yz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?lt.comparator(lt.fromName(o.referenceValue),t.key):Hp(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Qz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ol(n.position[t],e.position[t]))return!1;return!0}class pE{constructor(e,t="asc"){this.field=e,this.dir=t}}function moe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Jz{}class In extends Jz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _oe(e,t,r):"array-contains"===t?new Ioe(e,r):"in"===t?new i8(e,r):"not-in"===t?new Eoe(e,r):"array-contains-any"===t?new woe(e,r):new In(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new yoe(e,r):new voe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hp(t,this.value)):null!==t&&Gp(this.value)===Gp(t)&&this.matchesComparison(Hp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $n extends Jz{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new $n(e,t)}matches(e){return gE(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function gE(n){return"and"===n.op}function g4(n){return"or"===n.op}function m4(n){return Xz(n)&&gE(n)}function Xz(n){for(const e of n.filters)if(e instanceof $n)return!1;return!0}function _4(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+fE(n.value);if(m4(n))return n.filters.map(e=>_4(e)).join(",");{const e=n.filters.map(t=>_4(t)).join(",");return`${n.op}(${e})`}}function e8(n,e){return n instanceof In?(t=n,(r=e)instanceof In&&t.op===r.op&&t.field.isEqual(r.field)&&ol(t.value,r.value)):n instanceof $n?function(t,r){return r instanceof $n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&e8(s,r.filters[o]),!0)}(n,e):void yt();var t,r}function t8(n,e){const t=n.filters.concat(e);return $n.create(t,n.op)}function n8(n){return n instanceof In?`${(e=n).field.canonicalString()} ${e.op} ${fE(e.value)}`:n instanceof $n?function(e){return e.op.toString()+" {"+e.getFilters().map(n8).join(" ,")+"}"}(n):"Filter";var e}class _oe extends In{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class yoe extends In{constructor(e,t){super(e,"in",t),this.keys=r8(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class voe extends In{constructor(e,t){super(e,"not-in",t),this.keys=r8(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r8(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class Ioe extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vb(t)&&Fb(t.arrayValue,this.value)}}class i8 extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fb(this.value.arrayValue,t)}}class Eoe extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fb(this.value.arrayValue,t)}}class woe extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fb(this.value.arrayValue,r))}}class Toe{constructor(e,t=null,r=[],i=[],s=null,o=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=d,this.dt=null}}function y4(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Toe(n,e,t,r,i,s,o)}function uy(n){const e=ft(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_4(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Mb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fE(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fE(r)).join(",")),e.dt=t}return e.dt}function Bb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!moe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qz(n.startAt,e.startAt)&&Qz(n.endAt,e.endAt)}function YN(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QN(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}function s8(n,e,t){let r=WN,i=!0;for(const s of QN(n,e)){let o=WN,d=!0;switch(s.op){case"<":case"<=":o=poe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,d=!1;break;case"!=":case"not-in":o=WN}Wz({value:r,inclusive:i},{value:o,inclusive:d})<0&&(r=o,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Wz({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function o8(n,e,t){let r=$p,i=!0;for(const s of QN(n,e)){let o=$p,d=!0;switch(s.op){case">=":case">":o=goe(s.value),d=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,d=!1;break;case"!=":case"not-in":o=$p}Zz({value:r,inclusive:i},{value:o,inclusive:d})>0&&(r=o,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Zz({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class uh{constructor(e,t=null,r=[],i=[],s=null,o="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function a8(n,e,t,r,i,s,o,d){return new uh(n,e,t,r,i,s,o,d)}function mE(n){return new uh(n)}function u8(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function v4(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JN(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function I4(n){return null!==n.collectionGroup}function cy(n){const e=ft(n);if(null===e.wt){e.wt=[];const t=JN(e),r=v4(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new pE(t)),e.wt.push(new pE(Xr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new pE(Xr.keyField(),s))}}}return e.wt}function yo(n){const e=ft(n);if(!e._t)if("F"===e.limitType)e._t=y4(e.path,e.collectionGroup,cy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of cy(e))t.push(new pE(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new qp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new qp(e.startAt.position,e.startAt.inclusive):null;e._t=y4(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function E4(n,e){e.getFirstInequalityField(),JN(n);const t=n.filters.concat([e]);return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XN(n,e,t){return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jb(n,e){return Bb(yo(n),yo(e))&&n.limitType===e.limitType}function c8(n){return`${uy(yo(n))}|lt:${n.limitType}`}function w4(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>n8(r)).join(", ")}]`),Mb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fE(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fE(r)).join(",")),`Target(${t})`}(yo(n))}; limitType=${n.limitType})`}function $b(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of cy(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const d=Yz(i,s,o);return i.inclusive?d<=0:d<0}(t.startAt,cy(t),r)||t.endAt&&!function(i,s,o){const d=Yz(i,s,o);return i.inclusive?d>=0:d>0}(t.endAt,cy(t),r)));var t,r}function l8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function d8(n){return(e,t)=>{let r=!1;for(const i of cy(n)){const s=Coe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Coe(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,s,o){const d=s.data.field(i),f=o.data.field(i);return null!==d&&null!==f?Hp(d,f):yt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}class ch{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Up(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bz(this.inner)}size(){return this.innerSize}}const Aoe=new ar(lt.comparator);function Go(){return Aoe}const h8=new ar(lt.comparator);function Gb(...n){let e=h8;for(const t of n)e=e.insert(t.key,t);return e}function f8(n){let e=h8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function al(){return Hb()}function p8(){return Hb()}function Hb(){return new ch(n=>n.toString(),(n,e)=>n.isEqual(e))}const boe=new ar(lt.comparator),Soe=new yr(lt.comparator);function sn(...n){let e=Soe;for(const t of n)e=e.add(t);return e}const Doe=new yr(zt);function T4(){return Doe}function g8(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ob(e)?"-0":e}}function m8(n){return{integerValue:""+n}}function _8(n,e){return Nz(e)?m8(e):g8(n,e)}class ek{constructor(){this._=void 0}}function Roe(n,e,t){return n instanceof _E?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&qN(i)&&(i=zN(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof ly?v8(n,e):n instanceof dy?I8(n,e):function(r,i){const s=y8(r,i),o=E8(s)+E8(r.gt);return p4(s)&&p4(r.gt)?m8(o):g8(r.serializer,o)}(n,e)}function xoe(n,e,t){return n instanceof ly?v8(n,e):n instanceof dy?I8(n,e):t}function y8(n,e){return n instanceof yE?p4(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class _E extends ek{}class ly extends ek{constructor(e){super(),this.elements=e}}function v8(n,e){const t=w8(e);for(const r of n.elements)t.some(i=>ol(i,r))||t.push(r);return{arrayValue:{values:t}}}class dy extends ek{constructor(e){super(),this.elements=e}}function I8(n,e){let t=w8(e);for(const r of n.elements)t=t.filter(i=>!ol(i,r));return{arrayValue:{values:t}}}class yE extends ek{constructor(e,t){super(),this.serializer=e,this.gt=t}}function E8(n){return ei(n.integerValue||n.doubleValue)}function w8(n){return Vb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qb{constructor(e,t){this.field=e,this.transform=t}}class Noe{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tk(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nk{}function T8(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new IE(n.key,Dr.none()):new vE(n.key,n.data,Dr.none());{const t=n.data,r=Vs.empty();let i=new yr(Xr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new lh(n.key,r,new $o(i.toArray()),Dr.none())}}function koe(n,e,t){n instanceof vE?function(r,i,s){const o=r.value.clone(),d=b8(r.fieldTransforms,i,s.transformResults);o.setAll(d),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof lh?function(r,i,s){if(!tk(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=b8(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(A8(r)),d.setAll(o),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zb(n,e,t,r){return n instanceof vE?function(i,s,o,d){if(!tk(i.precondition,s))return o;const f=i.value.clone(),g=S8(i.fieldTransforms,d,s);return f.setAll(g),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof lh?function(i,s,o,d){if(!tk(i.precondition,s))return o;const f=S8(i.fieldTransforms,d,s),g=s.data;return g.setAll(A8(i)),g.setAll(f),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(n,e,t,r):(o=t,tk(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Moe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=y8(r.transform,i||null);null!=s&&(null===t&&(t=Vs.empty()),t.set(r.field,s))}return t||null}function C8(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&dE(t,r,(i,s)=>function Poe(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ly&&r instanceof ly||t instanceof dy&&r instanceof dy?dE(t.elements,r.elements,ol):t instanceof yE&&r instanceof yE?ol(t.gt,r.gt):t instanceof _E&&r instanceof _E);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vE extends nk{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lh extends nk{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function A8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function b8(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,d=e.data.field(s.field);r.set(s.field,xoe(o,d,t[i]))}return r}function S8(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Roe(s,o,e))}return r}class IE extends nk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C4 extends nk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A4{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&koe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let d=this.applyToLocalView(o,s.mutatedFields);d=t.has(i.key)?null:d;const f=T8(o,d);null!==f&&r.set(i.key,f),o.isValidDocument()||o.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&dE(this.mutations,e.mutations,(t,r)=>C8(t,r))&&dE(this.baseMutations,e.baseMutations,(t,r)=>C8(t,r))}}class b4{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=boe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new b4(e,t,r,i)}}class S4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Loe{constructor(e,t){this.count=e,this.unchangedNames=t}}var bi,An;function D8(n){switch(n){default:return yt();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0}}function R8(n){if(void 0===n)return gi("GRPC error has no .code"),Te.UNKNOWN;switch(n){case bi.OK:return Te.OK;case bi.CANCELLED:return Te.CANCELLED;case bi.UNKNOWN:return Te.UNKNOWN;case bi.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case bi.INTERNAL:return Te.INTERNAL;case bi.UNAVAILABLE:return Te.UNAVAILABLE;case bi.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case bi.NOT_FOUND:return Te.NOT_FOUND;case bi.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case bi.ABORTED:return Te.ABORTED;case bi.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case bi.DATA_LOSS:return Te.DATA_LOSS;default:return yt()}}(An=bi||(bi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class D4{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rk}static getOrCreateInstance(){return null===rk&&(rk=new D4),rk}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let rk=null;function x8(){return new TextEncoder}const Foe=new cE([4294967295,4294967295],0);function P8(n){const e=x8().encode(n),t=new xse;return t.update(e),new Uint8Array(t.digest())}function N8(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new cE([t,r],0),new cE([i,s],0)]}class R4{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wb(`Invalid padding: ${t}`);if(r<0)throw new Wb(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Wb(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Wb(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=cE.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(cE.fromNumber(r)));return 1===i.compare(Foe)&&(i=new cE([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=P8(e),[r,i]=N8(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new R4(s,i,t);return r.forEach(d=>o.insert(d)),o}insert(e){if(0===this.It)return;const t=P8(e),[r,i]=N8(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Wb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kb.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zb(Dt.min(),i,new ar(zt),Go(),sn())}}class Kb{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kb(r,t,sn(),sn(),sn())}}class ik{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class k8{constructor(e,t){this.targetId=e,this.Vt=t}}class M8{constructor(e,t,r=Ji.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class O8{constructor(){this.St=0,this.Dt=F8(),this.Ct=Ji.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=sn(),t=sn(),r=sn();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:yt()}}),new Kb(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=F8()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Voe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Go(),this.zt=L8(),this.Wt=new ar(zt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(YN(o))if(0===i){const d=new lt(o.path);this.Yt(r,d,vr.newNoDocument(d,Dt.min()))}else St(1===i);else{const d=this.ie(r);if(d!==i){const f=this.re(e,d);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=D4.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(g,y,E){var b,R,V,q,Z,fe;const Se={localCacheCount:y,existenceFilterCount:E.count},ye=E.unchangedNames;return ye&&(Se.bloomFilter={applied:0===g,hashCount:null!==(b=ye?.hashCount)&&void 0!==b?b:0,bitmapLength:null!==(q=null===(V=null===(R=ye?.bits)||void 0===R?void 0:R.bitmap)||void 0===V?void 0:V.length)&&void 0!==q?q:0,padding:null!==(fe=null===(Z=ye?.bits)||void 0===Z?void 0:Z.padding)&&void 0!==fe?fe:0}),Se}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:d=0}=r;let f,g;try{f=ah(s).toUint8Array()}catch(y){if(y instanceof $z)return cu("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw y}try{g=new R4(f,o,d)}catch(y){return cu(y instanceof Wb?"BloomFilter error: ":"Applying bloom filter failed: ",y),1}return 0===g.It?1:i!==t-this.oe(e.targetId,g)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),d=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const d=this.se(o);if(d){if(s.current&&YN(d.target)){const f=new lt(d.target.path);null!==this.jt.get(f)||this.ae(o,f)||this.Yt(o,f,vr.newNoDocument(f,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=sn();this.zt.forEach((s,o)=>{let d=!0;o.forEachWhile(f=>{const g=this.se(f);return!g||"TargetPurposeLimboResolution"===g.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Zb(e,t,this.Wt,this.jt,r);return this.jt=Go(),this.zt=L8(),this.Wt=new ar(zt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new O8,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new yr(zt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new O8),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function L8(){return new ar(lt.comparator)}function F8(){return new ar(lt.comparator)}const Uoe={asc:"ASCENDING",desc:"DESCENDING"},Boe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},joe={and:"AND",or:"OR"};class $oe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function x4(n,e){return n.useProto3Json||Mb(e)?e:{value:e}}function EE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Goe(n,e){return EE(n,e.toTimestamp())}function mi(n){return St(!!n),Dt.fromTimestamp(function(e){const t=Bp(e);return new Sr(t.seconds,t.nanos)}(n))}function P4(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function U8(n){const e=Cn.fromString(n);return St(Z8(e)),e}function Yb(n,e){return P4(n.databaseId,e.path)}function ul(n,e){const t=U8(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(j8(t))}function N4(n,e){return P4(n.databaseId,e)}function B8(n){const e=U8(n);return 4===e.length?Cn.emptyPath():j8(e)}function Qb(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function j8(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $8(n,e,t){return{name:Yb(n,e),fields:t.value.mapValue.fields}}function G8(n,e,t){const r=ul(n,e.name),i=mi(e.updateTime),s=e.createTime?mi(e.createTime):Dt.min(),o=new Vs({mapValue:{fields:e.fields}}),d=vr.newFoundDocument(r,i,s,o);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Jb(n,e){let t;if(e instanceof vE)t={update:$8(n,e.key,e.value)};else if(e instanceof IE)t={delete:Yb(n,e.key)};else if(e instanceof lh)t={update:$8(n,e.key,e.data),updateMask:Qoe(e.fieldMask)};else{if(!(e instanceof C4))return yt();t={verify:Yb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof _E)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ly)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof dy)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof yE)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw yt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Goe(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:yt()),t;var i}function k4(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Dr.updateTime(mi(i.updateTime)):void 0!==i.exists?Dr.exists(i.exists):Dr.none():Dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let d=null;"setToServerValue"in o?(St("REQUEST_TIME"===o.setToServerValue),d=new _E):"appendMissingElements"in o?d=new ly(o.appendMissingElements.values||[]):"removeAllFromArray"in o?d=new dy(o.removeAllFromArray.values||[]):"increment"in o?d=new yE(s,o.increment):yt();const f=Xr.fromServerFormat(o.fieldPath);return new qb(f,d)}(n,i)):[];var i;if(e.update){const i=ul(n,e.update.name),s=new Vs({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new $o((e.updateMask.fieldPaths||[]).map(g=>Xr.fromServerFormat(g)));return new lh(i,s,o,t,r)}return new vE(i,s,t,r)}if(e.delete){const i=ul(n,e.delete);return new IE(i,t)}if(e.verify){const i=ul(n,e.verify);return new C4(i,t)}return yt()}function H8(n,e){return{documents:[N4(n,e.path)]}}function M4(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=N4(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=N4(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return W8($n.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(g=>{return{field:zp((y=g).field),direction:Zoe(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=x4(n,e.limit);var d,f;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function q8(n){let e=B8(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=function(y){const E=z8(y);return E instanceof $n&&m4(E)?E.getFilters():[E]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new pE(wE((E=y).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;t.limit&&(d=function(y){let E;return E="object"==typeof y?y.value:y,Mb(E)?null:E}(t.limit));let f=null;var y;t.startAt&&(f=new qp((y=t.startAt).values||[],!!y.before));let g=null;return t.endAt&&(g=function(y){return new qp(y.values||[],!y.before)}(t.endAt)),a8(e,i,o,s,d,"F",f,g)}function z8(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wE(e.unaryFilter.field);return In.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=wE(e.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wE(e.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wE(e.unaryFilter.field);return In.create(s,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(n):void 0!==n.fieldFilter?In.create(wE((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return $n.create(e.compositeFilter.filters.map(t=>z8(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return yt()}}(e.compositeFilter.op))}(n):yt();var e}function Zoe(n){return Uoe[n]}function Koe(n){return Boe[n]}function Yoe(n){return joe[n]}function zp(n){return{fieldPath:n.canonicalString()}}function wE(n){return Xr.fromServerFormat(n.fieldPath)}function W8(n){return n instanceof In?function(e){if("=="===e.op){if(qz(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NAN"}};if(Hz(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qz(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NOT_NAN"}};if(Hz(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zp(e.field),op:Koe(e.op),value:e.value}}}(n):n instanceof $n?function(e){const t=e.getFilters().map(r=>W8(r));return 1===t.length?t[0]:{compositeFilter:{op:Yoe(e.op),filters:t}}}(n):yt()}function Qoe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Z8(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class dh{constructor(e,t,r,i,s=Dt.min(),o=Dt.min(),d=Ji.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class K8{constructor(e){this.fe=e}}function Y8(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sk(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Yb(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:EE(i,s.version.toTimestamp()),createTime:EE(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hy(e.version)};else{if(!e.isUnknownDocument())return yt();r.unknownDocument={path:t.path.toArray(),version:hy(e.version)}}var i,s;return r}function sk(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hy(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fy(n){const e=new Sr(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function py(n,e){const t=(e.baseMutations||[]).map(s=>k4(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>k4(n.fe,s)),i=Sr.fromMillis(e.localWriteTimeMs);return new A4(e.batchId,i,t,r)}function Xb(n){const e=fy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fy(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=yo(mE(B8(i.documents[0])))):r=yo(q8(n.query)),new dh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ji.fromBase64String(n.resumeToken))}function Q8(n,e){const t=hy(e.snapshotVersion),r=hy(e.lastLimboFreeSnapshotVersion);let i;i=YN(e.target)?H8(n.fe,e.target):M4(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uy(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function O4(n){const e=q8({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XN(e,e.limit,"L"):e}function L4(n,e){return new S4(e.largestBatchId,k4(n.fe,e.overlayMutation))}function J8(n,e){const t=e.path.lastSegment();return[n,to(e.path.popLast()),t]}function X8(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hy(r.readTime),documentKey:to(r.documentKey.path),largestBatchId:r.largestBatchId}}class Xoe{getBundleMetadata(e,t){return eW(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:fy(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return eW(e).put({bundleId:(r=t).id,createTime:hy(mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tW(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:O4(i.bundledQuery),readTime:fy(i.readTime)};var i})}saveNamedQuery(e,t){return tW(e).put({name:(r=t).name,readTime:hy(mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eW(n){return gs(n,"bundles")}function tW(n){return gs(n,"namedQueries")}class ok{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ok(e,t.uid||"")}getOverlay(e,t){return eS(e).get(J8(this.userId,t)).next(r=>r?L4(this.serializer,r):null)}getOverlays(e,t){const r=al();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const d=new S4(t,o);i.push(this.we(e,d))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(to(o.getCollectionPath())));const s=[];return i.forEach(o=>{const d=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(eS(e).J("collectionPathOverlayIndex",d))}),pe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=al(),s=to(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return eS(e).j("collectionPathOverlayIndex",o).next(d=>{for(const f of d){const g=L4(this.serializer,f);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=al();let o;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eS(e).X({index:"collectionGroupOverlayIndex",range:d},(f,g,y)=>{const E=L4(this.serializer,g);s.size()<i||E.largestBatchId===o?(s.set(E.getKey(),E),o=E.largestBatchId):y.done()}).next(()=>s)}we(e,t){return eS(e).put(function(r,i,s){const[o,d,f]=J8(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Jb(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function eS(n){return gs(n,"documentOverlays")}class gy{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ei(e.integerValue));else if("doubleValue"in e){const r=ei(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Ob(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ah(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?zz(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):yt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),lt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function eae(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nW(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=eae(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}gy.Ve=new gy;class tae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=nW(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=nW(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nae{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class rae{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class tS{constructor(){this.je=new tae,this.ze=new nae(this.je),this.We=new rae(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class my{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new my(this.indexId,this.documentKey,this.arrayValue,r)}}function Wp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=rW(n.arrayValue,e.arrayValue),0!==t?t:(t=rW(n.directionalValue,e.directionalValue),0!==t?t:lt.comparator(n.documentKey,e.documentKey)))}function rW(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iae{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){St(e.collectionGroup===this.collectionId);const t=u4(e);if(void 0!==t&&!this.en(t))return!1;const r=sy(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const d=r[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[o++],d))return!1}++s}for(;s<r.length;++s)if(o>=this.Ye.length||!this.sn(this.Ye[o++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function iW(n){var e,t;if(St(n instanceof In||n instanceof $n),n instanceof In){if(n instanceof i8){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>In.create(n.field,"==",s)))||[];return $n.create(i,"or")}return n}const r=n.filters.map(i=>iW(i));return $n.create(r,n.op)}function sae(n){if(0===n.getFilters().length)return[];const e=U4(iW(n));return St(sW(e)),F4(e)||V4(e)?[e]:e.getFilters()}function F4(n){return n instanceof In}function V4(n){return n instanceof $n&&m4(n)}function sW(n){return F4(n)||V4(n)||function(e){if(e instanceof $n&&g4(e)){for(const t of e.getFilters())if(!F4(t)&&!V4(t))return!1;return!0}return!1}(n)}function U4(n){if(St(n instanceof In||n instanceof $n),n instanceof In)return n;if(1===n.filters.length)return U4(n.filters[0]);const e=n.filters.map(r=>U4(r));let t=$n.create(e,n.op);return t=ak(t),sW(t)?t:(St(t instanceof $n),St(gE(t)),St(t.filters.length>1),t.filters.reduce((r,i)=>B4(r,i)))}function B4(n,e){let t;return St(n instanceof In||n instanceof $n),St(e instanceof In||e instanceof $n),t=n instanceof In?e instanceof In?$n.create([n,e],"and"):oW(n,e):e instanceof In?oW(e,n):function(r,i){if(St(r.filters.length>0&&i.filters.length>0),gE(r)&&gE(i))return t8(r,i.getFilters());const s=g4(r)?r:i,o=g4(r)?i:r,d=s.filters.map(f=>B4(f,o));return $n.create(d,"or")}(n,e),ak(t)}function oW(n,e){if(gE(e))return t8(e,n.getFilters());{const t=e.filters.map(r=>B4(n,r));return $n.create(t,"or")}}function ak(n){if(St(n instanceof In||n instanceof $n),n instanceof In)return n;const e=n.getFilters();if(1===e.length)return ak(e[0]);if(Xz(n))return n;const t=e.map(i=>ak(i)),r=[];return t.forEach(i=>{i instanceof In?r.push(i):i instanceof $n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$n.create(r,n.op)}class oae{constructor(){this.rn=new j4}addToCollectionParentIndex(e,t){return this.rn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Ca.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Ca.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class j4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yr(Cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yr(Cn.comparator)).toArray()}}const uk=new Uint8Array(0);class aae{constructor(e,t){this.user=e,this.databaseId=t,this.on=new j4,this.un=new ch(r=>uy(r),(r,i)=>Bb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:to(i)};return aW(e).put(s)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bz(t),""],!1,!0);return aW(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(sl(o.parent))}return r})}addFieldIndex(e,t){const r=ck(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=rS(e);return s.next(d=>{o.put(X8(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ck(e),i=rS(e),s=nS(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=nS(e);let i=!0;const s=new Map;return pe.forEach(this.cn(t),o=>this.an(e,o).next(d=>{i&&(i=!!d),s.set(o,d)})).next(()=>{if(i){let o=sn();const d=[];return pe.forEach(s,(f,g)=>{var y;Ke("IndexedDbIndexManager",`Using index ${y=f,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(ye=>`${ye.fieldPath}:${ye.kind}`).join(",")}`} to execute ${uy(t)}`);const E=function(ye,Le){const nt=u4(Le);if(void 0===nt)return null;for(const at of QN(ye,nt.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(g,f),b=function(ye,Le){const nt=new Map;for(const at of sy(Le))for(const rn of QN(ye,at.fieldPath))switch(rn.op){case"==":case"in":nt.set(at.fieldPath.canonicalString(),rn.value);break;case"not-in":case"!=":return nt.set(at.fieldPath.canonicalString(),rn.value),Array.from(nt.values())}return null}(g,f),R=function(ye,Le){const nt=[];let at=!0;for(const rn of sy(Le)){const Qn=0===rn.kind?s8(ye,rn.fieldPath,ye.startAt):o8(ye,rn.fieldPath,ye.startAt);nt.push(Qn.value),at&&(at=Qn.inclusive)}return new qp(nt,at)}(g,f),V=function(ye,Le){const nt=[];let at=!0;for(const rn of sy(Le)){const Qn=0===rn.kind?o8(ye,rn.fieldPath,ye.endAt):s8(ye,rn.fieldPath,ye.endAt);nt.push(Qn.value),at&&(at=Qn.inclusive)}return new qp(nt,at)}(g,f),q=this.hn(f,g,R),Z=this.hn(f,g,V),fe=this.ln(f,g,b),Se=this.fn(f.indexId,E,q,R.inclusive,Z,V.inclusive,fe);return pe.forEach(Se,ye=>r.H(ye,t.limit).next(Le=>{Le.forEach(nt=>{const at=lt.fromSegments(nt.documentKey);o.has(at)||(o=o.add(at),d.push(at))})}))}).next(()=>d)}return pe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:sae($n.create(e.filters,"and")).map(r=>y4(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,o,d){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),g=f/(null!=t?t.length:1),y=[];for(let E=0;E<f;++E){const b=t?this.dn(t[E/g]):uk,R=this.wn(e,b,r[E%g],i),V=this._n(e,b,s[E%g],o),q=d.map(Z=>this.wn(e,b,Z,!0));y.push(...this.createRange(R,V,q))}return y}wn(e,t,r,i){const s=new my(e,lt.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new my(e,lt.empty(),t,r);return i?s.Je():s}an(e,t){const r=new iae(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const d of s)r.tn(d)&&(!o||d.fields.length>o.fields.length)&&(o=d);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return pe.forEach(i,s=>this.an(e,s).next(o=>{o?0!==r&&o.fields.length<function(d){let f=new yr(Xr.comparator),g=!1;for(const y of d.filters)for(const E of y.getFlattenedFilters())E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?g=!0:f=f.add(E.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new tS;for(const i of sy(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.He(i.kind);gy.Ve._e(s,o)}return r.Qe()}dn(e){const t=new tS;return gy.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new tS;return gy.Ve._e(ay(this.databaseId,t),r.He(function(i){const s=sy(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new tS);let s=0;for(const o of sy(e)){const d=r[s++];for(const f of i)if(this.yn(t,o.fieldPath)&&Vb(d))i=this.pn(i,o,d);else{const g=f.He(o.kind);gy.Ve._e(d,g)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const d of i){const f=new tS;f.seed(d.Qe()),gy.Ve._e(o,f.He(t.kind)),s.push(f)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ck(e),i=rS(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const o=[];return pe.forEach(s,d=>i.get([d.indexId,this.uid]).next(f=>{o.push(function(g,y){const E=y?new Nb(y.sequenceNumber,new Ca(fy(y.readTime),new lt(sl(y.documentKey)),y.largestBatchId)):Nb.empty(),b=g.fields.map(([R,V])=>new jN(Xr.fromServerFormat(R),V));return new BN(g.indexId,g.collectionGroup,b,E)}(d,f))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ck(e),s=rS(e);return this.Tn(e).next(o=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>pe.forEach(d,f=>s.put(X8(f.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?pe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),pe.forEach(d,f=>this.En(e,i,f).next(g=>{const y=this.An(s,f);return g.isEqual(y)?pe.resolve():this.vn(e,s,f,g,y)}))))})}Rn(e,t,r,i){return nS(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return nS(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=nS(e);let s=new yr(Wp);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(o,d)=>{s=s.add(new my(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}An(e,t){let r=new yr(Wp);const i=this.mn(t,e);if(null==i)return r;const s=u4(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Vb(o))for(const d of o.arrayValue.values||[])r=r.add(new my(t.indexId,e.key,this.dn(d),i))}else r=r.add(new my(t.indexId,e.key,uk,i));return r}vn(e,t,r,i,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(d,f,g,y,E){const b=d.getIterator(),R=f.getIterator();let V=hE(b),q=hE(R);for(;V||q;){let Z=!1,fe=!1;if(V&&q){const Se=g(V,q);Se<0?fe=!0:Se>0&&(Z=!0)}else null!=V?fe=!0:Z=!0;Z?(y(q),q=hE(R)):fe?(E(V),V=hE(b)):(V=hE(b),q=hE(R))}}(i,s,Wp,d=>{o.push(this.Rn(e,t,r,d))},d=>{o.push(this.Pn(e,t,r,d))}),pe.waitFor(o)}Tn(e){let t=1;return rS(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,d)=>Wp(o,d)).filter((o,d,f)=>!d||0!==Wp(o,f[d-1]));const i=[];i.push(e);for(const o of r){const d=Wp(o,e),f=Wp(o,t);if(0===d)i[0]=e.Je();else if(d>0&&f<0)i.push(o),i.push(o.Je());else if(f>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,uk,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,uk,[]]))}return s}bn(e,t){return Wp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uW)}getMinOffset(e,t){return pe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||yt())).next(uW)}}function aW(n){return gs(n,"collectionParents")}function nS(n){return gs(n,"indexEntries")}function ck(n){return gs(n,"indexConfiguration")}function rS(n){return gs(n,"indexState")}function uW(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;c4(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ca(e.readTime,e.documentKey,t)}const cW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class no{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new no(e,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lW(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let d=0;const f=r.X({range:o},(y,E,b)=>(d++,b.delete()));s.push(f.next(()=>{St(1===d)}));const g=[];for(const y of t.mutations){const E=Oz(e,y.key.path,t.batchId);s.push(i.delete(E)),g.push(y.key)}return pe.waitFor(s).next(()=>g)}function lk(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw yt();e=n.noDocument}return JSON.stringify(e).length}no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(41943040,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);class dk{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){St(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dk(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zp(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=TE(e),o=Zp(e);return o.add({}).next(d=>{St("number"==typeof d);const f=new A4(d,t,r,i),g=function(b,R,V){const q=V.baseMutations.map(fe=>Jb(b.fe,fe)),Z=V.mutations.map(fe=>Jb(b.fe,fe));return{userId:R,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:q,mutations:Z}}(this.serializer,this.userId,f),y=[];let E=new yr((b,R)=>zt(b.canonicalString(),R.canonicalString()));for(const b of i){const R=Oz(this.userId,b.key.path,d);E=E.add(b.key.path.popLast()),y.push(o.put(g)),y.push(s.put(R,Zse))}return E.forEach(b=>{y.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),pe.waitFor(y).next(()=>f)})}lookupMutationBatch(e,t){return Zp(e).get(t).next(r=>r?(St(r.userId===this.userId),py(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?pe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Zp(e).X({index:"userMutationsIndex",range:i},(o,d,f)=>{d.userId===this.userId&&(St(d.batchId>=r),s=py(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zp(e).j("userMutationsIndex",t).next(r=>r.map(i=>py(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=GN(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return TE(e).X({range:i},(o,d,f)=>{const[g,y,E]=o,b=sl(y);if(g===this.userId&&t.path.isEqual(b))return Zp(e).get(E).next(R=>{if(!R)throw yt();St(R.userId===this.userId),s.push(py(this.serializer,R))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yr(zt);const i=[];return t.forEach(s=>{const o=GN(this.userId,s.path),d=IDBKeyRange.lowerBound(o),f=TE(e).X({range:d},(g,y,E)=>{const[b,R,V]=g,q=sl(R);b===this.userId&&s.path.isEqual(q)?r=r.add(V):E.done()});i.push(f)}),pe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=GN(this.userId,r),o=IDBKeyRange.lowerBound(s);let d=new yr(zt);return TE(e).X({range:o},(f,g,y)=>{const[E,b,R]=f,V=sl(b);E===this.userId&&r.isPrefixOf(V)?V.length===i&&(d=d.add(R)):y.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Zp(e).get(s).next(o=>{if(null===o)throw yt();St(o.userId===this.userId),r.push(py(this.serializer,o))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lW(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return TE(e).X({range:r},(s,o,d)=>{if(s[0]===this.userId){const f=sl(s[1]);i.push(f)}else d.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return dW(e,this.userId,t)}xn(e){return hW(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dW(n,e,t){const r=GN(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return TE(n).X({range:s,Y:!0},(d,f,g)=>{const[y,E,b]=d;y===e&&E===i&&(o=!0),g.done()}).next(()=>o)}function Zp(n){return gs(n,"mutations")}function TE(n){return gs(n,"documentMutations")}function hW(n){return gs(n,"mutationQueues")}class _y{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _y(0)}static Mn(){return new _y(-1)}}class uae{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new _y(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new Sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>CE(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return CE(e).X((o,d)=>{const f=Xb(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>pe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return CE(e).X((r,i)=>{const s=Xb(i);t(s)})}$n(e){return fW(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}On(e,t){return fW(e).put("targetGlobalKey",t)}Fn(e,t){return CE(e).put(Q8(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uy(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return CE(e).X({range:i,index:"queryTargetsIndex"},(o,d,f)=>{const g=Xb(d);Bb(t,g.target)&&(s=g,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Kp(e);return t.forEach(o=>{const d=to(o.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,o))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Kp(e);return pe.forEach(t,s=>{const o=to(s.path);return pe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Kp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Kp(e);let s=sn();return i.X({range:r,Y:!0},(o,d,f)=>{const g=sl(o[1]),y=new lt(g);s=s.add(y)}).next(()=>s)}containsKey(e,t){const r=to(t.path),i=IDBKeyRange.bound([r],[bz(r)],!1,!0);let s=0;return Kp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([o,d],f,g)=>{0!==o&&(s++,g.done())}).next(()=>s>0)}le(e,t){return CE(e).get(t).next(r=>r?Xb(r):null)}}function CE(n){return gs(n,"targets")}function fW(n){return gs(n,"targetGlobal")}function Kp(n){return gs(n,"targetDocuments")}function pW([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class cae{constructor(e){this.Ln=e,this.buffer=new yr(pW),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pW(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,j.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vp(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fp(r)}yield t.Qn(3e5)}))}}class lae{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(Aa.ct);const r=new cae(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(cW)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cW):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,o,d,f,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,o=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,t))).next(E=>(s=E,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),o4()<=Zn.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-y}ms\n\tDetermined least recently used ${i} in `+(d-o)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(g-f)+`ms\nTotal Duration: ${g-y}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:E})))}}class dae{constructor(e,t){this.db=e,this.garbageCollector=function mW(n,e){return new lae(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return hk(e,r)}removeReference(e,t,r){return hk(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hk(e,t)}Xn(e,t){return function(r,i){let s=!1;return hW(r).Z(o=>dW(r,o,i).next(d=>(d&&(s=!0),pe.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,d)=>{if(d<=t){const f=this.Xn(e,o).next(g=>{if(!g)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Dt.min()),Kp(e).delete([0,to(o.path)])))});i.push(f)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hk(e,t)}Yn(e,t){const r=Kp(e);let i,s=Aa.ct;return r.X({index:"documentTargetsIndex"},([o,d],{path:f,sequenceNumber:g})=>{0===o?(s!==Aa.ct&&t(new lt(sl(i)),s),s=g,i=f):s=Aa.ct}).next(()=>{s!==Aa.ct&&t(new lt(sl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hk(n,e){return Kp(n).put((r=n.currentSequenceNumber,{targetId:0,path:to(e.path),sequenceNumber:r}));var r}class _W{constructor(){this.changes=new ch(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yy(e).put(r)}removeEntry(e,t,r){return yy(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],sk(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=vr.newInvalidDocument(t);return yy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(iS(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:vr.newInvalidDocument(t)};return yy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(iS(t))},(i,s)=>{r={document:this.ts(t,s),size:lk(s)}}).next(()=>r)}getEntries(e,t){let r=Go();return this.ns(e,t,(i,s)=>{const o=this.ts(i,s);r=r.insert(i,o)}).next(()=>r)}ss(e,t){let r=Go(),i=new ar(lt.comparator);return this.ns(e,t,(s,o)=>{const d=this.ts(s,o);r=r.insert(s,d),i=i.insert(s,lk(o))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return pe.resolve();let i=new yr(EW);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(iS(i.first()),iS(i.last())),o=i.getIterator();let d=o.getNext();return yy(e).X({index:"documentKeyIndex",range:s},(f,g,y)=>{const E=lt.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&EW(d,E)<0;)r(d,null),d=o.getNext();d&&d.isEqual(E)&&(r(d,g),d=o.hasNext()?o.getNext():null),d?y.G(iS(d)):y.done()}).next(()=>{for(;d;)r(d,null),d=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),sk(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yy(e).j(IDBKeyRange.bound(o,d,!0)).next(f=>{let g=Go();for(const y of f){const E=this.ts(lt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);E.isFoundDocument()&&($b(t,E)||i.has(E.key))&&(g=g.insert(E.key,E))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=Go();const o=IW(t,r),d=IW(t,Ca.max());return yy(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,d,!0)},(f,g,y)=>{const E=this.ts(lt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(E.key,E),s.size===i&&y.done()}).next(()=>s)}newChangeBuffer(e){return new fae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vW(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Zn(e,t){return vW(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Joe(n,e){let t;if(e.document)t=G8(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=lt.fromSegments(e.noDocument.path),i=fy(e.noDocument.readTime);t=vr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return yt();{const r=lt.fromSegments(e.unknownDocument.path),i=fy(e.unknownDocument.version);t=vr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Sr(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return vr.newInvalidDocument(e)}}function yW(n){return new hae(n)}class fae extends _W{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ch(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new yr((s,o)=>zt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const d=this.us.get(s);if(t.push(this.os.removeEntry(e,s,d.readTime)),o.isValidDocument()){const f=Y8(this.os.serializer,o);i=i.add(s.path.popLast());const g=lk(f);r+=g-d.size,t.push(this.os.addEntry(e,s,f))}else if(r-=d.size,this.trackRemovals){const f=Y8(this.os.serializer,o.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,o)=>{this.us.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function vW(n){return gs(n,"remoteDocumentGlobal")}function yy(n){return gs(n,"remoteDocumentsV14")}function iS(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IW(n,e){const t=e.documentKey.path.toArray();return[n,sk(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EW(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=zt(t[s],r[s]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class pae{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wW{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&zb(r.mutation,i,$o.empty(),Sr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const i=al();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Gb();return s.forEach((d,f)=>{o=o.insert(d,f.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=al();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,d)=>{t.set(o,d)})})}computeViews(e,t,r,i){let s=Go();const o=Hb(),d=Hb();return t.forEach((f,g)=>{const y=r.get(g.key);i.has(g.key)&&(void 0===y||y.mutation instanceof lh)?s=s.insert(g.key,g):void 0!==y?(o.set(g.key,y.mutation.getFieldMask()),zb(y.mutation,g,y.mutation.getFieldMask(),Sr.now())):o.set(g.key,$o.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((g,y)=>o.set(g,y)),t.forEach((g,y)=>{var E;return d.set(g,new pae(y,null!==(E=o.get(g))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Hb();let i=new ar((o,d)=>o-d),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const d of o)d.keys().forEach(f=>{const g=t.get(f);if(null===g)return;let y=r.get(f)||$o.empty();y=d.applyToLocalView(g,y),r.set(f,y);const E=(i.get(d.batchId)||sn()).add(f);i=i.insert(d.batchId,E)})}).next(()=>{const o=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,y=f.value,E=p8();y.forEach(b=>{if(!s.has(b)){const R=T8(t.get(b),r.get(b));null!==R&&E.set(b,R),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,g,E))}return pe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):I4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):pe.resolve(al());let d=-1,f=s;return o.next(g=>pe.forEach(g,(y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(y)?pe.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,f,g,sn())).next(y=>({batchId:d,changes:f8(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lt(t)).next(r=>{let i=Gb();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Gb();return this.indexManager.getCollectionParents(e,i).next(o=>pe.forEach(o,d=>{const f=(g=t,y=d.child(i),new uh(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,y;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(g=>{g.forEach((y,E)=>{s=s.insert(y,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const g=f.getKey();null===s.get(g)&&(s=s.insert(g,vr.newInvalidDocument(g)))});let o=Gb();return s.forEach((d,f)=>{const g=i.get(d);void 0!==g&&zb(g.mutation,f,$o.empty(),Sr.now()),$b(t,f)&&(o=o.insert(d,f))}),o})}}class gae{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return pe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:mi(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:O4(r.bundledQuery),readTime:mi(r.readTime)}),pe.resolve();var r}}class mae{constructor(){this.overlays=new ar(lt.comparator),this.ls=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=al();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=al(),s=t.length+1,o=new lt(t.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ar((g,y)=>g-y);const o=this.overlays.getIterator();for(;o.hasNext();){const g=o.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=s.get(g.largestBatchId);null===y&&(y=al(),s=s.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=al(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,y)=>d.set(g,y)),!(d.size()>=i)););return pe.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new S4(t,r));let s=this.ls.get(t);void 0===s&&(s=sn(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class $4{constructor(){this.fs=new yr(ms.ds),this.ws=new yr(ms._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ms(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ms(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new lt(new Cn([])),r=new ms(t,e),i=new ms(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new lt(new Cn([])),r=new ms(t,e),i=new ms(t,e+1);let s=sn();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ms(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ms{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return lt.comparator(e.key,t.key)||zt(e.As,t.As)}static _s(e,t){return zt(e.As,t.As)||lt.comparator(e.key,t.key)}}class _ae{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new yr(ms.ds)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new A4(s,t,r,i);this.mutationQueue.push(o);for(const d of i)this.Rs=this.Rs.add(new ms(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(o)}lookupMutationBatch(e,t){return pe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ms(t,0),i=new ms(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const d=this.Ps(o.As);s.push(d)}),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yr(zt);return t.forEach(i=>{const s=new ms(i,0),o=new ms(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],d=>{r=r.add(d.As)})}),pe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const o=new ms(new lt(s),0);let d=new yr(zt);return this.Rs.forEachWhile(f=>{const g=f.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(d=d.add(f.As)),!0)},o),pe.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return pe.forEach(t.mutations,i=>{const s=new ms(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ms(t,0),i=this.Rs.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yae{constructor(e){this.Ds=e,this.docs=new ar(lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(t))}getEntries(e,t){let r=Go();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Go();const o=t.path,d=new lt(o.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!o.isPrefixOf(g.path))break;g.path.length>o.length+1||c4(Dz(y),r)<=0||(i.has(y.key)||$b(t,y))&&(s=s.insert(y.key,y.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){yt()}Cs(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vae(this)}getSize(e){return pe.resolve(this.size)}}class vae extends _W{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Iae{constructor(e){this.persistence=e,this.xs=new ch(t=>uy(t),Bb),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new $4,this.targetCount=0,this.Ms=_y.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),pe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new _y(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Fn(t),pe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),pe.waitFor(s).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),pe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.ks.containsKey(t))}}class G4{constructor(e,t){this.$s={},this.overlays={},this.Os=new Aa(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Iae(this),this.indexManager=new oae,this.remoteDocumentCache=new yae(r=>this.referenceDelegate.Ls(r)),this.serializer=new K8(t),this.qs=new gae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mae,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new _ae(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new Eae(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return pe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Eae extends xz{constructor(e){super(),this.currentSequenceNumber=e}}class fk{constructor(e){this.persistence=e,this.Qs=new $4,this.js=null}static zs(e){return new fk(e)}get Ws(){if(this.js)return this.js;throw yt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ws,r=>{const i=lt.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return pe.or([()=>pe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class wae{constructor(e){this.serializer=e}O(e,t,r,i){const s=new $N("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mz,{unique:!0}),d.createObjectStore("documentMutations"),TW(e),function(d){d.createObjectStore("remoteDocuments")}(e));let o=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),TW(e)),o=o.next(()=>function(d){const f=d.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(d,f){return f.store("mutations").j().next(g=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mz,{unique:!0});const y=f.store("mutations"),E=g.map(b=>y.put(b));return pe.waitFor(E)})}(e,s))),o=o.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Ys(s))),r<6&&i>=6&&(o=o.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(o=o.next(()=>this.Zs(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ei(s))),r<11&&i>=11&&(o=o.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:ooe});f.createIndex("collectionPathOverlayIndex",aoe,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",uoe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:Kse});f.createIndex("documentKeyIndex",Yse),f.createIndex("collectionGroupIndex",Qse)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:noe}).createIndex("sequenceNumberIndex",roe,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:ioe}).createIndex("documentKeyIndex",soe,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=lk(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>pe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(d=>pe.forEach(d,f=>{St(f.userId===s.userId);const g=py(this.serializer,f);return lW(e,s.userId,g).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,d)=>{const f=new Cn(o),g=[0,to(f)];s.push(t.get(g).next(y=>y?pe.resolve():t.put({targetId:0,path:to(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:toe});const r=t.store("collectionParents"),i=new j4,s=o=>{if(i.add(o)){const d=o.lastSegment(),f=o.popLast();return r.put({collectionId:d,parent:to(f)})}};return t.store("remoteDocuments").X({Y:!0},(o,d)=>{const f=new Cn(o);return s(f.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,d,f],g)=>{const y=sl(d);return s(y.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=Xb(i),o=Q8(this.serializer,s);return t.put(o)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,o)=>{const d=t.store("remoteDocumentsV14"),f=(g=o,g.document?new lt(Cn.fromString(g.document.name).popFirst(5)):g.noDocument?lt.fromSegments(g.noDocument.path):g.unknownDocument?lt.fromSegments(g.unknownDocument.path):yt()).path.toArray();var g;const y={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(d.put(y))}).next(()=>pe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=yW(this.serializer),s=new G4(fk.zs,this.serializer.fe);return r.j().next(o=>{const d=new Map;return o.forEach(f=>{var g;let y=null!==(g=d.get(f.userId))&&void 0!==g?g:sn();py(this.serializer,f).keys().forEach(E=>y=y.add(E)),d.set(f.userId,y)}),pe.forEach(d,(f,g)=>{const y=new ps(g),E=ok.de(this.serializer,y),b=s.getIndexManager(y),R=dk.de(y,this.serializer,b,s.referenceDelegate);return new wW(i,R,E,b).recalculateAndSaveOverlaysForDocumentKeys(new h4(t,Aa.ct),f).next()})})}}function TW(n){n.createObjectStore("targetDocuments",{keyPath:Xse}).createIndex("documentTargetsIndex",eoe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jse,{unique:!0}),n.createObjectStore("targetGlobal")}const H4="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class q4{constructor(e,t,r,i,s,o,d,f,g,y,E=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=o,this.document=d,this.ri=g,this.oi=y,this.ui=E,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!q4.D())throw new Fe(Te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dae(this,i),this.di=t+"main",this.serializer=new K8(f),this.wi=new Wu(this.di,this.ui,new wae(this.serializer)),this.Bs=new uae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yW(this.serializer),this.qs=new Xoe,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===y&&gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(Te.FAILED_PRECONDITION,H4);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Aa(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,j.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,j.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,j.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gk(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Vp(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return sS(e).get("owner").next(t=>pe.resolve(this.Ri(t)))}Pi(e){return gk(e).delete(this.clientId)}bi(){var e=this;return(0,j.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=gs(r,"clientMetadata");return i.j().next(s=>{const o=e.Si(s,18e5),d=s.filter(f=>-1===o.indexOf(f));return pe.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?pe.resolve(!0):sS(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Fe(Te.FAILED_PRECONDITION,H4);return!1}}return!(!this.networkEnabled||!this.inForeground)||gk(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,j.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new h4(t,Aa.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gk(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return dk.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aae(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ok.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?loe:14===o?Vz:13===o?Fz:12===o?coe:11===o?Lz:void yt();var o;let d;return this.wi.runTransaction(e,i,s,f=>(d=new h4(f,this.Os?this.Os.next():Aa.ct),"readwrite-primary"===t?this.Ti(d).next(g=>!!g||this.Ei(d)).next(g=>{if(!g)throw gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Fe(Te.FAILED_PRECONDITION,Rz);return r(d)}).next(g=>this.vi(d).next(()=>g)):this.Oi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(e){return sS(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(Te.FAILED_PRECONDITION,H4)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sS(e).put("owner",t)}static D(){return Wu.D()}Ai(e){const t=sS(e);return t.get("owner").next(r=>this.Ri(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gi(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){gi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sS(n){return gs(n,"owner")}function gk(n){return gs(n,"clientMetadata")}function z4(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class W4{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=sn(),i=sn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new W4(e,t.fromCache,r,i)}}class CW{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(u8(t))return pe.resolve(null);let r=yo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=XN(t,null,"F"),r=yo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=sn(...s);return this.Ui.getDocuments(e,o).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const g=this.ji(t,d);return this.zi(t,g,o,f.readTime)?this.Ki(e,XN(t,null,"F")):this.Wi(e,g,t,f)}))})))}Gi(e,t,r,i){return u8(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(o4()<=Zn.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),w4(t)),this.Wi(e,o,t,Sz(i,-1)))})}ji(e,t){let r=new yr(d8(e));return t.forEach((i,s)=>{$b(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return o4()<=Zn.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",w4(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ca.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Tae{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ar(zt),this.Yi=new ch(s=>uy(s),Bb),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wW(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function AW(n,e,t,r){return new Tae(n,e,t,r)}function bW(n,e){return Z4.apply(this,arguments)}function Z4(){return Z4=(0,j.Z)(function*(n,e){const t=ft(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],d=[];let f=sn();for(const g of i){o.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of s){d.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(g=>({er:g,removedBatchIds:o,addedBatchIds:d}))})})}),Z4.apply(this,arguments)}function SW(n){const e=ft(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function DW(n,e,t){let r=sn(),i=sn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Go();return t.forEach((d,f)=>{const g=s.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Dt.min())?(e.removeEntry(d,f.readTime),o=o.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||0===f.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(f),o=o.insert(d,f)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),{nr:o,sr:i}})}function bae(n,e){const t=ft(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AE(n,e){const t=ft(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,pe.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new dh(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function bE(n,e,t){return K4.apply(this,arguments)}function K4(){return K4=(0,j.Z)(function*(n,e,t){const r=ft(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vp(o))throw o;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),K4.apply(this,arguments)}function mk(n,e,t){const r=ft(n);let i=Dt.min(),s=sn();return r.persistence.runTransaction("Execute query","readonly",o=>function(d,f,g){const y=ft(d),E=y.Yi.get(g);return void 0!==E?pe.resolve(y.Ji.get(E)):y.Bs.getTargetData(f,g)}(r,o,yo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,d.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:Dt.min(),t?s:sn())).next(d=>(PW(r,l8(e),d),{documents:d,ir:s})))}function RW(n,e){const t=ft(n),r=ft(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(o=>o?o.target:null))}function xW(n,e){const t=ft(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Sz(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PW(t,e,i),i))}function PW(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function Y4(){return Y4=(0,j.Z)(function*(n,e,t,r){const i=ft(n);let s=sn(),o=Go();for(const g of t){const y=e.rr(g.metadata.name);g.document&&(s=s.add(y));const E=e.ur(g);E.setReadTime(e.cr(g.metadata.readTime)),o=o.insert(y,E)}const d=i.Zi.newChangeBuffer({trackRemovals:!0}),f=yield AE(i,(g=r,yo(mE(Cn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>DW(g,d,o).next(y=>(d.apply(g),y)).next(y=>i.Bs.removeMatchingKeysForTargetId(g,f.targetId).next(()=>i.Bs.addMatchingKeys(g,s,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,y.nr,y.sr)).next(()=>y.nr)))}),Y4.apply(this,arguments)}function Dae(n,e){return Q4.apply(this,arguments)}function Q4(){return Q4=(0,j.Z)(function*(n,e,t=sn()){const r=yield AE(n,yo(O4(e.bundledQuery))),i=ft(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=mi(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.qs.saveNamedQuery(s,e);const d=r.withResumeToken(Ji.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(d.targetId,d),i.Bs.updateTargetData(s,d).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),Q4.apply(this,arguments)}function NW(n,e){return`firestore_clients_${n}_${e}`}function kW(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function J4(n,e){return`firestore_targets_${n}_${e}`}class _k{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Fe(i.error.code,i.error.message))),o?new _k(e,t,i.state,s):(gi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oS{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Fe(r.error.code,r.error.message))),s?new oS(e,r.state,i):(gi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yk{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=T4();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Nz(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new yk(e,s):(gi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class X4{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new X4(t.clientId,t.onlineState):(gi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class e3{constructor(){this.activeTargetIds=T4()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t3{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ar(zt),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=NW(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new e3),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,j.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(NW(e.persistenceKey,i));if(s){const o=yk.ar(i,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(J4(this.persistenceKey,e));if(r){const i=oS.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(J4(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,j.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let o=Aa.ct;if(null!=s)try{const d=JSON.parse(s);St("number"==typeof d),o=d}catch(d){gi("SharedClientState","Failed to read sequence number from WebStorage",d)}return o}(r.newValue);i!==Aa.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new _k(this.currentUser,e,t,r),s=kW(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=kW(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=J4(this.persistenceKey,e),s=new oS(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return yk.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return _k.ar(new ps(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return oS.ar(i,t)}br(e){return X4.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,j.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),o=[],d=[];return s.forEach(f=>{i.has(f)||o.push(f)}),i.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Wr(o,d).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=T4();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class MW{constructor(){this.Hr=new e3,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new e3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rae{Yr(e){}shutdown(){}}class OW{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vk=null;function n3(){return null===vk?vk=268435456+Math.round(2147483648*Math.random()):vk++,"0x"+vk.toString(16)}const xae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pae{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ro="WebChannelConnection";class Nae extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=n3(),d=this.To(e,t);Ke("RestConnection",`Sending RPC '${e}' ${o}:`,d,r);const f={};return this.Eo(f,i,s),this.Ao(e,d,f,r).then(g=>(Ke("RestConnection",`Received RPC '${e}' ${o}: `,g),g),g=>{throw cu("RestConnection",`RPC '${e}' ${o} failed with error: `,g,"url: ",d,"request:",r),g})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lE,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${xae[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=n3();return new Promise((o,d)=>{const f=new Rse;f.setWithCredentials(!0),f.listenOnce(bse.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case s4.NO_ERROR:const y=f.getResponseJson();Ke(ro,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),o(y);break;case s4.TIMEOUT:Ke(ro,`RPC '${e}' ${s} timed out`),d(new Fe(Te.DEADLINE_EXCEEDED,"Request time out"));break;case s4.HTTP_ERROR:const E=f.getStatus();if(Ke(ro,`RPC '${e}' ${s} failed with status:`,E,"response text:",f.getResponseText()),E>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b?.error;if(R&&R.status&&R.message){const V=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(Z)>=0?Z:Te.UNKNOWN}(R.status);d(new Fe(V,R.message))}else d(new Fe(Te.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Fe(Te.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{Ke(ro,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);Ke(ro,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",g,r,15)})}Ro(e,t,r){const i=n3(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Cse(),d=Ase(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.xmlHttpFactory=new Dse({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=s.join("");Ke(ro,`Creating RPC '${e}' stream ${i}: ${y}`,f);const E=o.createWebChannel(y,f);let b=!1,R=!1;const V=new Pae({ro:Z=>{R?Ke(ro,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(b||(Ke(ro,`Opening RPC '${e}' stream ${i} transport.`),E.open(),b=!0),Ke(ro,`RPC '${e}' stream ${i} sending:`,Z),E.send(Z))},oo:()=>E.close()}),q=(Z,fe,Se)=>{Z.listen(fe,ye=>{try{Se(ye)}catch(Le){setTimeout(()=>{throw Le},0)}})};return q(E,UN.EventType.OPEN,()=>{R||Ke(ro,`RPC '${e}' stream ${i} transport opened.`)}),q(E,UN.EventType.CLOSE,()=>{R||(R=!0,Ke(ro,`RPC '${e}' stream ${i} transport closed`),V.wo())}),q(E,UN.EventType.ERROR,Z=>{R||(R=!0,cu(ro,`RPC '${e}' stream ${i} transport errored:`,Z),V.wo(new Fe(Te.UNAVAILABLE,"The operation could not be completed")))}),q(E,UN.EventType.MESSAGE,Z=>{var fe;if(!R){const Se=Z.data[0];St(!!Se);const Le=Se.error||(null===(fe=Se[0])||void 0===fe?void 0:fe.error);if(Le){Ke(ro,`RPC '${e}' stream ${i} received error:`,Le);const nt=Le.status;let at=function(Qn){const fu=bi[Qn];if(void 0!==fu)return R8(fu)}(nt),rn=Le.message;void 0===at&&(at=Te.INTERNAL,rn="Unknown error status: "+nt+" with message "+Le.message),R=!0,V.wo(new Fe(at,rn)),E.close()}else Ke(ro,`RPC '${e}' stream ${i} received:`,Se),V._o(Se)}}),q(d,Sse.STAT_EVENT,Z=>{Z.stat===Ez.PROXY?Ke(ro,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===Ez.NOPROXY&&Ke(ro,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.fo()},0),V}}function LW(){return typeof window<"u"?window:null}function Ik(){return typeof document<"u"?document:null}function aS(n){return new $oe(n,!0)}class r3{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class FW{constructor(e,t,r,i,s,o,d,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new r3(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,j.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,j.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,j.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===Te.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Fe(Te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,j.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kae extends FW{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function qoe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:yt(),i=e.targetChange.targetIds||[],s=function(f,g){return f.useProto3Json?(St(void 0===g||"string"==typeof g),Ji.fromBase64String(g||"")):(St(void 0===g||g instanceof Uint8Array),Ji.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,d=o&&function(f){const g=void 0===f.code?Te.UNKNOWN:R8(f.code);return new Fe(g,f.message||"")}(o);t=new M8(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ul(n,r.document.name),s=mi(r.document.updateTime),o=r.document.createTime?mi(r.document.createTime):Dt.min(),d=new Vs({mapValue:{fields:r.document.fields}}),f=vr.newFoundDocument(i,s,o,d);t=new ik(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=ul(n,r.document),s=r.readTime?mi(r.readTime):Dt.min(),o=vr.newNoDocument(i,s);t=new ik([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ul(n,r.document);t=new ik([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return yt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Loe(i,s);t=new k8(r.targetId,o)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Dt.min():s.readTime?mi(s.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Qb(this.serializer),t.addTarget=function(i,s){let o;const d=s.target;if(o=YN(d)?{documents:H8(i,d)}:{query:M4(i,d)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=V8(i,s.resumeToken);const f=x4(i,s.expectedCount);null!==f&&(o.expectedCount=f)}else if(s.snapshotVersion.compareTo(Dt.min())>0){o.readTime=EE(i,s.snapshotVersion.toTimestamp());const f=x4(i,s.expectedCount);null!==f&&(o.expectedCount=f)}return o}(this.serializer,e);const r=function Woe(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Qb(this.serializer),t.removeTarget=e,this.Wo(t)}}class Mae extends FW{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function zoe(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let s=mi(r.updateTime?r.updateTime:i);return s.isEqual(Dt.min())&&(s=mi(i)),new Noe(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=mi(e.commitTime);return this.listener.cu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Qb(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jb(this.serializer,r))};this.Wo(t)}}class Oae extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Fe(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(Te.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(Te.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Fae{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gi(t),this.mu=!1):Ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Vae{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{r.enqueueAndForget((0,j.Z)(function*(){var f;Yp(o)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,j.Z)(function*(g){const y=ft(g);y.vu.add(4),yield SE(y),y.bu.set("Unknown"),y.vu.delete(4),yield uS(y)}),function(g){return f.apply(this,arguments)})(o))}))}),this.bu=new Fae(r,i)}}function uS(n){return s3.apply(this,arguments)}function s3(){return s3=(0,j.Z)(function*(n){if(Yp(n))for(const e of n.Ru)yield e(!0)}),s3.apply(this,arguments)}function SE(n){return o3.apply(this,arguments)}function o3(){return o3=(0,j.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),o3.apply(this,arguments)}function Ek(n,e){const t=ft(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),c3(t)?u3(t):RE(t).Ko()&&a3(t,e))}function cS(n,e){const t=ft(n),r=RE(t);t.Au.delete(e),r.Ko()&&VW(t,e),0===t.Au.size&&(r.Ko()?r.jo():Yp(t)&&t.bu.set("Unknown"))}function a3(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}RE(n).su(e)}function VW(n,e){n.Vu.qt(e),RE(n).iu(e)}function u3(n){n.Vu=new Voe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),RE(n).start(),n.bu.gu()}function c3(n){return Yp(n)&&!RE(n).Uo()&&n.Au.size>0}function Yp(n){return 0===ft(n).vu.size}function UW(n){n.Vu=void 0}function Uae(n){return l3.apply(this,arguments)}function l3(){return l3=(0,j.Z)(function*(n){n.Au.forEach((e,t)=>{a3(n,e)})}),l3.apply(this,arguments)}function Bae(n,e){return d3.apply(this,arguments)}function d3(){return d3=(0,j.Z)(function*(n,e){UW(n),c3(n)?(n.bu.Iu(e),u3(n)):n.bu.set("Unknown")}),d3.apply(this,arguments)}function jae(n,e,t){return h3.apply(this,arguments)}function h3(){return h3=(0,j.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof M8&&2===e.state&&e.cause)try{yield(r=(0,j.Z)(function*(i,s){const o=s.cause;for(const d of s.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,o),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wk(n,r)}else if(e instanceof ik?n.Vu.Ht(e):e instanceof k8?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield SW(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=i.Au.get(f);g&&i.Au.set(f,g.withResumeToken(d.resumeToken,s))}}),o.targetMismatches.forEach((d,f)=>{const g=i.Au.get(d);if(!g)return;i.Au.set(d,g.withResumeToken(Ji.EMPTY_BYTE_STRING,g.snapshotVersion)),VW(i,d);const y=new dh(g.target,d,f,g.sequenceNumber);a3(i,y)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield wk(n,r)}var r}),h3.apply(this,arguments)}function wk(n,e,t){return f3.apply(this,arguments)}function f3(){return f3=(0,j.Z)(function*(n,e,t){if(!Vp(e))throw e;n.vu.add(1),yield SE(n),n.bu.set("Offline"),t||(t=()=>SW(n.localStore)),n.asyncQueue.enqueueRetryable((0,j.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield uS(n)}))}),f3.apply(this,arguments)}function BW(n,e){return e().catch(t=>wk(n,t,e))}function DE(n){return p3.apply(this,arguments)}function p3(){return p3=(0,j.Z)(function*(n){const e=ft(n),t=Qp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;$ae(e);)try{const i=yield bae(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Gae(e,i)}catch(i){yield wk(e,i)}jW(e)&&$W(e)}),p3.apply(this,arguments)}function $ae(n){return Yp(n)&&n.Eu.length<10}function Gae(n,e){n.Eu.push(e);const t=Qp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function jW(n){return Yp(n)&&!Qp(n).Uo()&&n.Eu.length>0}function $W(n){Qp(n).start()}function Hae(n){return g3.apply(this,arguments)}function g3(){return g3=(0,j.Z)(function*(n){Qp(n).hu()}),g3.apply(this,arguments)}function qae(n){return m3.apply(this,arguments)}function m3(){return m3=(0,j.Z)(function*(n){const e=Qp(n);for(const t of n.Eu)e.uu(t.mutations)}),m3.apply(this,arguments)}function zae(n,e,t){return _3.apply(this,arguments)}function _3(){return _3=(0,j.Z)(function*(n,e,t){const r=n.Eu.shift(),i=b4.from(r,e,t);yield BW(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield DE(n)}),_3.apply(this,arguments)}function Wae(n,e){return y3.apply(this,arguments)}function y3(){return y3=(0,j.Z)(function*(n,e){var t;e&&Qp(n).ou&&(yield(t=(0,j.Z)(function*(r,i){if(D8(s=i.code)&&s!==Te.ABORTED){const o=r.Eu.shift();Qp(r).Qo(),yield BW(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield DE(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),jW(n)&&$W(n)}),y3.apply(this,arguments)}function GW(n,e){return v3.apply(this,arguments)}function v3(){return v3=(0,j.Z)(function*(n,e){const t=ft(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Yp(t);t.vu.add(3),yield SE(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield uS(t)}),v3.apply(this,arguments)}function I3(n,e){return E3.apply(this,arguments)}function E3(){return E3=(0,j.Z)(function*(n,e){const t=ft(n);e?(t.vu.delete(2),yield uS(t)):e||(t.vu.add(2),yield SE(t),t.bu.set("Unknown"))}),E3.apply(this,arguments)}function RE(n){return n.Su||(n.Su=function(e,t,r){const i=ft(e);return i.fu(),new kae(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Uae.bind(null,n),ao:Bae.bind(null,n),nu:jae.bind(null,n)}),n.Ru.push(function(){var e=(0,j.Z)(function*(t){t?(n.Su.Qo(),c3(n)?u3(n):n.bu.set("Unknown")):(yield n.Su.stop(),UW(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Qp(n){return n.Du||(n.Du=function(e,t,r){const i=ft(e);return i.fu(),new Mae(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Hae.bind(null,n),ao:Wae.bind(null,n),au:qae.bind(null,n),cu:zae.bind(null,n)}),n.Ru.push(function(){var e=(0,j.Z)(function*(t){t?(n.Du.Qo(),yield DE(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class w3{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,d=new w3(e,t,o,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xE(n,e){if(gi("AsyncQueue",`${e}: ${n}`),Vp(n))return new Fe(Te.UNAVAILABLE,`${e}: ${n}`);throw n}class PE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=Gb(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new PE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof PE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new PE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HW{constructor(){this.Cu=new ar(lt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):yt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class NE{constructor(e,t,r,i,s,o,d,f,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(d=>{o.push({type:0,doc:d})}),new NE(e,t,PE.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Zae{constructor(){this.Nu=void 0,this.listeners=[]}}class Kae{constructor(){this.queries=new ch(e=>c8(e),jb),this.onlineState="Unknown",this.ku=new Set}}function T3(n,e){return C3.apply(this,arguments)}function C3(){return C3=(0,j.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Zae),i)try{s.Nu=yield t.onListen(r)}catch(o){const d=xE(o,`Initialization of query '${w4(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&S3(t)}),C3.apply(this,arguments)}function A3(n,e){return b3.apply(this,arguments)}function b3(){return b3=(0,j.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),b3.apply(this,arguments)}function Yae(n,e){const t=ft(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const d of o.listeners)d.$u(i)&&(r=!0);o.Nu=i}}r&&S3(t)}function Qae(n,e,t){const r=ft(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function S3(n){n.ku.forEach(e=>{e.next()})}class D3{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new NE(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=NE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Jae{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class qW{constructor(e){this.serializer=e}rr(e){return ul(this.serializer,e)}ur(e){return e.metadata.exists?G8(this.serializer,e.document,!1):vr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return mi(e)}}class Xae{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zW(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Cn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new qW(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const o of i.metadata.queries){const d=(t.get(o)||sn()).add(s);t.set(o,d)}}return t}complete(){var e=this;return(0,j.Z)(function*(){const t=yield function Sae(n,e,t,r){return Y4.apply(this,arguments)}(e.localStore,new qW(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield Dae(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function zW(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WW{constructor(e){this.key=e}}class ZW{constructor(e){this.key=e}}class KW{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=sn(),this.mutatedKeys=sn(),this.tc=d8(e),this.ec=new PE(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new HW,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,E)=>{const b=i.get(y),R=$b(this.query,E)?E:null,V=!!b&&this.mutatedKeys.has(b.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Z=!1;b&&R?b.data.isEqual(R.data)?V!==q&&(r.track({type:3,doc:R}),Z=!0):this.rc(b,R)||(r.track({type:2,doc:R}),Z=!0,(f&&this.tc(R,f)>0||g&&this.tc(R,g)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),Z=!0):b&&!R&&(r.track({type:1,doc:b}),Z=!0,(f||g)&&(d=!0)),Z&&(R?(o=o.add(R),s=q?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const y="F"===this.query.limitType?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{ec:o,ic:r,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((g,y)=>function(E,b){const R=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return R(E)-R(b)}(g.type,y.type)||this.tc(g.doc,y.doc)),this.oc(r);const o=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new NE(this.query,e.ec,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new HW,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=sn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new ZW(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new WW(r))}),t}hc(e){this.Yu=e.ir,this.Zu=sn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return NE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class eue{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tue{constructor(e){this.key=e,this.fc=!1}}class nue{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ch(d=>c8(d),jb),this._c=new Map,this.mc=new Set,this.gc=new ar(lt.comparator),this.yc=new Map,this.Ic=new $4,this.Tc={},this.Ec=new Map,this.Ac=_y.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function rue(n,e){return R3.apply(this,arguments)}function R3(){return R3=(0,j.Z)(function*(n,e){const t=J3(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield AE(t.localStore,yo(e)),d=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield x3(t,e,r,"current"===d,o.resumeToken),t.isPrimaryClient&&Ek(t.remoteStore,o)}return i}),R3.apply(this,arguments)}function x3(n,e,t,r,i){return P3.apply(this,arguments)}function P3(){return P3=(0,j.Z)(function*(n,e,t,r,i){n.Rc=(E,b,R)=>{return(V=(0,j.Z)(function*(q,Z,fe,Se){let ye=Z.view.sc(fe);ye.zi&&(ye=yield mk(q.localStore,Z.query,!1).then(({documents:at})=>Z.view.sc(at,ye)));const Le=Se&&Se.targetChanges.get(Z.targetId),nt=Z.view.applyChanges(ye,q.isPrimaryClient,Le);return j3(q,Z.targetId,nt.cc),nt.snapshot}),function(q,Z,fe,Se){return V.apply(this,arguments)})(n,E,b,R);var V};const s=yield mk(n.localStore,e,!0),o=new KW(e,s.ir),d=o.sc(s.documents),f=Kb.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=o.applyChanges(d,n.isPrimaryClient,f);j3(n,t,g.cc);const y=new eue(e,t,o);return n.wc.set(e,y),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),g.snapshot}),P3.apply(this,arguments)}function iue(n,e){return N3.apply(this,arguments)}function N3(){return N3=(0,j.Z)(function*(n,e){const t=ft(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!jb(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cS(t.remoteStore,r.targetId),kE(t,r.targetId)}).catch(Fp))):(kE(t,r.targetId),yield bE(t.localStore,r.targetId,!0))}),N3.apply(this,arguments)}function k3(){return k3=(0,j.Z)(function*(n,e,t){const r=X3(n);try{const i=yield function(s,o){const d=ft(s),f=Sr.now(),g=o.reduce((b,R)=>b.add(R.key),sn());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let R=Go(),V=sn();return d.Zi.getEntries(b,g).next(q=>{R=q,R.forEach((Z,fe)=>{fe.isValidDocument()||(V=V.add(Z))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,R)).next(q=>{y=q;const Z=[];for(const fe of o){const Se=Moe(fe,y.get(fe.key).overlayedDocument);null!=Se&&Z.push(new lh(fe.key,Se,Kz(Se.value.mapValue),Dr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,Z,o)}).next(q=>{E=q;const Z=q.applyToLocalDocumentSet(y,V);return d.documentOverlayCache.saveOverlays(b,q.batchId,Z)})}).then(()=>({batchId:E.batchId,changes:f8(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,d){let f=s.Tc[s.currentUser.toKey()];f||(f=new ar(zt)),f=f.insert(o,d),s.Tc[s.currentUser.toKey()]=f}(r,i.batchId,t),yield hh(r,i.changes),yield DE(r.remoteStore)}catch(i){const s=xE(i,"Failed to persist write");t.reject(s)}}),k3.apply(this,arguments)}function YW(n,e){return M3.apply(this,arguments)}function M3(){return M3=(0,j.Z)(function*(n,e){const t=ft(n);try{const r=yield function Aae(n,e){const t=ft(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((y,E)=>{const b=i.get(E);if(!b)return;d.push(t.Bs.removeMatchingKeys(s,y.removedDocuments,E).next(()=>t.Bs.addMatchingKeys(s,y.addedDocuments,E)));let R=b.withSequenceNumber(s.currentSequenceNumber);var V,q,Z;null!==e.targetMismatches.get(E)?R=R.withResumeToken(Ji.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(E,R),q=R,Z=y,(0===(V=b).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,R))});let f=Go(),g=sn();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(DW(s,o,e.documentUpdates).next(y=>{f=y.nr,g=y.sr})),!r.isEqual(Dt.min())){const y=t.Bs.getLastRemoteSnapshotVersion(s).next(E=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(y)}return pe.waitFor(d).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,g)).next(()=>f)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?St(o.fc):i.removedDocuments.size>0&&(St(o.fc),o.fc=!1))}),yield hh(t,r,e)}catch(r){yield Fp(r)}}),M3.apply(this,arguments)}function QW(n,e,t){const r=ft(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const d=o.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(s,o){const d=ft(s);d.onlineState=o;let f=!1;d.queries.forEach((g,y)=>{for(const E of y.listeners)E.Mu(o)&&(f=!0)}),f&&S3(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oue(n,e,t){return O3.apply(this,arguments)}function O3(){return O3=(0,j.Z)(function*(n,e,t){const r=ft(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new ar(lt.comparator);o=o.insert(s,vr.newNoDocument(s,Dt.min()));const d=sn().add(s),f=new Zb(Dt.min(),new Map,new ar(zt),o,d);yield YW(r,f),r.gc=r.gc.remove(s),r.yc.delete(e),$3(r)}else yield bE(r.localStore,e,!1).then(()=>kE(r,e,t)).catch(Fp)}),O3.apply(this,arguments)}function aue(n,e){return L3.apply(this,arguments)}function L3(){return L3=(0,j.Z)(function*(n,e){const t=ft(n),r=e.batch.batchId;try{const i=yield function Cae(n,e){const t=ft(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,d,f,g){const y=f.batch,E=y.keys();let b=pe.resolve();return E.forEach(R=>{b=b.next(()=>g.getEntry(d,R)).next(V=>{const q=f.docVersions.get(R);St(null!==q),V.version.compareTo(q)<0&&(y.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),g.addEntry(V)))})}),b.next(()=>o.mutationQueue.removeMutationBatch(d,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let d=sn();for(let f=0;f<o.mutationResults.length;++f)o.mutationResults[f].transformResults.length>0&&(d=d.add(o.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);B3(t,r,null),U3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hh(t,i)}catch(i){yield Fp(i)}}),L3.apply(this,arguments)}function uue(n,e,t){return F3.apply(this,arguments)}function F3(){return F3=(0,j.Z)(function*(n,e,t){const r=ft(n);try{const i=yield function(s,o){const d=ft(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,o).next(y=>(St(null!==y),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,o)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);B3(r,e,t),U3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hh(r,i)}catch(i){yield Fp(i)}}),F3.apply(this,arguments)}function V3(){return V3=(0,j.Z)(function*(n,e){const t=ft(n);Yp(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=ft(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>o.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=xE(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),V3.apply(this,arguments)}function U3(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function B3(n,e,t){const r=ft(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function kE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||JW(n,r)})}function JW(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(cS(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),$3(n))}function j3(n,e,t){for(const r of t)r instanceof WW?(n.Ic.addReference(r.key,e),lue(n,r)):r instanceof ZW?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||JW(n,r.key)):yt()}function lue(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),$3(n))}function $3(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new lt(Cn.fromString(e)),r=n.Ac.next();n.yc.set(r,new tue(t)),n.gc=n.gc.insert(t,r),Ek(n.remoteStore,new dh(yo(mE(t.path)),r,"TargetPurposeLimboResolution",Aa.ct))}}function hh(n,e,t){return G3.apply(this,arguments)}function G3(){return G3=(0,j.Z)(function*(n,e,t){const r=ft(n),i=[],s=[],o=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,f)=>{o.push(r.Rc(f,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const y=W4.Li(f.targetId,g);s.push(y)}}))}),yield Promise.all(o),r.dc.nu(i),yield(d=(0,j.Z)(function*(f,g){const y=ft(f);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>pe.forEach(g,b=>pe.forEach(b.Fi,R=>y.persistence.referenceDelegate.addReference(E,b.targetId,R)).next(()=>pe.forEach(b.Bi,R=>y.persistence.referenceDelegate.removeReference(E,b.targetId,R)))))}catch(E){if(!Vp(E))throw E;Ke("LocalStore","Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const R=y.Ji.get(b),q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);y.Ji=y.Ji.insert(b,q)}}}),function(f,g){return d.apply(this,arguments)})(r.localStore,s))}),G3.apply(this,arguments)}function due(n,e){return H3.apply(this,arguments)}function H3(){return H3=(0,j.Z)(function*(n,e){const t=ft(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield bW(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(d=>{d.reject(new Fe(Te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hh(t,r.er)}var i}),H3.apply(this,arguments)}function hue(n,e){const t=ft(n),r=t.yc.get(e);if(r&&r.fc)return sn().add(r.key);{let i=sn();const s=t._c.get(e);if(!s)return i;for(const o of s){const d=t.wc.get(o);i=i.unionWith(d.view.nc)}return i}}function fue(n,e){return q3.apply(this,arguments)}function q3(){return q3=(0,j.Z)(function*(n,e){const t=ft(n),r=yield mk(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&j3(t,e.targetId,i.cc),i}),q3.apply(this,arguments)}function pue(n,e){return z3.apply(this,arguments)}function z3(){return z3=(0,j.Z)(function*(n,e){const t=ft(n);return xW(t.localStore,e).then(r=>hh(t,r))}),z3.apply(this,arguments)}function gue(n,e,t,r){return W3.apply(this,arguments)}function W3(){return W3=(0,j.Z)(function*(n,e,t,r){const i=ft(n),s=yield function(o,d){const f=ft(o),g=ft(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",y=>g.Sn(y,d).next(E=>E?f.localDocuments.getDocuments(y,E):pe.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield DE(i.remoteStore):"acknowledged"===t||"rejected"===t?(B3(i,e,r||null),U3(i,e),d=e,ft(ft(i.localStore).mutationQueue).Cn(d)):yt(),yield hh(i,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),W3.apply(this,arguments)}function Z3(){return Z3=(0,j.Z)(function*(n,e){const t=ft(n);if(J3(t),X3(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XW(t,r.toArray());t.vc=!0,yield I3(t.remoteStore,!0);for(const s of i)Ek(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(kE(t,o),bE(t.localStore,o,!0))),cS(t.remoteStore,o)}),yield i,yield XW(t,r),function(s){const o=ft(s);o.yc.forEach((d,f)=>{cS(o.remoteStore,f)}),o.Ic.Ts(),o.yc=new Map,o.gc=new ar(lt.comparator)}(t),t.vc=!1,yield I3(t.remoteStore,!1)}}),Z3.apply(this,arguments)}function XW(n,e,t){return K3.apply(this,arguments)}function K3(){return K3=(0,j.Z)(function*(n,e,t){const r=ft(n),i=[],s=[];for(const o of e){let d;const f=r._c.get(o);if(f&&0!==f.length){d=yield AE(r.localStore,yo(f[0]));for(const g of f){const y=r.wc.get(g),E=yield fue(r,y);E.snapshot&&s.push(E.snapshot)}}else{const g=yield RW(r.localStore,o);d=yield AE(r.localStore,g),yield x3(r,eZ(g),o,!1,d.resumeToken)}i.push(d)}return r.dc.nu(s),i}),K3.apply(this,arguments)}function eZ(n){return a8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _ue(n){const e=ft(n);return ft(ft(e.localStore).persistence).$i()}function yue(n,e,t,r){return Y3.apply(this,arguments)}function Y3(){return Y3=(0,j.Z)(function*(n,e,t,r){const i=ft(n);if(i.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield xW(i.localStore,l8(s[0])),d=Zb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ji.EMPTY_BYTE_STRING);yield hh(i,o,d);break}case"rejected":yield bE(i.localStore,e,!0),kE(i,e,r);break;default:yt()}}),Y3.apply(this,arguments)}function vue(n,e,t){return Q3.apply(this,arguments)}function Q3(){return Q3=(0,j.Z)(function*(n,e,t){const r=J3(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ke("SyncEngine","Adding an already active target "+i);continue}const s=yield RW(r.localStore,i),o=yield AE(r.localStore,s);yield x3(r,eZ(s),o.targetId,!1,o.resumeToken),Ek(r.remoteStore,o)}for(const i of t)r._c.has(i)&&(yield bE(r.localStore,i,!1).then(()=>{cS(r.remoteStore,i),kE(r,i)}).catch(Fp))}}),Q3.apply(this,arguments)}function J3(n){const e=ft(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oue.bind(null,e),e.dc.nu=Yae.bind(null,e.eventManager),e.dc.Pc=Qae.bind(null,e.eventManager),e}function X3(n){const e=ft(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uue.bind(null,e),e}class lS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,j.Z)(function*(){t.serializer=aS(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return AW(this.persistence,new CW,e.initialUser,this.serializer)}createPersistence(e){return new G4(fk.zs,this.serializer)}createSharedClientState(e){return new MW}terminate(){var e=this;return(0,j.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class e6 extends lS{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,j.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield X3(r.Vc.syncEngine),yield DE(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return AW(this.persistence,new CW,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new gW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new zse(t,this.persistence);return new qse(e.asyncQueue,r)}createPersistence(e){const t=z4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?no.withCacheSize(this.cacheSizeBytes):no.DEFAULT;return new q4(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LW(),Ik(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new MW}}class tZ extends e6{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,j.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof t3&&(r.sharedClientState.syncEngine={jr:gue.bind(null,i),zr:yue.bind(null,i),Wr:vue.bind(null,i),$i:_ue.bind(null,i),Qr:pue.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,j.Z)(function*(o){yield function mue(n,e){return Z3.apply(this,arguments)}(r.Vc.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=LW();if(!t3.D(t))throw new Fe(Te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=z4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new t3(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ME{initialize(e,t){var r=this;return(0,j.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>QW(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=due.bind(null,r.syncEngine),yield I3(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Kae}createDatastore(e){const t=aS(e.databaseInfo.databaseId),r=new Nae(e.databaseInfo);return new Oae(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>QW(this.syncEngine,d,0),o=OW.D()?new OW:new Rae,new Vae(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,d,f,g){const y=new nue(r,i,s,o,d,f);return g&&(y.vc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,j.Z)(function*(t){const r=ft(t);Ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield SE(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nZ(n,e=10240){let t=0;return{read:()=>(0,j.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,j.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Tk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wue{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Qi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,j.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,j.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,j.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new Jae(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,j.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,j.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,j.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Tue{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,j.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(Te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,j.Z)(function*(s,o){const d=ft(s),f=Qb(d.serializer)+"/documents",g={documents:o.map(R=>Yb(d.serializer,R))},y=yield d.vo("BatchGetDocuments",f,g,o.length),E=new Map;y.forEach(R=>{const V=function Hoe(n,e){return"found"in e?function(t,r){St(!!r.found);const i=ul(t,r.found.name),s=mi(r.found.updateTime),o=r.found.createTime?mi(r.found.createTime):Dt.min(),d=new Vs({mapValue:{fields:r.found.fields}});return vr.newFoundDocument(i,s,o,d)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=ul(t,r.missing),s=mi(r.readTime);return vr.newNoDocument(i,s)}(n,e):yt()}(d.serializer,R);E.set(V.key.toString(),V)});const b=[];return o.forEach(R=>{const V=E.get(R.toString());St(!!V),b.push(V)}),b}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new IE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,j.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=lt.fromPath(i);e.mutations.push(new C4(s,e.precondition(s)))}),yield(r=(0,j.Z)(function*(i,s){const o=ft(i),d=Qb(o.serializer)+"/documents",f={writes:s.map(g=>Jb(o.serializer,g))};yield o.Io("Commit",d,f)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(Te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Dr.exists(!1):Dr.updateTime(t):Dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Fe(Te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Cue{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new r3(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,j.Z)(function*(){const t=new Tue(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Mb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!D8(t)}return!1}}class Aue{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ps.UNAUTHENTICATED,this.clientId=Az.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,j.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ke("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,j.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(Te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,j.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=xE(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Ck(n,e){return t6.apply(this,arguments)}function t6(){return t6=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,j.Z)(function*(s){r.isEqual(s)||(yield bW(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),t6.apply(this,arguments)}function n6(n,e){return r6.apply(this,arguments)}function r6(){return r6=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield i6(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>GW(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>GW(e.remoteStore,s)),n._onlineComponents=e}),r6.apply(this,arguments)}function rZ(n){return"FirebaseError"===n.name?n.code===Te.FAILED_PRECONDITION||n.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function i6(n){return s6.apply(this,arguments)}function s6(){return s6=(0,j.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ck(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!rZ(t))throw t;cu("Error using user provided cache. Falling back to memory cache: "+t),yield Ck(n,new lS)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield Ck(n,new lS);return n._offlineComponents}),s6.apply(this,arguments)}function Ak(n){return o6.apply(this,arguments)}function o6(){return o6=(0,j.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield n6(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield n6(n,new ME))),n._onlineComponents}),o6.apply(this,arguments)}function iZ(n){return i6(n).then(e=>e.persistence)}function bk(n){return i6(n).then(e=>e.localStore)}function sZ(n){return Ak(n).then(e=>e.remoteStore)}function a6(n){return Ak(n).then(e=>e.syncEngine)}function OE(n){return u6.apply(this,arguments)}function u6(){return u6=(0,j.Z)(function*(n){const e=yield Ak(n),t=e.eventManager;return t.onListen=rue.bind(null,e.syncEngine),t.onUnlisten=iue.bind(null,e.syncEngine),t}),u6.apply(this,arguments)}function aZ(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function(i,s,o,d,f){const g=new Tk({next:E=>{s.enqueueAndForget(()=>A3(i,y));const b=E.docs.has(o);!b&&E.fromCache?f.reject(new Fe(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&d&&"server"===d.source?f.reject(new Fe(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new D3(mE(o.path),g,{includeMetadataChanges:!0,Ku:!0});return T3(i,y)}(yield OE(n),n.asyncQueue,e,t,r)})),r.promise}function uZ(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function(i,s,o,d,f){const g=new Tk({next:E=>{s.enqueueAndForget(()=>A3(i,y)),E.fromCache&&"server"===d.source?f.reject(new Fe(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new D3(o,g,{includeMetadataChanges:!0,Ku:!0});return T3(i,y)}(yield OE(n),n.asyncQueue,e,t,r)})),r.promise}function cZ(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const lZ=new Map;function c6(n,e,t){if(!t)throw new Fe(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dZ(n,e,t,r){if(!0===e&&!0===r)throw new Fe(Te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hZ(n){if(!lt.isDocumentKey(n))throw new Fe(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fZ(n){if(lt.isDocumentKey(n))throw new Fe(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sk(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":yt()}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sk(n);throw new Fe(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pZ(n,e){if(e<=0)throw new Fe(Te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gZ{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=cZ(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Fe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Fe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Fe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dS{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gZ({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gZ(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kse;switch(t.type){case"firstParty":return new Fse(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lZ.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),lZ.delete(e),t.terminate())}(this),Promise.resolve()}}function mZ(n,e,t,r={}){var i;const s=(n=En(n,dS))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&cu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=ps.MOCK_USER;else{d=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ps(g)}n._authCredentials=new Mse(new Tz(d,f))}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class Us{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class cl extends Us{constructor(e,t,r){super(e,t,mE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new lt(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function _Z(n,e,...t){if(n=(0,z.m9)(n),c6("collection","path",e),n instanceof dS){const r=Cn.fromString(e,...t);return fZ(r),new cl(n,null,r)}{if(!(n instanceof Ir||n instanceof cl))throw new Fe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return fZ(r),new cl(n.firestore,null,r)}}function Dk(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Az.A()),c6("doc","path",e),n instanceof dS){const r=Cn.fromString(e,...t);return hZ(r),new Ir(n,null,new lt(r))}{if(!(n instanceof Ir||n instanceof cl))throw new Fe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return hZ(r),new Ir(n.firestore,n instanceof cl?n.converter:null,new lt(r))}}function yZ(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Ir||n instanceof cl)&&(e instanceof Ir||e instanceof cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function l6(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Us&&e instanceof Us&&n.firestore===e.firestore&&jb(n._query,e._query)&&n.converter===e.converter}class Oue{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new r3(this,"async_queue_retry"),this.Xc=()=>{const t=Ik();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ik();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ik();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Qi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,j.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Vp(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,gi("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=w3.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&yt()}verifyOperationInProgress(){}sa(){var e=this;return(0,j.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function d6(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Lue{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Er extends dS{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Oue,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vZ(this),this._firestoreClient.terminate()}}function Vue(n,e){const t="object"==typeof n?n:(0,ct.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ct._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,z.P0)("firestore");s&&mZ(i,...s)}return i}function _i(n){return n._firestoreClient||vZ(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vZ(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new foe(n._databaseId,d,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,cZ(g.experimentalLongPollingOptions),g.useFetchStreams));var d,g;n._firestoreClient=new Aue(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function IZ(n,e,t){const r=new Qi;return n.asyncQueue.enqueue((0,j.Z)(function*(){try{yield Ck(n,t),yield n6(n,e),r.resolve()}catch(i){const s=i;if(!rZ(s))throw s;cu("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function EZ(n){if(n._initialized||n._terminated)throw new Fe(Te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(Ji.fromBase64String(e))}catch(t){throw new Fe(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(Ji.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vy{constructor(e){this._methodName=e}}class Rk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const Zue=/^__.*__$/;class Kue{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new lh(e,this.data,this.fieldMask,t,this.fieldTransforms):new vE(e,this.data,t,this.fieldTransforms)}}class wZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TZ(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class xk{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new xk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return kk(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(TZ(this.ca)&&Zue.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Yue{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||aS(e)}ya(e,t,r,i=!1){return new xk({ca:e,methodName:t,ga:r,path:Xr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(n){const e=n._freezeSettings(),t=aS(n._databaseId);return new Yue(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pk(n,e,t,r,i,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,i);g6("Data must be an object, but it was:",o,r);const d=bZ(r,o);let f,g;if(s.merge)f=new $o(o.fieldMask),g=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const E of s.mergeFields){const b=pS(e,E,t);if(!o.contains(b))throw new Fe(Te.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);DZ(y,b)||y.push(b)}f=new $o(y),g=o.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,g=o.fieldTransforms;return new Kue(new Vs(d),f,g)}class fS extends vy{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fS}}function CZ(n,e,t){return new xk({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class h6 extends vy{_toFieldTransform(e){return new qb(e.path,new _E)}isEqual(e){return e instanceof h6}}class Que extends vy{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=CZ(this,e,!0),r=this.pa.map(s=>Ey(s,t)),i=new ly(r);return new qb(e.path,i)}isEqual(e){return this===e}}class Jue extends vy{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=CZ(this,e,!0),r=this.pa.map(s=>Ey(s,t)),i=new dy(r);return new qb(e.path,i)}isEqual(e){return this===e}}class Xue extends vy{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new yE(e.serializer,_8(e.serializer,this.Ia));return new qb(e.path,t)}isEqual(e){return this===e}}function f6(n,e,t,r){const i=n.ya(1,e,t);g6("Data must be an object, but it was:",i,r);const s=[],o=Vs.empty();Up(r,(f,g)=>{const y=Nk(e,f,t);g=(0,z.m9)(g);const E=i.da(y);if(g instanceof fS)s.push(y);else{const b=Ey(g,E);null!=b&&(s.push(y),o.set(y,b))}});const d=new $o(s);return new wZ(o,d,i.fieldTransforms)}function p6(n,e,t,r,i,s){const o=n.ya(1,e,t),d=[pS(e,r,t)],f=[i];if(s.length%2!=0)throw new Fe(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)d.push(pS(e,s[b])),f.push(s[b+1]);const g=[],y=Vs.empty();for(let b=d.length-1;b>=0;--b)if(!DZ(g,d[b])){const R=d[b];let V=f[b];V=(0,z.m9)(V);const q=o.da(R);if(V instanceof fS)g.push(R);else{const Z=Ey(V,q);null!=Z&&(g.push(R),y.set(R,Z))}}const E=new $o(g);return new wZ(y,E,o.fieldTransforms)}function AZ(n,e,t,r=!1){return Ey(t,n.ya(r?4:3,e))}function Ey(n,e){if(SZ(n=(0,z.m9)(n)))return g6("Unsupported field value:",e,n),bZ(n,e);if(n instanceof vy)return function(t,r){if(!TZ(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let d=Ey(o,r.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _8(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Sr.fromDate(t);return{timestampValue:EE(r.serializer,i)}}if(t instanceof Sr){const i=new Sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:EE(r.serializer,i)}}if(t instanceof Rk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:V8(r.serializer,t._byteString)};if(t instanceof Ir){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:P4(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Sk(t)}`)}(n,e)}function bZ(n,e){const t={};return Bz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Up(n,(r,i)=>{const s=Ey(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function SZ(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sr||n instanceof Rk||n instanceof ll||n instanceof Ir||n instanceof vy)}function g6(n,e,t){if(!SZ(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sk(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function pS(n,e,t){if((e=(0,z.m9)(e))instanceof fh)return e._internalPath;if("string"==typeof e)return Nk(n,e);throw kk("Field path arguments must be of type string or ",n,!1,void 0,t)}const ece=new RegExp("[~\\*/\\[\\]]");function Nk(n,e,t){if(e.search(ece)>=0)throw kk(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fh(...e.split("."))._internalPath}catch{throw kk(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kk(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${r}`),o&&(f+=` in document ${i}`),f+=")"),new Fe(Te.INVALID_ARGUMENT,d+n+f)}function DZ(n,e){return n.some(t=>t.isEqual(e))}class gS{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tce extends gS{data(){return super.data()}}function Mk(n,e){return"string"==typeof e?Nk(n,e):e instanceof fh?e._internalPath:e._delegate._internalPath}function RZ(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m6{}class mS extends m6{}function Jp(n,e,...t){let r=[];e instanceof m6&&r.push(e),r=r.concat(t),function(i){const s=i.filter(d=>d instanceof LE).length,o=i.filter(d=>d instanceof _S).length;if(s>1||s>0&&o>0)throw new Fe(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _S extends mS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _S(e,t,r)}_apply(e){const t=this._parse(e);return kZ(e._query,t),new Us(e.firestore,e.converter,E4(e._query,t))}_parse(e){const t=Iy(e.firestore);return function(i,s,o,d,f,g,y){let E;if(f.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new Fe(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){NZ(y,g);const b=[];for(const R of y)b.push(PZ(d,i,R));E={arrayValue:{values:b}}}else E=PZ(d,i,y)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||NZ(y,g),E=AZ(o,"where",y,"in"===g||"not-in"===g);return In.create(f,g,E)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class LE extends m6{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new LE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const d of o)kZ(s,d),s=E4(s,d)}(e._query,t),new Us(e.firestore,e.converter,E4(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _6 extends mS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _6(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Fe(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new pE(i,s);return function(d,f){if(null===v4(d)){const g=JN(d);null!==g&&MZ(0,g,f.field)}}(r,o),o}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new uh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ok extends mS{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ok(e,t,r)}_apply(e){return new Us(e.firestore,e.converter,XN(e._query,this._limit,this._limitType))}}class Lk extends mS{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lk(e,t,r)}_apply(e){const t=xZ(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(i=t,new uh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Fk extends mS{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Fk(e,t,r)}_apply(e){const t=xZ(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(i=t,new uh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function xZ(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof gS)return function(i,s,o,d,f){if(!d)throw new Fe(Te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const g=[];for(const y of cy(i))if(y.field.isKeyField())g.push(ay(s,d.key));else{const E=d.data.field(y.field);if(qN(E))throw new Fe(Te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const b=y.field.canonicalString();throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}g.push(E)}return new qp(g,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Iy(n.firestore);return function(s,o,d,f,g,y){const E=s.explicitOrderBy;if(g.length>E.length)throw new Fe(Te.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let R=0;R<g.length;R++){const V=g[R];if(E[R].field.isKeyField()){if("string"!=typeof V)throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof V}`);if(!I4(s)&&-1!==V.indexOf("/"))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${V}' contains a slash.`);const q=s.path.child(Cn.fromString(V));if(!lt.isDocumentKey(q))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const Z=new lt(q);b.push(ay(o,Z))}else{const q=AZ(d,f,V);b.push(q)}}return new qp(b,y)}(n._query,n.firestore._databaseId,i,e,t,r)}}function PZ(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new Fe(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I4(e)&&-1!==t.indexOf("/"))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!lt.isDocumentKey(r))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ay(n,new lt(r))}if(t instanceof Ir)return ay(n,t._key);throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sk(t)}.`)}function NZ(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kZ(n,e){if(e.isInequality()){const r=JN(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=v4(n);null!==s&&MZ(0,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(Te.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function MZ(n,e,t){if(!t.isEqual(e))throw new Fe(Te.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class y6{convertValue(e,t="none"){switch(Gp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ah(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Up(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Rk(ei(e.latitude),ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lb(e));default:return null}}convertTimestamp(e){const t=Bp(e);return new Sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);St(Z8(r));const i=new jp(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(t)||gi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Vk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lce extends y6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}class wy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ph extends gS{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mk("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yS extends ph{data(e={}){return super.data(e)}}class Xp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yS(this._firestore,this._userDataWriter,r.key,r,new wy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new yS(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wy(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const d=new yS(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wy(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return 0!==o.type&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),g=s.indexOf(o.doc.key)),{type:hce(o.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hce(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function LZ(n,e){return n instanceof ph&&e instanceof ph?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xp&&e instanceof Xp&&n._firestore===e._firestore&&l6(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class eg extends y6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function FZ(n,e,t){n=En(n,Ir);const r=En(n.firestore,Er),i=Vk(n.converter,e,t);return FE(r,[Pk(Iy(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Dr.none())])}function VZ(n,e,t,...r){n=En(n,Ir);const i=En(n.firestore,Er),s=Iy(i);let o;return o="string"==typeof(e=(0,z.m9)(e))||e instanceof fh?p6(s,"updateDoc",n._key,e,t,r):f6(s,"updateDoc",n._key,e),FE(i,[o.toMutation(n._key,Dr.exists(!0))])}function UZ(n,...e){var t,r,i;n=(0,z.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||d6(e[o])||(s=e[o],o++);const d={includeMetadataChanges:s.includeMetadataChanges};if(d6(e[o])){const E=e[o];e[o]=null===(t=E.next)||void 0===t?void 0:t.bind(E),e[o+1]=null===(r=E.error)||void 0===r?void 0:r.bind(E),e[o+2]=null===(i=E.complete)||void 0===i?void 0:i.bind(E)}let f,g,y;if(n instanceof Ir)g=En(n.firestore,Er),y=mE(n._key.path),f={next:E=>{e[o]&&e[o](v6(g,n,E))},error:e[o+1],complete:e[o+2]};else{const E=En(n,Us);g=En(E.firestore,Er),y=E._query;const b=new eg(g);f={next:R=>{e[o]&&e[o](new Xp(g,b,E,R))},error:e[o+1],complete:e[o+2]},RZ(n._query)}return function(E,b,R,V){const q=new Tk(V),Z=new D3(b,q,R);return E.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return T3(yield OE(E),Z)})),()=>{q.Dc(),E.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return A3(yield OE(E),Z)}))}}(_i(g),y,d,f)}function FE(n,e){return function(t,r){const i=new Qi;return t.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function sue(n,e,t){return k3.apply(this,arguments)}(yield a6(t),r,i)})),i.promise}(_i(n),e)}function v6(n,e,t){const r=t.docs.get(e._key),i=new eg(n);return new ph(n,i,e._key,r,new wy(t.hasPendingWrites,t.fromCache),e.converter)}const xce={maxAttempts:5};class BZ{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Iy(e)}set(e,t,r){this._verifyNotCommitted();const i=tg(e,this._firestore),s=Vk(i.converter,t,r),o=Pk(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=tg(e,this._firestore);let o;return o="string"==typeof(t=(0,z.m9)(t))||t instanceof fh?p6(this._dataReader,"WriteBatch.update",s._key,t,r,i):f6(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tg(e,this._firestore);return this._mutations=this._mutations.concat(new IE(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tg(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new Fe(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pce extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Iy(e)}get(e){const t=tg(e,this._firestore),r=new lce(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return yt();const s=i[0];if(s.isFoundDocument())return new gS(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new gS(this._firestore,r,t._key,null,t.converter);throw yt()})}set(e,t,r){const i=tg(e,this._firestore),s=Vk(i.converter,t,r),o=Pk(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=tg(e,this._firestore);let o;return o="string"==typeof(t=(0,z.m9)(t))||t instanceof fh?p6(this._dataReader,"Transaction.update",s._key,t,r,i):f6(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=tg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tg(e,this._firestore),r=new eg(this._firestore);return super.get(e).then(i=>new ph(this._firestore,r,t._key,i._document,new wy(!1,!1),t.converter))}}function I6(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $Z(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function GZ(){if(!function doe(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lE=ct.SDK_VERSION,(0,ct._registerComponent)(new ai.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Er(new Ose(t.getProvider("auth-internal")),new Vse(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jp(d.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(wz,"3.13.0",n),(0,ct.registerVersion)(wz,"3.13.0","esm2017")}();class vS{constructor(e){this._delegate=e}static fromBase64String(e){return GZ(),new vS(ll.fromBase64String(e))}static fromUint8Array(e){return $Z(),new vS(ll.fromUint8Array(e))}toBase64(){return GZ(),this._delegate.toBase64()}toUint8Array(){return $Z(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function E6(n){return function Bce(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jce{enableIndexedDbPersistence(e,t){return function Uue(n,e){EZ(n=En(n,Er));const t=_i(n);if(t._uninitializedComponentsProvider)throw new Fe(Te.FAILED_PRECONDITION,"SDK cache is already specified.");cu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new ME;return IZ(t,i,new e6(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Bue(n){EZ(n=En(n,Er));const e=_i(n);if(e._uninitializedComponentsProvider)throw new Fe(Te.FAILED_PRECONDITION,"SDK cache is already specified.");cu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new ME;return IZ(e,r,new tZ(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jue(n){if(n._initialized&&!n._terminated)throw new Fe(Te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,j.Z)(function*(){try{yield(t=(0,j.Z)(function*(r){if(!Wu.D())return Promise.resolve();const i=r+"main";yield Wu.delete(i)}),function(r){return t.apply(this,arguments)})(z4(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class HZ{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){mZ(this._delegate,e,t,r)}enableNetwork(){return function Gue(n){return function bue(n){return n.asyncQueue.enqueue((0,j.Z)(function*(){const e=yield iZ(n),t=yield sZ(n);return e.setNetworkEnabled(!0),function(r){const i=ft(r);return i.vu.delete(0),uS(i)}(t)}))}(_i(n=En(n,Er)))}(this._delegate)}disableNetwork(){return function Hue(n){return function Sue(n){return n.asyncQueue.enqueue((0,j.Z)(function*(){const e=yield iZ(n),t=yield sZ(n);return e.setNetworkEnabled(!1),(r=(0,j.Z)(function*(i){const s=ft(i);s.vu.add(0),yield SE(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(_i(n=En(n,Er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dZ("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function $ue(n){return function(e){const t=new Qi;return e.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function cue(n,e){return V3.apply(this,arguments)}(yield a6(e),t)})),t.promise}(_i(n=En(n,Er)))}(this._delegate)}onSnapshotsInSync(e){return function Ece(n,e){return function xue(n,e){const t=new Tk(e);return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return r=yield OE(n),i=t,ft(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return r=yield OE(n),i=t,void ft(r).ku.delete(i);var r,i}))}}(_i(n=En(n,Er)),d6(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new VE(this,_Z(this._delegate,e))}catch(t){throw vo(t,"collection()","Firestore.collection()")}}doc(e){try{return new lu(this,Dk(this._delegate,e))}catch(t){throw vo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function Mue(n,e){if(n=En(n,dS),c6("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(Te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Us(n,null,(t=e,new uh(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Nce(n,e,t){n=En(n,Er);const r=Object.assign(Object.assign({},xce),t);return function(i){if(i.maxAttempts<1)throw new Fe(Te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const d=new Qi;return i.asyncQueue.enqueueAndForget((0,j.Z)(function*(){const f=yield function oZ(n){return Ak(n).then(e=>e.datastore)}(i);new Cue(i.asyncQueue,f,o,s,d).run()})),d.promise}(_i(n),i=>e(new Pce(n,i)),r)}(this._delegate,t=>e(new qZ(this,t)))}batch(){return _i(this._delegate),new zZ(new BZ(this._delegate,e=>FE(this._delegate,e)))}loadBundle(e){return function que(n,e){const t=_i(n=En(n,Er)),r=new Lue;return function Pue(n,e,t,r){const i=function(s,o){let d;return d="string"==typeof s?x8().encode(s):s,f=function(f,g){if(f instanceof Uint8Array)return nZ(f,g);if(f instanceof ArrayBuffer)return nZ(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new wue(f,o);var f}(t,aS(e));n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){!function Iue(n,e,t){const r=ft(n);var i;(i=(0,j.Z)(function*(s,o,d){try{const f=yield o.getMetadata();if(yield function(b,R){const V=ft(b),q=mi(R.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",Z=>V.qs.getBundleMetadata(Z,R.id)).then(Z=>!!Z&&Z.createTime.compareTo(q)>=0)}(s.localStore,f))return yield o.close(),d._completeWith({taskState:"Success",documentsLoaded:(b=f).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);d._updateProgress(zW(f));const g=new Xae(f,s.localStore,o.serializer);let y=yield o.bc();for(;y;){const b=yield g.zu(y);b&&d._updateProgress(b),y=yield o.bc()}const E=yield g.complete();return yield hh(s,E.Ju,void 0),yield function(b,R){const V=ft(b);return V.persistence.runTransaction("Save bundle","readwrite",q=>V.qs.saveBundleMetadata(q,R))}(s.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Hu)}catch(f){return cu("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var b}),function(s,o,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield a6(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zue(n,e){return function Nue(n,e){return n.asyncQueue.enqueue((0,j.Z)(function*(){return function(t,r){const i=ft(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield bk(n),e)}))}(_i(n=En(n,Er)),e).then(t=>t?new Us(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Io(this,t):null)}}class Uk extends y6{constructor(e){super(),this.firestore=e}convertBytes(e){return new vS(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lu.forKey(t,this.firestore,null)}}class qZ{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Uk(e)}get(e){const t=Cy(e);return this._delegate.get(t).then(r=>new IS(this._firestore,new ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cy(e);return r?(I6("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cy(e);return this._delegate.delete(t),this}}class zZ{constructor(e){this._delegate=e}set(e,t,r){const i=Cy(e);return r?(I6("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ty{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ES(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ty.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ty(e,new Uk(e),t),i.set(t,s)),s}}Ty.INSTANCES=new WeakMap;class lu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Uk(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lu(t,new Ir(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new lu(t,new Ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new VE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new VE(this.firestore,_Z(this._delegate,e))}catch(t){throw vo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Ir&&yZ(this._delegate,e)}set(e,t){t=I6("DocumentReference.set",t);try{return t?FZ(this._delegate,e,t):FZ(this._delegate,e)}catch(r){throw vo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VZ(this._delegate,e):VZ(this._delegate,e,t,...r)}catch(i){throw vo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vce(n){return FE(En(n.firestore,Er),[new IE(n._key,Dr.none())])}(this._delegate)}onSnapshot(...e){const t=WZ(e),r=ZZ(e,i=>new IS(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return UZ(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function pce(n){n=En(n,Ir);const e=En(n.firestore,Er),t=_i(e),r=new eg(e);return function Due(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return(r=(0,j.Z)(function*(i,s,o){try{const d=yield function(f,g){const y=ft(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,g))}(i,s);d.isFoundDocument()?o.resolve(d):d.isNoDocument()?o.resolve(null):o.reject(new Fe(Te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=xE(d,`Failed to get document '${s} from cache`);o.reject(f)}}),function(i,s,o){return r.apply(this,arguments)})(yield bk(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ph(e,r,n._key,i,new wy(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function gce(n){n=En(n,Ir);const e=En(n.firestore,Er);return aZ(_i(e),n._key,{source:"server"}).then(t=>v6(e,n,t))}(this._delegate):function fce(n){n=En(n,Ir);const e=En(n.firestore,Er);return aZ(_i(e),n._key).then(t=>v6(e,n,t))}(this._delegate),t.then(r=>new IS(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lu(this.firestore,this._delegate.withConverter(e?Ty.getInstance(this.firestore,e):null))}}function vo(n,e,t){return n.message=n.message.replace(e,t),n}function WZ(n){for(const e of n)if("object"==typeof e&&!E6(e))return e;return{}}function ZZ(n,e){var t,r;let i;return i=E6(n[0])?n[0]:E6(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class IS{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LZ(this._delegate,e._delegate)}}class ES extends IS{data(e){const t=this._delegate.data(e);return function Nse(n,e){n||yt()}(void 0!==t),t}}class Io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Uk(e)}where(e,t,r){try{return new Io(this.firestore,Jp(this._delegate,function nce(n,e,t){const r=e,i=Mk("where",n);return _S._create(i,r,t)}(e,t,r)))}catch(i){throw vo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Io(this.firestore,Jp(this._delegate,function rce(n,e="asc"){const t=e,r=Mk("orderBy",n);return _6._create(r,t)}(e,t)))}catch(r){throw vo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,Jp(this._delegate,function ice(n){return pZ("limit",n),Ok._create("limit",n,"F")}(e)))}catch(t){throw vo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,Jp(this._delegate,function sce(n){return pZ("limitToLast",n),Ok._create("limitToLast",n,"L")}(e)))}catch(t){throw vo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,Jp(this._delegate,function oce(...n){return Lk._create("startAt",n,!0)}(...e)))}catch(t){throw vo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,Jp(this._delegate,function ace(...n){return Lk._create("startAfter",n,!1)}(...e)))}catch(t){throw vo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,Jp(this._delegate,function uce(...n){return Fk._create("endBefore",n,!1)}(...e)))}catch(t){throw vo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,Jp(this._delegate,function cce(...n){return Fk._create("endAt",n,!0)}(...e)))}catch(t){throw vo(t,"endAt()","Query.endAt()")}}isEqual(e){return l6(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _ce(n){n=En(n,Us);const e=En(n.firestore,Er),t=_i(e),r=new eg(e);return function Rue(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return(r=(0,j.Z)(function*(i,s,o){try{const d=yield mk(i,s,!0),f=new KW(s,d.ir),g=f.sc(d.documents),y=f.applyChanges(g,!1);o.resolve(y.snapshot)}catch(d){const f=xE(d,`Failed to execute query '${s} against cache`);o.reject(f)}}),function(i,s,o){return r.apply(this,arguments)})(yield bk(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Xp(e,r,n,i))}(this._delegate):"server"===e?.source?function yce(n){n=En(n,Us);const e=En(n.firestore,Er),t=_i(e),r=new eg(e);return uZ(t,n._query,{source:"server"}).then(i=>new Xp(e,r,n,i))}(this._delegate):function mce(n){n=En(n,Us);const e=En(n.firestore,Er),t=_i(e),r=new eg(e);return RZ(n._query),uZ(t,n._query).then(i=>new Xp(e,r,n,i))}(this._delegate),t.then(r=>new w6(this.firestore,new Xp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WZ(e),r=ZZ(e,i=>new w6(this.firestore,new Xp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return UZ(this._delegate,t,r)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?Ty.getInstance(this.firestore,e):null))}}class Gce{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ES(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class w6{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ES(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Gce(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ES(this._firestore,r))})}isEqual(e){return LZ(this._delegate,e._delegate)}}class VE extends Io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lu(this.firestore,e):null}doc(e){try{return new lu(this.firestore,void 0===e?Dk(this._delegate):Dk(this._delegate,e))}catch(t){throw vo(t,"doc()","CollectionReference.doc()")}}add(e){return function Ice(n,e){const t=En(n.firestore,Er),r=Dk(n),i=Vk(n.converter,e);return FE(t,[Pk(Iy(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lu(this.firestore,t))}isEqual(e){return yZ(this._delegate,e._delegate)}withConverter(e){return new VE(this.firestore,this._delegate.withConverter(e?Ty.getInstance(this.firestore,e):null))}}function Cy(n){return En(n,Ir)}class T6{constructor(...e){this._delegate=new fh(...e)}static documentId(){return new T6(Xr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof fh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ay{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Mce(){return new h6("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ay(e)}static delete(){const e=function kce(){return new fS("deleteField")}();return e._methodName="FieldValue.delete",new Ay(e)}static arrayUnion(...e){const t=function Oce(...n){return new Que("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ay(t)}static arrayRemove(...e){const t=function Lce(...n){return new Jue("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ay(t)}static increment(e){const t=function Fce(n){return new Xue("increment",n)}(e);return t._methodName="FieldValue.increment",new Ay(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Hce={Firestore:HZ,GeoPoint:Rk,Timestamp:Sr,Blob:vS,Transaction:qZ,WriteBatch:zZ,DocumentReference:lu,DocumentSnapshot:IS,Query:Io,QueryDocumentSnapshot:ES,QuerySnapshot:w6,CollectionReference:VE,FieldPath:T6,FieldValue:Ay,setLogLevel:function $ce(n){!function Pse(n){Lp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function zce(n){(function qce(n,e){n.INTERNAL.registerComponent(new ai.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Hce)))})(n,(e,t)=>new HZ(e,t,new jce)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(sq.Z);var Wce=P(3019);class Zce extends oa.x{constructor(e=1/0,t=1/0,r=IV){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=o;f+=2)d=f;d&&r.splice(0,d+1)}}}var Kce=P(3020);function KZ(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Kce.B)({connector:()=>new Zce(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function YZ(n,e){return(0,hf.m)(e)?(0,ir.w)(()=>n,e):(0,ir.w)(()=>n)}class ng{constructor(e){return e}}class wS{constructor(){return(0,ct.getApps)()}}const C6=new l.OlP("angularfire2._apps"),Qce={provide:ng,useFactory:function Yce(n){return n&&1===n.length?n[0]:new ng((0,ct.getApp)())},deps:[[new l.FiY,C6]]},Jce={provide:wS,deps:[[new l.FiY,C6]]};function Xce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ng(r)}}let ele=(()=>{class n{constructor(t){(0,ct.registerVersion)("angularfire",Pp.full,"core"),(0,ct.registerVersion)("angularfire",Pp.full,"app"),(0,ct.registerVersion)("angular",l.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Qce,Jce]}),n})();function tle(n,...e){return{ngModule:ele,providers:[{provide:C6,useFactory:Xce(n),multi:!0,deps:[l.R0b,l.zs3,Np,...e]}]}}const nle=kp(ct.initializeApp,!0),A6=new Map,QZ={activated:!1,tokenObservers:[]},rle={initialized:!1,enabled:!1};function ti(n){return A6.get(n)||Object.assign({},QZ)}function Bk(){return rle}const b6="https://content-firebaseappcheck.googleapis.com/v1",ale="exchangeDebugToken",JZ={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class cle{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,j.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function lle(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Bs=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function S6(n){if(!ti(n).activated)throw Bs.create("use-before-activation",{appName:n.name})}function Gk(n,e){return R6.apply(this,arguments)}function R6(){return R6=(0,j.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const E=yield i.getHeartbeatsHeader();E&&(r["X-Firebase-Client"]=E)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,d;try{o=yield fetch(n,s)}catch(E){throw Bs.create("fetch-network-error",{originalErrorMessage:E?.message})}if(200!==o.status)throw Bs.create("fetch-status-error",{httpStatus:o.status});try{d=yield o.json()}catch(E){throw Bs.create("fetch-parse-error",{originalErrorMessage:E?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const g=1e3*Number(f[1]),y=Date.now();return{token:d.token,expireTimeMillis:y+g,issuedAtTimeMillis:y}}),R6.apply(this,arguments)}function XZ(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${b6}/projects/${t}/apps/${r}:${ale}?key=${i}`,body:{debug_token:e}}}const ple="firebase-app-check-database",gle=1,TS="firebase-app-check-store";let Hk=null;function x6(){return x6=(0,j.Z)(function*(n,e){const r=(yield function tK(){return Hk||(Hk=new Promise((n,e)=>{try{const t=indexedDB.open(ple,gle);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Bs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(TS,{keyPath:"compositeKey"})}}catch(t){e(Bs.create("storage-open",{originalErrorMessage:t?.message}))}}),Hk)}()).transaction(TS,"readwrite"),s=r.objectStore(TS).put({compositeKey:n,value:e});return new Promise((o,d)=>{s.onsuccess=f=>{o()},r.onerror=f=>{var g;d(Bs.create("storage-set",{originalErrorMessage:null===(g=f.target.error)||void 0===g?void 0:g.message}))}})}),x6.apply(this,arguments)}const CS=new Zn.Yd("@firebase/app-check");function k6(n,e){return(0,z.hl)()?function _le(n,e){return function nK(n,e){return x6.apply(this,arguments)}(function iK(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{CS.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function O6(){return Bk().enabled}function L6(){return F6.apply(this,arguments)}function F6(){return F6=(0,j.Z)(function*(){const n=Bk();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),F6.apply(this,arguments)}const Tle={error:"UNKNOWN_ERROR"};function Cle(n){return z.US.encodeString(JSON.stringify(n),!1)}function qk(n){return V6.apply(this,arguments)}function V6(){return V6=(0,j.Z)(function*(n,e=!1){const t=n.app;S6(t);const r=ti(t);let s,i=r.token;if(i&&!UE(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(UE(f)?i=f:yield k6(t,void 0))}if(!e&&i&&UE(i))return{token:i.token};let d,o=!1;if(O6()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Gk(XZ(t,yield L6()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const f=yield r.exchangeTokenPromise;return yield k6(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield ti(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?CS.warn(f.message):CS.error(f),s=f}return i?s?d=UE(i)?{token:i.token,internalError:s}:uK(s):(d={token:i.token},r.token=i,yield k6(t,i)):d=uK(s),o&&function aK(n,e){const t=ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),V6.apply(this,arguments)}function U6(){return U6=(0,j.Z)(function*(n){const e=n.app;S6(e);const{provider:t}=ti(e);if(O6()){const r=yield L6(),{token:i}=yield Gk(XZ(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),U6.apply(this,arguments)}function j6(n,e){const t=ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function oK(n){const{app:e}=n,t=ti(e);let r=t.tokenRefresher;r||(r=function Ale(n){const{app:e}=n;return new cle((0,j.Z)(function*(){let r;if(r=ti(e).token?yield qk(n,!0):yield qk(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},JZ.RETRIAL_MIN_WAIT,JZ.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UE(n){return n.expireTimeMillis-Date.now()>0}function uK(n){return{token:Cle(Tle),error:n}}class ble{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ti(this.app);for(const t of e)j6(this.app,t.next);return Promise.resolve()}}const mK="app-check-internal";!function Ble(){(0,ct._registerComponent)(new ai.wA("app-check",n=>function Sle(n,e){return new ble(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mK).initialize()})),(0,ct._registerComponent)(new ai.wA(mK,n=>function Dle(n){return{getToken:e=>qk(n,e),getLimitedUseToken:()=>function sK(n){return U6.apply(this,arguments)}(n),addTokenListener:e=>function B6(n,e,t,r){const{app:i}=n,s=ti(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&UE(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),oK(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>oK(n))}(n,"INTERNAL",e),removeTokenListener:e=>j6(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ct.registerVersion)("@firebase/app-check","0.8.0")}();class by{constructor(){return ub("app-check")}}typeof window<"u"&&window,P(120);const yK=new l.OlP("angularfire2.auth.use-emulator"),vK=new l.OlP("angularfire2.auth.settings"),IK=new l.OlP("angularfire2.auth.tenant-id"),EK=new l.OlP("angularfire2.auth.langugage-code"),wK=new l.OlP("angularfire2.auth.use-device-language"),TK=new l.OlP("angularfire.auth.persistence"),CK=(n,e,t,r,i,s,o,d)=>(0,mo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),o)for(const[g,y]of Object.entries(o))f.settings[g]=y;return d&&f.setPersistence(d),f},[t,r,i,s,o,d]);let z6=(()=>{class n{constructor(t,r,i,s,o,d,f,g,y,E,b,R){const V=new oa.x,q=(0,wt.of)(void 0).pipe((0,J_.Q)(o.outsideAngular),(0,ir.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8661)))),(0,Rt.U)(()=>(0,mo.on)(t,s,r)),(0,Rt.U)(Z=>CK(Z,s,d,g,y,E,f,b)),KZ({bufferSize:1,refCount:!1}));if(Cs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wt.of)(null);else{q.pipe(Ga()).subscribe();const fe=q.pipe((0,ir.w)(Le=>Le.getRedirectResult().then(nt=>nt,()=>null)),go,KZ({bufferSize:1,refCount:!1})),Se=q.pipe((0,ir.w)(Le=>new zr.y(nt=>({unsubscribe:s.runOutsideAngular(()=>Le.onAuthStateChanged(at=>nt.next(at),at=>nt.error(at),()=>nt.complete()))})))),ye=q.pipe((0,ir.w)(Le=>new zr.y(nt=>({unsubscribe:s.runOutsideAngular(()=>Le.onIdTokenChanged(at=>nt.next(at),at=>nt.error(at),()=>nt.complete()))}))));this.authState=fe.pipe(YZ(Se),(0,ob.R)(o.outsideAngular),(0,J_.Q)(o.insideAngular)),this.user=fe.pipe(YZ(ye),(0,ob.R)(o.outsideAngular),(0,J_.Q)(o.insideAngular)),this.idToken=this.user.pipe((0,ir.w)(Le=>Le?(0,yn.D)(Le.getIdToken()):(0,wt.of)(null))),this.idTokenResult=this.user.pipe((0,ir.w)(Le=>Le?(0,yn.D)(Le.getIdTokenResult()):(0,wt.of)(null))),this.credential=(0,Wce.T)(fe,V,this.authState.pipe(Ei(Le=>!Le))).pipe((0,Rt.U)(Le=>Le?.user?Le:null),(0,ob.R)(o.outsideAngular),(0,J_.Q)(o.insideAngular))}return(0,mo.pX)(this,q,s,{spy:{apply:(Z,fe,Se)=>{(Z.startsWith("signIn")||Z.startsWith("createUser"))&&Se.then(ye=>V.next(ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(mo.Dh),l.LFG(mo.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Np),l.LFG(yK,8),l.LFG(vK,8),l.LFG(IK,8),l.LFG(EK,8),l.LFG(wK,8),l.LFG(TK,8),l.LFG(by,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function AK(n,e){return function zle(n,e=EV){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function W6(n,e){return AK(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function Wk(n,e){return W6(n,e).pipe(yc(void 0),hN(),(0,Rt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((o,d)=>{const f=i.find(y=>y.doc.ref.isEqual(o.ref)),g=t?.payload.docs.find(y=>y.ref.isEqual(o.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(o.metadata)||!f&&g&&JSON.stringify(g.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:o}})}),s}))}function bK(n,e,t){return Wk(n,t).pipe(zv((r,i)=>function Zle(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Kle(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Z6(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Z6(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z6(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,iq.x)(),(0,Rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Z6(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function SK(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class DK{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Wk(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(yc(void 0),hN(),Ei(([r,i])=>i.length>0||!r),(0,Rt.U)(([r,i])=>i),go)}auditTrail(e){return this.stateChanges(e).pipe(zv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SK(e);return bK(this.query,t,this.afs.schedulers.outsideAngular).pipe(go)}valueChanges(e={}){return W6(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),go)}get(e){return(0,yn.D)(this.query.get(e)).pipe(go)}add(e){return this.ref.add(e)}doc(e){return new RK(this.ref.doc(e),this.afs)}}class RK{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=xK(r,t);return new DK(i,s,this.afs)}snapshotChanges(){return function Wle(n,e){return AK(n,e).pipe(yc(void 0),hN(),(0,Rt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(go)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(go)}}class Yle{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Wk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ei(t=>t.length>0),go):Wk(this.query,this.afs.schedulers.outsideAngular).pipe(go)}auditTrail(e){return this.stateChanges(e).pipe(zv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SK(e);return bK(this.query,t,this.afs.schedulers.outsideAngular).pipe(go)}valueChanges(e={}){return W6(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),go)}get(e){return(0,yn.D)(this.query.get(e)).pipe(go)}}const Qle=new l.OlP("angularfire2.enableFirestorePersistence"),Jle=new l.OlP("angularfire2.firestore.persistenceSettings"),Xle=new l.OlP("angularfire2.firestore.settings"),ede=new l.OlP("angularfire2.firestore.use-emulator");function xK(n,e=(t=>t)){return{query:e(n),ref:n}}let K6=(()=>{class n{constructor(t,r,i,s,o,d,f,g,y,E,b,R,V,q,Z,fe,Se){this.schedulers=f;const ye=(0,mo.on)(t,d,r),Le=y;E&&CK(ye,d,b,V,q,Z,R,fe),[this.firestore,this.persistenceEnabled$]=(0,mo.cc)(`${ye.name}.firestore`,"AngularFirestore",ye.name,()=>{const nt=d.runOutsideAngular(()=>ye.firestore());if(s&&nt.settings(s),Le&&nt.useEmulator(...Le),i&&!Cs(o)){const at=()=>{try{return(0,yn.D)(nt.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(rn){return typeof console<"u"&&console.warn(rn),(0,wt.of)(!1)}};return[nt,d.runOutsideAngular(at)]}return[nt,(0,wt.of)(!1)]},[s,Le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=xK(i,r),d=this.schedulers.ngZone.run(()=>s);return new DK(d,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Yle(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new RK(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(mo.Dh),l.LFG(mo.xv,8),l.LFG(Qle,8),l.LFG(Xle,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Np),l.LFG(Jle,8),l.LFG(ede,8),l.LFG(z6,8),l.LFG(yK,8),l.LFG(vK,8),l.LFG(IK,8),l.LFG(EK,8),l.LFG(wK,8),l.LFG(TK,8),l.LFG(by,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zk=(()=>{class n{constructor(t,r,i){this.Fir=t,this.auth=r,this.router=i}ngOnInit(){}AddUser(t){""!=t.fullName?this.auth.createUserWithEmailAndPassword(t.email,t.pas).then(()=>{localStorage.setItem("token","true"),alert("Sing in successfull"),qH(Xd(wa(),"Users"),t),this.router.navigate(["/Login"])},r=>{alert(r.message),this.router.navigate(["/SignIn"])}):alert("name is on correct")}LogIN(t,r){this.auth.signInWithEmailAndPassword(t,r).then(()=>{this.SessionU(t),this.router.navigate(["/Home"])},i=>{alert(i.message)})}LogOUT(){sessionStorage.clear()}getAllUsers(){return this.Fir.collection("/Users").snapshotChanges()}getUser(){}SessionU(t){return(0,j.Z)(function*(){const i=eh(Xd(wa(),"Users"),z_("email","==",t));(yield th(i)).forEach(o=>{sessionStorage.setItem("UID",o.id),sessionStorage.setItem("UN",o.get("fullName")),sessionStorage.setItem("UT",o.get("typ")),sessionStorage.setItem("UE",o.get("email")),sessionStorage.setItem("UP",o.get("pas"))})})()}Updateuser(t,r){null!=t?""!=r?_V(JA(wa(),"Users",t),{fullName:r}).then(()=>{sessionStorage.setItem("UN",r),alert("Update the name successfully"),this.router.navigate(["/Home"])}):alert("the data not correct"):(alert("You must log in"),this.router.navigate(["/Login"]))}getAllUsers1(t){return this.Fir.collection("/Users/"+t).snapshotChanges()}PasswordReset(t){var r=this;return(0,j.Z)(function*(){try{yield r.auth.sendPasswordResetEmail(t),alert("Password reset email sent successfully"),r.router.navigate(["/Login"])}catch(i){console.error("Error sending password reset email:",i),"auth/user-not-found"===i.code?alert("User with this email does not exist"):alert("An error occurred while sending the password reset email")}})()}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(K6),l.LFG(z6),l.LFG(sr))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PK=(()=>{class n{constructor(t,r){this.serveuser=t,this.router=r,this.userOpj={email:"",pas:"",fullName:"",typ:"Y"},this.email="",this.pas="",this.fullName="",this.typ=""}ngOnInit(){}AddUesrs(){this.userOpj.email=this.email,this.userOpj.fullName=this.fullName,this.userOpj.pas=this.pas,this.serveuser.AddUser(this.userOpj)}gotoLogin(){this.router.navigate(["/Login"])}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(Zk),l.Y36(sr))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-users"]],decls:42,vars:3,consts:[[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-5"],[1,"card",2,"width","18rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","exampleFormControlInput2","placeholder","password",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","exampleFormControlInput3","placeholder","fullName",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","a","name","a",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-plus-fill"],["d","M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"],[3,"click"]],template:function(r,i){1&r&&(l._UZ(0,"br")(1,"br")(2,"br"),l.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"h1",3),l._uU(7,"Kotby"),l.qZA()()(),l._UZ(8,"br")(9,"br")(10,"br")(11,"br")(12,"br")(13,"br"),l.TgZ(14,"div",4)(15,"div",5),l._UZ(16,"div",6),l.TgZ(17,"div",2)(18,"div",7)(19,"div",8)(20,"h1",9),l._uU(21,"Sign In"),l.qZA(),l.TgZ(22,"div",10)(23,"label",11),l._uU(24,"Email address"),l.qZA(),l.TgZ(25,"input",12),l.NdJ("ngModelChange",function(o){return i.email=o}),l.qZA()(),l.TgZ(26,"div",10)(27,"label",11),l._uU(28,"password"),l.qZA(),l.TgZ(29,"input",13),l.NdJ("ngModelChange",function(o){return i.pas=o}),l.qZA()(),l.TgZ(30,"div",10)(31,"label",11),l._uU(32,"fullName"),l.qZA(),l.TgZ(33,"input",14),l.NdJ("ngModelChange",function(o){return i.fullName=o}),l.qZA()(),l.TgZ(34,"a",15),l.NdJ("click",function(){return i.AddUesrs()}),l.O4$(),l.TgZ(35,"svg",16),l._UZ(36,"path",17)(37,"path",18),l.qZA()(),l.kcU(),l._UZ(38,"br"),l.TgZ(39,"a",19),l.NdJ("click",function(){return i.gotoLogin()}),l._uU(40,"you have account?"),l.qZA()()()(),l._UZ(41,"div",6),l.qZA()()()),2&r&&(l.xp6(25),l.Q6J("ngModel",i.email),l.xp6(4),l.Q6J("ngModel",i.pas),l.xp6(4),l.Q6J("ngModel",i.fullName))},dependencies:[Ss,ra,$a]})}return n})(),tde=(()=>{class n{constructor(t,r){this.crud=t,this.router=r,this.email=""}PasswordReset(){this.crud.PasswordReset(this.email)}goHome(){this.router.navigate(["/Home"])}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(Zk),l.Y36(sr))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-test"]],decls:34,vars:1,consts:[[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-5"],[1,"card",2,"width","18rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","a","name","a",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send"],["d","M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"],[3,"click"]],template:function(r,i){1&r&&(l._UZ(0,"br")(1,"br")(2,"br"),l.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"h1",3),l._uU(7,"Kotby"),l.qZA()()(),l._UZ(8,"br")(9,"br")(10,"br")(11,"br")(12,"br")(13,"br"),l.TgZ(14,"div",4)(15,"div",5),l._UZ(16,"div",6),l.TgZ(17,"div",2)(18,"div",7)(19,"div",8)(20,"h1",9),l._uU(21,"Password Reset"),l.qZA(),l.TgZ(22,"div",10)(23,"label",11),l._uU(24,"Email address"),l.qZA(),l.TgZ(25,"input",12),l.NdJ("ngModelChange",function(o){return i.email=o}),l.qZA()(),l.TgZ(26,"a",13),l.NdJ("click",function(){return i.PasswordReset()}),l.O4$(),l.TgZ(27,"svg",14),l._UZ(28,"path",15),l.qZA()(),l.kcU(),l._UZ(29,"br")(30,"br"),l.TgZ(31,"a",16),l.NdJ("click",function(){return i.goHome()}),l._uU(32,"cancel"),l.qZA()()()(),l._UZ(33,"div",6),l.qZA()()()),2&r&&(l.xp6(25),l.Q6J("ngModel",i.email))},dependencies:[Ss,ra,$a]})}return n})(),nde=(()=>{class n{constructor(t,r){this.crud=t,this.router=r,this.email="",this.pas=""}login(){this.crud.LogIN(this.email,this.pas)}gotoSingIn(){this.router.navigate(["/SignIn"])}gotoPasswordReset(){this.router.navigate(["/pas"])}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(Zk),l.Y36(sr))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:43,vars:2,consts:[[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-5"],[1,"card",2,"width","18rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","exampleFormControlInput2","placeholder","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","a","name","a",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-in-right"],["fill-rule","evenodd","d","M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"],["fill-rule","evenodd","d","M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"],[3,"click"]],template:function(r,i){1&r&&(l._UZ(0,"br")(1,"br")(2,"br"),l.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"h1",3),l._uU(7,"Kotby"),l.qZA()()(),l._UZ(8,"br")(9,"br")(10,"br")(11,"br")(12,"br")(13,"br"),l.TgZ(14,"div",4)(15,"div",5),l._UZ(16,"div",6),l.TgZ(17,"div",2)(18,"div",7)(19,"div",8)(20,"h1",9),l._uU(21,"Log In"),l.qZA(),l.TgZ(22,"div",10)(23,"label",11),l._uU(24,"Email address"),l.qZA(),l.TgZ(25,"input",12),l.NdJ("ngModelChange",function(o){return i.email=o}),l.qZA()(),l.TgZ(26,"div",10)(27,"label",11),l._uU(28,"password"),l.qZA(),l.TgZ(29,"input",13),l.NdJ("ngModelChange",function(o){return i.pas=o}),l.qZA()(),l.TgZ(30,"a",14),l.NdJ("click",function(){return i.login()}),l.O4$(),l.TgZ(31,"svg",15),l._UZ(32,"path",16)(33,"path",17),l.qZA()(),l.kcU(),l._UZ(34,"br"),l.TgZ(35,"a",18),l.NdJ("click",function(){return i.gotoSingIn()}),l._uU(36,"you dont have account?"),l.qZA(),l._UZ(37,"br")(38,"br")(39,"br"),l.TgZ(40,"a",18),l.NdJ("click",function(){return i.gotoPasswordReset()}),l._uU(41,"Forgot your password?"),l.qZA()()()(),l._UZ(42,"div",6),l.qZA()()()),2&r&&(l.xp6(25),l.Q6J("ngModel",i.email),l.xp6(4),l.Q6J("ngModel",i.pas))},dependencies:[Ss,ra,$a]})}return n})();const AS={_origin:"https://api.emailjs.com"};class kK{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const OK_send=(n,e,t,r)=>{const i=r||AS._userID;return((n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(i,n,e),((n,e,t={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const d=new kK(o);200===d.status||"OK"===d.text?r(d):i(d)}),s.addEventListener("error",({target:o})=>{i(new kK(o))}),s.open("POST",AS._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},LK="firebasestorage.googleapis.com",FK="storageBucket";class Ur extends z.ZR{constructor(e,t,r=0){super(Y6(e),`Firebase Storage: ${t} (${Y6(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Y6(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Rr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Rr||{});function Y6(n){return"storage/"+n}function Q6(){return new Ur(Rr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function VK(){return new Ur(Rr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UK(){return new Ur(Rr.CANCELED,"User canceled the upload/download.")}function BK(){return new Ur(Rr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BE(n){return new Ur(Rr.INVALID_ARGUMENT,n)}function jK(){return new Ur(Rr.APP_DELETED,"The Firebase app was deleted.")}function $K(n){return new Ur(Rr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bS(n,e){return new Ur(Rr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function SS(n){throw new Ur(Rr.INTERNAL_ERROR,"Internal error: "+n)}class io{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=io.makeFromUrl(e,t)}catch{return new io(e,"")}if(""===r.path)return r;throw function gde(n){return new Ur(Rr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function g(Le){Le.path_=decodeURIComponent(Le.path)}const E=t.replace(/[.]/g,"\\."),ye=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Le){"/"===Le.path.charAt(Le.path.length-1)&&(Le.path_=Le.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp(`^https?://${t===LK?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let Le=0;Le<ye.length;Le++){const nt=ye[Le],at=nt.regex.exec(e);if(at){let Qn=at[nt.indices.path];Qn||(Qn=""),r=new io(at[nt.indices.bucket],Qn),nt.postModify(r);break}}if(null==r)throw function pde(n){return new Ur(Rr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Ide{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Kk(n){return"string"==typeof n||n instanceof String}function GK(n){return J6()&&n instanceof Blob}function J6(){return typeof Blob<"u"&&!(0,z.UG)()}function X6(n,e,t,r){if(r<e)throw BE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw BE(`Invalid value for '${n}'. Expected ${t} or less.`)}function gh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function HK(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var jE=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(jE||{});function qK(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class bde{constructor(e,t,r,i,s,o,d,f,g,y,E,b=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=d,this.errorCallback_=f,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=E,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,V)=>{this.resolve_=R,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function Tde(n){return void 0!==n}(f)?s():s(f)}catch(f){o(f)}else if(null!==d){const f=Q6();f.serverResponse=d.getErrorText(),o(this.errorCallback_?this.errorCallback_(d,f):f)}else o(i.canceled?this.appDelete_?jK():UK():VK())};this.canceled_?t(0,new Yk(!1,null,!0)):this.backoffId_=function Ede(n,e,t){let r=1,i=null,s=null,o=!1,d=0;function f(){return 2===d}let g=!1;function y(...Z){g||(g=!0,e.apply(null,Z))}function E(Z){i=setTimeout(()=>{i=null,n(R,f())},Z)}function b(){s&&clearTimeout(s)}function R(Z,...fe){if(g)return void b();if(Z)return b(),void y.call(null,Z,...fe);if(f()||o)return b(),void y.call(null,Z,...fe);let ye;r<64&&(r*=2),1===d?(d=2,ye=0):ye=1e3*(r+Math.random()),E(ye)}let V=!1;function q(Z){V||(V=!0,b(),!g&&(null!==i?(Z||(d=2),clearTimeout(i),E(0)):Z||(d=1)))}return E(0),s=setTimeout(()=>{o=!0,q(!0)},t),q}((r,i)=>{if(i)return void r(!1,new Yk(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const d=s.getErrorCode()===jE.NO_ERROR,f=s.getStatus();if(!d||qK(f,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===jE.ABORT;return void r(!1,new Yk(!1,null,y))}const g=-1!==this.successCodes_.indexOf(f);r(!0,new Yk(g,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wde(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Yk{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kde(...n){const e=function Nde(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(J6())return new Blob(n);throw new Ur(Rr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ba={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class e5{constructor(e,t){this.data=e,this.contentType=t||null}}function t5(n,e){switch(n){case ba.RAW:return new e5(zK(e));case ba.BASE64:case ba.BASE64URL:return new e5(WK(n,e));case ba.DATA_URL:return new e5(function Fde(n){const e=new ZK(n);return e.base64?WK(ba.BASE64,e.rest):function Lde(n){let e;try{e=decodeURIComponent(n)}catch{throw bS(ba.DATA_URL,"Malformed data URL.")}return zK(e)}(e.rest)}(e),function Vde(n){return new ZK(n).contentType}(e))}throw Q6()}function zK(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function WK(n,e){switch(n){case ba.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw bS(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ba.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw bS(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Ode(n){if(typeof atob>"u")throw function vde(n){return new Ur(Rr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:bS(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ZK{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bS(ba.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ude(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class dl{constructor(e,t){let r=0,i="";GK(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(GK(this.data_)){const i=function Mde(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new dl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new dl(r,!0)}}static getBlob(...e){if(J6()){const t=e.map(r=>r instanceof dl?r.data_:r);return new dl(kde.apply(null,t))}{const t=e.map(o=>Kk(o)?t5(ba.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let d=0;d<o.length;d++)i[s++]=o[d]}),new dl(i,!0)}}uploadData(){return this.data_}}function n5(n){let e;try{e=JSON.parse(n)}catch{return null}return function Ade(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function KK(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function $de(n,e){return e}class Eo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||$de}}let Qk=null;function DS(){if(Qk)return Qk;const n=[];n.push(new Eo("bucket")),n.push(new Eo("generation")),n.push(new Eo("metageneration")),n.push(new Eo("name","fullPath",!0));const t=new Eo("name");t.xform=function e(s,o){return function Gde(n){return!Kk(n)||n.length<2?n:KK(n)}(o)},n.push(t);const i=new Eo("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Eo("timeCreated")),n.push(new Eo("updated")),n.push(new Eo("md5Hash",null,!0)),n.push(new Eo("cacheControl",null,!0)),n.push(new Eo("contentDisposition",null,!0)),n.push(new Eo("contentEncoding",null,!0)),n.push(new Eo("contentLanguage",null,!0)),n.push(new Eo("contentType",null,!0)),n.push(new Eo("metadata","customMetadata",!0)),Qk=n,Qk}function YK(n,e,t){const r=n5(e);return null===r?null:function qde(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Hde(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new io(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function r5(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const QK="prefixes",JK="items";class hl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fl(n){if(!n)throw Q6()}function Jk(n,e){return function t(r,i){const s=YK(n,i,e);return fl(null!==s),s}}function $E(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function hde(){return new Ur(Rr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function dde(){return new Ur(Rr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function lde(n){return new Ur(Rr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function fde(n){return new Ur(Rr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function RS(n){const e=$E(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function cde(n){return new Ur(Rr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function XK(n,e,t){const i=gh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,d=new hl(i,"GET",Jk(n,t),o);return d.errorHandler=RS(e),d}function Qde(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=gh(e.bucketOnlyServerUrl(),n.host,n._protocol),g=n.maxOperationRetryTime,y=new hl(d,"GET",function Kde(n,e){return function t(r,i){const s=function Zde(n,e,t){const r=n5(t);return null===r?null:function Wde(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[QK])for(const i of t[QK]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new io(e,s));r.prefixes.push(o)}if(t[JK])for(const i of t[JK]){const s=n._makeStorageReference(new io(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return fl(null!==s),s}}(n,e.bucket),g);return y.urlParams=s,y.errorHandler=$E(e),y}function tY(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function the(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function nY(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let ye="";for(let Le=0;Le<2;Le++)ye+=Math.random().toString().slice(2);return ye}();o["Content-Type"]="multipart/related; boundary="+f;const g=tY(e,r,i),y=r5(g,t),R=dl.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+f+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===R)throw BK();const V={name:g.fullPath},q=gh(s,n.host,n._protocol),fe=n.maxUploadRetryTime,Se=new hl(q,"POST",Jk(n,t),fe);return Se.urlParams=V,Se.headers=o,Se.body=R.uploadData(),Se.errorHandler=$E(e),Se}class Xk{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function i5(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{fl(!1)}return fl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const she={STATE_CHANGED:"state_changed"},wo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function s5(n){switch(n){case"running":case"pausing":case"canceling":return wo.RUNNING;case"paused":return wo.PAUSED;case"success":return wo.SUCCESS;case"canceled":return wo.CANCELED;default:return wo.ERROR}}class ohe{constructor(e,t,r){if(function Cde(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function GE(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let iY=null;class ahe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jE.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jE.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jE.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw SS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw SS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw SS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw SS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw SS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class uhe extends ahe{initXhr(){this.xhr_.responseType="text"}}function Zu(){return iY?iY():new uhe}class sY{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=DS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Rr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qK(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=VK()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Rr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function nhe(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=tY(e,r,i),d={name:o.fullPath},f=gh(s,n.host,n._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},E=r5(o,t),V=new hl(f,"POST",function R(q){let Z;i5(q);try{Z=q.getResponseHeader("X-Goog-Upload-URL")}catch{fl(!1)}return fl(Kk(Z)),Z},n.maxUploadRetryTime);return V.urlParams=d,V.headers=y,V.body=E,V.errorHandler=$E(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function rhe(n,e,t,r){const f=new hl(t,"POST",function s(g){const y=i5(g,["active","final"]);let E=null;try{E=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{fl(!1)}E||fl(!1);const b=Number(E);return fl(!isNaN(b)),new Xk(b,r.size(),"final"===y)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=$E(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Zu,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Xk(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function ihe(n,e,t,r,i,s,o,d){const f=new Xk(0,0);if(o?(f.current=o.current,f.total=o.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function _de(){return new Ur(Rr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const g=f.total-f.current;let y=g;i>0&&(y=Math.min(y,i));const E=f.current;let R="";R=0===y?"finalize":g===y?"upload, finalize":"upload";const V={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${f.current}`},q=r.slice(E,E+y);if(null===q)throw BK();const ye=new hl(t,"POST",function Z(Le,nt){const at=i5(Le,["active","final"]),rn=f.current+y,Qn=r.size();let fu;return fu="final"===at?Jk(e,s)(Le,nt):null,new Xk(rn,Qn,"final"===at,fu)},e.maxUploadRetryTime);return ye.headers=V,ye.body=q.uploadData(),ye.progressCallback=d||null,ye.errorHandler=$E(n),ye}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(o,Zu,i,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=XK(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=nY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=UK(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=s5(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new ohe(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(s5(this._state)){case wo.SUCCESS:GE(this._resolve.bind(null,this.snapshot))();break;case wo.CANCELED:case wo.ERROR:GE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(s5(this._state)){case wo.RUNNING:case wo.PAUSED:e.next&&GE(e.next.bind(e,this.snapshot))();break;case wo.SUCCESS:e.complete&&GE(e.complete.bind(e))();break;default:e.error&&GE(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sy{constructor(e,t){this._service=e,this._location=t instanceof io?t:io.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sy(e,t)}get root(){const e=new io(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KK(this._location.path)}get storage(){return this._service}get parent(){const e=function Bde(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new io(this._location.bucket,e);return new Sy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw $K(e)}}function oY(n,e,t){n._throwIfRoot("uploadBytes");const r=nY(n.storage,n._location,DS(),new dl(e,!0),t);return n.storage.makeRequestWithTokens(r,Zu).then(i=>({metadata:i,ref:n}))}function aY(n,e,t){return o5.apply(this,arguments)}function o5(){return o5=(0,j.Z)(function*(n,e,t){const i=yield uY(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield aY(n,e,i.nextPageToken))}),o5.apply(this,arguments)}function uY(n,e){null!=e&&"number"==typeof e.maxResults&&X6("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Qde(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zu)}function Ihe(n){n._throwIfRoot("getDownloadURL");const e=function Jde(n,e,t){const i=gh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,d=new hl(i,"GET",function Yde(n,e){return function t(r,i){const s=YK(n,i,e);return fl(null!==s),function zde(n,e,t,r){const i=n5(e);if(null===i||!Kk(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(g=>{const E=n.fullPath;return gh("/b/"+o(n.bucket)+"/o/"+o(E),t,r)+HK({alt:"media",token:g})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return d.errorHandler=RS(e),d}(n.storage,n._location,DS());return n.storage.makeRequestWithTokens(e,Zu).then(t=>{if(null===t)throw function yde(){return new Ur(Rr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function cY(n,e){const t=function jde(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new io(n._location.bucket,t);return new Sy(n.storage,r)}function lY(n,e){if(n instanceof a5){const t=n;if(null==t._bucket)throw function mde(){return new Ur(Rr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FK+"' property when initializing the app?")}();const r=new Sy(t,t._bucket);return null!=e?lY(r,e):r}return void 0!==e?cY(n,e):n}function Che(n,e){if(e&&function whe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof a5)return function The(n,e){return new Sy(n,e)}(n,e);throw BE("To use ref(service, url), the first argument must be a Storage instance.")}return lY(n,e)}function dY(n,e){const t=e?.[FK];return null==t?null:io.makeFromBucketSpec(t,n)}class a5{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=LK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?io.makeFromBucketSpec(i,this._host):dY(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?io.makeFromBucketSpec(this._url,e):dY(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){X6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){X6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,j.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,j.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sy(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Ide(jK());{const o=function Pde(n,e,t,r,i,s,o=!0){const d=HK(n.urlParams),f=n.url+d,g=Object.assign({},n.headers);return function Rde(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function Sde(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function Dde(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,s),function xde(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new bde(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,j.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const hY="@firebase/storage",pY="storage";function u5(n){return function Ehe(n){n._throwIfRoot("deleteObject");const e=function ehe(n,e){const r=gh(e.fullServerUrl(),n.host,n._protocol),d=new hl(r,"DELETE",function o(f,g){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=RS(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zu)}(n=(0,z.m9)(n))}function HE(n,e){return Che(n=(0,z.m9)(n),e)}function eM(n=(0,ct.getApp)(),e){n=(0,z.m9)(n);const r=(0,ct._getProvider)(n,pY).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&gY(r,...i),r}function gY(n,e,t,r={}){!function Ahe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Ohe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new a5(t,r,i,e,ct.SDK_VERSION)}!function Lhe(){(0,ct._registerComponent)(new ai.wA(pY,Ohe,"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(hY,"0.11.2",""),(0,ct.registerVersion)(hY,"0.11.2","esm2017")}();var Fhe=P(217);class tM{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class mY{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tM(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tM(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new tM(o,this,this._ref)):{next:t.next?o=>t.next(new tM(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class _Y{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new mh(e,this._service))}get items(){return this._delegate.items.map(e=>new mh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Mhe(n,e){return cY(n,e)}(this._delegate,e);return new mh(t,this.storage)}get root(){return new mh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new mh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new mY(function Dhe(n,e,t){return function ghe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new sY(n,new dl(e),t)}(n=(0,z.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ba.RAW,r){this._throwIfRoot("putString");const i=t5(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new mY(new sY(this._delegate,new dl(i.data,!0),s),this)}listAll(){return function Nhe(n){return function _he(n){const e={prefixes:[],items:[]};return aY(n,e).then(()=>e)}(n=(0,z.m9)(n))}(this._delegate).then(e=>new _Y(e,this.storage))}list(e){return function Phe(n,e){return uY(n=(0,z.m9)(n),e)}(this._delegate,e||void 0).then(t=>new _Y(t,this.storage))}getMetadata(){return function Rhe(n){return function yhe(n){n._throwIfRoot("getMetadata");const e=XK(n.storage,n._location,DS());return n.storage.makeRequestWithTokens(e,Zu)}(n=(0,z.m9)(n))}(this._delegate)}updateMetadata(e){return function xhe(n,e){return function vhe(n,e){n._throwIfRoot("updateMetadata");const t=function Xde(n,e,t,r){const s=gh(e.fullServerUrl(),n.host,n._protocol),d=r5(t,r),g=n.maxOperationRetryTime,y=new hl(s,"PATCH",Jk(n,r),g);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=d,y.errorHandler=RS(e),y}(n.storage,n._location,e,DS());return n.storage.makeRequestWithTokens(t,Zu)}(n=(0,z.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function khe(n){return Ihe(n=(0,z.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),u5(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw $K(e)}}class yY{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(vY(e))throw BE("ref() expected a child path but got a URL, use refFromURL instead.");return new mh(HE(this._delegate,e),this)}refFromURL(e){if(!vY(e))throw BE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{io.makeFromUrl(e,this._delegate.host)}catch{throw BE("refFromUrl() expected a valid full URL but got an invalid one.")}return new mh(HE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){gY(this._delegate,e,t,r)}}function vY(n){return/^[A-Za-z]+:\/\//.test(n)}function $he(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new yY(t,r)}function IY(n){const e=function Hhe(n){return new zr.y(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function Vhe(n,e=EV){return(0,os.e)((t,r)=>{let i=null,s=null,o=null;const d=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function f(){const g=o+n,y=e.now();if(y<g)return i=this.schedule(void 0,g-y),void r.add(i);d()}t.subscribe((0,en.x)(r,g=>{s=g,o=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Rt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function nM(n){return{getDownloadURL:()=>(0,wt.of)(void 0).pipe(rq,(0,ir.w)(()=>n.getDownloadURL()),go),getMetadata:()=>(0,wt.of)(void 0).pipe(rq,(0,ir.w)(()=>n.getMetadata()),go),delete:()=>(0,yn.D)(n.delete()),child:e=>nM(n.child(e)),updateMetadata:e=>(0,yn.D)(n.updateMetadata(e)),put:(e,t)=>IY(n.put(e,t)),putString:(e,t,r)=>IY(n.putString(e,t,r)),list:e=>(0,yn.D)(n.list(e)),listAll:()=>(0,yn.D)(n.listAll())}}!function Ghe(n){const e={TaskState:wo,TaskEvent:she,StringFormat:ba,Storage:yY,Reference:mh};n.INTERNAL.registerComponent(new ai.wA("storage-compat",$he,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(sq.Z);const qhe=new l.OlP("angularfire2.storageBucket"),zhe=new l.OlP("angularfire2.storage.maxUploadRetryTime"),Whe=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Zhe=new l.OlP("angularfire2.storage.use-emulator");let Khe=(()=>{class n{constructor(t,r,i,s,o,d,f,g,y,E){const b=(0,mo.on)(t,o,r);this.storage=(0,mo.cc)(`${b.name}.storage.${i}`,"AngularFireStorage",b.name,()=>{const R=o.runOutsideAngular(()=>b.storage(i||void 0)),V=y;return V&&R.useEmulator(...V),f&&R.setMaxUploadRetryTime(f),g&&R.setMaxOperationRetryTime(g),R},[f,g])}ref(t){return nM(this.storage.ref(t))}refFromURL(t){return nM(this.storage.refFromURL(t))}upload(t,r,i){return nM(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(mo.Dh),l.LFG(mo.xv,8),l.LFG(qhe,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Np),l.LFG(zhe,8),l.LFG(Whe,8),l.LFG(Zhe,8),l.LFG(by,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class rM{}class iM{}class pl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(d=>-1===s.indexOf(d)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Yhe{encodeKey(e){return EY(e)}encodeValue(e){return EY(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Jhe=/%(\d[a-f0-9])/gi,Xhe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function EY(n){return encodeURIComponent(n).replace(Jhe,(e,t)=>Xhe[t]??e)}function sM(n){return`${n}`}class rg{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Yhe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Qhe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],f=t.get(o)||[];f.push(d),t.set(o,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(sM):[sM(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new rg({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(sM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class efe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wY(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function TY(n){return typeof Blob<"u"&&n instanceof Blob}function CY(n){return typeof FormData<"u"&&n instanceof FormData}class xS{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tfe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new pl),this.context||(this.context=new efe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+o}}else this.params=new rg,this.urlWithParams=t}serializeBody(){return null===this.body?null:wY(this.body)||TY(this.body)||CY(this.body)||function nfe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||CY(this.body)?null:TY(this.body)?this.body.type||null:wY(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,g=e.params||this.params;const y=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((E,b)=>E.set(b,e.setHeaders[b]),f)),e.setParams&&(g=Object.keys(e.setParams).reduce((E,b)=>E.set(b,e.setParams[b]),g)),new xS(t,r,s,{params:g,headers:f,context:y,reportProgress:d,responseType:i,withCredentials:o})}}var qE=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qE||{});class c5{constructor(e,t=200,r="OK"){this.headers=e.headers||new pl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class l5 extends c5{constructor(e={}){super(e),this.type=qE.ResponseHeader}clone(e={}){return new l5({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zE extends c5{constructor(e={}){super(e),this.type=qE.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new zE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class AY extends c5{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function d5(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let bY=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof xS)s=t;else{let f,g;f=i.headers instanceof pl?i.headers:new pl(i.headers),i.params&&(g=i.params instanceof rg?i.params:new rg({fromObject:i.params})),s=new xS(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:g,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=(0,wt.of)(s).pipe(Ha(f=>this.handler.handle(f)));if(t instanceof xS||"events"===i.observe)return o;const d=o.pipe(Ei(f=>f instanceof zE));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Rt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,Rt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,Rt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,Rt.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new rg).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,d5(i,r))}post(t,r,i={}){return this.request("POST",t,d5(i,r))}put(t,r,i={}){return this.request("PUT",t,d5(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(rM))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function RY(n,e){return e(n)}function ife(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const ofe=new l.OlP(""),PS=new l.OlP(""),xY=new l.OlP("");function afe(){let n=null;return(e,t)=>{null===n&&(n=((0,l.f3M)(ofe,{optional:!0})??[]).reduceRight(ife,RY));const r=(0,l.f3M)(l.HDt),i=r.add();return n(e,t).pipe(Ic(()=>r.remove(i)))}}let PY=(()=>{class n extends rM{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,l.f3M)(l.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(PS),...this.injector.get(xY,[])]));this.chain=i.reduceRight((s,o)=>function sfe(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),RY)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ic(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(iM),l.LFG(l.lqb))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const dfe=/^\)\]\}',?\n/;let kY=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new l.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,yn.D)(r.\u0275loadImpl()):(0,wt.of)(null)).pipe((0,ir.w)(()=>new zr.y(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((q,Z)=>o.setRequestHeader(q,Z.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&o.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();o.responseType="json"!==q?q:"text"}const d=t.serializeBody();let f=null;const g=()=>{if(null!==f)return f;const q=o.statusText||"OK",Z=new pl(o.getAllResponseHeaders()),fe=function hfe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return f=new l5({headers:Z,status:o.status,statusText:q,url:fe}),f},y=()=>{let{headers:q,status:Z,statusText:fe,url:Se}=g(),ye=null;204!==Z&&(ye=typeof o.response>"u"?o.responseText:o.response),0===Z&&(Z=ye?200:0);let Le=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof ye){const nt=ye;ye=ye.replace(dfe,"");try{ye=""!==ye?JSON.parse(ye):null}catch(at){ye=nt,Le&&(Le=!1,ye={error:at,text:ye})}}Le?(s.next(new zE({body:ye,headers:q,status:Z,statusText:fe,url:Se||void 0})),s.complete()):s.error(new AY({error:ye,headers:q,status:Z,statusText:fe,url:Se||void 0}))},E=q=>{const{url:Z}=g(),fe=new AY({error:q,status:o.status||0,statusText:o.statusText||"Unknown Error",url:Z||void 0});s.error(fe)};let b=!1;const R=q=>{b||(s.next(g()),b=!0);let Z={type:qE.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(Z.total=q.total),"text"===t.responseType&&o.responseText&&(Z.partialText=o.responseText),s.next(Z)},V=q=>{let Z={type:qE.UploadProgress,loaded:q.loaded};q.lengthComputable&&(Z.total=q.total),s.next(Z)};return o.addEventListener("load",y),o.addEventListener("error",E),o.addEventListener("timeout",E),o.addEventListener("abort",E),t.reportProgress&&(o.addEventListener("progress",R),null!==d&&o.upload&&o.upload.addEventListener("progress",V)),o.send(d),s.next({type:qE.Sent}),()=>{o.removeEventListener("error",E),o.removeEventListener("abort",E),o.removeEventListener("load",y),o.removeEventListener("timeout",E),t.reportProgress&&(o.removeEventListener("progress",R),null!==d&&o.upload&&o.upload.removeEventListener("progress",V)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(So))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const h5=new l.OlP("XSRF_ENABLED"),MY=new l.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),OY=new l.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class LY{}let gfe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bo(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W),l.LFG(l.Lbi),l.LFG(MY))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function mfe(n,e){const t=n.url.toLowerCase();if(!(0,l.f3M)(h5)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,l.f3M)(LY).getToken(),i=(0,l.f3M)(OY);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ig=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ig||{});function _fe(...n){const e=[bY,kY,PY,{provide:rM,useExisting:PY},{provide:iM,useExisting:kY},{provide:PS,useValue:mfe,multi:!0},{provide:h5,useValue:!0},{provide:LY,useClass:gfe}];for(const t of n)e.push(...t.\u0275providers);return(0,l.MR2)(e)}const FY=new l.OlP("LEGACY_INTERCEPTOR_FN");function yfe(){return function Dy(n,e){return{\u0275kind:n,\u0275providers:e}}(ig.LegacyInterceptors,[{provide:FY,useFactory:afe},{provide:PS,useExisting:FY,multi:!0}])}let vfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({providers:[_fe(yfe())]})}return n})(),f5=(()=>{class n{constructor(t,r,i,s){this.fir=t,this.firs=r,this.router=i,this.http=s,this.isLoading=!1}addBookFile(t,r,i){if(null!=t){const s={contentType:"image/jpeg"};(function bhe(n,e,t){return oY(n=(0,z.m9)(n),e,t)})(HE(eM(),"Books/"+i.name+"/"+r),t,s).then(d=>{alert("OK")})}else alert("No")}addBooksStoreg(t){var r=this;return(0,j.Z)(function*(){const i=t.targer.files[0];if(i){console.log(i);const s="Books/"+i.name;yield r.firs.upload(s,i)}})()}ff(t){return(0,j.Z)(function*(){""!=t?null!=t&&function She(n,e,t,r){return function mhe(n,e,t=ba.RAW,r){n._throwIfRoot("uploadString");const i=t5(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),oY(n,i.data,s)}(n=(0,z.m9)(n),e,t,r)}(HE(eM(),"Books/"),t).then(o=>{alert("OK")}):alert("no")})()}addBook(t,r,i){var s=this;return(0,j.Z)(function*(){if(r.target.files[0]){const o=r.target.files[0],d="books/"+o.name,g=yield(yield s.firs.upload(d,o)).ref.getDownloadURL();if(t.target.files[0]){const y=t.target.files[0],E="books/"+y.name,R=yield(yield s.firs.upload(E,y)).ref.getDownloadURL(),V=Xd(wa(),"Books");i.url=R,i.pdf=g,i.pathimg=E,i.pathpdf=d,qH(V,i).then(()=>{alert("The book has been added successfully"),window.location.reload()})}else console.log("\u0644\u0645 \u064a\u062a\u0645 \u062a\u0639\u064a\u064a\u0646 \u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0639\u0644\u0649 \u0642\u064a\u0645\u0629 \u0628\u0639\u062f.")}else console.log("\u0644\u0645 \u064a\u062a\u0645 \u062a\u0639\u064a\u064a\u0646 \u0645\u0644\u0641 PDF \u0639\u0644\u0649 \u0642\u064a\u0645\u0629 \u0628\u0639\u062f.")})()}getAllBooks(t,r){return(0,j.Z)(function*(){const i=[],s=Xd(wa(),"Books");if(""==t)if(""==r){const o=eh(s,z_("name","!=",""));(yield th(o)).forEach(f=>{i.push(f.data())})}else{prompt(r);const d=eh(s,z_("name","<=",r));(yield th(d)).forEach(g=>{i.push(g.data())})}else{const o=eh(s,z_("category","==",t));(yield th(o)).forEach(f=>{i.push(f.data())})}return console.log(i),i})()}deletBook(t,r,i){return(0,j.Z)(function*(){const o=eh(Xd(wa(),"Books"),z_("url","==",t));(yield th(o)).forEach(f=>{(function Jee(n){return rb(vn(n.firestore,or),[new gp(n._key,zn.none())])})(JA(wa(),"Books",f.id)).then(()=>{const g=HE(eM(),r),y=HE(eM(),i);u5(g).then(()=>{u5(y).then(()=>(window.location.reload(),!1))})})})})()}trending(t){return(0,j.Z)(function*(){const i=eh(Xd(wa(),"Books"),z_("pdf","==",t));(yield th(i)).forEach(o=>{_V(JA(wa(),"Books",o.id),{price:o.get("price")+1}).then(()=>{})})})()}FamousBook(){return(0,j.Z)(function*(){const t=[],i=eh(Xd(wa(),"Books"),VH("price","desc")),s=yield th(i);for(let o=0;o<6;o++)t.push(s.docs[o].data());return t})()}downloadPDF(t,r){this.http.get(t,{responseType:"blob"}).subscribe(i=>{(0,Fhe.saveAs)(i,r+"-Kotby.pdf")})}updateBooks(t,r,i,s,o){return(0,j.Z)(function*(){const f=eh(Xd(wa(),"Books"),z_("url","==",t));(yield th(f)).forEach(y=>{_V(JA(wa(),"Books",y.id),{name:r,category:i,description:s,writer:o}).then(()=>{alert("Book updated successfully"),window.location.reload()})})})()}getAllBooksBy(){return(0,j.Z)(function*(){const t=[],i=eh(Xd(wa(),"Books"),VH("price","desc"));return(yield th(i)).forEach(o=>{t.push(o.data())}),t})()}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(K6),l.LFG(Khe),l.LFG(sr),l.LFG(bY))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Afe{constructor(e,t){this._document=t;const r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=e,r.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(r)}copy(){const e=this._textarea;let t=!1;try{if(e){const r=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),r&&r.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let bfe=(()=>{class n{constructor(t){this._document=t}copy(t){const r=this.beginCopy(t),i=r.copy();return r.destroy(),i}beginCopy(t){return new Afe(t,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(l.LFG(W))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p5=P(2839);const Sfe=["qrcElement"];let Dfe=(()=>{class n{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new l.vpe,this.context=null}ngOnChanges(){var t=this;return(0,j.Z)(function*(){yield t.createQRCode()})()}isValidQrCodeText(t){return!1===this.allowEmptyString?!(typeof t>"u"||""===t||"null"===t||null===t):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{(0,p5.hz)(this.qrdata,t,(s,o)=>{s?i(s):r(o)})})}toCanvas(t,r){return new Promise((i,s)=>{(0,p5.rT)(t,this.qrdata,r,o=>{o?s(o):i("success")})})}toSVG(t){return new Promise((r,i)=>{(0,p5.toString)(this.qrdata,t,(s,o)=>{s?i(s):r(o)})})}renderElement(t){for(const r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){var t=this;return(0,j.Z)(function*(){t.version&&t.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),t.version=40):t.version&&t.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),t.version=1):void 0!==t.version&&isNaN(t.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),t.version=void 0);try{if(!t.isValidQrCodeText(t.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");t.isValidQrCodeText(t.qrdata)&&""===t.qrdata&&(t.qrdata=" ");const r={color:{dark:t.colorDark,light:t.colorLight},errorCorrectionLevel:t.errorCorrectionLevel,margin:t.margin,scale:t.scale,version:t.version,width:t.width},i=t.imageSrc,s=t.imageHeight||40,o=t.imageWidth||40;switch(t.elementType){case"canvas":{const d=t.renderer.createElement("canvas");t.context=d.getContext("2d"),t.toCanvas(d,r).then(()=>{if(t.ariaLabel&&t.renderer.setAttribute(d,"aria-label",`${t.ariaLabel}`),t.title&&t.renderer.setAttribute(d,"title",`${t.title}`),i&&t.context){t.centerImage=new Image(o,s),i!==t.centerImage.src&&(t.centerImage.src=i),s!==t.centerImage.height&&(t.centerImage.height=s),o!==t.centerImage.width&&(t.centerImage.width=o);const f=t.centerImage;f&&(f.onload=()=>{t.context?.drawImage(f,d.width/2-o/2,d.height/2-s/2,o,s)})}t.renderElement(d),t.emitQRCodeURL(d)}).catch(f=>{console.error("[angularx-qrcode] canvas error:",f)});break}case"svg":{const d=t.renderer.createElement("div");t.toSVG(r).then(f=>{t.renderer.setProperty(d,"innerHTML",f);const g=d.firstChild;t.renderer.setAttribute(g,"height",`${t.width}`),t.renderer.setAttribute(g,"width",`${t.width}`),t.renderElement(g),t.emitQRCodeURL(g)}).catch(f=>{console.error("[angularx-qrcode] svg error:",f)});break}default:{const d=t.renderer.createElement("img");t.toDataURL(r).then(f=>{t.alt&&d.setAttribute("alt",t.alt),t.ariaLabel&&d.setAttribute("aria-label",t.ariaLabel),d.setAttribute("src",f),t.title&&d.setAttribute("title",t.title),t.renderElement(d),t.emitQRCodeURL(d)}).catch(f=>{console.error("[angularx-qrcode] img/url error:",f)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})()}emitQRCodeURL(t){const r=t.constructor.name;if(r===SVGSVGElement.name){const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),d=URL.createObjectURL(o),f=this.sanitizer.bypassSecurityTrustUrl(d);return void this.qrCodeURL.emit(f)}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src),fetch(i).then(s=>s.blob()).then(s=>URL.createObjectURL(s)).then(s=>this.sanitizer.bypassSecurityTrustUrl(s)).then(s=>{this.qrCodeURL.emit(s)}).catch(s=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+s)})}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(l.Qsj),l.Y36(qs))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["qrcode"]],viewQuery:function(r,i){if(1&r&&l.Gf(Sfe,7),2&r){let s;l.iGM(s=l.CRH())&&(i.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[l.TTD],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){1&r&&l._UZ(0,"div",null,0),2&r&&l.Tol(i.cssClass)},encapsulation:2,changeDetection:0})}return n})(),Rfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();function xfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"li")(2,"a",12),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.ClerSession())}),l.O4$(),l.TgZ(3,"svg",30),l._UZ(4,"path",31)(5,"path",32),l.qZA()()()()}}function Pfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li")(1,"a",12),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.GoLogIn())}),l.O4$(),l.TgZ(2,"svg",33),l._UZ(3,"path",34)(4,"path",35),l.qZA()()()}}function Nfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",7)(1,"a",12),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.GotoAdmen())}),l.O4$(),l.TgZ(2,"svg",36),l._UZ(3,"path",37)(4,"path",38),l.qZA()()()}}function kfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li")(1,"a",19),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.setThecategory(s.category))}),l._uU(2),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.category)}}function Mfe(n,e){if(1&n){const t=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",82),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setDlet(i.url,i.pathimg,i.pathpdf,i.name))}),l.O4$(),l.TgZ(1,"svg",83),l._UZ(2,"path",84),l.qZA()()}}function Ofe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",85)(1,"button",86),l.O4$(),l.TgZ(2,"svg",87),l._UZ(3,"path",88),l.qZA()(),l.kcU(),l.TgZ(4,"ul",18)(5,"li")(6,"a",89),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trackByPerson(i.name,i.url,i.pdf,i.category,i.description,i.writer))}),l._uU(7," More about "),l.O4$(),l.TgZ(8,"svg",90),l._UZ(9,"path",88),l.qZA()()(),l.kcU(),l.TgZ(10,"li")(11,"a",91),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setTheSendEmail(i.pdf))}),l._uU(12," send email "),l.O4$(),l.TgZ(13,"svg",92),l._UZ(14,"path",93)(15,"path",94),l.qZA()()(),l.kcU(),l.TgZ(16,"li")(17,"a",95),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.sendMessageWhatsapp(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))}),l._uU(18," send whatsapp "),l.O4$(),l.TgZ(19,"svg",96),l._UZ(20,"path",97),l.qZA()()(),l.kcU(),l.TgZ(21,"li")(22,"a",98),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setQRCode(i.pdf))}),l._uU(23," QR "),l.O4$(),l.TgZ(24,"svg",99),l._UZ(25,"path",100)(26,"path",101)(27,"path",102)(28,"path",103)(29,"path",104),l.qZA()()(),l.kcU(),l.TgZ(30,"li")(31,"a",105),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.Copy(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))}),l._uU(32," Copy "),l.O4$(),l.TgZ(33,"svg",106),l._UZ(34,"path",107),l.qZA()()(),l.kcU(),l.TgZ(35,"li")(36,"a",108),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.downloadPDF(i.pdf,i.name))}),l._uU(37," Download "),l.O4$(),l.TgZ(38,"svg",109),l._UZ(39,"path",110)(40,"path",111),l.qZA()()()()()}}function Lfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",39)(1,"div",40),l._UZ(2,"img",41),l.TgZ(3,"div",42)(4,"h6",43),l._uU(5),l.qZA(),l._UZ(6,"br"),l.TgZ(7,"a",44),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.trending(s.pdf))}),l.O4$(),l.TgZ(8,"svg",45),l._UZ(9,"path",46),l.qZA()(),l._uU(10,"\xa0 "),l.YNc(11,Mfe,3,0,"button",47),l._uU(12,"\xa0 "),l.kcU(),l.TgZ(13,"div",48)(14,"div",49)(15,"div",50)(16,"div",51)(17,"p",52),l._uU(18,"Delet Book"),l.qZA(),l.TgZ(19,"p"),l._UZ(20,"button",53),l.qZA()(),l.TgZ(21,"div",54)(22,"p",55),l._uU(23),l.qZA()(),l.TgZ(24,"div",56)(25,"button",57),l._uU(26,"Cancel"),l.qZA(),l.TgZ(27,"a",58),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.deletBook(i.deleturl,i.deletimg,i.deletpdf))}),l._uU(28,"Confirm"),l.qZA()()()()(),l.YNc(29,Ofe,41,0,"div",59),l.TgZ(30,"div",60)(31,"div",61)(32,"div",50)(33,"div",51)(34,"p",52),l._uU(35),l.qZA(),l.TgZ(36,"p"),l._UZ(37,"button",53),l.qZA()(),l.TgZ(38,"div",54)(39,"div",62),l._UZ(40,"img",63),l.qZA(),l.TgZ(41,"p",64),l._uU(42,":\u0627\u0644\u0643\u0627\u062a\u0628"),l.qZA(),l.TgZ(43,"p",65),l._uU(44),l.qZA(),l._UZ(45,"br")(46,"br"),l.TgZ(47,"p",64),l._uU(48,":\u0627\u0644\u062a\u0635\u0646\u064a\u0641"),l.qZA(),l.TgZ(49,"p",65),l._uU(50),l.qZA(),l._UZ(51,"br")(52,"br"),l.TgZ(53,"p",64),l._uU(54,":\u0627\u0644\u0648\u0635\u0641"),l.qZA(),l.TgZ(55,"p",65),l._uU(56),l.qZA()(),l.TgZ(57,"div",56)(58,"button",57),l._uU(59,"Close"),l.qZA(),l.TgZ(60,"a",66),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.trending(i.thepdf))}),l._uU(61,"Save"),l.qZA()()()()(),l.TgZ(62,"div",67)(63,"div",49)(64,"div",50)(65,"div",51)(66,"h1",68),l._uU(67,"Send Book"),l.qZA(),l._UZ(68,"button",53),l.qZA(),l.TgZ(69,"div",54)(70,"div",69)(71,"label",70),l._uU(72,"From"),l.qZA(),l.TgZ(73,"input",71),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.from_name=i)}),l.qZA()(),l.TgZ(74,"div",69)(75,"label",70),l._uU(76,"from email:"),l.qZA(),l.TgZ(77,"input",72),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.from_email=i)}),l.qZA()(),l.TgZ(78,"div",69)(79,"label",70),l._uU(80,"to"),l.qZA(),l.TgZ(81,"input",71),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.to_name=i)}),l.qZA()(),l.TgZ(82,"div",69)(83,"label",70),l._uU(84,"Email address"),l.qZA(),l.TgZ(85,"input",73),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.to_email=i)}),l.qZA()(),l.TgZ(86,"div",69)(87,"label",74),l._uU(88,"Masseg"),l.qZA(),l.TgZ(89,"textarea",75),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.message=i)}),l.qZA()()(),l.TgZ(90,"div",56)(91,"button",57),l._uU(92,"Close"),l.qZA(),l.TgZ(93,"button",76),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.sendBook())})("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.trending(i.Book))}),l.O4$(),l.TgZ(94,"svg",77),l._UZ(95,"path",78),l.qZA()()()()()(),l.kcU(),l.TgZ(96,"div",79)(97,"div",49)(98,"div",50)(99,"div",51)(100,"h1",80),l._uU(101,"QR"),l.qZA(),l._UZ(102,"button",53),l.qZA(),l.TgZ(103,"div",54),l._UZ(104,"qrcode",81),l.qZA(),l.TgZ(105,"div",56)(106,"button",57),l._uU(107,"Close"),l.qZA()()()()()()(),l._UZ(108,"br"),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(2),l.s9C("src",t.url,l.LSH),l.xp6(3),l.Oqu(t.name),l.xp6(2),l.s9C("href",t.pdf,l.LSH),l.xp6(4),l.Q6J("ngIf",r.typU()),l.xp6(12),l.hij("Are you sure that deleting a book (",r.deletname,") will result in it being permanently deleted from the database?"),l.xp6(6),l.Q6J("ngIf",r.LogInLogOut()),l.xp6(6),l.Oqu(r.thename),l.xp6(5),l.s9C("src",r.theurl,l.LSH),l.xp6(4),l.Oqu(r.thewriter),l.xp6(6),l.Oqu(r.thecategory),l.xp6(6),l.Oqu(r.thedescription),l.xp6(4),l.s9C("href",r.thepdf,l.LSH),l.xp6(13),l.Q6J("ngModel",r.from_name),l.xp6(4),l.Q6J("ngModel",r.from_email),l.xp6(4),l.Q6J("ngModel",r.to_name),l.xp6(4),l.Q6J("ngModel",r.to_email),l.xp6(4),l.Q6J("ngModel",r.message),l.xp6(15),l.Q6J("qrdata",r.qr)}}function Ffe(n,e){if(1&n){const t=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",82),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setDlet(i.url,i.pathimg,i.pathpdf,i.name))}),l.O4$(),l.TgZ(1,"svg",83),l._UZ(2,"path",84),l.qZA()()}}function Vfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",85)(1,"button",86),l.O4$(),l.TgZ(2,"svg",87),l._UZ(3,"path",88),l.qZA()(),l.kcU(),l.TgZ(4,"ul",18)(5,"li")(6,"a",89),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trackByPerson(i.name,i.url,i.pdf,i.category,i.description,i.writer))}),l._uU(7," More about "),l.O4$(),l.TgZ(8,"svg",90),l._UZ(9,"path",88),l.qZA()()(),l.kcU(),l.TgZ(10,"li")(11,"a",91),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setTheSendEmail(i.pdf))}),l._uU(12," send email "),l.O4$(),l.TgZ(13,"svg",92),l._UZ(14,"path",93)(15,"path",94),l.qZA()()(),l.kcU(),l.TgZ(16,"li")(17,"a",95),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.sendMessageWhatsapp(i.pdf))}),l._uU(18," send whatsapp "),l.O4$(),l.TgZ(19,"svg",96),l._UZ(20,"path",97),l.qZA()()(),l.kcU(),l.TgZ(21,"li")(22,"a",98),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.setQRCode(i.pdf))}),l._uU(23," QR "),l.O4$(),l.TgZ(24,"svg",99),l._UZ(25,"path",100)(26,"path",101)(27,"path",102)(28,"path",103)(29,"path",104),l.qZA()()(),l.kcU(),l.TgZ(30,"li")(31,"a",105),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.Copy(i.pdf))}),l._uU(32," Copy "),l.O4$(),l.TgZ(33,"svg",106),l._UZ(34,"path",107),l.qZA()()(),l.kcU(),l.TgZ(35,"li")(36,"a",108),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.trending(i.pdf))})("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw();return l.KtG(s.downloadPDF(i.pdf,i.name))}),l._uU(37," Download "),l.O4$(),l.TgZ(38,"svg",109),l._UZ(39,"path",110)(40,"path",111),l.qZA()()()()()}}function Ufe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",112)(1,"div",40),l._UZ(2,"img",41),l.TgZ(3,"div",42)(4,"h6",43),l._uU(5),l.qZA(),l._UZ(6,"br"),l.TgZ(7,"a",113),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.trending(s.pdf))}),l.O4$(),l.TgZ(8,"svg",45),l._UZ(9,"path",46),l.qZA()(),l._uU(10,"\xa0 "),l.YNc(11,Ffe,3,0,"button",47),l._uU(12,"\xa0 "),l.kcU(),l.TgZ(13,"div",48)(14,"div",49)(15,"div",50)(16,"div",51)(17,"p",52),l._uU(18,"Delet Book"),l.qZA(),l.TgZ(19,"p"),l._UZ(20,"button",53),l.qZA()(),l.TgZ(21,"div",54)(22,"p",55),l._uU(23),l.qZA()(),l.TgZ(24,"div",56)(25,"button",57),l._uU(26,"Cancel"),l.qZA(),l.TgZ(27,"a",58),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.deletBook(i.deleturl,i.deletimg,i.deletpdf))}),l._uU(28,"Confirm"),l.qZA()()()()(),l.YNc(29,Vfe,41,0,"div",59),l.TgZ(30,"div",114)(31,"div",61)(32,"div",50)(33,"div",51)(34,"p",115),l._uU(35),l.qZA(),l._UZ(36,"button",53),l.qZA(),l.TgZ(37,"div",54)(38,"div",62),l._UZ(39,"img",63),l.qZA(),l.TgZ(40,"p",64),l._uU(41,":\u0627\u0644\u0643\u0627\u062a\u0628"),l.qZA(),l.TgZ(42,"p",65),l._uU(43),l.qZA(),l._UZ(44,"br")(45,"br"),l.TgZ(46,"p",64),l._uU(47,":\u0627\u0644\u062a\u0635\u0646\u064a\u0641"),l.qZA(),l.TgZ(48,"p",65),l._uU(49),l.qZA(),l._UZ(50,"br")(51,"br"),l.TgZ(52,"p",64),l._uU(53,":\u0627\u0644\u0648\u0635\u0641"),l.qZA(),l.TgZ(54,"p",65),l._uU(55),l.qZA()(),l.TgZ(56,"div",56)(57,"button",57),l._uU(58,"Close"),l.qZA(),l.TgZ(59,"a",66),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.trending(i.thepdf))}),l._uU(60,"Save"),l.qZA()()()()(),l.TgZ(61,"div",67)(62,"div",49)(63,"div",50)(64,"div",51)(65,"h1",116),l._uU(66,"Send Book"),l.qZA(),l._UZ(67,"button",53),l.qZA(),l.TgZ(68,"div",54)(69,"div",69)(70,"label",70),l._uU(71,"From"),l.qZA(),l.TgZ(72,"input",71),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.from_name=i)}),l.qZA()(),l.TgZ(73,"div",69)(74,"label",70),l._uU(75,"from email:"),l.qZA(),l.TgZ(76,"input",72),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.from_email=i)}),l.qZA()(),l.TgZ(77,"div",69)(78,"label",70),l._uU(79,"to"),l.qZA(),l.TgZ(80,"input",71),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.to_name=i)}),l.qZA()(),l.TgZ(81,"div",69)(82,"label",70),l._uU(83,"Email address"),l.qZA(),l.TgZ(84,"input",117),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.to_email=i)}),l.qZA()(),l.TgZ(85,"div",69)(86,"label",74),l._uU(87,"Masseg"),l.qZA(),l.TgZ(88,"textarea",118),l.NdJ("ngModelChange",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.message=i)}),l.qZA()()(),l.TgZ(89,"div",56)(90,"button",57),l._uU(91,"Close"),l.qZA(),l.TgZ(92,"button",76),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.trending(i.Book))})("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.sendBook())}),l.O4$(),l.TgZ(93,"svg",77),l._UZ(94,"path",78),l.qZA()()()()()(),l.kcU(),l.TgZ(95,"div",79)(96,"div",49)(97,"div",50)(98,"div",51)(99,"h1",119),l._uU(100,"QR"),l.qZA(),l._UZ(101,"button",53),l.qZA(),l.TgZ(102,"div",54),l._UZ(103,"qrcode",81),l.qZA(),l.TgZ(104,"div",56)(105,"button",57),l._uU(106,"Close"),l.qZA()()()()()()(),l._UZ(107,"br"),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(2),l.s9C("src",t.url,l.LSH),l.xp6(3),l.Oqu(t.name),l.xp6(2),l.s9C("href",t.pdf,l.LSH),l.xp6(4),l.Q6J("ngIf",r.typU()),l.xp6(12),l.hij("Are you sure that deleting a book (",r.deletname,") will result in it being permanently deleted from the database?"),l.xp6(6),l.Q6J("ngIf",r.LogInLogOut()),l.xp6(6),l.Oqu(r.thename),l.xp6(4),l.s9C("src",r.theurl,l.LSH),l.xp6(4),l.Oqu(r.thewriter),l.xp6(6),l.Oqu(r.thecategory),l.xp6(6),l.Oqu(r.thedescription),l.xp6(4),l.s9C("href",r.thepdf,l.LSH),l.xp6(13),l.Q6J("ngModel",r.from_name),l.xp6(4),l.Q6J("ngModel",r.from_email),l.xp6(4),l.Q6J("ngModel",r.to_name),l.xp6(4),l.Q6J("ngModel",r.to_email),l.xp6(4),l.Q6J("ngModel",r.message),l.xp6(15),l.Q6J("qrdata",r.qr)}}let VY=(()=>{class n{constructor(t,r,i,s){this.router=t,this.CRUD=r,this.fd=i,this.clipboard=s,this.userID=sessionStorage.getItem("UID"),this.username=sessionStorage.getItem("UN"),this.userInORout=this.LogInLogOut(),this.thcategory=[{category:"\u0627\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0628\u0634\u0631\u064a\u0629 \u0648\u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u0630\u0627\u062a"},{category:"\u0627\u0644\u062d\u0631\u0628 \u0648\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0639\u0633\u0643\u0631\u064a\u0629"},{category:"\u0627\u0644\u062d\u0628 \u0648\u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u064a\u0629"},{category:"\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0627\u0633\u0644\u0627\u0645\u064a\u0629"},{category:"\u0627\u0644\u062a\u0633\u0648\u064a\u0642 \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"},{category:"\u0645\u0630\u0643\u0631\u0627\u062a \u0648\u0633\u064a\u0631 \u0630\u0627\u062a\u064a\u0629"},{category:"\u0631\u0648\u0627\u064a\u0627\u062a \u0631\u0639\u0628"}],this.category="",this.search1="",this.namecategory="",this.thename="",this.theurl="",this.thepdf="",this.thecategory="",this.thedescription="",this.thewriter="",this.deleturl="",this.deletimg="",this.deletpdf="",this.deletname="",this.to_name="",this.from_name="",this.from_email="",this.message="",this.Book="",this.to_email="",this.qr="",this.getAllBooks(),this.FamousBooks1(),this.setTheName()}LogInLogOut(){return null!=sessionStorage.getItem("UN")}ClerSession(){sessionStorage.clear(),window.location.reload()}GoLogIn(){this.router.navigate(["/Login"])}GotoAdmen(){this.router.navigate(["/admen"])}typU(){return"X"==sessionStorage.getItem("UT")}updateC(){this.router.navigate(["/UpdateU"])}setTheName(){return""==this.category?(this.namecategory="\u0643\u0644 \u0627\u0644\u0643\u062a\u0628",this.namecategory):(this.namecategory=this.category,this.namecategory)}setThecategory(t){this.category=t,this.getAllBooks()}getAllBooks(){this.allBookdata=(0,yn.D)(this.CRUD.getAllBooks(this.category,this.search1)),console.log(this.allBookdata)}FamousBooks1(){this.FamousBooks=(0,yn.D)(this.CRUD.FamousBook())}trending(t){this.CRUD.trending(t)}trackByPerson(t,r,i,s,o,d){this.thename=t,this.thepdf=i,this.thecategory=s,this.thedescription=o,this.thewriter=d,this.theurl=r}setDlet(t,r,i,s){this.deleturl=t,this.deletimg=r,this.deletpdf=i,this.deletname=s}deletBook(t,r,i){this.CRUD.deletBook(t,r,i)}setTheSendEmail(t){this.Book=t}sendBook(){var t=this;return(0,j.Z)(function*(){""!=t.to_email&&""!=t.to_name&&""!=t.from_name&&""!=t.from_email&&""!=t.message?(((n,e="https://api.emailjs.com")=>{AS._userID=n,AS._origin=e})("pn2zvPl5Nbo53ALQn"),yield OK_send("service_8wob4wj","template_hzgpx5d",{to_name:t.to_name,from_name:t.from_name,from_email:t.from_email,message:t.message,Book:t.Book,to_email:t.to_email}),alert("The mail was sent successfully\u{1f44d}")):alert("The data was not entered successfully\u{1f44e}")})()}setQRCode(t){this.qr=t}sendMessageWhatsapp(t){const i=`https://api.whatsapp.com/send?text=${encodeURIComponent(t)}`;window.open(i)}Copy(t){this.clipboard.copy(t),alert("Copied")}downloadPDF(t,r){this.CRUD.downloadPDF(t,r)}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(sr),l.Y36(f5),l.Y36(df),l.Y36(bfe))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:44,vars:12,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid",2,"background-color","#9BABB8"],["title","fd","src","../../assets/img/book_logo-removebg-preview (2).png",2,"width","70px","height","70px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],[4,"ngIf","ngIfElse"],["elseBlock",""],["class","nav-item",4,"ngIf"],[1,"nav-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-clockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"],["d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[4,"ngFor","ngForOf"],[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#9BABB8"],[1,"row","text-center"],[2,"border-style","solid","background-color","#9BABB8","font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","40px"],["class","col-lg-2  col-sm-6  col-xs-12",4,"ngFor","ngForOf"],["class","col-2 sm-col-6",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-left"],["fill-rule","evenodd","d","M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"],["fill-rule","evenodd","d","M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-in-right"],["fill-rule","evenodd","d","M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"],["fill-rule","evenodd","d","M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-badge"],["d","M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"],["d","M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z"],[1,"col-lg-2","col-sm-6","col-xs-12"],[1,"card",2,"width","18rem","background-color","#D7C0AE"],["alt","...",1,"card-img-top",2,"width","285px","height","300px",3,"src"],[1,"card-body"],[1,"card-title"],["target","_blank",1,"btn","btn-outline-success",2,"--bs-btn-padding-y",".25rem","--bs-btn-padding-x",".5rem","--bs-btn-font-size",".75rem",3,"href","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-book"],["d","M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"],["data-bs-toggle","modal","data-bs-target","#deletModal","type","button","class","btn btn-outline-danger","title","delet","value","delet","name","a","style","--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;",3,"click",4,"ngIf"],["id","deletModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel1",1,"modal-title","fs-5","text-end"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"text-start","fs-3","fw-bold"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","target","_blank",1,"btn","btn-primary",3,"click"],["class","btn-group",4,"ngIf"],["id","MoreModal","tabindex","-1","aria-labelledby","MoreModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-scrollable"],[1,"d-flex","justify-content-center","m-5"],["alt","","srcset","",2,"width","485px","height","500px",3,"src"],[1,"text-end","fs-3","fw-bold"],[1,"text-end","fs-5"],["type","button","target","_blank",1,"btn","btn-primary",3,"href","click"],["id","sendModel","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["id","staticBackdropLabel65",1,"modal-title","fs-5"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput15","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","exampleFormControlInput15","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","exampleFormControlInput1677","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea175","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","bb",1,"btn","btn-outline-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-send"],["d","M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"],["id","QRModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel7",1,"modal-title","fs-5"],[3,"qrdata"],["data-bs-toggle","modal","data-bs-target","#deletModal","type","button","title","delet","value","delet","name","a",1,"btn","btn-outline-danger",2,"--bs-btn-padding-y",".25rem","--bs-btn-padding-x",".5rem","--bs-btn-font-size",".75rem",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"],[1,"btn-group"],["title","more","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-light","btn-sm","dropdown-toggle"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-three-dots-vertical"],["d","M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"],["title","More","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-three-dots-vertical"],["type","button","title","send in email","data-bs-toggle","modal","data-bs-target","#sendModel",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-envelope-arrow-up"],["d","M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99V4Zm1 7.105 4.708-2.897L1 5.383v5.722ZM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1Z"],["d","M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016Z"],["title","send in whatsapp","type","button",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-whatsapp"],["d","M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"],["type","button","title","QR","data-bs-toggle","modal","data-bs-target","#QRModal",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-qr-code"],["d","M2 2h2v2H2V2Z"],["d","M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"],["d","M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"],["d","M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z"],["d","M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"],["type","button","mat-button","","id","liveAlertBtn",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-copy"],["fill-rule","evenodd","d","M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"],[1,"col-2","sm-col-6"],["title","red","target","_blank",1,"btn","btn-outline-success",2,"--bs-btn-padding-y",".25rem","--bs-btn-padding-x",".5rem","--bs-btn-font-size",".75rem",3,"href","click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabel5",1,"modal-title","fs-5","text-end"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["id","exampleModalLabel",1,"modal-title","fs-5"]],template:function(r,i){if(1&r&&(l.TgZ(0,"nav",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"button",3),l._UZ(4,"span",4),l.qZA(),l.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),l._uU(9,"Home"),l.qZA()(),l.YNc(10,xfe,6,0,"div",9),l.YNc(11,Pfe,5,0,"ng-template",null,10,l.W1O),l.YNc(13,Nfe,5,0,"li",11),l.TgZ(14,"li",7)(15,"a",12),l.NdJ("click",function(){return i.updateC()}),l.O4$(),l.TgZ(16,"svg",13),l._UZ(17,"path",14)(18,"path",15),l.qZA()()(),l.kcU(),l.TgZ(19,"li",16)(20,"a",17),l._uU(21," \u0627\u0644\u062a\u0635\u0646\u064a\u0641\u0627\u062a "),l.qZA(),l.TgZ(22,"ul",18)(23,"li")(24,"a",19),l.NdJ("click",function(){return i.setThecategory("")}),l._uU(25,"\u0627\u0644\u0643\u0644"),l.qZA()(),l.YNc(26,kfe,3,1,"li",20),l.qZA()()()()()(),l.TgZ(27,"div",21)(28,"div",22)(29,"div",23)(30,"h1",24),l._uU(31,"Kotby"),l.qZA(),l.TgZ(32,"h3",25),l._uU(33),l.qZA()()()(),l.TgZ(34,"div",26)(35,"h6",27),l._uU(36,"Famous Books"),l.qZA(),l.YNc(37,Lfe,109,18,"div",28),l.ALo(38,"async"),l.qZA(),l.TgZ(39,"div",26)(40,"h1",27),l._uU(41),l.qZA(),l.YNc(42,Ufe,108,18,"div",29),l.ALo(43,"async"),l.qZA()),2&r){const s=l.MAs(12);l.xp6(10),l.Q6J("ngIf",i.userInORout)("ngIfElse",s),l.xp6(3),l.Q6J("ngIf",i.typU()),l.xp6(13),l.Q6J("ngForOf",i.thcategory),l.xp6(7),l.hij("Welcome ",i.username,""),l.xp6(4),l.Q6J("ngForOf",l.lcZ(38,8,i.FamousBooks)),l.xp6(4),l.Oqu(i.setTheName()),l.xp6(1),l.Q6J("ngForOf",l.lcZ(43,10,i.allBookdata))}},dependencies:[Cl,Ah,Ss,ra,$a,Dfe,bl]})}return n})(),Bfe=(()=>{class n{constructor(t,r){this.CRUD=t,this.router=r,this.uid=sessionStorage.getItem("UID"),this.name=""}updateU(){this.CRUD.Updateuser(this.uid,this.name)}goHome(){this.router.navigate(["/Home"])}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(Zk),l.Y36(sr))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-update-user"]],decls:35,vars:1,consts:[[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-5"],[1,"card",2,"width","18rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","fill name",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","a","name","a",1,"btn","btn-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-counterclockwise"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"],[3,"click"]],template:function(r,i){1&r&&(l._UZ(0,"br")(1,"br")(2,"br"),l.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"h1",3),l._uU(7,"Kotby"),l.qZA()()(),l._UZ(8,"br")(9,"br")(10,"br")(11,"br")(12,"br")(13,"br"),l.TgZ(14,"div",4)(15,"div",5),l._UZ(16,"div",6),l.TgZ(17,"div",2)(18,"div",7)(19,"div",8)(20,"h1",9),l._uU(21,"Update the name"),l.qZA(),l.TgZ(22,"div",10)(23,"label",11),l._uU(24,"fill name"),l.qZA(),l.TgZ(25,"input",12),l.NdJ("ngModelChange",function(o){return i.name=o}),l.qZA()(),l.TgZ(26,"a",13),l.NdJ("click",function(){return i.updateU()}),l.O4$(),l.TgZ(27,"svg",14),l._UZ(28,"path",15)(29,"path",16),l.qZA()(),l.kcU(),l._UZ(30,"br")(31,"br"),l.TgZ(32,"a",17),l.NdJ("click",function(){return i.goHome()}),l._uU(33,"cancel"),l.qZA()()()(),l._UZ(34,"div",6),l.qZA()()()),2&r&&(l.xp6(25),l.Q6J("ngModel",i.name))},dependencies:[Ss,ra,$a]})}return n})();function jfe(n,e){1&n&&(l.TgZ(0,"div",21)(1,"div",22)(2,"span",23),l._uU(3,"Loading..."),l.qZA()()())}function $fe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li")(1,"a",24),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.setTheCategory(s.category))}),l._uU(2),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.category)}}let Gfe=(()=>{class n{constructor(t,r,i,s){this.CRUD=t,this.firestore=r,this.ro=i,this.location=s,this.bookOpj={name:"",description:"",price:0,writer:"",category:"",pdf:"",url:"",pathimg:"",pathpdf:""},this.name="",this.description="",this.price=0,this.writer="",this.category="",this.fil="",this.thcategory=[{category:"\u0627\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0628\u0634\u0631\u064a\u0629 \u0648\u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u0630\u0627\u062a"},{category:"\u0627\u0644\u062d\u0631\u0628 \u0648\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0639\u0633\u0643\u0631\u064a\u0629"},{category:"\u0627\u0644\u062d\u0628 \u0648\u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u064a\u0629"},{category:"\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0627\u0633\u0644\u0627\u0645\u064a\u0629"},{category:"\u0627\u0644\u062a\u0633\u0648\u064a\u0642 \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"},{category:"\u0645\u0630\u0643\u0631\u0627\u062a \u0648\u0633\u064a\u0631 \u0630\u0627\u062a\u064a\u0629"},{category:"\u0631\u0648\u0627\u064a\u0627\u062a \u0631\u0639\u0628"}],this.lodeing=!1,this.Admen()}setEventimg(t){this.eventimg=t}setEventpdf(t){this.eventpdf=t}GotoHome(){this.ro.navigate(["/Home"])}setTheCategory(t){this.category=t}file1(){this.lodeing=!0,this.bookOpj.name=this.name,this.bookOpj.price=this.price,this.bookOpj.description=this.description,this.bookOpj.writer=this.writer,this.bookOpj.category=this.category,0==!!this.CRUD.addBook(this.eventimg,this.eventpdf,this.bookOpj)&&(this.lodeing=!1)}Admen(){"X"!=sessionStorage.getItem("UT")&&this.ro.navigate(["/Home"])}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(f5),l.Y36(K6),l.Y36(sr),l.Y36(_e))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-add-books"]],decls:38,vars:6,consts:[["title","a",1,"link-dark","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover",2,"height","50px","width","50px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],["class","d-flex justify-content-center m-5",4,"ngIf"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["for","formFile",1,"form-label"],["type","file","title","gv","id","formFile",1,"form-control",3,"change"],["title","s","type","file","id","formFile1",1,"form-control",3,"change"],["type","email","id","exampleFormControlInput2","placeholder","The writer",1,"form-control",3,"ngModel","ngModelChange"],["type","button","role","button","name","xd","value","dd",1,"btn","btn-outline-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["type","button","value","Go to Home",3,"click"],[1,"d-flex","justify-content-center","m-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"dropdown-item",3,"click"]],template:function(r,i){1&r&&(l._uU(0,"\xa0\xa0\n"),l.TgZ(1,"a",0),l.NdJ("click",function(){return i.goBack()}),l.O4$(),l.TgZ(2,"svg",1),l._UZ(3,"path",2),l.qZA()(),l.kcU(),l._UZ(4,"br")(5,"br")(6,"br"),l.YNc(7,jfe,4,0,"div",3),l.TgZ(8,"div",4)(9,"label",5),l._uU(10,"Book name:"),l.qZA(),l.TgZ(11,"input",6),l.NdJ("ngModelChange",function(o){return i.name=o}),l.qZA()(),l.TgZ(12,"div",4)(13,"div",7)(14,"button",8),l._uU(15),l.qZA(),l.TgZ(16,"ul",9),l.YNc(17,$fe,3,1,"li",10),l.qZA()()(),l.TgZ(18,"div",4)(19,"label",11),l._uU(20,"Description"),l.qZA(),l.TgZ(21,"textarea",12),l.NdJ("ngModelChange",function(o){return i.description=o}),l.qZA()(),l.TgZ(22,"div",4)(23,"label",13),l._uU(24,"img the book"),l.qZA(),l.TgZ(25,"input",14),l.NdJ("change",function(o){return i.setEventimg(o)}),l.qZA()(),l.TgZ(26,"div",4)(27,"label",13),l._uU(28,"PDF the book"),l.qZA(),l.TgZ(29,"input",15),l.NdJ("change",function(o){return i.setEventpdf(o)}),l.qZA()(),l.TgZ(30,"div",4)(31,"label",5),l._uU(32,"The writer"),l.qZA(),l.TgZ(33,"input",16),l.NdJ("ngModelChange",function(o){return i.writer=o}),l.qZA()(),l.TgZ(34,"a",17),l.NdJ("click",function(){return i.file1()}),l.O4$(),l.TgZ(35,"svg",18),l._UZ(36,"path",19),l.qZA()(),l.kcU(),l.TgZ(37,"input",20),l.NdJ("click",function(){return i.GotoHome()}),l.qZA()),2&r&&(l.xp6(7),l.Q6J("ngIf",i.lodeing),l.xp6(4),l.Q6J("ngModel",i.name),l.xp6(4),l.hij(" category(",i.category,") "),l.xp6(2),l.Q6J("ngForOf",i.thcategory),l.xp6(4),l.Q6J("ngModel",i.description),l.xp6(12),l.Q6J("ngModel",i.writer))},dependencies:[Cl,Ah,Ss,ra,$a]})}return n})(),Hfe=(()=>{class n{constructor(t,r){this.router=t,this._location=r,this.Admen()}Admen(){"X"!=sessionStorage.getItem("UT")&&this.router.navigate(["/Home"])}GotoAddBook(){this.router.navigate(["/addBook"])}backClicked(){this._location.back()}GotoUpdateBook(){this.router.navigate(["/updateBook"])}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(sr),l.Y36(_e))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-admen"]],decls:43,vars:0,consts:[["title","a",1,"link-dark","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover",2,"height","50px","width","50px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],[1,"container-fluid","text-center"],[1,"row"],[1,"col"],[2,"font-family","Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif","color","#967E76","font-size","100px"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-5"],[1,"card","text-center","mb-3",2,"width","18rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-repeat"],["d","M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"],["fill-rule","evenodd","d","M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-plus"],["d","M8.5 6a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V10a.5.5 0 0 0 1 0V8.5H10a.5.5 0 0 0 0-1H8.5V6z"],["d","M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"]],template:function(r,i){1&r&&(l._uU(0,"\xa0\xa0\n"),l.TgZ(1,"a",0),l.NdJ("click",function(){return i.backClicked()}),l.O4$(),l.TgZ(2,"svg",1),l._UZ(3,"path",2),l.qZA()(),l.kcU(),l._UZ(4,"br")(5,"br")(6,"br"),l.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"h1",6),l._uU(11,"Kotby"),l.qZA()()(),l._UZ(12,"br")(13,"br")(14,"br")(15,"br"),l.TgZ(16,"div",7)(17,"div",8),l._UZ(18,"div",9),l.TgZ(19,"div",5)(20,"div",5)(21,"div",10)(22,"div",11)(23,"h5",12),l._uU(24,"\u062a\u062d\u062f\u064a\u062b \u0643\u062a\u0628"),l.qZA(),l.TgZ(25,"p",13),l._uU(26," \u062a\u062d\u062f\u064a\u062b \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0643\u062a\u0627\u0628 \u0641\u064a \u0642\u0627\u0639\u062f\u0647 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),l.qZA(),l.TgZ(27,"a",14),l.NdJ("click",function(){return i.GotoUpdateBook()}),l.O4$(),l.TgZ(28,"svg",15),l._UZ(29,"path",16)(30,"path",17),l.qZA()()()()(),l.kcU(),l.TgZ(31,"div",5)(32,"div",10)(33,"div",11)(34,"h5",12),l._uU(35,"\u0627\u0636\u0627\u0641\u0647 \u0643\u062a\u0628"),l.qZA(),l.TgZ(36,"p",13),l._uU(37,"pdf\u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0643\u062a\u0628 \u0645\u0639 \u0627\u0644\u0635\u0648\u0631 \u0648 \u0645\u0644\u0641 \u0627\u0644"),l.qZA(),l.TgZ(38,"a",14),l.NdJ("click",function(){return i.GotoAddBook()}),l.O4$(),l.TgZ(39,"svg",18),l._UZ(40,"path",19)(41,"path",20),l.qZA()()()()()(),l.kcU(),l._UZ(42,"div",5),l.qZA()()())}})}return n})();function qfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr")(1,"th",39),l._uU(2,"#"),l.qZA(),l.TgZ(3,"td"),l._UZ(4,"img",40),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l._uU(12),l.qZA(),l.TgZ(13,"td",41)(14,"a",42),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.setValeUpdate(s.url,s.name,s.description,s.writer,s.category))}),l.O4$(),l.TgZ(15,"svg",43),l._UZ(16,"path",37)(17,"path",38),l.qZA()()()()}if(2&n){const t=e.$implicit;l.xp6(4),l.s9C("src",t.url,l.LSH),l.xp6(2),l.Oqu(t.name),l.xp6(2),l.Oqu(t.writer),l.xp6(2),l.Oqu(t.category),l.xp6(2),l.Oqu(t.price)}}function zfe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li")(1,"a",44),l.NdJ("click",function(){const s=l.CHM(t).$implicit,o=l.oxw();return l.KtG(o.setTheCategory(s.category))}),l._uU(2),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.category)}}const Wfe=[{path:"Add",component:PK},{path:"SignIn",component:PK},{path:"Login",component:nde},{path:"Home",component:VY},{path:"UpdateU",component:Bfe},{path:"addBook",component:Gfe},{path:"admen",component:Hfe},{path:"",component:VY},{path:"pas",component:tde},{path:"updateBook",component:(()=>{class n{constructor(t,r,i){this.crud=t,this.ro=r,this.location=i,this.thcategory=[{category:"\u0627\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0628\u0634\u0631\u064a\u0629 \u0648\u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u0630\u0627\u062a"},{category:"\u0627\u0644\u062d\u0631\u0628 \u0648\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0639\u0633\u0643\u0631\u064a\u0629"},{category:"\u0627\u0644\u062d\u0628 \u0648\u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u064a\u0629"},{category:"\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0627\u0633\u0644\u0627\u0645\u064a\u0629"},{category:"\u0627\u0644\u062a\u0633\u0648\u064a\u0642 \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"},{category:"\u0645\u0630\u0643\u0631\u0627\u062a \u0648\u0633\u064a\u0631 \u0630\u0627\u062a\u064a\u0629"},{category:"\u0631\u0648\u0627\u064a\u0627\u062a \u0631\u0639\u0628"}],this.name="",this.description="",this.url="",this.writer="",this.category="",this.getAllBook()}Admen(){"X"!=sessionStorage.getItem("UT")&&this.ro.navigate(["/Home"])}getAllBook(){this.allBooks=(0,yn.D)(this.crud.getAllBooksBy())}setValeUpdate(t,r,i,s,o){this.name=r,this.url=t,this.description=i,this.writer=s,this.category=o}updateBook(){this.crud.updateBooks(this.url,this.name,this.category,this.description,this.writer)}setTheCategory(t){this.category=t}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(l.Y36(f5),l.Y36(sr),l.Y36(_e))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-update-books"]],decls:75,vars:12,consts:[["title","a",1,"link-dark","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover",2,"height","50px","width","50px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],[1,"justify-content-center"],[1,"row"],[1,"col-3"],[1,"col"],[1,"card","text-center","mb-3",2,"width","65rem","background-color","#D7C0AE"],[1,"card-body"],[1,"card-title"],["id","allbook",1,"table","table-secondary"],[1,"table-dark"],["scope","col"],[4,"ngFor","ngForOf","ngForAs"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["id","UpdateModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","id","exampleFormControlInput15","placeholder","Name",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["type","text","id","exampleFormControlInput15","placeholder","",1,"form-control",3,"ngModel","value","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","15","height","15","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-repeat"],["d","M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"],["fill-rule","evenodd","d","M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"],["scope","row"],["alt","","srcset","",2,"height","55px","width","55px",3,"src"],[1,"table-light"],["type","button","data-bs-toggle","modal","data-bs-target","#UpdateModal",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-repeat"],[1,"dropdown-item",3,"click"]],template:function(r,i){1&r&&(l._uU(0,"\xa0\xa0\n"),l.TgZ(1,"a",0),l.NdJ("click",function(){return i.goBack()}),l.O4$(),l.TgZ(2,"svg",1),l._UZ(3,"path",2),l.qZA()(),l.kcU(),l._UZ(4,"br")(5,"br"),l.TgZ(6,"div",3)(7,"div",4),l._UZ(8,"div",5),l.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"h5",9),l._uU(13,"\u0643\u0644 \u0627\u0644\u0643\u062a\u0628"),l.qZA(),l._UZ(14,"br"),l.TgZ(15,"table",10)(16,"thead")(17,"tr",11)(18,"th",12),l._uU(19,"#"),l.qZA(),l.TgZ(20,"th",12),l._uU(21,"img"),l.qZA(),l.TgZ(22,"th",12),l._uU(23,"name"),l.qZA(),l.TgZ(24,"th",12),l._uU(25,"writer"),l.qZA(),l.TgZ(26,"th",12),l._uU(27,"category"),l.qZA(),l.TgZ(28,"th",12),l._uU(29,"times read"),l.qZA(),l.TgZ(30,"th",12),l._uU(31,"Update"),l.qZA()()(),l.TgZ(32,"tbody"),l.YNc(33,qfe,18,5,"tr",13),l.ALo(34,"async"),l.qZA()(),l.TgZ(35,"div",4)(36,"div",6)(37,"a"),l.O4$(),l.TgZ(38,"svg",14),l._UZ(39,"path",15),l.qZA()()()()()()()()(),l.kcU(),l.TgZ(40,"div",16)(41,"div",17)(42,"div",18)(43,"div",19)(44,"h1",20),l._uU(45,"Update book"),l.qZA(),l._UZ(46,"button",21),l.qZA(),l.TgZ(47,"div",22)(48,"div",23)(49,"label",24),l._uU(50,"name"),l.qZA(),l.TgZ(51,"input",25),l.NdJ("ngModelChange",function(o){return i.name=o}),l.qZA()(),l.TgZ(52,"div",23)(53,"label",24),l._uU(54,"category"),l.qZA(),l.TgZ(55,"div",26)(56,"button",27),l._uU(57),l.qZA(),l.TgZ(58,"ul",28),l.YNc(59,zfe,3,1,"li",29),l.qZA()()(),l.TgZ(60,"div",23)(61,"label",24),l._uU(62,"writer"),l.qZA(),l.TgZ(63,"input",30),l.NdJ("ngModelChange",function(o){return i.writer=o}),l.qZA()(),l.TgZ(64,"div",23)(65,"label",31),l._uU(66,"description"),l.qZA(),l.TgZ(67,"textarea",32),l.NdJ("ngModelChange",function(o){return i.description=o}),l.qZA()()(),l.TgZ(68,"div",33)(69,"button",34),l._uU(70,"Close"),l.qZA(),l.TgZ(71,"button",35),l.NdJ("click",function(){return i.updateBook()}),l.O4$(),l.TgZ(72,"svg",36),l._UZ(73,"path",37)(74,"path",38),l.qZA()()()()()()),2&r&&(l.xp6(33),l.Q6J("ngForOf",l.lcZ(34,10,i.allBooks))("ngForAs",i.index),l.xp6(18),l.s9C("value",i.name),l.Q6J("ngModel",i.name),l.xp6(6),l.hij(" category(",i.category,") "),l.xp6(2),l.Q6J("ngForOf",i.thcategory),l.xp6(4),l.s9C("value",i.writer),l.Q6J("ngModel",i.writer),l.xp6(4),l.s9C("value",i.description),l.Q6J("ngModel",i.description))},dependencies:[Cl,Ss,ra,$a,bl]})}return n})()}];let Zfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[x2.forRoot(Wfe),x2]})}return n})(),Kfe=(()=>{class n{constructor(){this.title="Ktoby"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&l._UZ(0,"router-outlet")},dependencies:[Pm]})}return n})();const UY={firebase:{projectId:"books-store-7af02",appId:"1:790922181161:web:6ba8df3f609c806579ba38",databaseURL:"https://books-store-7af02-default-rtdb.firebaseio.com",storageBucket:"books-store-7af02.appspot.com",apiKey:"AIzaSyA3-QbTpEexssh7uiX3zP0R1FxsCBejCU0",authDomain:"books-store-7af02.firebaseapp.com",messagingSenderId:"790922181161",measurementId:"G-Y6K38XB07M"}};var g5=P(7582);const Qfe=function GY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},HY=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),aM=new Zn.Yd("@firebase/auth");function uM(n,...e){aM.logLevel<=Zn.in.ERROR&&aM.error(`Auth (${ct.SDK_VERSION}): ${n}`,...e)}function Ho(n,...e){throw m5(n,...e)}function gl(n,...e){return m5(n,...e)}function m5(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HY.create(n,...e)}function ot(n,e,...t){if(!n)throw m5(e,...t)}function ml(n){const e="INTERNAL ASSERTION FAILED: "+n;throw uM(e),new Error(e)}function sg(n,e){n||ml(e)}function zY(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class kS{constructor(e,t){this.shortDelay=e,this.longDelay=t,sg(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Xfe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function _5(){return"http:"===zY()||"https:"===zY()}()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class WY{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ml("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ml("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ml("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},npe=new kS(3e4,6e4);function Br(n,e,t,r){return v5.apply(this,arguments)}function v5(){return v5=(0,j.Z)(function*(n,e,t,r,i={}){return ZY(n,i,(0,j.Z)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const d=(0,z.xO)(Object.assign({key:n.config.apiKey},o)).slice(1),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode),WY.fetch()(KY(n,n.config.apiHost,t,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},s))}))}),v5.apply(this,arguments)}function ZY(n,e,t){return I5.apply(this,arguments)}function I5(){return I5=(0,j.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},tpe),e);try{const i=new rpe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw MS(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const d=s.ok?o.errorMessage:o.error.message,[f,g]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===f)throw MS(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===f)throw MS(n,"email-already-in-use",o);if("USER_DISABLED"===f)throw MS(n,"user-disabled",o);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw function qY(n,e,t){const r=Object.assign(Object.assign({},Qfe()),{[e]:t});return new z.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,y,g);Ho(n,y)}}catch(i){if(i instanceof z.ZR)throw i;Ho(n,"network-request-failed",{message:String(i)})}}),I5.apply(this,arguments)}function KY(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function y5(n,e){sg(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class rpe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gl(this.auth,"network-request-failed")),npe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function MS(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gl(n,e,r);return i.customData._tokenResponse=t,i}function C5(){return C5=(0,j.Z)(function*(n,e){return Br(n,"POST","/v1/accounts:delete",e)}),C5.apply(this,arguments)}function b5(){return b5=(0,j.Z)(function*(n,e){return Br(n,"POST","/v1/accounts:lookup",e)}),b5.apply(this,arguments)}function OS(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function S5(){return S5=(0,j.Z)(function*(n,e=!1){const t=(0,z.m9)(n),r=yield t.getIdToken(e),i=cM(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:OS(D5(i.auth_time)),issuedAtTime:OS(D5(i.iat)),expirationTime:OS(D5(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}),S5.apply(this,arguments)}function D5(n){return 1e3*Number(n)}function cM(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return uM("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,z.tV)(t);return i?JSON.parse(i):(uM("Failed to decode base64 JWT payload"),null)}catch(i){return uM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yh(n,e){return R5.apply(this,arguments)}function R5(){return R5=(0,j.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof z.ZR&&function lpe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),R5.apply(this,arguments)}class dpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,j.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,j.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class QY{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=OS(this.lastLoginAt),this.creationTime=OS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function LS(n){return x5.apply(this,arguments)}function x5(){return x5=(0,j.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield yh(n,function ape(n,e){return b5.apply(this,arguments)}(t,{idToken:r}));ot(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function ppe(n){return n.map(e=>{var{providerId:t}=e,r=(0,g5._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],d=function fpe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),y=!!n.isAnonymous&&!(n.email&&s.passwordHash||d?.length),E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new QY(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(n,E)}),x5.apply(this,arguments)}function P5(){return P5=(0,j.Z)(function*(n){const e=(0,z.m9)(n);yield LS(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),P5.apply(this,arguments)}function N5(){return N5=(0,j.Z)(function*(n,e){const t=yield ZY(n,{},(0,j.Z)(function*(){const r=(0,z.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=KY(n,i,"/v1/token",`key=${s}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",WY.fetch()(o,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),N5.apply(this,arguments)}class FS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function cpe(n){const e=cM(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,j.Z)(function*(){return ot(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,j.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function gpe(n,e){return N5.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new FS;return r&&(ot("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(ot("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(ot("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new FS,this.toJSON())}_performRefresh(){return ml("not implemented")}}function og(n,e){ot("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Ry{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,g5._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new QY(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,j.Z)(function*(){const r=yield yh(t,t.stsTokenManager.getToken(t.auth,e));return ot(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function upe(n){return S5.apply(this,arguments)}(this,e)}reload(){return function hpe(n){return P5.apply(this,arguments)}(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ry(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,j.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield LS(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,j.Z)(function*(){const t=yield e.getIdToken();return yield yh(e,function spe(n,e){return C5.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,d,f,g,y;const E=null!==(r=t.displayName)&&void 0!==r?r:void 0,b=null!==(i=t.email)&&void 0!==i?i:void 0,R=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,V=null!==(o=t.photoURL)&&void 0!==o?o:void 0,q=null!==(d=t.tenantId)&&void 0!==d?d:void 0,Z=null!==(f=t._redirectEventId)&&void 0!==f?f:void 0,fe=null!==(g=t.createdAt)&&void 0!==g?g:void 0,Se=null!==(y=t.lastLoginAt)&&void 0!==y?y:void 0,{uid:ye,emailVerified:Le,isAnonymous:nt,providerData:at,stsTokenManager:rn}=t;ot(ye&&rn,e,"internal-error");const Qn=FS.fromJSON(this.name,rn);ot("string"==typeof ye,e,"internal-error"),og(E,e.name),og(b,e.name),ot("boolean"==typeof Le,e,"internal-error"),ot("boolean"==typeof nt,e,"internal-error"),og(R,e.name),og(V,e.name),og(q,e.name),og(Z,e.name),og(fe,e.name),og(Se,e.name);const fu=new Ry({uid:ye,auth:e,email:b,emailVerified:Le,displayName:E,isAnonymous:nt,photoURL:V,phoneNumber:R,tenantId:q,stsTokenManager:Qn,createdAt:fe,lastLoginAt:Se});return at&&Array.isArray(at)&&(fu.providerData=at.map(iO=>Object.assign({},iO))),Z&&(fu._redirectEventId=Z),fu}static _fromIdTokenResponse(e,t,r=!1){return(0,j.Z)(function*(){const i=new FS;i.updateFromServerResponse(t);const s=new Ry({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield LS(s),s})()}}const JY=new Map;function vh(n){sg(n instanceof Function,"Expected a class definition");let e=JY.get(n);return e?(sg(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,JY.set(n,e),e)}const XY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,j.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,j.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,j.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,j.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function lM(n,e,t){return`firebase:${n}:${e}:${t}`}class ZE{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=lM(this.userKey,i.apiKey,s),this.fullPersistenceKey=lM("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,j.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Ry._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,j.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,j.Z)(function*(){if(!t.length)return new ZE(vh(XY),e,r);const i=(yield Promise.all(t.map(function(){var g=(0,j.Z)(function*(y){if(yield y._isAvailable())return y});return function(y){return g.apply(this,arguments)}}()))).filter(g=>g);let s=i[0]||vh(XY);const o=lM(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=yield g._get(o);if(y){const E=Ry._fromJSON(e,y);g!==s&&(d=E),s=g;break}}catch{}const f=i.filter(g=>g._shouldAllowMigration);return s._shouldAllowMigration&&f.length?(s=f[0],d&&(yield s._set(o,d.toJSON())),yield Promise.all(t.map(function(){var g=(0,j.Z)(function*(y){if(y!==s)try{yield y._remove(o)}catch{}});return function(y){return g.apply(this,arguments)}}())),new ZE(s,e,r)):new ZE(s,e,r)})()}}function eQ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function rQ(n=(0,z.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function tQ(n=(0,z.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function sQ(n=(0,z.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function oQ(n=(0,z.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function k5(n=(0,z.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function nQ(n=(0,z.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function iQ(n=(0,z.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function aQ(n,e=[]){let t;switch(n){case"Browser":t=eQ((0,z.z$)());break;case"Worker":t=`${eQ((0,z.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ct.SDK_VERSION}/${r}`}class ype{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,d)=>{try{o(e(s))}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,j.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function M5(){return M5=(0,j.Z)(function*(n,e={}){return Br(n,"GET","/v2/passwordPolicy",function xr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}(n,e))}),M5.apply(this,arguments)}class Epe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=null===(t=f.meetsMinPasswordLength)||void 0===t||t),f.isValid&&(f.isValid=null===(r=f.meetsMaxPasswordLength)||void 0===r||r),f.isValid&&(f.isValid=null===(i=f.containsLowercaseLetter)||void 0===i||i),f.isValid&&(f.isValid=null===(s=f.containsUppercaseLetter)||void 0===s||s),f.isValid&&(f.isValid=null===(o=f.containsNumericCharacter)||void 0===o||o),f.isValid&&(f.isValid=null===(d=f.containsNonAlphanumericCharacter)||void 0===d||d),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class wpe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uQ(this),this.idTokenSubscription=new uQ(this),this.beforeStateQueue=new ype(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=vh(t)),this._initializationPromise=this.queue((0,j.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield ZE.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,j.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,j.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,f=s?._redirectEventId,g=yield t.tryRedirectSignIn(e);(!d||d===f)&&g?.user&&(s=g.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(d){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return ot(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,j.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,j.Z)(function*(){try{yield LS(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function epe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,j.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,j.Z)(function*(){const r=e?(0,z.m9)(e):null;return r&&ot(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,j.Z)(function*(){if(!r._deleted)return e&&ot(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,j.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,j.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,j.Z)(function*(){yield t.assertedPersistence.setPersistence(vh(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,j.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,j.Z)(function*(){const t=yield function vpe(n){return M5.apply(this,arguments)}(e),r=new Epe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new z.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,j.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,j.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&vh(e)||t._popupRedirectResolver;ot(r,t,"argument-error"),t.redirectPersistenceManager=yield ZE.create(t,[vh(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,j.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,j.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,j.Z)(function*(){if(e===t.currentUser)return t.queue((0,j.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(d,this,"internal-error"),d.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const f=e.addObserver(t,r,i);return()=>{o=!0,f()}}{const f=e.addObserver(t);return()=>{o=!0,f()}}}directlySetCurrentUser(e){var t=this;return(0,j.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aQ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,j.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,j.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Jfe(n,...e){aM.logLevel<=Zn.in.WARN&&aM.warn(`Auth (${ct.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class uQ{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,z.ne)(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function cQ(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new kS(3e4,6e4),new kS(2e3,1e4),new kS(3e4,6e4),new kS(5e3,15e3),encodeURIComponent("fac");var UQ="@firebase/auth";class Ime{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,j.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bme(n){return new zr.y(function(e){var t=function uge(n,e,t,r){return(0,z.m9)(n).onAuthStateChanged(e,t,r)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}(0,z.Pz)("authIdTokenMaxAge"),function wme(n){(0,ct._registerComponent)(new ai.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=r.options;ot(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:o,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aQ(n)},g=new wpe(r,i,s,f);return function Rpe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,ct._registerComponent)(new ai.wA("auth-internal",e=>{const t=function Si(n){return(0,z.m9)(n)}(e.getProvider("auth").getImmediate());return new Ime(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ct.registerVersion)(UQ,"1.3.0",function Eme(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,ct.registerVersion)(UQ,"1.3.0","esm2017")}("Browser");var Dme=P(6710);class TM{constructor(e){return e}}class A${constructor(){return ub("auth")}}const b$=new l.OlP("angularfire2.auth-instances");function xme(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new TM(r)}}const Pme={provide:A$,deps:[[new l.FiY,b$]]},Nme={provide:TM,useFactory:function Rme(n,e){const t=ab("auth",n,e);return t&&new TM(t)},deps:[[new l.FiY,b$],ng]};let kme=(()=>{class n{constructor(){(0,ct.registerVersion)("angularfire",Pp.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Nme,Pme]}),n})();function Mme(n,...e){return{ngModule:kme,providers:[{provide:b$,useFactory:xme(n),multi:!0,deps:[l.R0b,l.zs3,Np,wS,[new l.FiY,by],...e]}]}}const Ome=kp(bme,!0),Lme=kp(Dme.o,!0);class $S{constructor(e){return e}}const GQ="analytics",HQ=dN.async,Vme=kp(hie,!0),Ume=kp(X7,!0),Bme=kp(gie,!0);let S$=(()=>{class n{constructor(t,r,i){let s;this.disposables=[],(0,ct.registerVersion)("angularfire",Pp.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),HQ().then(()=>{const o=i.get($S);o?this.disposables=[Ome(t).subscribe(d=>{Bme(o,d?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(TM),l.LFG(l.R0b),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qQ="firebase_screen_id",D$="outlet",GS="screen_class",zQ="screen_name";let Jme=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const R$={},Xme=n=>{const e=[n[GS],n[D$]].join("#");if(R$.hasOwnProperty(e))return R$[e];{const t=Jme++;return R$[e]=t,t}};let WQ=(()=>{class n{constructor(t,r,i,s,o,d){(0,ct.registerVersion)("angularfire",Pp.full,"screen-tracking"),HQ().then(()=>{const f=d.get($S);!t||!f||s.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Ei(i=>i instanceof Rm)).pipe((0,ir.w)(i=>{var s;const d=(null===(s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,R=>R.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===s?void 0:s.toString())||"",f=n.routerState.root.children.map(R=>R).find(R=>R.outlet===i.snapshot.outlet);if(!f)return(0,wt.of)(null);let g=f;for(;g.firstChild;)g=g.firstChild;const y=g.pathFromRoot.map(R=>{var V;return null===(V=R.routeConfig)||void 0===V?void 0:V.path}).filter(R=>R).join("/")||"/",E={[zQ]:y,page_path:`/${d}`,firebase_event_origin:"auto",firebase_screen:y,[D$]:i.snapshot.outlet};e&&(E.page_title=e.getTitle());let b=f.component;if(b){if(b===hd){let R=i.snapshot;for(;R.firstChild;)R=R.firstChild;b=R.component}}else b=i.snapshot.component;if("string"==typeof b)return(0,wt.of)(Object.assign(Object.assign({},E),{[GS]:b}));if(b){const R=t.resolveComponentFactory(b);return(0,wt.of)(Object.assign(Object.assign({},E),{[GS]:R.selector}))}return(0,wt.of)(null)}),Ei(i=>!!i),(0,Rt.U)(i=>Object.assign({firebase_screen_class:i[GS],[qQ]:Xme(i)},i)),function Yfe(n,e,t,r){return(0,os.e)((i,s)=>{let o;e&&"function"!=typeof e?({duration:t,element:o,connector:r}=e):o=e;const d=new Map,f=V=>{d.forEach(V),V(s)},g=V=>f(q=>q.error(V));let y=0,E=!1;const b=new en.Q(s,V=>{try{const q=n(V);let Z=d.get(q);if(!Z){d.set(q,Z=r?r():new oa.x);const fe=function R(V,q){const Z=new zr.y(fe=>{y++;const Se=q.subscribe(fe);return()=>{Se.unsubscribe(),0==--y&&E&&b.unsubscribe()}});return Z.key=V,Z}(q,Z);if(s.next(fe),t){const Se=(0,en.x)(Z,()=>{Z.complete(),Se?.unsubscribe()},void 0,void 0,()=>d.delete(q));b.add((0,Or.Xf)(t(fe)).subscribe(Se))}}Z.next(o?o(V):V)}catch(q){g(q)}},()=>f(V=>V.complete()),g,()=>d.clear(),()=>(E=!0,0===y));i.subscribe(b)})}(i=>i[D$]),(0,$i.z)(i=>i.pipe((0,iq.x)((s,o)=>JSON.stringify(s)===JSON.stringify(o)),yc(void 0),hN(),(0,Rt.U)(([s,o])=>s?Object.assign({firebase_previous_class:s[GS],firebase_previous_screen:s[zQ],firebase_previous_id:s[qQ]},o):o)))))(t,r,i).pipe((0,ir.w)(g=>(0,g5.mG)(this,void 0,void 0,function*(){return o&&(yield o.initialized),Ume(f,"screen_view",g)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sr,8),l.LFG(Me,8),l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(S$,8),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const x$=new l.OlP("angularfire2.analytics-instances");function n_e(n){return(e,t)=>{if(!dN.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new $S(r)}}const r_e={provide:class Fme{constructor(){return ub(GQ)}},deps:[[new l.FiY,x$]]},i_e={provide:$S,useFactory:function t_e(n,e){if(!dN.sync())return null;const t=ab(GQ,n,e);return t&&new $S(t)},deps:[[new l.FiY,x$],ng]};let s_e=(()=>{class n{constructor(t,r){(0,ct.registerVersion)("angularfire",Pp.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(WQ,8),l.LFG(S$,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[i_e,r_e,{provide:l.ip1,useValue:dN.async,multi:!0}]}),n})();function o_e(n,...e){return{ngModule:s_e,providers:[{provide:x$,useFactory:n_e(n),multi:!0,deps:[l.R0b,l.zs3,Np,wS,...e]}]}}const ZQ="@firebase/database";let P$="";class u_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class c_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const YQ=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u_e(e)}}catch{}return new c_e},ky=YQ("localStorage"),N$=YQ("sessionStorage"),YE=new Zn.Yd("@firebase/database"),QQ=function(){let n=1;return function(){return n++}}(),JQ=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},HS=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=HS.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let My=null,XQ=!0;const _s=function(...n){if(!0===XQ&&(XQ=!1,null===My&&!0===N$.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(YE.logLevel=Zn.in.VERBOSE,My=YE.log.bind(YE),e&&N$.set("logging_enabled",!0)):"function"==typeof n?My=n:(My=null,N$.remove("logging_enabled"))}(!0)),My){const e=HS.apply(null,n);My(e)}},qS=function(n){return function(...e){_s(n,...e)}},k$=function(...n){const e="FIREBASE INTERNAL ERROR: "+HS(...n);YE.error(e)},_l=function(...n){const e=`FIREBASE FATAL ERROR: ${HS(...n)}`;throw YE.error(e),new Error(e)},so=function(...n){const e="FIREBASE WARNING: "+HS(...n);YE.warn(e)},CM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ug="[MIN_NAME]",Eh="[MAX_NAME]",Oy=function(n,e){if(n===e)return 0;if(n===ug||e===Eh)return-1;if(e===ug||n===Eh)return 1;{const t=rJ(n),r=rJ(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},h_e=function(n,e){return n===e?0:n<e?-1:1},zS=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},M$=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=M$(n[e[r]]);return t+="}",t},tJ=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ys(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const nJ=function(n){(0,z.hu)(!CM(n),"Invalid JSON number");const r=1023;let i,s,o,d,f;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,o=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const g=[];for(f=52;f;f-=1)g.push(o%2?1:0),o=Math.floor(o/2);for(f=11;f;f-=1)g.push(s%2?1:0),s=Math.floor(s/2);g.push(i?1:0),g.reverse();const y=g.join("");let E="";for(f=0;f<64;f+=8){let b=parseInt(y.substr(f,8),2).toString(16);1===b.length&&(b="0"+b),E+=b}return E.toLowerCase()},m_e=new RegExp("^-?(0*)\\d{1,10}$"),rJ=function(n){if(m_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},QE=function(n){try{n()}catch(e){setTimeout(()=>{throw so("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},WS=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class I_e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){so(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class E_e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(_s("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',so(e)}}let ZS=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const uJ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dJ="websocket",hJ="long_polling";class L${constructor(e,t,r,i,s=!1,o="",d=!1,f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ky.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ky.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function fJ(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===dJ)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==hJ)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function w_e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ys(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class T_e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const F$={},V$={};function U$(n){const e=n.toString();return F$[e]||(F$[e]=new T_e),F$[e]}class A_e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&QE(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cg{constructor(e,t,r,i,s,o,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qS(e),this.stats_=U$(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),fJ(t,hJ,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new A_e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new B$((...s)=>{const[o,d,f,g,y]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=d,this.password=f;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&uJ.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cg.forceAllow_=!0}static forceDisallow(){cg.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!cg.forceAllow_&&(cg.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=tJ(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class B${constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=QQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=B$.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){_s("frame writing exception"),d.stack&&_s(d.stack),_s(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_s("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{_s("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let bM=null;typeof MozWebSocket<"u"?bM=MozWebSocket:typeof WebSocket<"u"&&(bM=WebSocket);let JE=(()=>{class n{constructor(t,r,i,s,o,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qS(this.connId),this.stats_=U$(r),this.connURL=n.connectionURL_(r,d,f,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const d={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&uJ.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),o&&(d.p=o),fJ(t,dJ,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ky.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${P$}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,d=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new bM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==bM&&!n.forceDisallow_}static previouslyFailed(){return ky.isInMemoryStorage||!0===ky.get("previous_websocket_failure")}markConnectionHealthy(){ky.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=tJ(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),IJ=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cg,JE]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=JE&&JE.isAvailable();let i=r&&!JE.previouslyFailed();if(t.webSocketOnly&&(r||so("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[JE];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class SJ{constructor(e,t,r,i,s,o,d,f,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=f,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qS("c:"+this.id+":"),this.transportManager_=new IJ(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=WS(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=zS("t",e),r=zS("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=zS("t",e),r=zS("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=zS("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?k$("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k$("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&so("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),WS(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):WS(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ky.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class DJ{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class RJ{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class SM extends RJ{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new SM}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kn(){return new Vn("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function lg(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Vn(n.pieces_,e)}function $$(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function KS(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function NJ(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Vn(e,0)}function Pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Vn(t,0)}function hn(n){return n.pieceNum_>=n.pieces_.length}function To(n,e){const t=dn(n),r=dn(e);if(null===t)return e;if(t===r)return To(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function G$(n,e){if(lg(n)!==lg(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function hu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(lg(n)>lg(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Z_e{constructor(e,t){this.errorPrefix_=t,this.parts_=KS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);kJ(this)}}function kJ(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ly(n))}function Ly(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class H$ extends RJ{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new H$}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const YS=1e3;let RM,Fy=(()=>{class n extends DJ{constructor(t,r,i,s,o,d,f,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=g,this.id=n.nextPersistentConnectionId_++,this.log_=qS("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=YS,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");H$.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&SM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,z.Wl)(o)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new z.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+o),this.listens.has(d)||this.listens.set(d,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(d).has(o),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(o,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,f=>{const g=f.d,y=f.s;n.warnOnListenWarnings_(g,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",f),"ok"!==y&&this.removeListen_(i,s),t.onComplete&&t.onComplete(y,g))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();so(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,d=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const d={p:r,d:i};void 0!==o&&(d.h=o),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):k$("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=YS),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,j.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,g=null;const y=function(){g?g.close():(f=!0,s())};t.realtime_={close:y,sendRequest:function(R){(0,z.hu)(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(R)}};const b=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,V]=yield Promise.all([t.authTokenProvider_.getToken(b),t.appCheckTokenProvider_.getToken(b)]);f?_s("getToken() completed but was canceled"):(_s("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=V&&V.token,g=new SJ(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,q=>{so(q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(R){t.log_("Failed to get token: "+R),f||(t.repoInfo_.nodeAdmin&&so(R),y())}}})()}interrupt(t){_s("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_s("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>M$(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Vn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){_s("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){_s("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+P$.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=SM.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class pn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new pn(e,t)}}class DM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new pn(ug,e),i=new pn(ug,t);return 0!==this.compare(r,i)}minPost(){return pn.MIN}}class LJ extends DM{static get __EMPTY_NODE(){return RM}static set __EMPTY_NODE(e){RM=e}compare(e,t){return Oy(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return pn.MIN}maxPost(){return new pn(Eh,RM)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new pn(e,RM)}toString(){return".key"}}const yl=new LJ;class xM{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let z$,Ku=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??qo.EMPTY_NODE,this.right=o??qo.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return qo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class qo{constructor(e,t=qo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new qo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ku.BLACK,null,null))}remove(e){return new qo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ku.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xM(this.root_,null,this.comparator_,!0,e)}}function nye(n,e){return Oy(n.name,e.name)}function q$(n,e){return Oy(n,e)}qo.EMPTY_NODE=new class tye{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ku(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const FJ=function(n){return"number"==typeof n?"number:"+nJ(n):"string:"+n},VJ=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===z$||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===z$||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let UJ,BJ,jJ,XE=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),VJ(this.priorityNode_)}static set __childrenNodeConstructor(t){UJ=t}static get __childrenNodeConstructor(){return UJ}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return hn(t)?this:".priority"===dn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=dn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===lg(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+FJ(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?nJ(this.value_):this.value_,this.lazyHash_=JQ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(s>=0,"Unknown leaf type: "+r),(0,z.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ur=new class oye extends DM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Oy(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return pn.MIN}maxPost(){return new pn(Eh,new XE("[PRIORITY-POST]",jJ))}makePost(e,t){const r=BJ(e);return new pn(t,new XE("[PRIORITY-POST]",r))}toString(){return".priority"}},aye=Math.log(2);class uye{constructor(e){this.count=parseInt(Math.log(e+1)/aye,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const PM=function(n,e,t,r){n.sort(e);const i=function(f,g){const y=g-f;let E,b;if(0===y)return null;if(1===y)return E=n[f],b=t?t(E):E,new Ku(b,E.node,Ku.BLACK,null,null);{const R=parseInt(y/2,10)+f,V=i(f,R),q=i(R+1,g);return E=n[R],b=t?t(E):E,new Ku(b,E.node,Ku.BLACK,V,q)}},d=function(f){let g=null,y=null,E=n.length;const b=function(V,q){const Z=E-V,fe=E;E-=V;const Se=i(Z+1,fe),ye=n[Z],Le=t?t(ye):ye;R(new Ku(Le,ye.node,q,null,Se))},R=function(V){g?(g.left=V,g=V):(y=V,g=V)};for(let V=0;V<f.count;++V){const q=f.nextBitIsOne(),Z=Math.pow(2,f.count-(V+1));q?b(Z,Ku.BLACK):(b(Z,Ku.BLACK),b(Z,Ku.RED))}return y}(new uye(n.length));return new qo(r||e,d)};let W$;const ew={};class wh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(ew&&ur,"ChildrenNode.ts has not been loaded"),W$=W$||new wh({".priority":ew},{".priority":ur}),W$}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qo?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==yl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(pn.Wrap);let d,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();d=i?PM(r,e.getCompare()):ew;const f=e.toString(),g=Object.assign({},this.indexSet_);g[f]=e;const y=Object.assign({},this.indexes_);return y[f]=d,new wh(y,g)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,s)=>{const o=(0,z.DV)(this.indexSet_,s);if((0,z.hu)(o,"Missing index implementation for "+s),i===ew){if(o.isDefinedOn(e.node)){const d=[],f=t.getIterator(pn.Wrap);let g=f.getNext();for(;g;)g.name!==e.name&&d.push(g),g=f.getNext();return d.push(e),PM(d,o.getCompare())}return ew}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new pn(e.name,d))),f.insert(e,e.node)}});return new wh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===ew)return i;{const s=t.get(e.name);return s?i.remove(new pn(e.name,s)):i}});return new wh(r,this.indexSet_)}}let QS,nn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&VJ(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return QS||(QS=new n(new qo(q$),null,wh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||QS}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?QS:r}}getChild(t){const r=dn(t);return null===r?this:this.getImmediateChild(r).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new pn(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?QS:this.priorityNode_;return new n(s,d,o)}}updateChild(t,r){const i=dn(t);if(null===i)return r;{(0,z.hu)(".priority"!==dn(t)||1===lg(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Yn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(ur,(d,f)=>{r[d]=f.val(t),i++,o&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):o=!1}),!t&&o&&s<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+FJ(this.getPriority().val())+":"),this.forEachChild(ur,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":JQ(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new pn(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new pn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new pn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,pn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,pn.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===JS?-1:0}withIndex(t){if(t===yl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===yl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ur),s=r.getIterator(ur);let o=i.getNext(),d=s.getNext();for(;o&&d;){if(o.name!==d.name||!o.node.equals(d.node))return!1;o=i.getNext(),d=s.getNext()}return null===o&&null===d}return!1}return!1}}resolveIndex_(t){return t===yl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const JS=new class cye extends nn{constructor(){super(new qo(q$),nn.EMPTY_NODE,wh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(pn,{MIN:{value:new pn(ug,nn.EMPTY_NODE)},MAX:{value:new pn(Eh,JS)}}),LJ.__EMPTY_NODE=nn.EMPTY_NODE,XE.__childrenNodeConstructor=nn,function rye(n){z$=n}(JS),function sye(n){jJ=n}(JS);const lye=!0;function jr(n,e=null){if(null===n)return nn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new XE(n,jr(e));if(n instanceof Array||!lye){let t=nn.EMPTY_NODE;return ys(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const s=jr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(jr(e))}{const t=[];let r=!1;if(ys(n,(o,d)=>{if("."!==o.substring(0,1)){const f=jr(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new pn(o,f)))}}),0===t.length)return nn.EMPTY_NODE;const s=PM(t,nye,o=>o.name,q$);if(r){const o=PM(t,ur.getCompare());return new nn(s,jr(e),new wh({".priority":o},{".priority":ur}))}return new nn(s,jr(e),wh.Default)}}!function iye(n){BJ=n}(jr);class Z$ extends DM{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!hn(e)&&".priority"!==dn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Oy(e.name,t.name):s}makePost(e,t){const r=jr(e),i=nn.EMPTY_NODE.updateChild(this.indexPath_,r);return new pn(t,i)}maxPost(){const e=nn.EMPTY_NODE.updateChild(this.indexPath_,JS);return new pn(Eh,e)}toString(){return KS(this.indexPath_,0).join("/")}}const K$=new class dye extends DM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Oy(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return pn.MIN}maxPost(){return pn.MAX}makePost(e,t){const r=jr(e);return new pn(t,r)}toString(){return".value"}};function eD(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Q${constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ug}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new Q$;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function GJ(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ur?t="$priority":n.index_===K$?t="$value":n.index_===yl?t="$key":((0,z.hu)(n.index_ instanceof Z$,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function HJ(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ur&&(e.i=n.index_.toString()),e}class kM extends DJ{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=qS("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=kM.getListenId_(e,r),d={};this.listens_[o]=d;const f=GJ(e._queryParams);this.restRequest_(s+".json",f,(g,y)=>{let E=y;if(404===g&&(E=null,g=null),null===g&&this.onDataUpdate_(s,E,!1,r),(0,z.DV)(this.listens_,o)===d){let b;b=g?401===g?"permission_denied":"rest_error:"+g:"ok",i(b,null)}})}unlisten(e,t){const r=kM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=GJ(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(s,o)=>{let d=o;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,z.cI)(d.responseText)}catch{so("Failed to parse JSON response for "+o+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&so("Got unsuccessful REST response for "+o+" Status: "+d.status),r(d.status);r=null}},d.open("GET",o,!0),d.send()})}}class vye{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MM(){return{value:null,children:new Map}}function nw(n,e,t){if(hn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=dn(e);n.children.has(r)||n.children.set(r,MM()),nw(n.children.get(r),e=Yn(e),t)}}function tG(n,e,t){null!==n.value?t(e,n.value):function Iye(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tG(i,new Vn(e.toString()+"/"+r),t)})}class Eye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ys(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Cye{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Eye(e);const r=1e4+2e4*Math.random();WS(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ys(e,(i,s)=>{s>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),WS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(vl||{});function iG(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class OM{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=vl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(hn(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Vn(e));return new OM(kn(),t,this.revert)}}return(0,z.hu)(dn(this.path)===e,"operationForChild called for unrelated child."),new OM(Yn(this.path),this.affectedTree,this.revert)}}class Vy{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=vl.OVERWRITE}operationForChild(e){return hn(this.path)?new Vy(this.source,kn(),this.snap.getImmediateChild(e)):new Vy(this.source,Yn(this.path),this.snap)}}class rw{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=vl.MERGE}operationForChild(e){if(hn(this.path)){const t=this.children.subtree(new Vn(e));return t.isEmpty()?null:t.value?new Vy(this.source,kn(),t.value):new rw(this.source,kn(),t)}return(0,z.hu)(dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rw(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dg{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(hn(e))return this.isFullyInitialized()&&!this.filtered_;const t=dn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function rD(n,e,t,r,i,s){const o=r.filter(d=>d.type===t);o.sort((d,f)=>function Dye(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new pn(e.childName,e.snapshotNode),i=new pn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),o.forEach(d=>{const f=function Sye(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(f,n.query_))})})}function LM(n,e){return{eventCache:n,serverCache:e}}function iD(n,e,t,r){return LM(new dg(e,t,r),n.serverCache)}function zJ(n,e,t,r){return LM(n.eventCache,new dg(e,t,r))}function FM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Uy(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sG;class cr{constructor(e,t=(()=>(sG||(sG=new qo(h_e)),sG))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return ys(e,(r,i)=>{t=t.set(new Vn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kn(),value:this.value};if(hn(e))return null;{const r=dn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Yn(e),t);return null!=s?{path:Pr(new Vn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(hn(e))return this;{const t=dn(e),r=this.children.get(t);return null!==r?r.subtree(Yn(e)):new cr(null)}}set(e,t){if(hn(e))return new cr(t,this.children);{const r=dn(e),s=(this.children.get(r)||new cr(null)).set(Yn(e),t),o=this.children.insert(r,s);return new cr(this.value,o)}}remove(e){if(hn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=dn(e),r=this.children.get(t);if(r){const i=r.remove(Yn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new cr(null):new cr(this.value,s)}return this}}get(e){if(hn(e))return this.value;{const t=dn(e),r=this.children.get(t);return r?r.get(Yn(e)):null}}setTree(e,t){if(hn(e))return t;{const r=dn(e),s=(this.children.get(r)||new cr(null)).setTree(Yn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new cr(this.value,o)}}fold(e){return this.fold_(kn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,kn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(hn(e))return null;{const s=dn(e),o=this.children.get(s);return o?o.findOnPath_(Yn(e),Pr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kn(),t)}foreachOnPath_(e,t,r){if(hn(e))return this;{this.value&&r(t,this.value);const i=dn(e),s=this.children.get(i);return s?s.foreachOnPath_(Yn(e),Pr(t,i),r):new cr(null)}}foreach(e){this.foreach_(kn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Yu{constructor(e){this.writeTree_=e}static empty(){return new Yu(new cr(null))}}function sD(n,e,t){if(hn(e))return new Yu(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=To(i,e);return s=s.updateChild(o,t),new Yu(n.writeTree_.set(i,s))}{const i=new cr(t),s=n.writeTree_.setTree(e,i);return new Yu(s)}}}function oG(n,e,t){let r=n;return ys(t,(i,s)=>{r=sD(r,Pr(e,i),s)}),r}function WJ(n,e){if(hn(e))return Yu.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new Yu(t)}}function aG(n,e){return null!=By(n,e)}function By(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(To(t.path,e)):null}function ZJ(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ur,(r,i)=>{e.push(new pn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new pn(r,i.value))}),e}function hg(n,e){if(hn(e))return n;{const t=By(n,e);return new Yu(null!=t?new cr(t):n.writeTree_.subtree(e))}}function uG(n){return n.writeTree_.isEmpty()}function iw(n,e){return KJ(kn(),n.writeTree_,e)}function KJ(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,z.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=KJ(Pr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Pr(n,".priority"),r)),t}}function VM(n,e){return eX(e,n)}function Mye(n,e){if(n.snap)return hu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&hu(Pr(n.path,t),e))return!0;return!1}function Lye(n){return n.visible}function YJ(n,e,t){let r=Yu.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let d;if(s.snap)hu(t,o)?(d=To(t,o),r=sD(r,d,s.snap)):hu(o,t)&&(d=To(o,t),r=sD(r,kn(),s.snap.getChild(d)));else{if(!s.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(hu(t,o))d=To(t,o),r=oG(r,d,s.children);else if(hu(o,t))if(d=To(o,t),hn(d))r=oG(r,kn(),s.children);else{const f=(0,z.DV)(s.children,dn(d));if(f){const g=f.getChild(Yn(d));r=sD(r,kn(),g)}}}}}return r}function QJ(n,e,t,r,i){if(r||i){const s=hg(n.visibleWrites,e);return!i&&uG(s)?t:i||null!=t||aG(s,kn())?iw(YJ(n.allWrites,function(g){return(g.visible||i)&&(!r||!~r.indexOf(g.writeId))&&(hu(g.path,e)||hu(e,g.path))},e),t||nn.EMPTY_NODE):null}{const s=By(n.visibleWrites,e);if(null!=s)return s;{const o=hg(n.visibleWrites,e);return uG(o)?t:null!=t||aG(o,kn())?iw(o,t||nn.EMPTY_NODE):null}}}function UM(n,e,t,r){return QJ(n.writeTree,n.treePath,e,t,r)}function cG(n,e){return function Fye(n,e,t){let r=nn.EMPTY_NODE;const i=By(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=hg(n.visibleWrites,e);return t.forEachChild(ur,(o,d)=>{const f=iw(hg(s,new Vn(o)),d);r=r.updateImmediateChild(o,f)}),ZJ(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return ZJ(hg(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function JJ(n,e,t,r){return function Vye(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Pr(e,t);if(aG(n.visibleWrites,s))return null;{const o=hg(n.visibleWrites,s);return uG(o)?i.getChild(t):iw(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function BM(n,e){return function Bye(n,e){return By(n.visibleWrites,e)}(n.writeTree,Pr(n.treePath,e))}function lG(n,e,t){return function Uye(n,e,t,r){const i=Pr(e,t),s=By(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?iw(hg(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function XJ(n,e){return eX(Pr(n.treePath,e),n.writeTree)}function eX(n,e){return{treePath:n,writeTree:e}}class Hye{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,eD(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function XS(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function tw(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,eD(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const tX=new class qye{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dG{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lG(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Uy(this.viewCache_),s=function Gye(n,e,t,r,i,s){return function jye(n,e,t,r,i,s,o){let d;const f=hg(n.visibleWrites,e),g=By(f,kn());if(null!=g)d=g;else{if(null==t)return[];d=iw(f,t)}if(d=d.withIndex(o),d.isEmpty()||d.isLeafNode())return[];{const y=[],E=o.getCompare(),b=s?d.getReverseIteratorFrom(r,o):d.getIteratorFrom(r,o);let R=b.getNext();for(;R&&y.length<i;)0!==E(R,r)&&y.push(R),R=b.getNext();return y}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function nX(n,e,t,r,i,s){const o=e.eventCache;if(null!=BM(r,t))return e;{let d,f;if(hn(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Uy(e),E=cG(r,g instanceof nn?g:nn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),E,s)}else{const g=UM(r,Uy(e));d=n.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const g=dn(t);if(".priority"===g){(0,z.hu)(1===lg(t),"Can't have a priority with additional path components");const y=o.getNode();f=e.serverCache.getNode();const E=JJ(r,t,y,f);d=null!=E?n.filter.updatePriority(y,E):o.getNode()}else{const y=Yn(t);let E;if(o.isCompleteForChild(g)){f=e.serverCache.getNode();const b=JJ(r,t,o.getNode(),f);E=null!=b?o.getNode().getImmediateChild(g).updateChild(y,b):o.getNode().getImmediateChild(g)}else E=lG(r,g,e.serverCache);d=null!=E?n.filter.updateChild(o.getNode(),g,E,y,i,s):o.getNode()}}return iD(e,d,o.isFullyInitialized()||hn(t),n.filter.filtersNodes())}}function jM(n,e,t,r,i,s,o,d){const f=e.serverCache;let g;const y=o?n.filter:n.filter.getIndexedFilter();if(hn(t))g=y.updateFullNode(f.getNode(),r,null);else if(y.filtersNodes()&&!f.isFiltered()){const R=f.getNode().updateChild(t,r);g=y.updateFullNode(f.getNode(),R,null)}else{const R=dn(t);if(!f.isCompleteForPath(t)&&lg(t)>1)return e;const V=Yn(t),Z=f.getNode().getImmediateChild(R).updateChild(V,r);g=".priority"===R?y.updatePriority(f.getNode(),Z):y.updateChild(f.getNode(),R,Z,V,tX,null)}const E=zJ(e,g,f.isFullyInitialized()||hn(t),y.filtersNodes());return nX(n,E,t,i,new dG(i,E,s),d)}function hG(n,e,t,r,i,s,o){const d=e.eventCache;let f,g;const y=new dG(i,e,s);if(hn(t))g=n.filter.updateFullNode(e.eventCache.getNode(),r,o),f=iD(e,g,!0,n.filter.filtersNodes());else{const E=dn(t);if(".priority"===E)g=n.filter.updatePriority(e.eventCache.getNode(),r),f=iD(e,g,d.isFullyInitialized(),d.isFiltered());else{const b=Yn(t),R=d.getNode().getImmediateChild(E);let V;if(hn(b))V=r;else{const q=y.getCompleteChild(E);V=null!=q?".priority"===$$(b)&&q.getChild(NJ(b)).isEmpty()?q:q.updateChild(b,r):nn.EMPTY_NODE}f=R.equals(V)?e:iD(e,n.filter.updateChild(d.getNode(),E,V,b,y,o),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function rX(n,e){return n.eventCache.isCompleteForChild(e)}function iX(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fG(n,e,t,r,i,s,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g,f=e;g=hn(t)?r:new cr(null).setTree(t,r);const y=e.serverCache.getNode();return g.children.inorderTraversal((E,b)=>{if(y.hasChild(E)){const V=iX(0,e.serverCache.getNode().getImmediateChild(E),b);f=jM(n,f,new Vn(E),V,i,s,o,d)}}),g.children.inorderTraversal((E,b)=>{const R=!e.serverCache.isCompleteForChild(E)&&null===b.value;if(!y.hasChild(E)&&!R){const q=iX(0,e.serverCache.getNode().getImmediateChild(E),b);f=jM(n,f,new Vn(E),q,i,s,o,d)}}),f}function rve(n,e){const t=Uy(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!hn(e)&&!t.getImmediateChild(dn(e)).isEmpty())?t.getChild(e):null}function aX(n,e,t,r){e.type===vl.MERGE&&null!==e.source.queryId&&((0,z.hu)(Uy(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(FM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Zye(n,e,t,r,i){const s=new Hye;let o,d;if(t.type===vl.OVERWRITE){const g=t;g.source.fromUser?o=hG(n,e,g.path,g.snap,r,i,s):((0,z.hu)(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!hn(g.path),o=jM(n,e,g.path,g.snap,r,i,d,s))}else if(t.type===vl.MERGE){const g=t;g.source.fromUser?o=function Yye(n,e,t,r,i,s,o){let d=e;return r.foreach((f,g)=>{const y=Pr(t,f);rX(e,dn(y))&&(d=hG(n,d,y,g,i,s,o))}),r.foreach((f,g)=>{const y=Pr(t,f);rX(e,dn(y))||(d=hG(n,d,y,g,i,s,o))}),d}(n,e,g.path,g.children,r,i,s):((0,z.hu)(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),o=fG(n,e,g.path,g.children,r,i,d,s))}else if(t.type===vl.ACK_USER_WRITE){const g=t;o=g.revert?function Xye(n,e,t,r,i,s){let o;if(null!=BM(r,t))return e;{const d=new dG(r,e,i),f=e.eventCache.getNode();let g;if(hn(t)||".priority"===dn(t)){let y;if(e.serverCache.isFullyInitialized())y=UM(r,Uy(e));else{const E=e.serverCache.getNode();(0,z.hu)(E instanceof nn,"serverChildren would be complete if leaf node"),y=cG(r,E)}g=n.filter.updateFullNode(f,y,s)}else{const y=dn(t);let E=lG(r,y,e.serverCache);null==E&&e.serverCache.isCompleteForChild(y)&&(E=f.getImmediateChild(y)),g=null!=E?n.filter.updateChild(f,y,E,Yn(t),d,s):e.eventCache.getNode().hasChild(y)?n.filter.updateChild(f,y,nn.EMPTY_NODE,Yn(t),d,s):f,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=UM(r,Uy(e)),o.isLeafNode()&&(g=n.filter.updateFullNode(g,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=BM(r,kn()),iD(e,g,o,n.filter.filtersNodes())}}(n,e,g.path,r,i,s):function Qye(n,e,t,r,i,s,o){if(null!=BM(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(hn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return jM(n,e,t,f.getNode().getChild(t),i,s,d,o);if(hn(t)){let g=new cr(null);return f.getNode().forEachChild(yl,(y,E)=>{g=g.set(new Vn(y),E)}),fG(n,e,t,g,i,s,d,o)}return e}{let g=new cr(null);return r.foreach((y,E)=>{const b=Pr(t,y);f.isCompleteForPath(b)&&(g=g.set(y,f.getNode().getChild(b)))}),fG(n,e,t,g,i,s,d,o)}}(n,e,g.path,g.affectedTree,r,i,s)}else{if(t.type!==vl.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);o=function Jye(n,e,t,r,i){const s=e.serverCache;return nX(n,zJ(e,s.getNode(),s.isFullyInitialized()||hn(t),s.isFiltered()),t,r,tX,i)}(n,e,t.path,r,s)}const f=s.getChanges();return function Kye(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=FM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function $J(n){return{type:"value",snapshotNode:n}}(FM(e)))}}(e,o,f),{viewCache:o,changes:f}}(n.processor_,i,e,t,r);return function Wye(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,z.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function uX(n,e,t,r){return function bye(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function hye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),rD(n,i,"child_removed",e,r,t),rD(n,i,"child_added",e,r,t),rD(n,i,"child_moved",s,r,t),rD(n,i,"child_changed",e,r,t),rD(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let $M,HM;function pG(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,z.hu)(null!=s,"SyncTree gave us an op for an invalid query."),aX(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(aX(o,e,t,r));return s}}function fg(n,e){let t=null;for(const r of n.views.values())t=t||rve(r,e);return t}class pX{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function $ye(){return{visibleWrites:Yu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gG(n,e,t,r,i){return function xye(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sD(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sw(n,new Vy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gg(n,e,t=!1){const r=function Nye(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function kye(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const d=n.allWrites[o];d.visible&&(o>=t&&Mye(d,r.path)?i=!1:hu(r.path,d.path)&&(s=!0)),o--}return!!i&&(s?(function Oye(n){n.visibleWrites=YJ(n.allWrites,Lye,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=WJ(n.visibleWrites,r.path):ys(r.children,f=>{n.visibleWrites=WJ(n.visibleWrites,Pr(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new cr(null);return null!=r.snap?s=s.set(kn(),!0):ys(r.children,o=>{s=s.set(new Vn(o),!0)}),sw(n,new OM(r.path,s,t))}return[]}function oD(n,e,t){return sw(n,new Vy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function zM(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,d)=>{const g=fg(d,To(o,e));if(g)return g});return QJ(i,e,s,t,!0)}function sw(n,e){return mX(e,n.syncPointTree_,null,VM(n.pendingWriteTree_,kn()))}function mX(n,e,t,r){if(hn(n.path))return _X(n,e,t,r);{const i=e.get(kn());null==t&&null!=i&&(t=fg(i,kn()));let s=[];const o=dn(n.path),d=n.operationForChild(o),f=e.children.get(o);if(f&&d){const g=t?t.getImmediateChild(o):null,y=XJ(r,o);s=s.concat(mX(d,f,g,y))}return i&&(s=s.concat(pG(i,n,r,t))),s}}function _X(n,e,t,r){const i=e.get(kn());null==t&&null!=i&&(t=fg(i,kn()));let s=[];return e.children.inorderTraversal((o,d)=>{const f=t?t.getImmediateChild(o):null,g=XJ(r,o),y=n.operationForChild(o);y&&(s=s.concat(_X(y,d,f,g)))}),i&&(s=s.concat(pG(i,n,r,t))),s}function _G(n,e){return n.tagToQueryMap.get(e)}function yG(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Vn(n.substr(0,e))}}function vG(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),pG(r,t,VM(n.pendingWriteTree_,e),null)}class IG{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new IG(t)}node(){return this.node_}}class EG{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Pr(this.path_,e);return new EG(this.syncTree_,t)}node(){return zM(this.syncTree_,this.path_)}}const Cve=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},vX=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ave(n[".sv"],e,t):"object"==typeof n[".sv"]?bve(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ave=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},bve=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},IX=function(n,e,t,r){return TG(e,new EG(t,n),r)},wG=function(n,e,t){return TG(n,new IG(e),t)};function TG(n,e,t){const r=n.getPriority().val(),i=vX(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,d=vX(o.getValue(),e,t);return d!==o.getValue()||i!==o.getPriority().val()?new XE(d,jr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new XE(i))),o.forEachChild(ur,(d,f)=>{const g=TG(f,e.getImmediateChild(d),t);g!==f&&(s=s.updateImmediateChild(d,g))}),s}}class CG{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ZM(n,e){let t=e instanceof Vn?e:new Vn(e),r=n,i=dn(t);for(;null!==i;){const s=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new CG(i,r,s),t=Yn(t),i=dn(t)}return r}function jy(n){return n.node.value}function AG(n,e){n.node.value=e,bG(n)}function EX(n){return n.node.childCount>0}function KM(n,e){ys(n.node.children,(t,r)=>{e(new CG(t,n,r))})}function wX(n,e,t,r){t&&!r&&e(n),KM(n,i=>{wX(i,e,!0,r)}),t&&r&&e(n)}function cD(n){return new Vn(null===n.parent?n.name:cD(n.parent)+"/"+n.name)}function bG(n){null!==n.parent&&function Rve(n,e,t){const r=function Sve(n){return void 0===jy(n)&&!EX(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bG(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bG(n))}(n.parent,n.name,n)}const xve=/[\[\].#$\/\u0000-\u001F\u007F]/,Pve=/[\[\].#$\u0000-\u001F\u007F]/,SG=10485760,YM=function(n){return"string"==typeof n&&0!==n.length&&!xve.test(n)},dD=function(n,e,t){const r=t instanceof Vn?new Z_e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ly(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ly(r)+" with contents = "+e.toString());if(CM(e))throw new Error(n+"contains "+e.toString()+" "+Ly(r));if("string"==typeof e&&e.length>SG/3&&(0,z.ug)(e)>SG)throw new Error(n+"contains a string greater than "+SG+" utf8 bytes "+Ly(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ys(e,(o,d)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!YM(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ly(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function K_e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),kJ(n)})(r,o),dD(n,d,r),function Y_e(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ly(r)+" in addition to actual children.")}},AX=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!YM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Pve.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ove{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sa(n,e,t){(function QM(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!G$(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function SX(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Lve(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>hu(r,e)||hu(e,r))}function Lve(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();My&&_s("event: "+t.toString()),QE(r)}}}const Fve=25;class Vve{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ove,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MM(),this.transactionQueueTree_=new CG,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RX(n){const t=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fD(n){return Cve({timestamp:RX(n)})}function xX(n,e,t,r,i){n.dataUpdateCount++;const s=new Vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const f=(0,z.UI)(t,g=>jr(g));o=function yve(n,e,t,r){const i=_G(n,r);if(i){const s=yG(i),o=s.path,d=s.queryId,f=To(o,e),g=cr.fromObject(t);return vG(n,o,new rw(iG(d),f,g))}return[]}(n.serverSyncTree_,s,f,i)}else{const f=jr(t);o=function gX(n,e,t,r){const i=_G(n,r);if(null!=i){const s=yG(i),o=s.path,d=s.queryId,f=To(o,e);return vG(n,o,new Vy(iG(d),f,t))}return[]}(n.serverSyncTree_,s,f,i)}else if(r){const f=(0,z.UI)(t,g=>jr(g));o=function gve(n,e,t){const r=cr.fromObject(t);return sw(n,new rw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,f)}else{const f=jr(t);o=oD(n.serverSyncTree_,s,f)}let d=s;o.length>0&&(d=aw(n,s)),Sa(n.eventQueue_,d,o)}function PX(n,e){xG(n,"connected",e),!1===e&&function Gve(n){ow(n,"onDisconnectEvents");const e=fD(n),t=MM();tG(n.onDisconnect_,kn(),(i,s)=>{const o=IX(i,s,n.serverSyncTree_,e);nw(t,i,o)});let r=[];tG(t,kn(),(i,s)=>{r=r.concat(oD(n.serverSyncTree_,i,s));const o=function MG(n,e){const t=cD(MX(n,e)),r=ZM(n.transactionQueueTree_,e);return function Dve(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{OG(n,i)}),OG(n,r),wX(r,i=>{OG(n,i)}),t}(n,i);aw(n,o)}),n.onDisconnect_=MM(),Sa(n.eventQueue_,kn(),r)}(n)}function xG(n,e,t){const r=new Vn("/.info/"+e),i=jr(t);n.infoData_.updateSnapshot(r,i);const s=oD(n.infoSyncTree_,r,i);Sa(n.eventQueue_,r,s)}function JM(n){return n.nextWriteId_++}function ow(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_s(t,...e)}function kG(n,e,t){return zM(n.serverSyncTree_,e,t)||nn.EMPTY_NODE}function XM(n,e=n.transactionQueueTree_){if(e||eO(n,e),jy(e)){const t=OX(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Yve(n,e,t){const r=t.map(g=>g.currentWriteId),i=kG(n,e,r);let s=i;const o=i.hash();for(let g=0;g<t.length;g++){const y=t[g];(0,z.hu)(0===y.status,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=To(e,y.path);s=s.updateChild(E,y.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,g=>{ow(n,"transaction put response",{path:f.toString(),status:g});let y=[];if("ok"===g){const E=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(gg(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&E.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();eO(n,ZM(n.transactionQueueTree_,e)),XM(n,n.transactionQueueTree_),Sa(n.eventQueue_,e,y);for(let b=0;b<E.length;b++)QE(E[b])}else{if("datastale"===g)for(let E=0;E<t.length;E++)t[E].status=3===t[E].status?4:0;else{so("transaction at "+f.toString()+" failed: "+g);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=g}aw(n,e)}},o)}(n,cD(e),t)}else EX(e)&&KM(e,t=>{XM(n,t)})}function aw(n,e){const t=MX(n,e),r=cD(t);return function Qve(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],g=To(t,f.path);let E,y=!1;if((0,z.hu)(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)y=!0,E=f.abortReason,i=i.concat(gg(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=Fve)y=!0,E="maxretry",i=i.concat(gg(n.serverSyncTree_,f.currentWriteId,!0));else{const b=kG(n,f.path,o);f.currentInputSnapshot=b;const R=e[d].update(b.val());if(void 0!==R){dD("transaction failed: Data returned ",R,f.path);let V=jr(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(V=V.updatePriority(b.getPriority()));const Z=f.currentWriteId,fe=fD(n),Se=wG(V,b,fe);f.currentOutputSnapshotRaw=V,f.currentOutputSnapshotResolved=Se,f.currentWriteId=JM(n),o.splice(o.indexOf(Z),1),i=i.concat(gG(n.serverSyncTree_,f.path,Se,f.currentWriteId,f.applyLocally)),i=i.concat(gg(n.serverSyncTree_,Z,!0))}else y=!0,E="nodata",i=i.concat(gg(n.serverSyncTree_,f.currentWriteId,!0))}Sa(n.eventQueue_,t,i),i=[],y&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===E?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(E),!1,null)))}eO(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)QE(r[d]);XM(n,n.transactionQueueTree_)}(n,OX(n,t),r),r}function MX(n,e){let t,r=n.transactionQueueTree_;for(t=dn(e);null!==t&&void 0===jy(r);)r=ZM(r,t),t=dn(e=Yn(e));return r}function OX(n,e){const t=[];return LX(n,e,t),t.sort((r,i)=>r.order-i.order),t}function LX(n,e,t){const r=jy(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);KM(e,i=>{LX(n,i,t)})}function eO(n,e){const t=jy(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,AG(e,t.length>0?t:void 0)}KM(e,r=>{eO(n,r)})}function OG(n,e){const t=jy(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,z.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,z.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gg(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?AG(e,void 0):t.length=s+1,Sa(n.eventQueue_,cD(e),i);for(let o=0;o<r.length;o++)QE(r[o])}}const LG=function(n,e){const t=e0e(n),r=t.namespace;return"firebase.com"===t.domain&&_l(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&_l("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&so("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new L$(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Vn(t.pathString)}},e0e=function(n){let e="",t="",r="",i="",s="",o=!0,d="https",f=443;if("string"==typeof n){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");-1===y&&(y=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),e=n.substring(0,Math.min(y,E)),y<E&&(i=function Jve(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(y,E)));const b=function Xve(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):so(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,E)));g=e.indexOf(":"),g>=0?(o="https"===d||"wss"===d,f=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const V=e.indexOf(".");r=e.substring(0,V).toLowerCase(),t=e.substring(V+1),s=r}"ns"in b&&(s=b.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:o,scheme:d,pathString:i,namespace:s}};class Da{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return hn(this._path)?null:$$(this._path)}get ref(){return new Qu(this._repo,this._path)}get _queryIdentifier(){const e=HJ(this._queryParams),t=M$(e);return"{}"===t?"default":t}get _queryObject(){return HJ(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof Da))return!1;const t=this._repo===e._repo,r=G$(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function z_e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Qu extends Da{constructor(e,t){super(e,t,new Q$,!1)}get parent(){const e=NJ(this._path);return null===e?null:new Qu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function ove(n){(0,z.hu)(!$M,"__referenceConstructor has already been defined"),$M=n})(Qu),function dve(n){(0,z.hu)(!HM,"__referenceConstructor has already been defined"),HM=n}(Qu);const VG={};class I0e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Uve(n,e,t){if(n.stats_=U$(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new kM(n.repoInfo_,(r,i,s,o)=>{xX(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>PX(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fy(n.repoInfo_,e,(r,i,s,o)=>{xX(n,r,i,s,o)},r=>{PX(n,r)},r=>{!function Bve(n,e){ys(e,(t,r)=>{xG(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function C_e(n,e){const t=n.toString();return V$[t]||(V$[t]=e()),V$[t]}(n.repoInfo_,()=>new Cye(n.stats_,n.server_)),n.infoData_=new vye,n.infoSyncTree_=new pX({startListening:(r,i,s,o)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=oD(n.infoSyncTree_,r._path,f),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),xG(n,"connected",!1),n.serverSyncTree_=new pX({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(d,f)=>{const g=o(d,f);Sa(n.eventQueue_,r._path,g)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qu(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _0e(n,e){const t=VG[e];(!t||t[n.key]!==n)&&_l(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function kX(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_l("Cannot call "+e+" on a deleted database.")}}function E0e(n=(0,ct.getApp)(),e){const t=(0,ct._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function w0e(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_l("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_l('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ZS(ZS.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);s=new ZS(o)}!function g0e(n,e,t,r){n.repoInfo_=new L$(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}Fy.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fy.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function T0e(n){(function a_e(n){P$=n})(ct.SDK_VERSION),(0,ct._registerComponent)(new ai.wA("database",(e,{instanceIdentifier:t})=>function m0e(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||_l("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_s("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,g,o=LG(s,i),d=o.repoInfo;typeof process<"u"&&process.env&&(g=process.env.FIREBASE_DATABASE_EMULATOR_HOST),g?(f=!0,s=`http://${g}?ns=${d.namespace}`,o=LG(s,i),d=o.repoInfo):f=!o.repoInfo.secure;const y=i&&f?new ZS(ZS.OWNER):new E_e(n.name,n.options,e);AX("Invalid Firebase Database URL",o),hn(o.path)||_l("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function y0e(n,e,t,r){let i=VG[e.name];i||(i={},VG[e.name]=i);let s=i[n.toURLString()];return s&&_l("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Vve(n,!1,t,r),i[n.toURLString()]=s,s}(d,n,y,new I_e(n.name,t));return new I0e(E,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(ZQ,"0.14.4",n),(0,ct.registerVersion)(ZQ,"0.14.4","esm2017")}();class UG{constructor(e){return e}}const qX="database",BG=new l.OlP("angularfire2.database-instances");function D0e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new UG(r)}}const R0e={provide:class b0e{constructor(){return ub(qX)}},deps:[[new l.FiY,BG]]},x0e={provide:UG,useFactory:function S0e(n,e){const t=ab(qX,n,e);return t&&new UG(t)},deps:[[new l.FiY,BG],ng]};let P0e=(()=>{class n{constructor(){(0,ct.registerVersion)("angularfire",Pp.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[x0e,R0e]}),n})();function N0e(n,...e){return{ngModule:P0e,providers:[{provide:BG,useFactory:D0e(n),multi:!0,deps:[l.R0b,l.zs3,Np,wS,[new l.FiY,A$],[new l.FiY,by],...e]}]}}const k0e=kp(E0e,!0);class jG{constructor(e){return e}}const zX="firestore",$G=new l.OlP("angularfire2.firestore-instances");function L0e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jG(r)}}const F0e={provide:class M0e{constructor(){return ub(zX)}},deps:[[new l.FiY,$G]]},V0e={provide:jG,useFactory:function O0e(n,e){const t=ab(zX,n,e);return t&&new jG(t)},deps:[[new l.FiY,$G],ng]};let U0e=(()=>{class n{constructor(){(0,ct.registerVersion)("angularfire",Pp.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[V0e,F0e]}),n})();function B0e(n,...e){return{ngModule:U0e,providers:[{provide:$G,useFactory:L0e(n),multi:!0,deps:[l.R0b,l.zs3,Np,wS,[new l.FiY,A$],[new l.FiY,by],...e]}]}}const j0e=kp(Vue,!0);let $0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=l.oAB({type:n,bootstrap:[Kfe]});static#n=this.\u0275inj=l.cJS({providers:[WQ,S$,{provide:mo.Dh,useValue:UY.firebase}],imports:[Ol,Zfe,$v,tle(()=>nle(UY.firebase)),o_e(()=>Vme()),Mme(()=>Lme()),N0e(()=>k0e()),B0e(()=>j0e()),TO,Rfe,vfe]})}return n})();cv().bootstrapModule($0e).catch(n=>console.error(n))},7206:ze=>{"use strict";var K={single_source_shortest_paths:function(P,l,N){var D={},L={};L[l]=0;var W,ee,ne,ce,U,Q,$=K.PriorityQueue.make();for($.push(l,0);!$.empty();)for(ne in ce=(W=$.pop()).cost,U=P[ee=W.value]||{})U.hasOwnProperty(ne)&&(Q=ce+U[ne],(typeof L[ne]>"u"||L[ne]>Q)&&(L[ne]=Q,$.push(ne,Q),D[ne]=ee));if(typeof N<"u"&&typeof L[N]>"u"){var Be=["Could not find a path from ",l," to ",N,"."].join("");throw new Error(Be)}return D},extract_shortest_path_from_predecessor_list:function(P,l){for(var N=[],D=l;D;)N.push(D),D=P[D];return N.reverse(),N},find_path:function(P,l,N){var D=K.single_source_shortest_paths(P,l,N);return K.extract_shortest_path_from_predecessor_list(D,N)},PriorityQueue:{make:function(P){var D,l=K.PriorityQueue,N={};for(D in P=P||{},l)l.hasOwnProperty(D)&&(N[D]=l[D]);return N.queue=[],N.sorter=P.sorter||l.default_sorter,N},default_sorter:function(P,l){return P.cost-l.cost},push:function(P,l){this.queue.push({value:P,cost:l}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};ze.exports=K},6119:ze=>{"use strict";ze.exports=function(P){for(var l=[],N=P.length,D=0;D<N;D++){var L=P.charCodeAt(D);if(L>=55296&&L<=56319&&N>D+1){var $=P.charCodeAt(D+1);$>=56320&&$<=57343&&(L=1024*(L-55296)+$-56320+65536,D+=1)}L<128?l.push(L):L<2048?(l.push(L>>6|192),l.push(63&L|128)):L<55296||L>=57344&&L<65536?(l.push(L>>12|224),l.push(L>>6&63|128),l.push(63&L|128)):L>=65536&&L<=1114111?(l.push(L>>18|240),l.push(L>>12&63|128),l.push(L>>6&63|128),l.push(63&L|128)):l.push(239,191,189)}return new Uint8Array(l).buffer}},217:function(ze,K){var P,N;void 0!==(N="function"==typeof(P=function(){"use strict";function L(U,G,Q){var ae=new XMLHttpRequest;ae.open("GET",U),ae.responseType="blob",ae.onload=function(){ce(ae.response,G,Q)},ae.onerror=function(){console.error("could not download file")},ae.send()}function $(U){var G=new XMLHttpRequest;G.open("HEAD",U,!1);try{G.send()}catch{}return 200<=G.status&&299>=G.status}function W(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var G=document.createEvent("MouseEvents");G.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(G)}}var ee="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,ne=ee.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),ce=ee.saveAs||("object"!=typeof window||window!==ee?function(){}:"download"in HTMLAnchorElement.prototype&&!ne?function(U,G,Q){var ae=ee.URL||ee.webkitURL,ge=document.createElement("a");ge.download=G=G||U.name||"download",ge.rel="noopener","string"==typeof U?(ge.href=U,ge.origin===location.origin?W(ge):$(ge.href)?L(U,G,Q):W(ge,ge.target="_blank")):(ge.href=ae.createObjectURL(U),setTimeout(function(){ae.revokeObjectURL(ge.href)},4e4),setTimeout(function(){W(ge)},0))}:"msSaveOrOpenBlob"in navigator?function(U,G,Q){if(G=G||U.name||"download","string"!=typeof U)navigator.msSaveOrOpenBlob(function D(U,G){return typeof G>"u"?G={autoBom:!1}:"object"!=typeof G&&(console.warn("Deprecated: Expected third argument to be a object"),G={autoBom:!G}),G.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\ufeff",U],{type:U.type}):U}(U,Q),G);else if($(U))L(U,G,Q);else{var ae=document.createElement("a");ae.href=U,ae.target="_blank",setTimeout(function(){W(ae)})}}:function(U,G,Q,ae){if((ae=ae||open("","_blank"))&&(ae.document.title=ae.document.body.innerText="downloading..."),"string"==typeof U)return L(U,G,Q);var ge="application/octet-stream"===U.type,Be=/constructor/i.test(ee.HTMLElement)||ee.safari,xe=/CriOS\/[\d]+/.test(navigator.userAgent);if((xe||ge&&Be||ne)&&typeof FileReader<"u"){var _e=new FileReader;_e.onloadend=function(){var Ve=_e.result;Ve=xe?Ve:Ve.replace(/^data:[^;]*;/,"data:attachment/file;"),ae?ae.location.href=Ve:location=Ve,ae=null},_e.readAsDataURL(U)}else{var De=ee.URL||ee.webkitURL,Ue=De.createObjectURL(U);ae?ae.location=Ue:location.href=Ue,ae=null,setTimeout(function(){De.revokeObjectURL(Ue)},4e4)}});ee.saveAs=ce.saveAs=ce,ze.exports=ce})?P.apply(K,[]):P)&&(ze.exports=N)},2839:(ze,K,P)=>{const N=P(8310),D=P(6208),L=P(6422),$=P(7772);function W(ee,ne,ce,U,G){const Q=[].slice.call(arguments,1),ae=Q.length,ge="function"==typeof Q[ae-1];if(!ge&&!N())throw new Error("Callback required as last argument");if(!ge){if(ae<1)throw new Error("Too few arguments provided");return 1===ae?(ce=ne,ne=U=void 0):2===ae&&!ne.getContext&&(U=ce,ce=ne,ne=void 0),new Promise(function(Be,xe){try{const _e=D.create(ce,U);Be(ee(_e,ne,U))}catch(_e){xe(_e)}})}if(ae<2)throw new Error("Too few arguments provided");2===ae?(G=ce,ce=ne,ne=U=void 0):3===ae&&(ne.getContext&&typeof G>"u"?(G=U,U=void 0):(G=U,U=ce,ce=ne,ne=void 0));try{const Be=D.create(ce,U);G(null,ee(Be,ne,U))}catch(Be){G(Be)}}K.rT=W.bind(null,L.render),K.hz=W.bind(null,L.renderToDataURL),K.toString=W.bind(null,function(ee,ne,ce){return $.render(ee,ce)})},8310:ze=>{ze.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},5281:(ze,K,P)=>{const l=P(2562).getSymbolSize;K.getRowColCoords=function(D){if(1===D)return[];const L=Math.floor(D/7)+2,$=l(D),W=145===$?26:2*Math.ceil(($-13)/(2*L-2)),ee=[$-7];for(let ne=1;ne<L-1;ne++)ee[ne]=ee[ne-1]-W;return ee.push(6),ee.reverse()},K.getPositions=function(D){const L=[],$=K.getRowColCoords(D),W=$.length;for(let ee=0;ee<W;ee++)for(let ne=0;ne<W;ne++)0===ee&&0===ne||0===ee&&ne===W-1||ee===W-1&&0===ne||L.push([$[ee],$[ne]]);return L}},2993:(ze,K,P)=>{const l=P(1239),N=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function D(L){this.mode=l.ALPHANUMERIC,this.data=L}D.getBitsLength=function($){return 11*Math.floor($/2)+$%2*6},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function($){let W;for(W=0;W+2<=this.data.length;W+=2){let ee=45*N.indexOf(this.data[W]);ee+=N.indexOf(this.data[W+1]),$.put(ee,11)}this.data.length%2&&$.put(N.indexOf(this.data[W]),6)},ze.exports=D},6509:ze=>{function K(){this.buffer=[],this.length=0}K.prototype={get:function(P){const l=Math.floor(P/8);return 1==(this.buffer[l]>>>7-P%8&1)},put:function(P,l){for(let N=0;N<l;N++)this.putBit(1==(P>>>l-N-1&1))},getLengthInBits:function(){return this.length},putBit:function(P){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),P&&(this.buffer[l]|=128>>>this.length%8),this.length++}},ze.exports=K},5147:ze=>{function K(P){if(!P||P<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=P,this.data=new Uint8Array(P*P),this.reservedBit=new Uint8Array(P*P)}K.prototype.set=function(P,l,N,D){const L=P*this.size+l;this.data[L]=N,D&&(this.reservedBit[L]=!0)},K.prototype.get=function(P,l){return this.data[P*this.size+l]},K.prototype.xor=function(P,l,N){this.data[P*this.size+l]^=N},K.prototype.isReserved=function(P,l){return this.reservedBit[P*this.size+l]},ze.exports=K},277:(ze,K,P)=>{const l=P(6119),N=P(1239);function D(L){this.mode=N.BYTE,"string"==typeof L&&(L=l(L)),this.data=new Uint8Array(L)}D.getBitsLength=function($){return 8*$},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function(L){for(let $=0,W=this.data.length;$<W;$++)L.put(this.data[$],8)},ze.exports=D},7191:(ze,K,P)=>{const l=P(4505),N=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],D=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];K.getBlocksCount=function($,W){switch(W){case l.L:return N[4*($-1)+0];case l.M:return N[4*($-1)+1];case l.Q:return N[4*($-1)+2];case l.H:return N[4*($-1)+3];default:return}},K.getTotalCodewordsCount=function($,W){switch(W){case l.L:return D[4*($-1)+0];case l.M:return D[4*($-1)+1];case l.Q:return D[4*($-1)+2];case l.H:return D[4*($-1)+3];default:return}}},4505:(ze,K)=>{K.L={bit:1},K.M={bit:0},K.Q={bit:3},K.H={bit:2},K.isValid=function(N){return N&&typeof N.bit<"u"&&N.bit>=0&&N.bit<4},K.from=function(N,D){if(K.isValid(N))return N;try{return function P(l){if("string"!=typeof l)throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return K.L;case"m":case"medium":return K.M;case"q":case"quartile":return K.Q;case"h":case"high":return K.H;default:throw new Error("Unknown EC Level: "+l)}}(N)}catch{return D}}},5232:(ze,K,P)=>{const l=P(2562).getSymbolSize;K.getPositions=function(L){const $=l(L);return[[0,0],[$-7,0],[0,$-7]]}},8508:(ze,K,P)=>{const l=P(2562),L=l.getBCHDigit(1335);K.getEncodedBits=function(W,ee){const ne=W.bit<<3|ee;let ce=ne<<10;for(;l.getBCHDigit(ce)-L>=0;)ce^=1335<<l.getBCHDigit(ce)-L;return 21522^(ne<<10|ce)}},1674:(ze,K)=>{const P=new Uint8Array(512),l=new Uint8Array(256);(function(){let D=1;for(let L=0;L<255;L++)P[L]=D,l[D]=L,D<<=1,256&D&&(D^=285);for(let L=255;L<512;L++)P[L]=P[L-255]})(),K.log=function(D){if(D<1)throw new Error("log("+D+")");return l[D]},K.exp=function(D){return P[D]},K.mul=function(D,L){return 0===D||0===L?0:P[l[D]+l[L]]}},9995:(ze,K,P)=>{const l=P(1239),N=P(2562);function D(L){this.mode=l.KANJI,this.data=L}D.getBitsLength=function($){return 13*$},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function(L){let $;for($=0;$<this.data.length;$++){let W=N.toSJIS(this.data[$]);if(W>=33088&&W<=40956)W-=33088;else{if(!(W>=57408&&W<=60351))throw new Error("Invalid SJIS character: "+this.data[$]+"\nMake sure your charset is UTF-8");W-=49472}W=192*(W>>>8&255)+(255&W),L.put(W,13)}},ze.exports=D},9023:(ze,K)=>{K.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function l(N,D,L){switch(N){case K.Patterns.PATTERN000:return(D+L)%2==0;case K.Patterns.PATTERN001:return D%2==0;case K.Patterns.PATTERN010:return L%3==0;case K.Patterns.PATTERN011:return(D+L)%3==0;case K.Patterns.PATTERN100:return(Math.floor(D/2)+Math.floor(L/3))%2==0;case K.Patterns.PATTERN101:return D*L%2+D*L%3==0;case K.Patterns.PATTERN110:return(D*L%2+D*L%3)%2==0;case K.Patterns.PATTERN111:return(D*L%3+(D+L)%2)%2==0;default:throw new Error("bad maskPattern:"+N)}}K.isValid=function(D){return null!=D&&""!==D&&!isNaN(D)&&D>=0&&D<=7},K.from=function(D){return K.isValid(D)?parseInt(D,10):void 0},K.getPenaltyN1=function(D){const L=D.size;let $=0,W=0,ee=0,ne=null,ce=null;for(let U=0;U<L;U++){W=ee=0,ne=ce=null;for(let G=0;G<L;G++){let Q=D.get(U,G);Q===ne?W++:(W>=5&&($+=W-5+3),ne=Q,W=1),Q=D.get(G,U),Q===ce?ee++:(ee>=5&&($+=ee-5+3),ce=Q,ee=1)}W>=5&&($+=W-5+3),ee>=5&&($+=ee-5+3)}return $},K.getPenaltyN2=function(D){const L=D.size;let $=0;for(let W=0;W<L-1;W++)for(let ee=0;ee<L-1;ee++){const ne=D.get(W,ee)+D.get(W,ee+1)+D.get(W+1,ee)+D.get(W+1,ee+1);(4===ne||0===ne)&&$++}return 3*$},K.getPenaltyN3=function(D){const L=D.size;let $=0,W=0,ee=0;for(let ne=0;ne<L;ne++){W=ee=0;for(let ce=0;ce<L;ce++)W=W<<1&2047|D.get(ne,ce),ce>=10&&(1488===W||93===W)&&$++,ee=ee<<1&2047|D.get(ce,ne),ce>=10&&(1488===ee||93===ee)&&$++}return 40*$},K.getPenaltyN4=function(D){let L=0;const $=D.data.length;for(let ee=0;ee<$;ee++)L+=D.data[ee];return 10*Math.abs(Math.ceil(100*L/$/5)-10)},K.applyMask=function(D,L){const $=L.size;for(let W=0;W<$;W++)for(let ee=0;ee<$;ee++)L.isReserved(ee,W)||L.xor(ee,W,l(D,ee,W))},K.getBestMask=function(D,L){const $=Object.keys(K.Patterns).length;let W=0,ee=1/0;for(let ne=0;ne<$;ne++){L(ne),K.applyMask(ne,D);const ce=K.getPenaltyN1(D)+K.getPenaltyN2(D)+K.getPenaltyN3(D)+K.getPenaltyN4(D);K.applyMask(ne,D),ce<ee&&(ee=ce,W=ne)}return W}},1239:(ze,K,P)=>{const l=P(6161),N=P(2427);K.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},K.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},K.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},K.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},K.MIXED={bit:-1},K.getCharCountIndicator=function($,W){if(!$.ccBits)throw new Error("Invalid mode: "+$);if(!l.isValid(W))throw new Error("Invalid version: "+W);return W>=1&&W<10?$.ccBits[0]:W<27?$.ccBits[1]:$.ccBits[2]},K.getBestModeForData=function($){return N.testNumeric($)?K.NUMERIC:N.testAlphanumeric($)?K.ALPHANUMERIC:N.testKanji($)?K.KANJI:K.BYTE},K.toString=function($){if($&&$.id)return $.id;throw new Error("Invalid mode")},K.isValid=function($){return $&&$.bit&&$.ccBits},K.from=function($,W){if(K.isValid($))return $;try{return function D(L){if("string"!=typeof L)throw new Error("Param is not a string");switch(L.toLowerCase()){case"numeric":return K.NUMERIC;case"alphanumeric":return K.ALPHANUMERIC;case"kanji":return K.KANJI;case"byte":return K.BYTE;default:throw new Error("Unknown mode: "+L)}}($)}catch{return W}}},8722:(ze,K,P)=>{const l=P(1239);function N(D){this.mode=l.NUMERIC,this.data=D.toString()}N.getBitsLength=function(L){return 10*Math.floor(L/3)+(L%3?L%3*3+1:0)},N.prototype.getLength=function(){return this.data.length},N.prototype.getBitsLength=function(){return N.getBitsLength(this.data.length)},N.prototype.write=function(L){let $,W,ee;for($=0;$+3<=this.data.length;$+=3)W=this.data.substr($,3),ee=parseInt(W,10),L.put(ee,10);const ne=this.data.length-$;ne>0&&(W=this.data.substr($),ee=parseInt(W,10),L.put(ee,3*ne+1))},ze.exports=N},2376:(ze,K,P)=>{const l=P(1674);K.mul=function(D,L){const $=new Uint8Array(D.length+L.length-1);for(let W=0;W<D.length;W++)for(let ee=0;ee<L.length;ee++)$[W+ee]^=l.mul(D[W],L[ee]);return $},K.mod=function(D,L){let $=new Uint8Array(D);for(;$.length-L.length>=0;){const W=$[0];for(let ne=0;ne<L.length;ne++)$[ne]^=l.mul(L[ne],W);let ee=0;for(;ee<$.length&&0===$[ee];)ee++;$=$.slice(ee)}return $},K.generateECPolynomial=function(D){let L=new Uint8Array([1]);for(let $=0;$<D;$++)L=K.mul(L,new Uint8Array([1,l.exp($)]));return L}},6208:(ze,K,P)=>{const l=P(2562),N=P(4505),D=P(6509),L=P(5147),$=P(5281),W=P(5232),ee=P(9023),ne=P(7191),ce=P(1297),U=P(9467),G=P(8508),Q=P(1239),ae=P(1799);function De(re,he,Ae){const J=re.size,qe=G.getEncodedBits(he,Ae);let He,Ye;for(He=0;He<15;He++)Ye=1==(qe>>He&1),re.set(He<6?He:He<8?He+1:J-15+He,8,Ye,!0),re.set(8,He<8?J-He-1:He<9?15-He-1+1:15-He-1,Ye,!0);re.set(J-8,8,1,!0)}function be(re,he,Ae,J){let qe;if(Array.isArray(re))qe=ae.fromArray(re);else{if("string"!=typeof re)throw new Error("Invalid data");{let $r=he;if(!$r){const bn=ae.rawSplit(re);$r=U.getBestVersionForData(bn,Ae)}qe=ae.fromString(re,$r||40)}}const He=U.getBestVersionForData(qe,Ae);if(!He)throw new Error("The amount of data is too big to be stored in a QR Code");if(he){if(he<He)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+He+".\n")}else he=He;const Ye=function Ve(re,he,Ae){const J=new D;Ae.forEach(function(xt){J.put(xt.mode.bit,4),J.put(xt.getLength(),Q.getCharCountIndicator(xt.mode,re)),xt.write(J)});const Ye=8*(l.getSymbolTotalCodewords(re)-ne.getTotalCodewordsCount(re,he));for(J.getLengthInBits()+4<=Ye&&J.put(0,4);J.getLengthInBits()%8!=0;)J.putBit(0);const At=(Ye-J.getLengthInBits())/8;for(let xt=0;xt<At;xt++)J.put(xt%2?17:236,8);return function se(re,he,Ae){const J=l.getSymbolTotalCodewords(he),He=J-ne.getTotalCodewordsCount(he,Ae),Ye=ne.getBlocksCount(he,Ae),xt=Ye-J%Ye,$r=Math.floor(J/Ye),bn=Math.floor(He/Ye),Xi=bn+1,oo=$r-bn,Ee=new ce(oo);let we=0;const Re=new Array(Ye),me=new Array(Ye);let Ne=0;const Ze=new Uint8Array(re.buffer);for(let Jt=0;Jt<Ye;Jt++){const Ot=Jt<xt?bn:Xi;Re[Jt]=Ze.slice(we,we+Ot),me[Jt]=Ee.encode(Re[Jt]),we+=Ot,Ne=Math.max(Ne,Ot)}const pt=new Uint8Array(J);let Qt,vt,Je=0;for(Qt=0;Qt<Ne;Qt++)for(vt=0;vt<Ye;vt++)Qt<Re[vt].length&&(pt[Je++]=Re[vt][Qt]);for(Qt=0;Qt<oo;Qt++)for(vt=0;vt<Ye;vt++)pt[Je++]=me[vt][Qt];return pt}(J,re,he)}(he,Ae,qe),At=l.getSymbolSize(he),xt=new L(At);return function ge(re,he){const Ae=re.size,J=W.getPositions(he);for(let qe=0;qe<J.length;qe++){const He=J[qe][0],Ye=J[qe][1];for(let At=-1;At<=7;At++)if(!(He+At<=-1||Ae<=He+At))for(let xt=-1;xt<=7;xt++)Ye+xt<=-1||Ae<=Ye+xt||re.set(He+At,Ye+xt,At>=0&&At<=6&&(0===xt||6===xt)||xt>=0&&xt<=6&&(0===At||6===At)||At>=2&&At<=4&&xt>=2&&xt<=4,!0)}}(xt,he),function Be(re){const he=re.size;for(let Ae=8;Ae<he-8;Ae++){const J=Ae%2==0;re.set(Ae,6,J,!0),re.set(6,Ae,J,!0)}}(xt),function xe(re,he){const Ae=$.getPositions(he);for(let J=0;J<Ae.length;J++){const qe=Ae[J][0],He=Ae[J][1];for(let Ye=-2;Ye<=2;Ye++)for(let At=-2;At<=2;At++)re.set(qe+Ye,He+At,-2===Ye||2===Ye||-2===At||2===At||0===Ye&&0===At,!0)}}(xt,he),De(xt,Ae,0),he>=7&&function _e(re,he){const Ae=re.size,J=U.getEncodedBits(he);let qe,He,Ye;for(let At=0;At<18;At++)qe=Math.floor(At/3),He=At%3+Ae-8-3,Ye=1==(J>>At&1),re.set(qe,He,Ye,!0),re.set(He,qe,Ye,!0)}(xt,he),function Ue(re,he){const Ae=re.size;let J=-1,qe=Ae-1,He=7,Ye=0;for(let At=Ae-1;At>0;At-=2)for(6===At&&At--;;){for(let xt=0;xt<2;xt++)if(!re.isReserved(qe,At-xt)){let $r=!1;Ye<he.length&&($r=1==(he[Ye]>>>He&1)),re.set(qe,At-xt,$r),He--,-1===He&&(Ye++,He=7)}if(qe+=J,qe<0||Ae<=qe){qe-=J,J=-J;break}}}(xt,Ye),isNaN(J)&&(J=ee.getBestMask(xt,De.bind(null,xt,Ae))),ee.applyMask(J,xt),De(xt,Ae,J),{modules:xt,version:he,errorCorrectionLevel:Ae,maskPattern:J,segments:qe}}K.create=function(he,Ae){if(typeof he>"u"||""===he)throw new Error("No input text");let qe,He,J=N.M;return typeof Ae<"u"&&(J=N.from(Ae.errorCorrectionLevel,N.M),qe=U.from(Ae.version),He=ee.from(Ae.maskPattern),Ae.toSJISFunc&&l.setToSJISFunction(Ae.toSJISFunc)),be(he,qe,J,He)}},1297:(ze,K,P)=>{const l=P(2376);function N(D){this.genPoly=void 0,this.degree=D,this.degree&&this.initialize(this.degree)}N.prototype.initialize=function(L){this.degree=L,this.genPoly=l.generateECPolynomial(this.degree)},N.prototype.encode=function(L){if(!this.genPoly)throw new Error("Encoder not initialized");const $=new Uint8Array(L.length+this.degree);$.set(L);const W=l.mod($,this.genPoly),ee=this.degree-W.length;if(ee>0){const ne=new Uint8Array(this.degree);return ne.set(W,ee),ne}return W},ze.exports=N},2427:(ze,K)=>{const P="[0-9]+";let N="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";N=N.replace(/u/g,"\\u");const D="(?:(?![A-Z0-9 $%*+\\-./:]|"+N+")(?:.|[\r\n]))+";K.KANJI=new RegExp(N,"g"),K.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),K.BYTE=new RegExp(D,"g"),K.NUMERIC=new RegExp(P,"g"),K.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const L=new RegExp("^"+N+"$"),$=new RegExp("^"+P+"$"),W=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");K.testKanji=function(ne){return L.test(ne)},K.testNumeric=function(ne){return $.test(ne)},K.testAlphanumeric=function(ne){return W.test(ne)}},1799:(ze,K,P)=>{const l=P(1239),N=P(8722),D=P(2993),L=P(277),$=P(9995),W=P(2427),ee=P(2562),ne=P(7206);function ce(_e){return unescape(encodeURIComponent(_e)).length}function U(_e,De,Ue){const Ve=[];let se;for(;null!==(se=_e.exec(Ue));)Ve.push({data:se[0],index:se.index,mode:De,length:se[0].length});return Ve}function G(_e){const De=U(W.NUMERIC,l.NUMERIC,_e),Ue=U(W.ALPHANUMERIC,l.ALPHANUMERIC,_e);let Ve,se;return ee.isKanjiModeEnabled()?(Ve=U(W.BYTE,l.BYTE,_e),se=U(W.KANJI,l.KANJI,_e)):(Ve=U(W.BYTE_KANJI,l.BYTE,_e),se=[]),De.concat(Ue,Ve,se).sort(function(re,he){return re.index-he.index}).map(function(re){return{data:re.data,mode:re.mode,length:re.length}})}function Q(_e,De){switch(De){case l.NUMERIC:return N.getBitsLength(_e);case l.ALPHANUMERIC:return D.getBitsLength(_e);case l.KANJI:return $.getBitsLength(_e);case l.BYTE:return L.getBitsLength(_e)}}function xe(_e,De){let Ue;const Ve=l.getBestModeForData(_e);if(Ue=l.from(De,Ve),Ue!==l.BYTE&&Ue.bit<Ve.bit)throw new Error('"'+_e+'" cannot be encoded with mode '+l.toString(Ue)+".\n Suggested mode is: "+l.toString(Ve));switch(Ue===l.KANJI&&!ee.isKanjiModeEnabled()&&(Ue=l.BYTE),Ue){case l.NUMERIC:return new N(_e);case l.ALPHANUMERIC:return new D(_e);case l.KANJI:return new $(_e);case l.BYTE:return new L(_e)}}K.fromArray=function(De){return De.reduce(function(Ue,Ve){return"string"==typeof Ve?Ue.push(xe(Ve,null)):Ve.data&&Ue.push(xe(Ve.data,Ve.mode)),Ue},[])},K.fromString=function(De,Ue){const se=function ge(_e){const De=[];for(let Ue=0;Ue<_e.length;Ue++){const Ve=_e[Ue];switch(Ve.mode){case l.NUMERIC:De.push([Ve,{data:Ve.data,mode:l.ALPHANUMERIC,length:Ve.length},{data:Ve.data,mode:l.BYTE,length:Ve.length}]);break;case l.ALPHANUMERIC:De.push([Ve,{data:Ve.data,mode:l.BYTE,length:Ve.length}]);break;case l.KANJI:De.push([Ve,{data:Ve.data,mode:l.BYTE,length:ce(Ve.data)}]);break;case l.BYTE:De.push([{data:Ve.data,mode:l.BYTE,length:ce(Ve.data)}])}}return De}(G(De,ee.isKanjiModeEnabled())),be=function Be(_e,De){const Ue={},Ve={start:{}};let se=["start"];for(let be=0;be<_e.length;be++){const re=_e[be],he=[];for(let Ae=0;Ae<re.length;Ae++){const J=re[Ae],qe=""+be+Ae;he.push(qe),Ue[qe]={node:J,lastCount:0},Ve[qe]={};for(let He=0;He<se.length;He++){const Ye=se[He];Ue[Ye]&&Ue[Ye].node.mode===J.mode?(Ve[Ye][qe]=Q(Ue[Ye].lastCount+J.length,J.mode)-Q(Ue[Ye].lastCount,J.mode),Ue[Ye].lastCount+=J.length):(Ue[Ye]&&(Ue[Ye].lastCount=J.length),Ve[Ye][qe]=Q(J.length,J.mode)+4+l.getCharCountIndicator(J.mode,De))}}se=he}for(let be=0;be<se.length;be++)Ve[se[be]].end=0;return{map:Ve,table:Ue}}(se,Ue),re=ne.find_path(be.map,"start","end"),he=[];for(let Ae=1;Ae<re.length-1;Ae++)he.push(be.table[re[Ae]].node);return K.fromArray(function ae(_e){return _e.reduce(function(De,Ue){const Ve=De.length-1>=0?De[De.length-1]:null;return Ve&&Ve.mode===Ue.mode?(De[De.length-1].data+=Ue.data,De):(De.push(Ue),De)},[])}(he))},K.rawSplit=function(De){return K.fromArray(G(De,ee.isKanjiModeEnabled()))}},2562:(ze,K)=>{let P;const l=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];K.getSymbolSize=function(D){if(!D)throw new Error('"version" cannot be null or undefined');if(D<1||D>40)throw new Error('"version" should be in range from 1 to 40');return 4*D+17},K.getSymbolTotalCodewords=function(D){return l[D]},K.getBCHDigit=function(N){let D=0;for(;0!==N;)D++,N>>>=1;return D},K.setToSJISFunction=function(D){if("function"!=typeof D)throw new Error('"toSJISFunc" is not a valid function.');P=D},K.isKanjiModeEnabled=function(){return typeof P<"u"},K.toSJIS=function(D){return P(D)}},6161:(ze,K)=>{K.isValid=function(l){return!isNaN(l)&&l>=1&&l<=40}},9467:(ze,K,P)=>{const l=P(2562),N=P(7191),D=P(4505),L=P(1239),$=P(6161),ee=l.getBCHDigit(7973);function ce(Q,ae){return L.getCharCountIndicator(Q,ae)+4}function U(Q,ae){let ge=0;return Q.forEach(function(Be){const xe=ce(Be.mode,ae);ge+=xe+Be.getBitsLength()}),ge}K.from=function(ae,ge){return $.isValid(ae)?parseInt(ae,10):ge},K.getCapacity=function(ae,ge,Be){if(!$.isValid(ae))throw new Error("Invalid QR Code version");typeof Be>"u"&&(Be=L.BYTE);const De=8*(l.getSymbolTotalCodewords(ae)-N.getTotalCodewordsCount(ae,ge));if(Be===L.MIXED)return De;const Ue=De-ce(Be,ae);switch(Be){case L.NUMERIC:return Math.floor(Ue/10*3);case L.ALPHANUMERIC:return Math.floor(Ue/11*2);case L.KANJI:return Math.floor(Ue/13);default:return Math.floor(Ue/8)}},K.getBestVersionForData=function(ae,ge){let Be;const xe=D.from(ge,D.M);if(Array.isArray(ae)){if(ae.length>1)return function G(Q,ae){for(let ge=1;ge<=40;ge++)if(U(Q,ge)<=K.getCapacity(ge,ae,L.MIXED))return ge}(ae,xe);if(0===ae.length)return 1;Be=ae[0]}else Be=ae;return function ne(Q,ae,ge){for(let Be=1;Be<=40;Be++)if(ae<=K.getCapacity(Be,ge,Q))return Be}(Be.mode,Be.getLength(),xe)},K.getEncodedBits=function(ae){if(!$.isValid(ae)||ae<7)throw new Error("Invalid QR Code version");let ge=ae<<12;for(;l.getBCHDigit(ge)-ee>=0;)ge^=7973<<l.getBCHDigit(ge)-ee;return ae<<12|ge}},6422:(ze,K,P)=>{const l=P(1101);K.render=function($,W,ee){let ne=ee,ce=W;typeof ne>"u"&&(!W||!W.getContext)&&(ne=W,W=void 0),W||(ce=function D(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),ne=l.getOptions(ne);const U=l.getImageWidth($.modules.size,ne),G=ce.getContext("2d"),Q=G.createImageData(U,U);return l.qrToImageData(Q.data,$,ne),function N(L,$,W){L.clearRect(0,0,$.width,$.height),$.style||($.style={}),$.height=W,$.width=W,$.style.height=W+"px",$.style.width=W+"px"}(G,ce,U),G.putImageData(Q,0,0),ce},K.renderToDataURL=function($,W,ee){let ne=ee;return typeof ne>"u"&&(!W||!W.getContext)&&(ne=W,W=void 0),ne||(ne={}),K.render($,W,ne).toDataURL(ne.type||"image/png",(ne.rendererOpts||{}).quality)}},7772:(ze,K,P)=>{const l=P(1101);function N($,W){const ee=$.a/255,ne=W+'="'+$.hex+'"';return ee<1?ne+" "+W+'-opacity="'+ee.toFixed(2).slice(1)+'"':ne}function D($,W,ee){let ne=$+W;return typeof ee<"u"&&(ne+=" "+ee),ne}K.render=function(W,ee,ne){const ce=l.getOptions(ee),U=W.modules.size,G=W.modules.data,Q=U+2*ce.margin,ae=ce.color.light.a?"<path "+N(ce.color.light,"fill")+' d="M0 0h'+Q+"v"+Q+'H0z"/>':"",ge="<path "+N(ce.color.dark,"stroke")+' d="'+function L($,W,ee){let ne="",ce=0,U=!1,G=0;for(let Q=0;Q<$.length;Q++){const ae=Math.floor(Q%W),ge=Math.floor(Q/W);!ae&&!U&&(U=!0),$[Q]?(G++,Q>0&&ae>0&&$[Q-1]||(ne+=U?D("M",ae+ee,.5+ge+ee):D("m",ce,0),ce=0,U=!1),ae+1<W&&$[Q+1]||(ne+=D("h",G),G=0)):ce++}return ne}(G,U,ce.margin)+'"/>',_e='<svg xmlns="http://www.w3.org/2000/svg" '+(ce.width?'width="'+ce.width+'" height="'+ce.width+'" ':"")+'viewBox="0 0 '+Q+" "+Q+'" shape-rendering="crispEdges">'+ae+ge+"</svg>\n";return"function"==typeof ne&&ne(null,_e),_e}},1101:(ze,K)=>{function P(l){if("number"==typeof l&&(l=l.toString()),"string"!=typeof l)throw new Error("Color should be defined as hex string");let N=l.slice().replace("#","").split("");if(N.length<3||5===N.length||N.length>8)throw new Error("Invalid hex color: "+l);(3===N.length||4===N.length)&&(N=Array.prototype.concat.apply([],N.map(function(L){return[L,L]}))),6===N.length&&N.push("F","F");const D=parseInt(N.join(""),16);return{r:D>>24&255,g:D>>16&255,b:D>>8&255,a:255&D,hex:"#"+N.slice(0,6).join("")}}K.getOptions=function(N){N||(N={}),N.color||(N.color={});const L=N.width&&N.width>=21?N.width:void 0;return{width:L,scale:L?4:N.scale||4,margin:typeof N.margin>"u"||null===N.margin||N.margin<0?4:N.margin,color:{dark:P(N.color.dark||"#000000ff"),light:P(N.color.light||"#ffffffff")},type:N.type,rendererOpts:N.rendererOpts||{}}},K.getScale=function(N,D){return D.width&&D.width>=N+2*D.margin?D.width/(N+2*D.margin):D.scale},K.getImageWidth=function(N,D){const L=K.getScale(N,D);return Math.floor((N+2*D.margin)*L)},K.qrToImageData=function(N,D,L){const $=D.modules.size,W=D.modules.data,ee=K.getScale($,L),ne=Math.floor(($+2*L.margin)*ee),ce=L.margin*ee,U=[L.color.light,L.color.dark];for(let G=0;G<ne;G++)for(let Q=0;Q<ne;Q++){let ae=4*(G*ne+Q),ge=L.color.light;G>=ce&&Q>=ce&&G<ne-ce&&Q<ne-ce&&(ge=U[W[Math.floor((G-ce)/ee)*$+Math.floor((Q-ce)/ee)]?1:0]),N[ae++]=ge.r,N[ae++]=ge.g,N[ae++]=ge.b,N[ae]=ge.a}}},5619:(ze,K,P)=>{"use strict";P.d(K,{X:()=>N});var l=P(8645);class N extends l.x{constructor(L){super(),this._value=L}get value(){return this.getValue()}_subscribe(L){const $=super._subscribe(L);return!$.closed&&L.next(this._value),$}getValue(){const{hasError:L,thrownError:$,_value:W}=this;if(L)throw $;return this._throwIfClosed(),W}next(L){super.next(this._value=L)}}},5592:(ze,K,P)=>{"use strict";P.d(K,{y:()=>ne});var l=P(305),N=P(7394),D=P(4850),L=P(8407),$=P(2653),W=P(4674),ee=P(1441);let ne=(()=>{class Q{constructor(ge){ge&&(this._subscribe=ge)}lift(ge){const Be=new Q;return Be.source=this,Be.operator=ge,Be}subscribe(ge,Be,xe){const _e=function G(Q){return Q&&Q instanceof l.Lv||function U(Q){return Q&&(0,W.m)(Q.next)&&(0,W.m)(Q.error)&&(0,W.m)(Q.complete)}(Q)&&(0,N.Nn)(Q)}(ge)?ge:new l.Hp(ge,Be,xe);return(0,ee.x)(()=>{const{operator:De,source:Ue}=this;_e.add(De?De.call(_e,Ue):Ue?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(ge){try{return this._subscribe(ge)}catch(Be){ge.error(Be)}}forEach(ge,Be){return new(Be=ce(Be))((xe,_e)=>{const De=new l.Hp({next:Ue=>{try{ge(Ue)}catch(Ve){_e(Ve),De.unsubscribe()}},error:_e,complete:xe});this.subscribe(De)})}_subscribe(ge){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(ge)}[D.L](){return this}pipe(...ge){return(0,L.U)(ge)(this)}toPromise(ge){return new(ge=ce(ge))((Be,xe)=>{let _e;this.subscribe(De=>_e=De,De=>xe(De),()=>Be(_e))})}}return Q.create=ae=>new Q(ae),Q})();function ce(Q){var ae;return null!==(ae=Q??$.config.Promise)&&void 0!==ae?ae:Promise}},8645:(ze,K,P)=>{"use strict";P.d(K,{x:()=>ee});var l=P(5592),N=P(7394);const L=(0,P(2306).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $=P(9039),W=P(1441);let ee=(()=>{class ce extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new ne(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new L}next(G){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:ae,observers:ge}=this;return Q||ae?N.Lc:(this.currentObservers=null,ge.push(G),new N.w0(()=>{this.currentObservers=null,(0,$.P)(ge,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:ae,isStopped:ge}=this;Q?G.error(ae):ge&&G.complete()}asObservable(){const G=new l.y;return G.source=this,G}}return ce.create=(U,G)=>new ne(U,G),ce})();class ne extends ee{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,U)}error(U){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==Q?Q:N.Lc}}},305:(ze,K,P)=>{"use strict";P.d(K,{Hp:()=>xe,Lv:()=>Q});var l=P(4674),N=P(7394),D=P(2653),L=P(3894),$=P(2420);const W=ce("C",void 0,void 0);function ce(se,be,re){return{kind:se,value:be,error:re}}var U=P(7599),G=P(1441);class Q extends N.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,N.Nn)(be)&&be.add(this)):this.destination=Ve}static create(be,re,he){return new xe(be,re,he)}next(be){this.isStopped?Ue(function ne(se){return ce("N",se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Ue(function ee(se){return ce("E",void 0,se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Ue(W,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ae=Function.prototype.bind;function ge(se,be){return ae.call(se,be)}class Be{constructor(be){this.partialObserver=be}next(be){const{partialObserver:re}=this;if(re.next)try{re.next(be)}catch(he){_e(he)}}error(be){const{partialObserver:re}=this;if(re.error)try{re.error(be)}catch(he){_e(he)}else _e(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(re){_e(re)}}}class xe extends Q{constructor(be,re,he){let Ae;if(super(),(0,l.m)(be)||!be)Ae={next:be??void 0,error:re??void 0,complete:he??void 0};else{let J;this&&D.config.useDeprecatedNextContext?(J=Object.create(be),J.unsubscribe=()=>this.unsubscribe(),Ae={next:be.next&&ge(be.next,J),error:be.error&&ge(be.error,J),complete:be.complete&&ge(be.complete,J)}):Ae=be}this.destination=new Be(Ae)}}function _e(se){D.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(se):(0,L.h)(se)}function Ue(se,be){const{onStoppedNotification:re}=D.config;re&&U.z.setTimeout(()=>re(se,be))}const Ve={closed:!0,next:$.Z,error:function De(se){throw se},complete:$.Z}},7394:(ze,K,P)=>{"use strict";P.d(K,{Lc:()=>W,w0:()=>$,Nn:()=>ee});var l=P(4674);const D=(0,P(2306).d)(ce=>function(G){ce(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,ae)=>`${ae+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var L=P(9039);class ${constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const ge of G)ge.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,l.m)(Q))try{Q()}catch(ge){U=ge instanceof D?ge.errors:[ge]}const{_finalizers:ae}=this;if(ae){this._finalizers=null;for(const ge of ae)try{ne(ge)}catch(Be){U=U??[],Be instanceof D?U=[...U,...Be.errors]:U.push(Be)}}if(U)throw new D(U)}}add(U){var G;if(U&&U!==this)if(this.closed)ne(U);else{if(U instanceof $){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,L.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,L.P)(G,U),U instanceof $&&U._removeParent(this)}}$.EMPTY=(()=>{const ce=new $;return ce.closed=!0,ce})();const W=$.EMPTY;function ee(ce){return ce instanceof $||ce&&"closed"in ce&&(0,l.m)(ce.remove)&&(0,l.m)(ce.add)&&(0,l.m)(ce.unsubscribe)}function ne(ce){(0,l.m)(ce)?ce():ce.unsubscribe()}},2653:(ze,K,P)=>{"use strict";P.d(K,{config:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ze,K,P)=>{"use strict";P.d(K,{E:()=>N});const N=new(P(5592).y)($=>$.complete())},2459:(ze,K,P)=>{"use strict";P.d(K,{D:()=>be});var l=P(4829),N=P(3093),D=P(5137),W=P(5592),ne=P(4971),ce=P(4674),U=P(7103);function Q(re,he){if(!re)throw new Error("Iterable cannot be null");return new W.y(Ae=>{(0,U.f)(Ae,he,()=>{const J=re[Symbol.asyncIterator]();(0,U.f)(Ae,he,()=>{J.next().then(qe=>{qe.done?Ae.complete():Ae.next(qe.value)})},0,!0)})})}var ae=P(8382),ge=P(4026),Be=P(4266),xe=P(3664),_e=P(5726),De=P(9853),Ue=P(541);function be(re,he){return he?function se(re,he){if(null!=re){if((0,ae.c)(re))return function L(re,he){return(0,l.Xf)(re).pipe((0,D.R)(he),(0,N.Q)(he))}(re,he);if((0,Be.z)(re))return function ee(re,he){return new W.y(Ae=>{let J=0;return he.schedule(function(){J===re.length?Ae.complete():(Ae.next(re[J++]),Ae.closed||this.schedule())})})}(re,he);if((0,ge.t)(re))return function $(re,he){return(0,l.Xf)(re).pipe((0,D.R)(he),(0,N.Q)(he))}(re,he);if((0,_e.D)(re))return Q(re,he);if((0,xe.T)(re))return function G(re,he){return new W.y(Ae=>{let J;return(0,U.f)(Ae,he,()=>{J=re[ne.h](),(0,U.f)(Ae,he,()=>{let qe,He;try{({value:qe,done:He}=J.next())}catch(Ye){return void Ae.error(Ye)}He?Ae.complete():Ae.next(qe)},0,!0)}),()=>(0,ce.m)(J?.return)&&J.return()})}(re,he);if((0,Ue.L)(re))return function Ve(re,he){return Q((0,Ue.Q)(re),he)}(re,he)}throw(0,De.z)(re)}(re,he):(0,l.Xf)(re)}},4829:(ze,K,P)=>{"use strict";P.d(K,{Xf:()=>ae});var l=P(7582),N=P(4266),D=P(4026),L=P(5592),$=P(8382),W=P(5726),ee=P(9853),ne=P(3664),ce=P(541),U=P(4674),G=P(3894),Q=P(4850);function ae(se){if(se instanceof L.y)return se;if(null!=se){if((0,$.c)(se))return function ge(se){return new L.y(be=>{const re=se[Q.L]();if((0,U.m)(re.subscribe))return re.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,N.z)(se))return function Be(se){return new L.y(be=>{for(let re=0;re<se.length&&!be.closed;re++)be.next(se[re]);be.complete()})}(se);if((0,D.t)(se))return function xe(se){return new L.y(be=>{se.then(re=>{be.closed||(be.next(re),be.complete())},re=>be.error(re)).then(null,G.h)})}(se);if((0,W.D)(se))return De(se);if((0,ne.T)(se))return function _e(se){return new L.y(be=>{for(const re of se)if(be.next(re),be.closed)return;be.complete()})}(se);if((0,ce.L)(se))return function Ue(se){return De((0,ce.Q)(se))}(se)}throw(0,ee.z)(se)}function De(se){return new L.y(be=>{(function Ve(se,be){var re,he,Ae,J;return(0,l.mG)(this,void 0,void 0,function*(){try{for(re=(0,l.KL)(se);!(he=yield re.next()).done;)if(be.next(he.value),be.closed)return}catch(qe){Ae={error:qe}}finally{try{he&&!he.done&&(J=re.return)&&(yield J.call(re))}finally{if(Ae)throw Ae.error}}be.complete()})})(se,be).catch(re=>be.error(re))})}},3019:(ze,K,P)=>{"use strict";P.d(K,{T:()=>W});var l=P(7537),N=P(4829),D=P(6232),L=P(4564),$=P(2459);function W(...ee){const ne=(0,L.yG)(ee),ce=(0,L._6)(ee,1/0),U=ee;return U.length?1===U.length?(0,N.Xf)(U[0]):(0,l.J)(ce)((0,$.D)(U,ne)):D.E}},2096:(ze,K,P)=>{"use strict";P.d(K,{of:()=>D});var l=P(4564),N=P(2459);function D(...L){const $=(0,l.yG)(L);return(0,N.D)(L,$)}},8251:(ze,K,P)=>{"use strict";P.d(K,{Q:()=>D,x:()=>N});var l=P(305);function N(L,$,W,ee,ne){return new D(L,$,W,ee,ne)}class D extends l.Lv{constructor($,W,ee,ne,ce,U){super($),this.onFinalize=ce,this.shouldUnsubscribe=U,this._next=W?function(G){try{W(G)}catch(Q){$.error(Q)}}:super._next,this._error=ne?function(G){try{ne(G)}catch(Q){$.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ee?function(){try{ee()}catch(G){$.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var $;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:W}=this;super.unsubscribe(),!W&&(null===($=this.onFinalize)||void 0===$||$.call(this))}}}},3997:(ze,K,P)=>{"use strict";P.d(K,{x:()=>L});var l=P(2737),N=P(9360),D=P(8251);function L(W,ee=l.y){return W=W??$,(0,N.e)((ne,ce)=>{let U,G=!0;ne.subscribe((0,D.x)(ce,Q=>{const ae=ee(Q);(G||!W(U,ae))&&(G=!1,U=ae,ce.next(Q))}))})}function $(W,ee){return W===ee}},7398:(ze,K,P)=>{"use strict";P.d(K,{U:()=>D});var l=P(9360),N=P(8251);function D(L,$){return(0,l.e)((W,ee)=>{let ne=0;W.subscribe((0,N.x)(ee,ce=>{ee.next(L.call($,ce,ne++))}))})}},7537:(ze,K,P)=>{"use strict";P.d(K,{J:()=>D});var l=P(1631),N=P(2737);function D(L=1/0){return(0,l.z)(N.y,L)}},1631:(ze,K,P)=>{"use strict";P.d(K,{z:()=>ne});var l=P(7398),N=P(4829),D=P(9360),L=P(7103),$=P(8251),ee=P(4674);function ne(ce,U,G=1/0){return(0,ee.m)(U)?ne((Q,ae)=>(0,l.U)((ge,Be)=>U(Q,ge,ae,Be))((0,N.Xf)(ce(Q,ae))),G):("number"==typeof U&&(G=U),(0,D.e)((Q,ae)=>function W(ce,U,G,Q,ae,ge,Be,xe){const _e=[];let De=0,Ue=0,Ve=!1;const se=()=>{Ve&&!_e.length&&!De&&U.complete()},be=he=>De<Q?re(he):_e.push(he),re=he=>{ge&&U.next(he),De++;let Ae=!1;(0,N.Xf)(G(he,Ue++)).subscribe((0,$.x)(U,J=>{ae?.(J),ge?be(J):U.next(J)},()=>{Ae=!0},void 0,()=>{if(Ae)try{for(De--;_e.length&&De<Q;){const J=_e.shift();Be?(0,L.f)(U,Be,()=>re(J)):re(J)}se()}catch(J){U.error(J)}}))};return ce.subscribe((0,$.x)(U,be,()=>{Ve=!0,se()})),()=>{xe?.()}}(Q,ae,ce,G)))}},3093:(ze,K,P)=>{"use strict";P.d(K,{Q:()=>L});var l=P(7103),N=P(9360),D=P(8251);function L($,W=0){return(0,N.e)((ee,ne)=>{ee.subscribe((0,D.x)(ne,ce=>(0,l.f)(ne,$,()=>ne.next(ce),W),()=>(0,l.f)(ne,$,()=>ne.complete(),W),ce=>(0,l.f)(ne,$,()=>ne.error(ce),W)))})}},3020:(ze,K,P)=>{"use strict";P.d(K,{B:()=>$});var l=P(4829),N=P(8645),D=P(305),L=P(9360);function $(ee={}){const{connector:ne=(()=>new N.x),resetOnError:ce=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=ee;return Q=>{let ae,ge,Be,xe=0,_e=!1,De=!1;const Ue=()=>{ge?.unsubscribe(),ge=void 0},Ve=()=>{Ue(),ae=Be=void 0,_e=De=!1},se=()=>{const be=ae;Ve(),be?.unsubscribe()};return(0,L.e)((be,re)=>{xe++,!De&&!_e&&Ue();const he=Be=Be??ne();re.add(()=>{xe--,0===xe&&!De&&!_e&&(ge=W(se,G))}),he.subscribe(re),!ae&&xe>0&&(ae=new D.Hp({next:Ae=>he.next(Ae),error:Ae=>{De=!0,Ue(),ge=W(Ve,ce,Ae),he.error(Ae)},complete:()=>{_e=!0,Ue(),ge=W(Ve,U),he.complete()}}),(0,l.Xf)(be).subscribe(ae))})(Q)}}function W(ee,ne,...ce){if(!0===ne)return void ee();if(!1===ne)return;const U=new D.Hp({next:()=>{U.unsubscribe(),ee()}});return(0,l.Xf)(ne(...ce)).subscribe(U)}},5137:(ze,K,P)=>{"use strict";P.d(K,{R:()=>N});var l=P(9360);function N(D,L=0){return(0,l.e)(($,W)=>{W.add(D.schedule(()=>$.subscribe(W),L))})}},4664:(ze,K,P)=>{"use strict";P.d(K,{w:()=>L});var l=P(4829),N=P(9360),D=P(8251);function L($,W){return(0,N.e)((ee,ne)=>{let ce=null,U=0,G=!1;const Q=()=>G&&!ce&&ne.complete();ee.subscribe((0,D.x)(ne,ae=>{ce?.unsubscribe();let ge=0;const Be=U++;(0,l.Xf)($(ae,Be)).subscribe(ce=(0,D.x)(ne,xe=>ne.next(W?W(ae,xe,Be,ge++):xe),()=>{ce=null,Q()}))},()=>{G=!0,Q()}))})}},7599:(ze,K,P)=>{"use strict";P.d(K,{z:()=>l});const l={setTimeout(N,D,...L){const{delegate:$}=l;return $?.setTimeout?$.setTimeout(N,D,...L):setTimeout(N,D,...L)},clearTimeout(N){const{delegate:D}=l;return(D?.clearTimeout||clearTimeout)(N)},delegate:void 0}},4971:(ze,K,P)=>{"use strict";P.d(K,{h:()=>N});const N=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ze,K,P)=>{"use strict";P.d(K,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ze,K,P)=>{"use strict";P.d(K,{_6:()=>W,jO:()=>L,yG:()=>$});var l=P(4674);function D(ee){return ee[ee.length-1]}function L(ee){return(0,l.m)(D(ee))?ee.pop():void 0}function $(ee){return function N(ee){return ee&&(0,l.m)(ee.schedule)}(D(ee))?ee.pop():void 0}function W(ee,ne){return"number"==typeof D(ee)?ee.pop():ne}},9039:(ze,K,P)=>{"use strict";function l(N,D){if(N){const L=N.indexOf(D);0<=L&&N.splice(L,1)}}P.d(K,{P:()=>l})},2306:(ze,K,P)=>{"use strict";function l(N){const L=N($=>{Error.call($),$.stack=(new Error).stack});return L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L}P.d(K,{d:()=>l})},1441:(ze,K,P)=>{"use strict";P.d(K,{O:()=>L,x:()=>D});var l=P(2653);let N=null;function D($){if(l.config.useDeprecatedSynchronousErrorHandling){const W=!N;if(W&&(N={errorThrown:!1,error:null}),$(),W){const{errorThrown:ee,error:ne}=N;if(N=null,ee)throw ne}}else $()}function L($){l.config.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=$)}},7103:(ze,K,P)=>{"use strict";function l(N,D,L,$=0,W=!1){const ee=D.schedule(function(){L(),W?N.add(this.schedule(null,$)):this.unsubscribe()},$);if(N.add(ee),!W)return ee}P.d(K,{f:()=>l})},2737:(ze,K,P)=>{"use strict";function l(N){return N}P.d(K,{y:()=>l})},4266:(ze,K,P)=>{"use strict";P.d(K,{z:()=>l});const l=N=>N&&"number"==typeof N.length&&"function"!=typeof N},5726:(ze,K,P)=>{"use strict";P.d(K,{D:()=>N});var l=P(4674);function N(D){return Symbol.asyncIterator&&(0,l.m)(D?.[Symbol.asyncIterator])}},4674:(ze,K,P)=>{"use strict";function l(N){return"function"==typeof N}P.d(K,{m:()=>l})},8382:(ze,K,P)=>{"use strict";P.d(K,{c:()=>D});var l=P(4850),N=P(4674);function D(L){return(0,N.m)(L[l.L])}},3664:(ze,K,P)=>{"use strict";P.d(K,{T:()=>D});var l=P(4971),N=P(4674);function D(L){return(0,N.m)(L?.[l.h])}},4026:(ze,K,P)=>{"use strict";P.d(K,{t:()=>N});var l=P(4674);function N(D){return(0,l.m)(D?.then)}},541:(ze,K,P)=>{"use strict";P.d(K,{L:()=>L,Q:()=>D});var l=P(7582),N=P(4674);function D($){return(0,l.FC)(this,arguments,function*(){const ee=$.getReader();try{for(;;){const{value:ne,done:ce}=yield(0,l.qq)(ee.read());if(ce)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ne)}}finally{ee.releaseLock()}})}function L($){return(0,N.m)($?.getReader)}},9360:(ze,K,P)=>{"use strict";P.d(K,{A:()=>N,e:()=>D});var l=P(4674);function N(L){return(0,l.m)(L?.lift)}function D(L){return $=>{if(N($))return $.lift(function(W){try{return L(W,this)}catch(ee){this.error(ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ze,K,P)=>{"use strict";function l(){}P.d(K,{Z:()=>l})},8407:(ze,K,P)=>{"use strict";P.d(K,{U:()=>D,z:()=>N});var l=P(2737);function N(...L){return D(L)}function D(L){return 0===L.length?l.y:1===L.length?L[0]:function(W){return L.reduce((ee,ne)=>ne(ee),W)}}},3894:(ze,K,P)=>{"use strict";P.d(K,{h:()=>D});var l=P(2653),N=P(7599);function D(L){N.z.setTimeout(()=>{const{onUnhandledError:$}=l.config;if(!$)throw L;$(L)})}},9853:(ze,K,P)=>{"use strict";function l(N){return new TypeError(`You provided ${null!==N&&"object"==typeof N?"an invalid object":`'${N}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(K,{z:()=>l})},5879:(ze,K,P)=>{"use strict";P.d(K,{$8M:()=>Sv,$WT:()=>Ju,$Z:()=>I2,AFp:()=>bT,ALo:()=>aA,AaK:()=>Q,CHM:()=>uo,CRH:()=>Ux,EJc:()=>nP,EiD:()=>wc,EpF:()=>SR,F4k:()=>Hf,FYo:()=>M1,FiY:()=>ve,Gf:()=>b_,GfV:()=>O1,Gpc:()=>Be,HDt:()=>zc,JOm:()=>fm,JVY:()=>Im,JZr:()=>Ve,KtG:()=>Kg,L6k:()=>xO,LAX:()=>PO,LFG:()=>Xe,LSH:()=>bm,Lbi:()=>bc,Lck:()=>px,MAs:()=>CR,MMx:()=>_x,MR2:()=>cd,NdJ:()=>Qa,O4$:()=>Rt,Ojb:()=>t0,OlP:()=>xn,Oqu:()=>r_,P3R:()=>E1,PXZ:()=>mP,Q6J:()=>x0,QGY:()=>DC,Qsj:()=>QO,R0b:()=>wi,RDi:()=>SO,Rgc:()=>iu,SBq:()=>ku,Sil:()=>rP,Suo:()=>pA,TTD:()=>jg,TgZ:()=>Ya,Tol:()=>B0,VuI:()=>$_,W1O:()=>mA,X6Q:()=>TP,XFs:()=>bt,Xpm:()=>bh,Xq5:()=>cC,Xts:()=>ud,Y36:()=>Gm,YKP:()=>cp,YNc:()=>AC,Yjl:()=>xh,Yz7:()=>Ot,Z0I:()=>Dn,ZZ4:()=>kI,_Bn:()=>jc,_UZ:()=>Gf,_Vd:()=>Vm,_c5:()=>OI,_uU:()=>ga,aQg:()=>BA,c2e:()=>au,cJS:()=>Jn,cg1:()=>zC,dDg:()=>EI,dqk:()=>Xt,eBb:()=>sd,eFA:()=>_P,eJc:()=>yA,ekj:()=>U0,eoX:()=>pP,f3M:()=>dt,g9A:()=>S1,h0i:()=>Bu,hGG:()=>U_,hij:()=>i_,iGM:()=>A_,ifc:()=>$e,ip1:()=>eP,jDz:()=>tA,kL8:()=>QR,kcU:()=>vv,lG2:()=>Rh,lcZ:()=>Fd,lqb:()=>ua,lri:()=>fP,mCW:()=>od,n5z:()=>tf,oAB:()=>bl,oxw:()=>xR,pB0:()=>Em,q3G:()=>Tc,q4F:()=>e2,qFp:()=>IF,qLn:()=>Mu,qOj:()=>kf,qZA:()=>Lo,qzn:()=>aa,rWj:()=>II,rg0:()=>Bg,s9C:()=>k0,sBO:()=>LA,s_b:()=>nI,soG:()=>pI,tb:()=>TI,tp0:()=>tt,uIk:()=>hC,vHH:()=>se,vpe:()=>ko,wAp:()=>Pd,xp6:()=>K1,z2F:()=>Gu,z3N:()=>No,zSh:()=>wT,zs3:()=>ca});var l=P(8645),N=P(7394),D=P(5592),L=P(3019),$=P(5619),W=P(2096),ee=P(3020),ne=P(4664),ce=P(3997);function U(a){for(let u in a)if(a[u]===U)return u;throw Error("Could not find renamed property on target object.")}function G(a,u){for(const c in u)u.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=u[c])}function Q(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Q).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const u=a.toString();if(null==u)return""+u;const c=u.indexOf("\n");return-1===c?u:u.substring(0,c)}function ae(a,u){return null==a||""===a?null===u?"":u:null==u||""===u?a:a+" "+u}const ge=U({__forward_ref__:U});function Be(a){return a.__forward_ref__=Be,a.toString=function(){return Q(this())},a}function xe(a){return _e(a)?a():a}function _e(a){return"function"==typeof a&&a.hasOwnProperty(ge)&&a.__forward_ref__===Be}function De(a){return a&&!!a.\u0275providers}const Ve="https://g.co/ng/security#xss";class se extends Error{constructor(u,c){super(function be(a,u){return`NG0${Math.abs(a)}${u?": "+u:""}`}(u,c)),this.code=u}}function re(a){return"string"==typeof a?a:null==a?"":String(a)}function He(a,u){throw new se(-201,!1)}function pt(a,u){null==a&&function Je(a,u,c,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${c} ${h} ${u} <=Actual]`))}(u,a,null,"!=")}function Ot(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Jn(a){return{providers:a.providers||[],imports:a.imports||[]}}function Xn(a){return lr(a,Ri)||lr(a,xi)}function Dn(a){return null!==Xn(a)}function lr(a,u){return a.hasOwnProperty(u)?a[u]:null}function es(a){return a&&(a.hasOwnProperty(dr)||a.hasOwnProperty(Co))?a[dr]:null}const Ri=U({\u0275prov:U}),dr=U({\u0275inj:U}),xi=U({ngInjectableDef:U}),Co=U({ngInjectorDef:U});var bt=function(a){return a[a.Default=0]="Default",a[a.Host=1]="Host",a[a.Self=2]="Self",a[a.SkipSelf=4]="SkipSelf",a[a.Optional=8]="Optional",a}(bt||{});let Ut;function _n(a){const u=Ut;return Ut=a,u}function Pi(a,u,c){const h=Xn(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&bt.Optional?null:void 0!==u?u:void He(Q(a))}const Xt=globalThis,er={},Wo="__NG_DI_FLAG__",Es="ngTempTokenPath",X=/\n/gm,F="__source";let B;function oe(a){const u=B;return B=a,u}function ke(a,u=bt.Default){if(void 0===B)throw new se(-203,!1);return null===B?Pi(a,void 0,u):B.get(a,u&bt.Optional?null:void 0,u)}function Xe(a,u=bt.Default){return(function Lt(){return Ut}()||ke)(xe(a),u)}function dt(a,u=bt.Default){return Xe(a,fn(u))}function fn(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function kt(a){const u=[];for(let c=0;c<a.length;c++){const h=xe(a[c]);if(Array.isArray(h)){if(0===h.length)throw new se(900,!1);let p,m=bt.Default;for(let I=0;I<h.length;I++){const w=h[I],A=Ht(w);"number"==typeof A?-1===A?p=w.token:m|=A:p=w}u.push(Xe(p,m))}else u.push(Xe(h))}return u}function Pn(a,u){return a[Wo]=u,a.prototype[Wo]=u,a}function Ht(a){return a[Wo]}function Ce(a){return{toString:a}.toString()}var de=function(a){return a[a.OnPush=0]="OnPush",a[a.Default=1]="Default",a}(de||{}),$e=function(a){return a[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",a}($e||{});const mt={},ut=[],$t=U({\u0275cmp:U}),mn=U({\u0275dir:U}),Nr=U({\u0275pipe:U}),tr=U({\u0275mod:U}),yi=U({\u0275fac:U}),bo=U({__NG_ELEMENT_ID__:U}),Th=U({__NG_ENV_ID__:U});function yg(a,u,c){let h=a.length;for(;;){const p=a.indexOf(u,c);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=u.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}c=p+1}}function Ch(a,u,c){let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const m=c[h++],I=c[h++],w=c[h++];a.setAttribute(u,I,w,m)}else{const m=p,I=c[++h];wl(m)?a.setProperty(u,m,I):a.setAttribute(u,m,I),h++}}return h}function Zo(a){return 3===a||4===a||6===a}function wl(a){return 64===a.charCodeAt(0)}function Tl(a,u){if(null!==u&&0!==u.length)if(null===a||0===a.length)a=u.slice();else{let c=-1;for(let h=0;h<u.length;h++){const p=u[h];"number"==typeof p?c=p:0===c||Cl(a,c,p,null,-1===c||2===c?u[++h]:null)}}return a}function Cl(a,u,c,h,p){let m=0,I=a.length;if(-1===u)I=-1;else for(;m<a.length;){const w=a[m++];if("number"==typeof w){if(w===u){I=-1;break}if(w>u){I=m-1;break}}}for(;m<a.length;){const w=a[m];if("number"==typeof w)break;if(w===c){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==I&&(a.splice(I,0,u),m=I+1),a.splice(m++,0,c),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}const nr="ng-template";function cw(a,u,c){let h=0,p=!0;for(;h<a.length;){let m=a[h++];if("string"==typeof m&&p){const I=a[h++];if(c&&"class"===m&&-1!==yg(I.toLowerCase(),u,0))return!0}else{if(1===m){for(;h<a.length&&"string"==typeof(m=a[h++]);)if(m.toLowerCase()===u)return!0;return!1}"number"==typeof m&&(p=!1)}}return!1}function Ah(a){return 4===a.type&&a.value!==nr}function lw(a,u,c){return u===(4!==a.type||c?a.value:nr)}function vg(a,u,c){let h=4;const p=a.attrs||[],m=function Al(a){for(let u=0;u<a.length;u++)if(Zo(a[u]))return u;return a.length}(p);let I=!1;for(let w=0;w<u.length;w++){const A=u[w];if("number"!=typeof A){if(!I)if(4&h){if(h=2|1&h,""!==A&&!lw(a,A,c)||""===A&&1===u.length){if(ns(h))return!1;I=!0}}else{const S=8&h?A:u[++w];if(8&h&&null!==a.attrs){if(!cw(a.attrs,S,c)){if(ns(h))return!1;I=!0}continue}const H=Ig(8&h?"class":A,p,Ah(a),c);if(-1===H){if(ns(h))return!1;I=!0;continue}if(""!==S){let te;te=H>m?"":p[H+1].toLowerCase();const ue=8&h?te:null;if(ue&&-1!==yg(ue,S,0)||2&h&&S!==te){if(ns(h))return!1;I=!0}}}}else{if(!I&&!ns(h)&&!ns(A))return!1;if(I&&ns(A))continue;I=!1,h=A|1&h}}return ns(h)||I}function ns(a){return 0==(1&a)}function Ig(a,u,c,h){if(null===u)return-1;let p=0;if(h||!c){let m=!1;for(;p<u.length;){const I=u[p];if(I===a)return p;if(3===I||6===I)m=!0;else{if(1===I||2===I){let w=u[++p];for(;"string"==typeof w;)w=u[++p];continue}if(4===I)break;if(0===I){p+=4;continue}}p+=m?1:2}return-1}return function wg(a,u){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const h=a[c];if("number"==typeof h)return-1;if(h===u)return c;c++}return-1}(u,a)}function Eg(a,u,c=!1){for(let h=0;h<u.length;h++)if(vg(a,u[h],c))return!0;return!1}function Hy(a,u){return a?":not("+u.trim()+")":u}function qy(a){let u=a[0],c=1,h=2,p="",m=!1;for(;c<a.length;){let I=a[c];if("string"==typeof I)if(2&h){const w=a[++c];p+="["+I+(w.length>0?'="'+w+'"':"")+"]"}else 8&h?p+="."+I:4&h&&(p+=" "+I);else""!==p&&!ns(I)&&(u+=Hy(m,p),p=""),h=I,m=m||!ns(h);c++}return""!==p&&(u+=Hy(m,p)),u}function bh(a){return Ce(()=>{const u=zy(a),c={...u,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===de.OnPush,directiveDefs:null,pipeDefs:null,dependencies:u.standalone&&a.dependencies||null,getStandaloneInjector:null,signals:a.signals??!1,data:a.data||{},encapsulation:a.encapsulation||$e.Emulated,styles:a.styles||ut,_:null,schemas:a.schemas||null,tView:null,id:""};Ph(c);const h=a.dependencies;return c.directiveDefs=xa(h,!1),c.pipeDefs=xa(h,!0),c.id=function bg(a){let u=0;const c=[a.selectors,a.ngContentSelectors,a.hostVars,a.hostAttrs,a.consts,a.vars,a.decls,a.encapsulation,a.standalone,a.signals,a.exportAs,JSON.stringify(a.inputs),JSON.stringify(a.outputs),Object.getOwnPropertyNames(a.type.prototype),!!a.contentQueries,!!a.viewQuery].join("|");for(const p of c)u=Math.imul(31,u)+p.charCodeAt(0)<<0;return u+=2147483648,"c"+u}(c),c})}function Sh(a){return on(a)||ri(a)}function Cg(a){return null!==a}function bl(a){return Ce(()=>({type:a.type,bootstrap:a.bootstrap||ut,declarations:a.declarations||ut,imports:a.imports||ut,exports:a.exports||ut,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Dh(a,u){if(null==a)return mt;const c={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),c[p]=h,u&&(u[p]=m)}return c}function Rh(a){return Ce(()=>{const u=zy(a);return Ph(u),u})}function xh(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function on(a){return a[$t]||null}function ri(a){return a[mn]||null}function ii(a){return a[Nr]||null}function Ju(a){const u=on(a)||ri(a)||ii(a);return null!==u&&u.standalone}function ki(a,u){const c=a[tr]||null;if(!c&&!0===u)throw new Error(`Type ${Q(a)} does not have '\u0275mod' property.`);return c}function zy(a){const u={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputTransforms:null,inputConfig:a.inputs||mt,exportAs:a.exportAs||null,standalone:!0===a.standalone,signals:!0===a.signals,selectors:a.selectors||ut,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dh(a.inputs,u),outputs:Dh(a.outputs)}}function Ph(a){a.features?.forEach(u=>u(a))}function xa(a,u){if(!a)return null;const c=u?ii:Sh;return()=>("function"==typeof a?a():a).map(h=>c(h)).filter(Cg)}const Wn=0,et=1,Gt=2,On=3,Ts=4,Yo=5,Mi=6,gu=7,pr=8,Qo=9,Pa=10,Pt=11,Sl=12,hw=13,Cs=14,kr=15,Xu=16,As=17,Oi=18,Jo=19,Wy=20,mu=21,So=22,Nh=23,Gs=24,an=25,Dg=1,Dl=2,Li=7,ec=9,Mr=11;function rs(a){return Array.isArray(a)&&"object"==typeof a[Dg]}function vi(a){return Array.isArray(a)&&!0===a[Dg]}function Rg(a){return 0!=(4&a.flags)}function Xo(a){return a.componentOffset>-1}function xl(a){return 1==(1&a.flags)}function Hs(a){return!!a.template}function tc(a){return 0!=(512&a[Gt])}function ea(a,u){return a.hasOwnProperty(yi)?a[yi]:null}let qr=null,Mg=!1;function Vi(a){const u=qr;return qr=a,u}const Og={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ww(a){if(!Lh(a)||a.dirty){if(!a.producerMustRecompute(a)&&!Cw(a))return void(a.dirty=!1);a.producerRecomputeValue(a),a.dirty=!1}}function Tw(a){a.dirty=!0,function Qy(a){if(void 0===a.liveConsumerNode)return;const u=Mg;Mg=!0;try{for(const c of a.liveConsumerNode)c.dirty||Tw(c)}finally{Mg=u}}(a),a.consumerMarkedDirty?.(a)}function Jy(a){return a&&(a.nextProducerIndex=0),Vi(a)}function Oh(a,u){if(Vi(u),a&&void 0!==a.producerNode&&void 0!==a.producerIndexOfThis&&void 0!==a.producerLastReadVersion){if(Lh(a))for(let c=a.nextProducerIndex;c<a.producerNode.length;c++)Nl(a.producerNode[c],a.producerIndexOfThis[c]);for(;a.producerNode.length>a.nextProducerIndex;)a.producerNode.pop(),a.producerLastReadVersion.pop(),a.producerIndexOfThis.pop()}}function Cw(a){ka(a);for(let u=0;u<a.producerNode.length;u++){const c=a.producerNode[u],h=a.producerLastReadVersion[u];if(h!==c.version||(ww(c),h!==c.version))return!0}return!1}function Fg(a){if(ka(a),Lh(a))for(let u=0;u<a.producerNode.length;u++)Nl(a.producerNode[u],a.producerIndexOfThis[u]);a.producerNode.length=a.producerLastReadVersion.length=a.producerIndexOfThis.length=0,a.liveConsumerNode&&(a.liveConsumerNode.length=a.liveConsumerIndexOfThis.length=0)}function Nl(a,u){if(function bw(a){a.liveConsumerNode??=[],a.liveConsumerIndexOfThis??=[]}(a),ka(a),1===a.liveConsumerNode.length)for(let h=0;h<a.producerNode.length;h++)Nl(a.producerNode[h],a.producerIndexOfThis[h]);const c=a.liveConsumerNode.length-1;if(a.liveConsumerNode[u]=a.liveConsumerNode[c],a.liveConsumerIndexOfThis[u]=a.liveConsumerIndexOfThis[c],a.liveConsumerNode.length--,a.liveConsumerIndexOfThis.length--,u<a.liveConsumerNode.length){const h=a.liveConsumerIndexOfThis[u],p=a.liveConsumerNode[u];ka(p),p.producerIndexOfThis[h]=u}}function Lh(a){return a.consumerIsAlwaysLive||(a?.liveConsumerNode?.length??0)>0}function ka(a){a.producerNode??=[],a.producerIndexOfThis??=[],a.producerLastReadVersion??=[]}let Dw=null;function Bg(a){const u=Vi(null);try{return a()}finally{Vi(u)}}const iv=()=>{},wD=(()=>({...Og,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:a=>{a.schedule(a.ref)},hasRun:!1,cleanupFn:iv}))();class Nw{constructor(u,c,h){this.previousValue=u,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function jg(){return $g}function $g(a){return a.type.prototype.ngOnChanges&&(a.setInput=ta),Uh}function Uh(){const a=Gg(this),u=a?.current;if(u){const c=a.previous;if(c===mt)a.previous=u;else for(let h in u)c[h]=u[h];a.current=null,this.ngOnChanges(u)}}function ta(a,u,c,h){const p=this.declaredInputs[c],m=Gg(a)||function kw(a,u){return a[ic]=u}(a,{previous:mt,current:null}),I=m.current||(m.current={}),w=m.previous,A=w[p];I[p]=new Nw(A&&A.currentValue,u,w===mt),a[h]=u}jg.ngInherit=!0;const ic="__ngSimpleChanges__";function Gg(a){return a[ic]||null}const Do=function(a,u,c){},sv="svg";function Rn(a){for(;Array.isArray(a);)a=a[Wn];return a}function na(a,u){return Rn(u[a])}function Ui(a,u){return Rn(u[a.index])}function qg(a,u){return a.data[u]}function sc(a,u){return a[u]}function is(a,u){const c=u[a];return rs(c)?c:c[Wn]}function Ma(a,u){return null==u?null:a[u]}function ov(a){a[As]=0}function Ml(a){1024&a[Gt]||(a[Gt]|=1024,wr(a,1))}function Mw(a){1024&a[Gt]&&(a[Gt]&=-1025,wr(a,-1))}function wr(a,u){let c=a[On];if(null===c)return;c[Yo]+=u;let h=c;for(c=c[On];null!==c&&(1===u&&1===h[Yo]||-1===u&&0===h[Yo]);)c[Yo]+=u,h=c,c=c[On]}const Mt={lFrame:_v(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function oc(){return Mt.bindingsEnabled}function Me(){return Mt.lFrame.lView}function un(){return Mt.lFrame.tView}function uo(a){return Mt.lFrame.contextLView=a,a[pr]}function Kg(a){return Mt.lFrame.contextLView=null,a}function si(){let a=Hh();for(;null!==a&&64===a.type;)a=a.parent;return a}function Hh(){return Mt.lFrame.currentTNode}function Ro(a,u){const c=Mt.lFrame;c.currentTNode=a,c.isParent=u}function hv(){return Mt.lFrame.isParent}function Fl(){return Mt.lFrame.bindingIndex++}function qs(a){const u=Mt.lFrame,c=u.bindingIndex;return u.bindingIndex=u.bindingIndex+a,c}function pv(a,u){const c=Mt.lFrame;c.bindingIndex=c.bindingRootIndex=a,gv(u)}function gv(a){Mt.lFrame.currentDirectiveIndex=a}function jw(){return Mt.lFrame.currentQueryIndex}function mv(a){Mt.lFrame.currentQueryIndex=a}function DD(a){const u=a[et];return 2===u.type?u.declTNode:1===u.type?a[Mi]:null}function Jg(a,u,c){if(c&bt.SkipSelf){let p=u,m=a;for(;!(p=p.parent,null!==p||c&bt.Host||(p=DD(m),null===p||(m=m[Cs],10&p.type))););if(null===p)return!1;u=p,a=m}const h=Mt.lFrame=zr();return h.currentTNode=u,h.lView=a,!0}function yn(a){const u=zr(),c=a[et];Mt.lFrame=u,u.currentTNode=c.firstChild,u.lView=a,u.tView=c,u.contextLView=a,u.bindingIndex=c.bindingStartIndex,u.inI18n=!1}function zr(){const a=Mt.lFrame,u=null===a?null:a.child;return null===u?_v(a):u}function _v(a){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=u),u}function qh(){const a=Mt.lFrame;return Mt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const yv=qh;function Vl(){const a=qh();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Or(){return Mt.lFrame.selectedIndex}function bs(a){Mt.lFrame.selectedIndex=a}function en(){const a=Mt.lFrame;return qg(a.tView,a.selectedIndex)}function Rt(){Mt.lFrame.currentNamespace=sv}function vv(){!function Iv(){Mt.lFrame.currentNamespace=null}()}let zh=!0;function ac(){return zh}function ss(a){zh=a}function uc(a,u){for(let c=u.directiveStart,h=u.directiveEnd;c<h;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:w,ngAfterViewInit:A,ngAfterViewChecked:S,ngOnDestroy:k}=m;I&&(a.contentHooks??=[]).push(-c,I),w&&((a.contentHooks??=[]).push(c,w),(a.contentCheckHooks??=[]).push(c,w)),A&&(a.viewHooks??=[]).push(-c,A),S&&((a.viewHooks??=[]).push(c,S),(a.viewCheckHooks??=[]).push(c,S)),null!=k&&(a.destroyHooks??=[]).push(c,k)}}function Bl(a,u,c){Wh(a,u,3,c)}function cc(a,u,c,h){(3&a[Gt])===c&&Wh(a,u,c,h)}function nm(a,u){let c=a[Gt];(3&c)===u&&(c&=8191,c+=1,a[Gt]=c)}function Wh(a,u,c,h){const m=h??-1,I=u.length-1;let w=0;for(let A=void 0!==h?65535&a[As]:0;A<I;A++)if("number"==typeof u[A+1]){if(w=u[A],null!=h&&w>=h)break}else u[A]<0&&(a[As]+=65536),(w<m||-1==m)&&(Fa(a,c,u,A),a[As]=(4294901760&a[As])+A+2),A++}function Ss(a,u){Do(4,a,u);const c=Vi(null);try{u.call(a)}finally{Vi(c),Do(5,a,u)}}function Fa(a,u,c,h){const p=c[h]<0,m=c[h+1],w=a[p?-c[h]:c[h]];p?a[Gt]>>13<a[As]>>16&&(3&a[Gt])===u&&(a[Gt]+=8192,Ss(w,m)):Ss(w,m)}const co=-1;class Tr{constructor(u,c,h){this.factory=u,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Kh(a){return a!==co}function lc(a){return 32767&a}function Ua(a,u){let c=function Yh(a){return a>>16}(a),h=u;for(;c>0;)h=h[Cs],c--;return h}let Qh=!0;function _u(a){const u=Qh;return Qh=a,u}const sm=255,Jh=5;let Av=0;const Ds={};function yu(a,u){const c=$l(a,u);if(-1!==c)return c;const h=u[et];h.firstCreatePass&&(a.injectorIndex=u.length,dc(h.data,a),dc(u,null),dc(h.blueprint,null));const p=Gl(a,u),m=a.injectorIndex;if(Kh(p)){const I=lc(p),w=Ua(p,u),A=w[et].data;for(let S=0;S<8;S++)u[m+S]=w[I+S]|A[I+S]}return u[m+8]=p,m}function dc(a,u){a.push(0,0,0,0,0,0,0,0,u)}function $l(a,u){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===u[a.injectorIndex+8]?-1:a.injectorIndex}function Gl(a,u){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,h=null,p=u;for(;null!==p;){if(h=qw(p),null===h)return co;if(c++,p=p[Cs],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return co}function Hl(a,u,c){!function jl(a,u,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(bo)&&(h=c[bo]),null==h&&(h=c[bo]=Av++);const p=h&sm;u.data[a+(p>>Jh)]|=1<<p}(a,u,c)}function hc(a,u,c){if(c&bt.Optional||void 0!==a)return a;He()}function om(a,u,c,h){if(c&bt.Optional&&void 0===h&&(h=null),!(c&(bt.Self|bt.Host))){const p=a[Qo],m=_n(void 0);try{return p?p.get(u,h,c&bt.Optional):Pi(u,h,c&bt.Optional)}finally{_n(m)}}return hc(h,0,c)}function ef(a,u,c,h=bt.Default,p){if(null!==a){if(2048&u[Gt]&&!(h&bt.Self)){const I=function RD(a,u,c,h,p){let m=a,I=u;for(;null!==m&&null!==I&&2048&I[Gt]&&!(512&I[Gt]);){const w=ql(m,I,c,h|bt.Self,Ds);if(w!==Ds)return w;let A=m.parent;if(!A){const S=I[Wy];if(S){const k=S.get(c,Ds,h);if(k!==Ds)return k}A=qw(I),I=I[Cs]}m=A}return p}(a,u,c,h,Ds);if(I!==Ds)return I}const m=ql(a,u,c,h,Ds);if(m!==Ds)return m}return om(u,c,h,p)}function ql(a,u,c,h,p){const m=function bv(a){if("string"==typeof a)return a.charCodeAt(0)||0;const u=a.hasOwnProperty(bo)?a[bo]:void 0;return"number"==typeof u?u>=0?u&sm:Hw:u}(c);if("function"==typeof m){if(!Jg(u,a,h))return h&bt.Host?hc(p,0,h):om(u,c,h,p);try{let I;if(I=m(h),null!=I||h&bt.Optional)return I;He()}finally{yv()}}else if("number"==typeof m){let I=null,w=$l(a,u),A=co,S=h&bt.Host?u[kr][Mi]:null;for((-1===w||h&bt.SkipSelf)&&(A=-1===w?Gl(a,u):u[w+8],A!==co&&ra(h,!1)?(I=u[et],w=lc(A),u=Ua(A,u)):w=-1);-1!==w;){const k=u[et];if(Gw(m,w,k.data)){const H=Bi(w,u,c,I,h,S);if(H!==Ds)return H}A=u[w+8],A!==co&&ra(h,u[et].data[w+8]===S)&&Gw(m,w,u)?(I=k,w=lc(A),u=Ua(A,u)):w=-1}}return p}function Bi(a,u,c,h,p,m){const I=u[et],w=I.data[a+8],k=lo(w,I,c,null==h?Xo(w)&&Qh:h!=I&&0!=(3&w.type),p&bt.Host&&m===w);return null!==k?Ba(u,I,k,w):Ds}function lo(a,u,c,h,p){const m=a.providerIndexes,I=u.data,w=1048575&m,A=a.directiveStart,k=m>>20,te=p?w+k:a.directiveEnd;for(let ue=h?w:w+k;ue<te;ue++){const Pe=I[ue];if(ue<A&&c===Pe||ue>=A&&Pe.type===c)return ue}if(p){const ue=I[A];if(ue&&Hs(ue)&&ue.type===c)return A}return null}function Ba(a,u,c,h){let p=a[c];const m=u.data;if(function Va(a){return a instanceof Tr}(p)){const I=p;I.resolving&&function Ae(a,u){const c=u?`. Dependency path: ${u.join(" > ")} > ${a}`:"";throw new se(-200,`Circular dependency in DI detected for ${a}${c}`)}(function he(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():re(a)}(m[c]));const w=_u(I.canSeeViewProviders);I.resolving=!0;const S=I.injectImpl?_n(I.injectImpl):null;Jg(a,h,bt.Default);try{p=a[c]=I.factory(void 0,m,a,h),u.firstCreatePass&&c>=h.directiveStart&&function xo(a,u,c){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=u.type.prototype;if(h){const I=$g(u);(c.preOrderHooks??=[]).push(a,I),(c.preOrderCheckHooks??=[]).push(a,I)}p&&(c.preOrderHooks??=[]).push(0-a,p),m&&((c.preOrderHooks??=[]).push(a,m),(c.preOrderCheckHooks??=[]).push(a,m))}(c,m[c],u)}finally{null!==S&&_n(S),_u(w),I.resolving=!1,yv()}}return p}function Gw(a,u,c){return!!(c[u+(a>>Jh)]&1<<a)}function ra(a,u){return!(a&bt.Self||a&bt.Host&&u)}class gr{constructor(u,c){this._tNode=u,this._lView=c}get(u,c,h){return ef(this._tNode,this._lView,u,fn(h),c)}}function Hw(){return new gr(si(),Me())}function tf(a){return Ce(()=>{const u=a.prototype.constructor,c=u[yi]||um(u),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[yi]||um(p);if(m&&m!==c)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function um(a){return _e(a)?()=>{const u=um(xe(a));return u&&u()}:ea(a)}function qw(a){const u=a[et],c=u.type;return 2===c?u.declTNode:1===c?a[Mi]:null}function Sv(a){return function Xh(a,u){if("class"===u)return a.classes;if("style"===u)return a.styles;const c=a.attrs;if(c){const h=c.length;let p=0;for(;p<h;){const m=c[p];if(Zo(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof c[p];)p++;else{if(m===u)return c[p+1];p+=2}}}return null}(si(),a)}const Wl="__parameters__";function Iu(a,u,c){return Ce(()=>{const h=function cm(a){return function(...c){if(a){const h=a(...c);for(const p in h)this[p]=h[p]}}}(u);function p(...m){if(this instanceof p)return h.apply(this,m),this;const I=new p(...m);return w.annotation=I,w;function w(A,S,k){const H=A.hasOwnProperty(Wl)?A[Wl]:Object.defineProperty(A,Wl,{value:[]})[Wl];for(;H.length<=k;)H.push(null);return(H[k]=H[k]||[]).push(I),A}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}function Yl(a,u){a.forEach(c=>Array.isArray(c)?Yl(c,u):u(c))}function ND(a,u,c){u>=a.length?a.push(c):a.splice(u,0,c)}function wu(a,u){return u>=a.length-1?a.pop():a.splice(u,1)[0]}function Ii(a,u,c){let h=gc(a,u);return h>=0?a[1|h]=c:(h=~h,function Xl(a,u,c,h){let p=a.length;if(p==u)a.push(c,h);else if(1===p)a.push(h,a[0]),a[0]=c;else{for(p--,a.push(a[p-1],a[p]);p>u;)a[p]=a[p-2],p--;a[u]=c,a[u+1]=h}}(a,h,u,c)),h}function pc(a,u){const c=gc(a,u);if(c>=0)return a[1|c]}function gc(a,u){return function mc(a,u,c){let h=0,p=a.length>>c;for(;p!==h;){const m=h+(p-h>>1),I=a[m<<c];if(u===I)return m<<c;I>u?p=m:h=m+1}return~(p<<c)}(a,u,1)}const ve=Pn(Iu("Optional"),8),tt=Pn(Iu("SkipSelf"),4);function hm(a){return 128==(128&a.flags)}var fm=function(a){return a[a.Important=1]="Important",a[a.DashCase=2]="DashCase",a}(fm||{});const Vv=new Map;let yO=0;const iT="__ngContext__";function ji(a,u){rs(u)?(a[iT]=u[Jo],function tT(a){Vv.set(a[Jo],a)}(u)):a[iT]=u}let Bv;function n1(a,u){return Bv(a,u)}function jv(a){const u=a[On];return vi(u)?u[On]:u}function IO(a){return sT(a[Sl])}function EO(a){return sT(a[Ts])}function sT(a){for(;null!==a&&!vi(a);)a=a[Ts];return a}function df(a,u,c,h,p){if(null!=h){let m,I=!1;vi(h)?m=h:rs(h)&&(I=!0,h=h[Wn]);const w=Rn(h);0===a&&null!==c?null==p?uT(u,c,w):Au(u,c,w,p||null,!0):1===a&&null!==c?Au(u,c,w,p||null,!0):2===a?function _m(a,u,c){const h=rd(a,u);h&&function mm(a,u,c,h){a.removeChild(u,c,h)}(a,h,u,c)}(u,w,I):3===a&&u.destroyNode(w),null!=m&&function bO(a,u,c,h,p){const m=c[Li];m!==Rn(c)&&df(u,a,h,m,p);for(let w=Mr;w<c.length;w++){const A=c[w];Ha(A[et],A,a,u,h,m)}}(u,a,m,c,p)}}function $v(a,u,c){return a.createElement(u,c)}function o1(a,u){const c=a[ec],h=c.indexOf(u);Mw(u),c.splice(h,1)}function ff(a,u){if(a.length<=Mr)return;const c=Mr+u,h=a[c];if(h){const p=h[Xu];null!==p&&p!==a&&o1(p,h),u>0&&(a[c-1][Ts]=h[Ts]);const m=wu(a,Mr+u);!function TO(a,u){Ha(a,u,u[Pt],2,null,null),u[Wn]=null,u[Mi]=null}(h[et],h);const I=m[Oi];null!==I&&I.detachView(m[et]),h[On]=null,h[Ts]=null,h[Gt]&=-129}return h}function aT(a,u){if(!(256&u[Gt])){const c=u[Pt];u[Nh]&&Fg(u[Nh]),u[Gs]&&Fg(u[Gs]),c.destroyNode&&Ha(a,u,c,3,null,null),function wt(a){let u=a[Sl];if(!u)return Gv(a[et],a);for(;u;){let c=null;if(rs(u))c=u[Sl];else{const h=u[Mr];h&&(c=h)}if(!c){for(;u&&!u[Ts]&&u!==a;)rs(u)&&Gv(u[et],u),u=u[On];null===u&&(u=a),rs(u)&&Gv(u[et],u),c=u&&u[Ts]}u=c}}(u)}}function Gv(a,u){if(!(256&u[Gt])){u[Gt]&=-129,u[Gt]|=256,function Hv(a,u){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let h=0;h<c.length;h+=2){const p=u[c[h]];if(!(p instanceof Tr)){const m=c[h+1];if(Array.isArray(m))for(let I=0;I<m.length;I+=2){const w=p[m[I]],A=m[I+1];Do(4,w,A);try{A.call(w)}finally{Do(5,w,A)}}else{Do(4,p,m);try{m.call(p)}finally{Do(5,p,m)}}}}}(a,u),function AO(a,u){const c=a.cleanup,h=u[gu];if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const I=c[m+3];I>=0?h[I]():h[-I].unsubscribe(),m+=2}else c[m].call(h[c[m+1]]);null!==h&&(u[gu]=null);const p=u[mu];if(null!==p){u[mu]=null;for(let m=0;m<p.length;m++)(0,p[m])()}}(a,u),1===u[et].type&&u[Pt].destroy();const c=u[Xu];if(null!==c&&vi(u[On])){c!==u[On]&&o1(c,u);const h=u[Oi];null!==h&&h.detachView(a)}!function zD(a){Vv.delete(a[Jo])}(u)}}function td(a,u,c){return function a1(a,u,c){let h=u;for(;null!==h&&40&h.type;)h=(u=h).parent;if(null===h)return c[Wn];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:m}=a.data[h.directiveStart+p];if(m===$e.None||m===$e.Emulated)return null}return Ui(h,c)}}(a,u.parent,c)}function Au(a,u,c,h,p){a.insertBefore(u,c,h,p)}function uT(a,u,c){a.appendChild(u,c)}function u1(a,u,c,h,p){null!==h?Au(a,u,c,h,p):uT(a,u,c)}function rd(a,u){return a.parentNode(u)}let ir,Ic,hT,vm,oa=function cT(a,u,c){return 40&a.type?Ui(a,c):null};function yc(a,u,c,h){const p=td(a,h,u),m=u[Pt],w=function qv(a,u,c){return oa(a,u,c)}(h.parent||u[Mi],h,u);if(null!=p)if(Array.isArray(c))for(let A=0;A<c.length;A++)u1(m,p,c[A],w,!1);else u1(m,p,c,w,!1);void 0!==ir&&ir(m,h,u,c,p)}function Ei(a,u){if(null!==u){const c=u.type;if(3&c)return Ui(u,a);if(4&c)return pf(-1,a[u.index]);if(8&c){const h=u.child;if(null!==h)return Ei(a,h);{const p=a[u.index];return vi(p)?pf(-1,p):Rn(p)}}if(32&c)return n1(u,a)()||Rn(a[u.index]);{const h=$i(a,u);return null!==h?Array.isArray(h)?h[0]:Ei(jv(a[kr]),h):Ei(a,u.next)}}return null}function $i(a,u){return null!==u?a[kr][Mi].projection[u.projection]:null}function pf(a,u){const c=Mr+a+1;if(c<u.length){const h=u[c],p=h[et].firstChild;if(null!==p)return Ei(h,p)}return u[Li]}function Ga(a,u,c,h,p,m,I){for(;null!=c;){const w=h[c.index],A=c.type;if(I&&0===u&&(w&&ji(Rn(w),h),c.flags|=2),32!=(32&c.flags))if(8&A)Ga(a,u,c.child,h,p,m,!1),df(u,a,p,w,m);else if(32&A){const S=n1(c,h);let k;for(;k=S();)df(u,a,p,k,m);df(u,a,p,w,m)}else 16&A?vc(a,u,h,c,p,m):df(u,a,p,w,m);c=I?c.projectionNext:c.next}}function Ha(a,u,c,h,p,m){Ga(c,h,a.firstChild,u,p,m,!1)}function vc(a,u,c,h,p,m){const I=c[kr],A=I[Mi].projection[h.projection];if(Array.isArray(A))for(let S=0;S<A.length;S++)df(u,a,p,A[S],m);else{let S=A;const k=I[On];hm(h)&&(S.flags|=128),Ga(a,u,S,k,p,m,!0)}}function l1(a,u,c){""===c?a.removeAttribute(u,"class"):a.setAttribute(u,"class",c)}function d1(a,u,c){const{mergedAttrs:h,classes:p,styles:m}=c;null!==h&&Ch(a,u,h),null!==p&&l1(a,u,p),null!==m&&function lT(a,u,c){a.setAttribute(u,"style",c)}(a,u,m)}function gf(a){return function dT(){if(void 0===Ic&&(Ic=null,Xt.trustedTypes))try{Ic=Xt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Ic}()?.createHTML(a)||a}function SO(a){hT=a}function fT(a){return function Wv(){if(void 0===vm&&(vm=null,Xt.trustedTypes))try{vm=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return vm}()?.createScriptURL(a)||a}class Ec{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ve})`}}class DO extends Ec{getTypeName(){return"HTML"}}class f1 extends Ec{getTypeName(){return"Style"}}class RO extends Ec{getTypeName(){return"Script"}}class p1 extends Ec{getTypeName(){return"URL"}}class g1 extends Ec{getTypeName(){return"ResourceURL"}}function No(a){return a instanceof Ec?a.changingThisBreaksApplicationSecurity:a}function aa(a,u){const c=function Mn(a){return a instanceof Ec&&a.getTypeName()||null}(a);if(null!=c&&c!==u){if("ResourceURL"===c&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${c} (see ${Ve})`)}return c===u}function Im(a){return new DO(a)}function xO(a){return new f1(a)}function sd(a){return new RO(a)}function PO(a){return new p1(a)}function Em(a){return new g1(a)}class NO{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const c=(new window.DOMParser).parseFromString(gf(u),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(u):(c.removeChild(c.firstChild),c)}catch{return null}}}class Kv{constructor(u){this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(u){const c=this.inertDocument.createElement("template");return c.innerHTML=gf(u),c}}const m1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function od(a){return(a=String(a)).match(m1)?a:"unsafe:"+a}function Su(a){const u={};for(const c of a.split(","))u[c]=!0;return u}function ad(...a){const u={};for(const c of a)for(const h in c)c.hasOwnProperty(h)&&(u[h]=!0);return u}const Tm=Su("area,br,col,hr,img,wbr"),pT=Su("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gT=Su("rp,rt"),Cm=ad(Tm,ad(pT,Su("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ad(gT,Su("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ad(gT,pT)),mT=Su("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_1=ad(mT,Su("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Su("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kO=Su("script,style,template");class MO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let c=u.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let p=this.checkClobberedElement(c,c.nextSibling);if(p){c=p;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(u){const c=u.nodeName.toLowerCase();if(!Cm.hasOwnProperty(c))return this.sanitizedSomething=!0,!kO.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=u.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),I=m.name,w=I.toLowerCase();if(!_1.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let A=m.value;mT[w]&&(A=od(A)),this.buf.push(" ",I,'="',_T(A),'"')}return this.buf.push(">"),!0}endElement(u){const c=u.nodeName.toLowerCase();Cm.hasOwnProperty(c)&&!Tm.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(u){this.buf.push(_T(u))}checkClobberedElement(u,c){if(c&&(u.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return c}}const OO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y1=/([^\#-~ |!])/g;function _T(a){return a.replace(/&/g,"&amp;").replace(OO,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(y1,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yv;function wc(a,u){let c=null;try{Yv=Yv||function Zv(a){const u=new Kv(a);return function wm(){try{return!!(new window.DOMParser).parseFromString(gf(""),"text/html")}catch{return!1}}()?new NO(u):u}(a);let h=u?String(u):"";c=Yv.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=c.innerHTML,c=Yv.getInertBodyElement(h)}while(h!==m);return gf((new MO).sanitizeChildren(yT(c)||c))}finally{if(c){const h=yT(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function yT(a){return"content"in a&&function v1(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Tc=function(a){return a[a.NONE=0]="NONE",a[a.HTML=1]="HTML",a[a.STYLE=2]="STYLE",a[a.SCRIPT=3]="SCRIPT",a[a.URL=4]="URL",a[a.RESOURCE_URL=5]="RESOURCE_URL",a}(Tc||{});function bm(a){const u=Du();return u?u.sanitize(Tc.URL,a)||"":aa(a,"URL")?No(a):od(re(a))}function vT(a){const u=Du();if(u)return fT(u.sanitize(Tc.RESOURCE_URL,a)||"");if(aa(a,"ResourceURL"))return fT(No(a));throw new se(904,!1)}function E1(a,u,c){return function FO(a,u){return"src"===u&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===u&&("base"===a||"link"===a)?vT:bm}(u,c)(a)}function Du(){const a=Me();return a&&a[Pa].sanitizer}class xn{constructor(u,c){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ot({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ud=new xn("ENVIRONMENT_INITIALIZER"),w1=new xn("INJECTOR",-1),IT=new xn("INJECTOR_DEF_TYPES");class Xv{get(u,c=er){if(c===er){const h=new Error(`NullInjectorError: No provider for ${Q(u)}!`);throw h.name="NullInjectorError",h}return c}}function cd(a){return{\u0275providers:a}}function qa(...a){return{\u0275providers:Sm(0,a),\u0275fromNgModule:!0}}function Sm(a,...u){const c=[],h=new Set;let p;const m=I=>{c.push(I)};return Yl(u,I=>{const w=I;Cc(w,m,[],h)&&(p||=[],p.push(w))}),void 0!==p&&Ru(p,m),c}function Ru(a,u){for(let c=0;c<a.length;c++){const{ngModule:h,providers:p}=a[c];_f(p,m=>{u(m,h)})}}function Cc(a,u,c,h){if(!(a=xe(a)))return!1;let p=null,m=es(a);const I=!m&&on(a);if(m||I){if(I&&!I.standalone)return!1;p=a}else{const A=a.ngModule;if(m=es(A),!m)return!1;p=A}const w=h.has(p);if(I){if(w)return!1;if(h.add(p),I.dependencies){const A="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const S of A)Cc(S,u,c,h)}}else{if(!m)return!1;{if(null!=m.imports&&!w){let S;h.add(p);try{Yl(m.imports,k=>{Cc(k,u,c,h)&&(S||=[],S.push(k))})}finally{}void 0!==S&&Ru(S,u)}if(!w){const S=ea(p)||(()=>new p);u({provide:p,useFactory:S,deps:ut},p),u({provide:IT,useValue:p,multi:!0},p),u({provide:ud,useValue:()=>Xe(p),multi:!0},p)}const A=m.providers;if(null!=A&&!w){const S=a;_f(A,k=>{u(k,S)})}}}return p!==a&&void 0!==a.providers}function _f(a,u){for(let c of a)De(c)&&(c=c.\u0275providers),Array.isArray(c)?_f(c,u):u(c)}const T1=U({provide:String,useValue:U});function ET(a){return null!==a&&"object"==typeof a&&T1 in a}function ld(a){return"function"==typeof a}const wT=new xn("Set Injector scope."),e0={},BO={};let TT;function Rm(){return void 0===TT&&(TT=new Xv),TT}class ua{}class yf extends ua{get destroyed(){return this._destroyed}constructor(u,c,h,p){super(),this.parent=c,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ac(u,I=>this.processProvider(I)),this.records.set(w1,dd(void 0,this)),p.has("environment")&&this.records.set(ua,dd(void 0,this));const m=this.records.get(wT);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(IT.multi,ut,bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const u=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of u)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(u){return this.assertNotDestroyed(),this._onDestroyHooks.push(u),()=>this.removeOnDestroy(u)}runInContext(u){this.assertNotDestroyed();const c=oe(this),h=_n(void 0);try{return u()}finally{oe(c),_n(h)}}get(u,c=er,h=bt.Default){if(this.assertNotDestroyed(),u.hasOwnProperty(Th))return u[Th](this);h=fn(h);const m=oe(this),I=_n(void 0);try{if(!(h&bt.SkipSelf)){let A=this.records.get(u);if(void 0===A){const S=function xu(a){return"function"==typeof a||"object"==typeof a&&a instanceof xn}(u)&&Xn(u);A=S&&this.injectableDefInScope(S)?dd(xm(u),e0):null,this.records.set(u,A)}if(null!=A)return this.hydrate(u,A)}return(h&bt.Self?Rm():this.parent).get(u,c=h&bt.Optional&&c===er?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Es]=w[Es]||[]).unshift(Q(u)),m)throw w;return function Ni(a,u,c,h){const p=a[Es];throw u[F]&&p.unshift(u[F]),a.message=function pu(a,u,c,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Q(u);if(Array.isArray(u))p=u.map(Q).join(" -> ");else if("object"==typeof u){let m=[];for(let I in u)if(u.hasOwnProperty(I)){let w=u[I];m.push(I+":"+("string"==typeof w?JSON.stringify(w):Q(w)))}p=`{${m.join(", ")}}`}return`${c}${h?"("+h+")":""}[${p}]: ${a.replace(X,"\n  ")}`}("\n"+a.message,p,c,h),a.ngTokenPath=p,a[Es]=null,a}(w,u,"R3InjectorError",this.source)}throw w}finally{_n(I),oe(m)}}resolveInjectorInitializers(){const u=oe(this),c=_n(void 0);try{const p=this.get(ud.multi,ut,bt.Self);for(const m of p)m()}finally{oe(u),_n(c)}}toString(){const u=[],c=this.records;for(const h of c.keys())u.push(Q(h));return`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(u){let c=ld(u=xe(u))?u:xe(u&&u.provide);const h=function jO(a){return ET(a)?dd(void 0,a.useValue):dd(vf(a),e0)}(u);if(ld(u)||!0!==u.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=dd(void 0,e0,!0),p.factory=()=>kt(p.multi),this.records.set(c,p)),c=u,p.multi.push(u)}this.records.set(c,h)}hydrate(u,c){return c.value===e0&&(c.value=BO,c.value=c.factory()),"object"==typeof c.value&&c.value&&function AT(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(u){if(!u.providedIn)return!1;const c=xe(u.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(u){const c=this._onDestroyHooks.indexOf(u);-1!==c&&this._onDestroyHooks.splice(c,1)}}function xm(a){const u=Xn(a),c=null!==u?u.factory:ea(a);if(null!==c)return c;if(a instanceof xn)throw new se(204,!1);if(a instanceof Function)return function t9(a){const u=a.length;if(u>0)throw function Ql(a,u){const c=[];for(let h=0;h<a;h++)c.push(u);return c}(u,"?"),new se(204,!1);const c=function vs(a){return a&&(a[Ri]||a[xi])||null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new se(204,!1)}function vf(a,u,c){let h;if(ld(a)){const p=xe(a);return ea(p)||xm(p)}if(ET(a))h=()=>xe(a.useValue);else if(function A1(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...kt(a.deps||[]));else if(function C1(a){return!(!a||!a.useExisting)}(a))h=()=>Xe(xe(a.useExisting));else{const p=xe(a&&(a.useClass||a.provide));if(!function CT(a){return!!a.deps}(a))return ea(p)||xm(p);h=()=>new p(...kt(a.deps))}return h}function dd(a,u,c=!1){return{factory:a,value:u,multi:c?[]:void 0}}function Ac(a,u){for(const c of a)Array.isArray(c)?Ac(c,u):c&&De(c)?Ac(c.\u0275providers,u):u(c)}const bT=new xn("AppId",{providedIn:"root",factory:()=>b1}),b1="ng",S1=new xn("Platform Initializer"),bc=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),t0=new xn("CSP nonce",{providedIn:"root",factory:()=>function Rs(){if(void 0!==hT)return hT;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let qO=(a,u,c)=>null;function x1(a,u,c=!1){return qO(a,u,c)}class N1{}class Om{}class Fm{resolveComponentFactory(u){throw function ZO(a){const u=Error(`No component factory found for ${Q(a)}.`);return u.ngComponent=a,u}(u)}}let Vm=(()=>{class a{static#e=this.NULL=new Fm}return a})();function KO(){return za(si(),Me())}function za(a,u){return new ku(Ui(a,u))}let ku=(()=>{class a{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=KO}return a})();function YO(a){return a instanceof ku?a.nativeElement:a}class M1{}let QO=(()=>{class a{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function JO(){const a=Me(),c=is(si().index,a);return(rs(c)?c:a)[Pt]}()}return a})(),XO=(()=>{class a{static#e=this.\u0275prov=Ot({token:a,providedIn:"root",factory:()=>null})}return a})();class O1{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const e2=new O1("16.2.7"),kT={};function V1(a,u=null,c=null,h){const p=MT(a,u,c,h);return p.resolveInjectorInitializers(),p}function MT(a,u=null,c=null,h,p=new Set){const m=[c||ut,qa(a)];return h=h||("object"==typeof a?void 0:Q(a)),new yf(m,u||Rm(),h||null,p)}let ca=(()=>{class a{static#e=this.THROW_IF_NOT_FOUND=er;static#t=this.NULL=new Xv;static create(c,h){if(Array.isArray(c))return V1({name:""},h,c,"");{const p=c.name??"";return V1({name:p},c.parent,c.providers,p)}}static#n=this.\u0275prov=Ot({token:a,providedIn:"any",factory:()=>Xe(w1)});static#r=this.__NG_ELEMENT_ID__=-1}return a})();function Sc(a){return a.ngOriginalError}class Mu{constructor(){this._console=console}handleError(u){const c=this._findOriginalError(u);this._console.error("ERROR",u),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(u){let c=u&&Sc(u);for(;c&&Sc(c);)c=Sc(c);return c||null}}function FT(a){return u=>{setTimeout(a,void 0,u)}}const ko=class LT extends l.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,c,h){let p=u,m=c||(()=>null),I=h;if(u&&"object"==typeof u){const A=u;p=A.next?.bind(A),m=A.error?.bind(A),I=A.complete?.bind(A)}this.__isAsync&&(m=FT(m),p&&(p=FT(p)),I&&(I=FT(I)));const w=super.subscribe({next:p,error:m,complete:I});return u instanceof N.w0&&u.add(w),w}};function VT(...a){}class wi{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ko(!1),this.onMicrotaskEmpty=new ko(!1),this.onStable=new ko(!1),this.onError=new ko(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&c,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function c2(){const a="function"==typeof Xt.requestAnimationFrame;let u=Xt[a?"requestAnimationFrame":"setTimeout"],c=Xt[a?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&u&&c){const h=u[Zone.__symbol__("OriginalDelegate")];h&&(u=h);const p=c[Zone.__symbol__("OriginalDelegate")];p&&(c=p)}return{nativeRequestAnimationFrame:u,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function h2(a){const u=()=>{!function d2(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Xt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,UT(a),a.isCheckStableRunning=!0,Tf(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),UT(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,p,m,I,w)=>{if(function j1(a){return!(!Array.isArray(a)||1!==a.length)&&!0===a[0].data?.__ignore_ng_zone__}(w))return c.invokeTask(p,m,I,w);try{return U1(a),c.invokeTask(p,m,I,w)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&u(),B1(a)}},onInvoke:(c,h,p,m,I,w,A)=>{try{return U1(a),c.invoke(p,m,I,w,A)}finally{a.shouldCoalesceRunChangeDetection&&u(),B1(a)}},onHasTask:(c,h,p,m)=>{c.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,UT(a),Tf(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,h,p,m)=>(c.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wi.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(wi.isInAngularZone())throw new se(909,!1)}run(u,c,h){return this._inner.run(u,c,h)}runTask(u,c,h,p){const m=this._inner,I=m.scheduleEventTask("NgZoneEvent: "+p,u,l2,VT,VT);try{return m.runTask(I,c,h)}finally{m.cancelTask(I)}}runGuarded(u,c,h){return this._inner.runGuarded(u,c,h)}runOutsideAngular(u){return this._outer.run(u)}}const l2={};function Tf(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function UT(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function U1(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function B1(a){a._nesting--,Tf(a)}class f2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ko,this.onMicrotaskEmpty=new ko,this.onStable=new ko,this.onError=new ko}run(u,c,h){return u.apply(c,h)}runGuarded(u,c,h){return u.apply(c,h)}runOutsideAngular(u){return u()}runTask(u,c,h,p){return u.apply(c,h)}}const BT=new xn("",{providedIn:"root",factory:p2});function p2(){const a=dt(wi);let u=!0;const c=new D.y(p=>{u=a.isStable&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks,a.runOutsideAngular(()=>{p.next(u),p.complete()})}),h=new D.y(p=>{let m;a.runOutsideAngular(()=>{m=a.onStable.subscribe(()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{!u&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks&&(u=!0,p.next(!0))})})});const I=a.onUnstable.subscribe(()=>{wi.assertInAngularZone(),u&&(u=!1,a.runOutsideAngular(()=>{p.next(!1)}))});return()=>{m.unsubscribe(),I.unsubscribe()}});return(0,L.T)(c,h.pipe((0,ee.B)()))}function Ou(a){return a instanceof Function?a():a}let Bm=(()=>{class a{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ot({token:a,providedIn:"root",factory:()=>new a})}return a})();function jm(a){for(;a;){a[Gt]|=64;const u=jv(a);if(tc(a)&&!u)return a;a=u}return null}const $m=new xn("",{providedIn:"root",factory:()=>!1});let d0=null;function Z1(a,u){return a[u]??h0()}function sr(a,u){const c=h0();c.producerNode?.length&&(a[u]=d0,c.lView=a,d0=GT())}const v2={...Og,consumerIsAlwaysLive:!0,consumerMarkedDirty:a=>{jm(a.lView)},lView:null};function GT(){return Object.create(v2)}function h0(){return d0??=GT(),d0}const qt={};function K1(a){HT(un(),Me(),Or()+a,!1)}function HT(a,u,c,h){if(!h)if(3==(3&u[Gt])){const m=a.preOrderCheckHooks;null!==m&&Bl(u,m,c)}else{const m=a.preOrderHooks;null!==m&&cc(u,m,0,c)}bs(c)}function Gm(a,u=bt.Default){const c=Me();return null===c?Xe(a,u):ef(si(),c,xe(a),u)}function I2(){throw new Error("invalid")}function Sf(a,u,c,h,p,m,I,w,A,S,k){const H=u.blueprint.slice();return H[Wn]=p,H[Gt]=140|h,(null!==S||a&&2048&a[Gt])&&(H[Gt]|=2048),ov(H),H[On]=H[Cs]=a,H[pr]=c,H[Pa]=I||a&&a[Pa],H[Pt]=w||a&&a[Pt],H[Qo]=A||a&&a[Qo]||null,H[Mi]=m,H[Jo]=function zG(){return yO++}(),H[So]=k,H[Wy]=S,H[kr]=2==u.type?a[kr]:H,H}function gd(a,u,c,h,p){let m=a.data[u];if(null===m)m=function Y1(a,u,c,h,p){const m=Hh(),I=hv(),A=a.data[u]=function _9(a,u,c,h,p,m){let I=u?u.injectorIndex:-1,w=0;return function Oa(){return null!==Mt.skipHydrationRootTNode}()&&(w|=128),{type:c,index:h,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?m:m&&m.parent,c,u,h,p);return null===a.firstChild&&(a.firstChild=A),null!==m&&(I?null==m.child&&null!==A.parent&&(m.child=A):null===m.next&&(m.next=A,A.prev=m)),A}(a,u,c,h,p),function Bw(){return Mt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=h,m.attrs=p;const I=function Ll(){const a=Mt.lFrame,u=a.currentTNode;return a.isParent?u:u.parent}();m.injectorIndex=null===I?-1:I.injectorIndex}return Ro(m,!0),m}function Df(a,u,c,h){if(0===c)return-1;const p=u.length;for(let m=0;m<c;m++)u.push(h),a.blueprint.push(h),a.data.push(null);return p}function Wa(a,u,c,h,p){const m=Z1(u,Nh),I=Or(),w=2&h;try{bs(-1),w&&u.length>an&&HT(a,u,an,!1),Do(w?2:0,p);const S=w?m:null,k=Jy(S);try{null!==S&&(S.dirty=!1),c(h,p)}finally{Oh(S,k)}}finally{w&&null===u[Nh]&&sr(u,Nh),bs(I),Do(w?3:1,p)}}function qT(a,u,c){if(Rg(u)){const h=Vi(null);try{const m=u.directiveEnd;for(let I=u.directiveStart;I<m;I++){const w=a.data[I];w.contentQueries&&w.contentQueries(1,c[I],I)}}finally{Vi(h)}}}function Q1(a,u,c){oc()&&(function k2(a,u,c,h){const p=c.directiveStart,m=c.directiveEnd;Xo(c)&&function j(a,u,c){const h=Ui(u,a),p=w2(c);let I=16;c.signals?I=4096:c.onPush&&(I=64);const w=Rf(a,Sf(a,p,null,I,h,u,null,a[Pa].rendererFactory.createRenderer(h,c),null,null,null));a[u.index]=w}(u,c,a.data[p+c.componentOffset]),a.firstCreatePass||yu(c,u),ji(h,u);const I=c.initialInputs;for(let w=p;w<m;w++){const A=a.data[w],S=Ba(u,a,w,c);ji(S,u),null!==I&&Zn(0,w-p,S,A,0,I),Hs(A)&&(is(c.index,u)[pr]=Ba(u,a,w,c))}}(a,u,c,Ui(c,u)),64==(64&c.flags)&&ZT(a,u,c))}function J1(a,u,c=Ui){const h=u.localNames;if(null!==h){let p=u.index+1;for(let m=0;m<h.length;m+=2){const I=h[m+1],w=-1===I?c(u,a):a[I];a[p++]=w}}}function w2(a){const u=a.tView;return null===u||u.incompleteFirstPass?a.tView=f0(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts,a.id):u}function f0(a,u,c,h,p,m,I,w,A,S,k){const H=an+h,te=H+p,ue=function X1(a,u){const c=[];for(let h=0;h<u;h++)c.push(h<a?null:qt);return c}(H,te),Pe="function"==typeof S?S():S;return ue[et]={type:a,blueprint:ue,template:c,queries:null,viewQuery:w,declTNode:u,data:ue.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:A,consts:Pe,incompleteFirstPass:!1,ssrId:k}}let eR=a=>null;function A2(a,u,c,h){for(let p in a)if(a.hasOwnProperty(p)){c=null===c?{}:c;const m=a[p];null===h?b2(c,u,p,m):h.hasOwnProperty(p)&&b2(c,u,h[p],m)}return c}function b2(a,u,c,h){a.hasOwnProperty(c)?a[c].push(u,h):a[c]=[u,h]}function Ws(a,u,c,h,p,m,I,w){const A=Ui(u,c);let k,S=u.inputs;!w&&null!=S&&(k=S[h])?(YT(a,c,k,h,p),Xo(u)&&function D2(a,u){const c=is(u,a);16&c[Gt]||(c[Gt]|=64)}(c,u.index)):3&u.type&&(h=function y9(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=I?I(p,u.value||"",h):p,m.setProperty(A,h,p))}function WT(a,u,c,h){if(oc()){const p=null===h?null:{"":-1},m=function v9(a,u){const c=a.directiveRegistry;let h=null,p=null;if(c)for(let m=0;m<c.length;m++){const I=c[m];if(Eg(u,I.selectors,!1))if(h||(h=[]),Hs(I))if(null!==I.findHostDirectiveDefs){const w=[];p=p||new Map,I.findHostDirectiveDefs(I,w,p),h.unshift(...w,I),rR(a,u,w.length)}else h.unshift(I),rR(a,u,0);else p=p||new Map,I.findHostDirectiveDefs?.(I,h,p),h.push(I)}return null===h?null:[h,p]}(a,c);let I,w;null===m?I=w=null:[I,w]=m,null!==I&&nR(a,u,c,I,p,w),p&&function I9(a,u,c){if(u){const h=a.localNames=[];for(let p=0;p<u.length;p+=2){const m=c[u[p+1]];if(null==m)throw new se(-301,!1);h.push(u[p],m)}}}(c,h,p)}c.mergedAttrs=Tl(c.mergedAttrs,c.attrs)}function nR(a,u,c,h,p,m){for(let S=0;S<h.length;S++)Hl(yu(c,u),a,h[S].type);!function w9(a,u,c){a.flags|=1,a.directiveStart=u,a.directiveEnd=u+c,a.providerIndexes=u}(c,a.data.length,h.length);for(let S=0;S<h.length;S++){const k=h[S];k.providersResolver&&k.providersResolver(k)}let I=!1,w=!1,A=Df(a,u,h.length,null);for(let S=0;S<h.length;S++){const k=h[S];c.mergedAttrs=Tl(c.mergedAttrs,k.hostAttrs),T9(a,c,u,A,k),E9(A,k,p),null!==k.contentQueries&&(c.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(c.flags|=64);const H=k.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((a.preOrderHooks??=[]).push(c.index),I=!0),!w&&(H.ngOnChanges||H.ngDoCheck)&&((a.preOrderCheckHooks??=[]).push(c.index),w=!0),A++}!function S2(a,u,c){const p=u.directiveEnd,m=a.data,I=u.attrs,w=[];let A=null,S=null;for(let k=u.directiveStart;k<p;k++){const H=m[k],te=c?c.get(H):null,Pe=te?te.outputs:null;A=A2(H.inputs,k,A,te?te.inputs:null),S=A2(H.outputs,k,S,Pe);const We=null===A||null===I||Ah(u)?null:O2(A,k,I);w.push(We)}null!==A&&(A.hasOwnProperty("class")&&(u.flags|=8),A.hasOwnProperty("style")&&(u.flags|=16)),u.initialInputs=w,u.inputs=A,u.outputs=S}(a,c,m)}function ZT(a,u,c){const h=c.directiveStart,p=c.directiveEnd,m=c.index,I=function SD(){return Mt.lFrame.currentDirectiveIndex}();try{bs(m);for(let w=h;w<p;w++){const A=a.data[w],S=u[w];gv(w),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&M2(A,S)}}finally{bs(-1),gv(I)}}function M2(a,u){null!==a.hostBindings&&a.hostBindings(1,u)}function rR(a,u,c){u.componentOffset=c,(a.components??=[]).push(u.index)}function E9(a,u,c){if(c){if(u.exportAs)for(let h=0;h<u.exportAs.length;h++)c[u.exportAs[h]]=a;Hs(u)&&(c[""]=a)}}function T9(a,u,c,h,p){a.data[h]=p;const m=p.factory||(p.factory=ea(p.type)),I=new Tr(m,Hs(p),Gm);a.blueprint[h]=I,c[h]=I,function P2(a,u,c,h,p){const m=p.hostBindings;if(m){let I=a.hostBindingOpCodes;null===I&&(I=a.hostBindingOpCodes=[]);const w=~u.index;(function N2(a){let u=a.length;for(;u>0;){const c=a[--u];if("number"==typeof c&&c<0)return c}return 0})(I)!=w&&I.push(w),I.push(c,h,m)}}(a,u,h,Df(a,c,p.hostVars,qt),p)}function ct(a,u,c,h,p,m){const I=Ui(a,u);!function ai(a,u,c,h,p,m,I){if(null==m)a.removeAttribute(u,p,c);else{const w=null==I?re(m):I(m,h||"",p);a.setAttribute(u,p,w,c)}}(u[Pt],I,m,a.value,c,h,p)}function Zn(a,u,c,h,p,m){const I=m[u];if(null!==I)for(let w=0;w<I.length;)z(h,c,I[w++],I[w++],I[w++])}function z(a,u,c,h,p){const m=Vi(null);try{const I=a.inputTransforms;null!==I&&I.hasOwnProperty(h)&&(p=I[h].call(u,p)),null!==a.setInput?a.setInput(u,p,c,h):u[h]=p}finally{Vi(m)}}function O2(a,u,c){let h=null,p=0;for(;p<c.length;){const m=c[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const I=a[m];for(let w=0;w<I.length;w+=2)if(I[w]===u){h.push(m,I[w+1],c[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function Mo(a,u,c,h){return[a,!0,!1,u,null,0,h,c,null,null,null]}function ht(a,u){const c=a.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const m=c[h+1];if(-1!==m){const I=a.data[m];mv(c[h]),I.contentQueries(2,u[m],m)}}}function Rf(a,u){return a[Sl]?a[hw][Ts]=u:a[Sl]=u,a[hw]=u,u}function Ft(a,u,c){mv(0);const h=Vi(null);try{u(a,c)}finally{Vi(h)}}function xf(a){return a[gu]||(a[gu]=[])}function iR(a){return a.cleanup||(a.cleanup=[])}function sR(a,u){const c=a[Qo],h=c?c.get(Mu,null):null;h&&h.handleError(u)}function YT(a,u,c,h,p){for(let m=0;m<c.length;){const I=c[m++],w=c[m++];z(a.data[I],u[I],h,w,p)}}function as(a,u){const c=is(u,a),h=c[et];!function g0(a,u){for(let c=u.length;c<a.blueprint.length;c++)u.push(a.blueprint[c])}(h,c);const p=c[Wn];null!==p&&null===c[So]&&(c[So]=x1(p,c[Qo])),Yr(h,c,c[pr])}function Yr(a,u,c){yn(u);try{const h=a.viewQuery;null!==h&&Ft(1,h,c);const p=a.template;null!==p&&Wa(a,u,p,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&ht(a,u),a.staticViewQueries&&Ft(2,a.viewQuery,c);const m=a.components;null!==m&&function Dc(a,u){for(let c=0;c<u.length;c++)as(a,u[c])}(u,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{u[Gt]&=-5,Vl()}}let oR=(()=>{class a{constructor(){this.all=new Set,this.queue=new Map}create(c,h,p){const m=typeof Zone>"u"?null:Zone.current,I=function xw(a,u,c){const h=Object.create(wD);c&&(h.consumerAllowSignalWrites=!0),h.fn=a,h.schedule=u;const p=I=>{h.cleanupFn=I};return h.ref={notify:()=>Tw(h),run:()=>{if(h.dirty=!1,h.hasRun&&!Cw(h))return;h.hasRun=!0;const I=Jy(h);try{h.cleanupFn(),h.cleanupFn=iv,h.fn(p)}finally{Oh(h,I)}},cleanup:()=>h.cleanupFn()},h.ref}(c,S=>{this.all.has(S)&&this.queue.set(S,m)},p);let w;this.all.add(I),I.notify();const A=()=>{I.cleanup(),w?.(),this.all.delete(I),this.queue.delete(I)};return w=h?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[c,h]of this.queue)this.queue.delete(c),h?h.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ot({token:a,providedIn:"root",factory:()=>new a})}return a})();function Pf(a,u,c){let h=c?a.styles:null,p=c?a.classes:null,m=0;if(null!==u)for(let I=0;I<u.length;I++){const w=u[I];"number"==typeof w?m=w:1==m?p=ae(p,w):2==m&&(h=ae(h,w+": "+u[++I]+";"))}c?a.styles=h:a.stylesWithoutHost=h,c?a.classes=p:a.classesWithoutHost=p}function Nf(a,u,c,h,p=!1){for(;null!==c;){const m=u[c.index];null!==m&&h.push(Rn(m)),vi(m)&&Hi(m,h);const I=c.type;if(8&I)Nf(a,u,c.child,h);else if(32&I){const w=n1(c,u);let A;for(;A=w();)h.push(A)}else if(16&I){const w=$i(u,c);if(Array.isArray(w))h.push(...w);else{const A=jv(u[kr]);Nf(A[et],A,w,h,!0)}}c=p?c.projectionNext:c.next}return h}function Hi(a,u){for(let c=Mr;c<a.length;c++){const h=a[c],p=h[et].firstChild;null!==p&&Nf(h[et],h,p,u)}a[Li]!==a[Wn]&&u.push(a[Li])}function m0(a,u,c,h=!0){const p=u[Pa],m=p.rendererFactory,I=p.afterRenderEventManager;m.begin?.(),I?.begin();try{la(a,u,a.template,c)}catch(A){throw h&&sR(u,A),A}finally{m.end?.(),p.effectManager?.flush(),I?.end()}}function la(a,u,c,h){const p=u[Gt];if(256!=(256&p)){u[Pa].effectManager?.flush(),yn(u);try{ov(u),function Uw(a){return Mt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&Wa(a,u,c,2,h);const I=3==(3&p);if(I){const S=a.preOrderCheckHooks;null!==S&&Bl(u,S,null)}else{const S=a.preOrderHooks;null!==S&&cc(u,S,0,null),nm(u,0)}if(function L2(a){for(let u=IO(a);null!==u;u=EO(u)){if(!u[Dl])continue;const c=u[ec];for(let h=0;h<c.length;h++){Ml(c[h])}}}(u),v0(u,2),null!==a.contentQueries&&ht(a,u),I){const S=a.contentCheckHooks;null!==S&&Bl(u,S)}else{const S=a.contentHooks;null!==S&&cc(u,S,1),nm(u,1)}!function E2(a,u){const c=a.hostBindingOpCodes;if(null===c)return;const h=Z1(u,Gs);try{for(let p=0;p<c.length;p++){const m=c[p];if(m<0)bs(~m);else{const I=m,w=c[++p],A=c[++p];pv(w,I),h.dirty=!1;const S=Jy(h);try{A(2,u[I])}finally{Oh(h,S)}}}}finally{null===u[Gs]&&sr(u,Gs),bs(-1)}}(a,u);const w=a.components;null!==w&&QT(u,w,0);const A=a.viewQuery;if(null!==A&&Ft(2,A,h),I){const S=a.viewCheckHooks;null!==S&&Bl(u,S)}else{const S=a.viewHooks;null!==S&&cc(u,S,2),nm(u,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),u[Gt]&=-73,Mw(u)}finally{Vl()}}}function v0(a,u){for(let c=IO(a);null!==c;c=EO(c))for(let h=Mr;h<c.length;h++)md(c[h],u)}function F2(a,u,c){md(is(u,a),c)}function md(a,u){if(!function AD(a){return 128==(128&a[Gt])}(a))return;const c=a[et],h=a[Gt];if(80&h&&0===u||1024&h||2===u)la(c,a,c.template,a[pr]);else if(a[Yo]>0){v0(a,1);const p=c.components;null!==p&&QT(a,p,1)}}function QT(a,u,c){for(let h=0;h<u.length;h++)F2(a,u[h],c)}class _d{get rootNodes(){const u=this._lView,c=u[et];return Nf(c,u,c.firstChild,[])}constructor(u,c){this._lView=u,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pr]}set context(u){this._lView[pr]=u}get destroyed(){return 256==(256&this._lView[Gt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[On];if(vi(u)){const c=u[8],h=c?c.indexOf(this):-1;h>-1&&(ff(u,h),wu(c,h))}this._attachedToViewContainer=!1}aT(this._lView[et],this._lView)}onDestroy(u){!function Wg(a,u){if(256==(256&a[Gt]))throw new se(911,!1);null===a[mu]&&(a[mu]=[]),a[mu].push(u)}(this._lView,u)}markForCheck(){jm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Gt]&=-129}reattach(){this._lView[Gt]|=128}detectChanges(){m0(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function CO(a,u){Ha(a,u,u[Pt],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=u}}class uR extends _d{constructor(u){super(u),this._view=u}detectChanges(){const u=this._view;m0(u[et],u,u[pr],!1)}checkNoChanges(){}get context(){return null}}class cR extends Vm{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const c=on(u);return new yd(c,this.ngModule)}}function JT(a){const u=[];for(let c in a)a.hasOwnProperty(c)&&u.push({propName:a[c],templateName:c});return u}class eC{constructor(u,c){this.injector=u,this.parentInjector=c}get(u,c,h){h=fn(h);const p=this.injector.get(u,kT,h);return p!==kT||c===kT?p:this.parentInjector.get(u,c,h)}}class yd extends Om{get inputs(){const u=this.componentDef,c=u.inputTransforms,h=JT(u.inputs);if(null!==c)for(const p of h)c.hasOwnProperty(p.propName)&&(p.transform=c[p.propName]);return h}get outputs(){return JT(this.componentDef.outputs)}constructor(u,c){super(),this.componentDef=u,this.ngModule=c,this.componentType=u.type,this.selector=function mD(a){return a.map(qy).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!c}create(u,c,h,p){let m=(p=p||this.ngModule)instanceof ua?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const I=m?new eC(u,m):u,w=I.get(M1,null);if(null===w)throw new se(407,!1);const H={rendererFactory:w,sanitizer:I.get(XO,null),effectManager:I.get(oR,null),afterRenderEventManager:I.get(Bm,null)},te=w.createRenderer(null,this.componentDef),ue=this.componentDef.selectors[0][0]||"div",Pe=h?function zT(a,u,c,h){const m=h.get($m,!1)||c===$e.ShadowDom,I=a.selectRootElement(u,m);return function T2(a){eR(a)}(I),I}(te,h,this.componentDef.encapsulation,I):$v(te,ue,function XT(a){const u=a.toLowerCase();return"svg"===u?sv:"math"===u?"math":null}(ue)),Ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Oe=null;null!==Pe&&(Oe=x1(Pe,I,!0));const Vt=f0(0,null,null,1,0,null,null,null,null,null,null),Yt=Sf(null,Vt,null,Ct,null,null,H,te,I,null,Oe);let Nn,ls;yn(Yt);try{const Ea=this.componentDef;let Yc,Qc=null;Ea.findHostDirectiveDefs?(Yc=[],Qc=new Map,Ea.findHostDirectiveDefs(Ea,Yc,Qc),Yc.push(Ea)):Yc=[Ea];const Jc=function nC(a,u){const c=a[et],h=an;return a[h]=u,gd(c,h,2,"#host",null)}(Yt,Pe),YA=function lR(a,u,c,h,p,m,I){const w=p[et];!function V2(a,u,c,h){for(const p of a)u.mergedAttrs=Tl(u.mergedAttrs,p.hostAttrs);null!==u.mergedAttrs&&(Pf(u,u.mergedAttrs,!0),null!==c&&d1(h,c,u))}(h,a,u,I);let A=null;null!==u&&(A=x1(u,p[Qo]));const S=m.rendererFactory.createRenderer(u,c);let k=16;c.signals?k=4096:c.onPush&&(k=64);const H=Sf(p,w2(c),null,k,p[a.index],a,m,S,null,null,A);return w.firstCreatePass&&rR(w,a,h.length-1),Rf(p,H),p[a.index]=H}(Jc,Pe,Ea,Yc,Yt,H,te);ls=qg(Vt,an),Pe&&function U2(a,u,c,h){if(h)Ch(a,c,["ng-version",e2.full]);else{const{attrs:p,classes:m}=function ws(a){const u=[],c=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&u.push(m,a[++h]):8===p&&c.push(m);else{if(!ns(p))break;p=m}h++}return{attrs:u,classes:c}}(u.selectors[0]);p&&Ch(a,c,p),m&&m.length>0&&l1(a,c,m.join(" "))}}(te,Ea,Pe,h),void 0!==c&&function qm(a,u,c){const h=a.projection=[];for(let p=0;p<u.length;p++){const m=c[p];h.push(null!=m?Array.from(m):null)}}(ls,this.ngContentSelectors,c),Nn=function Hm(a,u,c,h,p,m){const I=si(),w=p[et],A=Ui(I,p);nR(w,p,I,c,null,h);for(let k=0;k<c.length;k++)ji(Ba(p,w,I.directiveStart+k,I),p);ZT(w,p,I),A&&ji(A,p);const S=Ba(p,w,I.directiveStart+I.componentOffset,I);if(a[pr]=p[pr]=S,null!==m)for(const k of m)k(S,u);return qT(w,I,a),S}(YA,Ea,Yc,Qc,Yt,[B2]),Yr(Vt,Yt,null)}finally{Vl()}return new tC(this.componentType,Nn,za(ls,Yt),Yt,ls)}}class tC extends N1{constructor(u,c,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new uR(p),this.componentType=u}setInput(u,c){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[u])){if(this.previousInputValues??=new Map,this.previousInputValues.has(u)&&Object.is(this.previousInputValues.get(u),c))return;const m=this._rootLView;YT(m[et],m,p,u,c),this.previousInputValues.set(u,c),jm(is(this._tNode.index,m))}}get injector(){return new gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}function B2(){const a=si();uc(Me()[et],a)}function kf(a){let u=function dR(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const h=[a];for(;u;){let p;if(Hs(a))p=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new se(903,!1);p=u.\u0275dir}if(p){if(c){h.push(p);const I=a;I.inputs=I0(a.inputs),I.inputTransforms=I0(a.inputTransforms),I.declaredInputs=I0(a.declaredInputs),I.outputs=I0(a.outputs);const w=p.hostBindings;w&&pR(a,w);const A=p.viewQuery,S=p.contentQueries;if(A&&hR(a,A),S&&fR(a,S),G(a.inputs,p.inputs),G(a.declaredInputs,p.declaredInputs),G(a.outputs,p.outputs),null!==p.inputTransforms&&(null===I.inputTransforms&&(I.inputTransforms={}),G(I.inputTransforms,p.inputTransforms)),Hs(p)&&p.data.animation){const k=a.data;k.animation=(k.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let I=0;I<m.length;I++){const w=m[I];w&&w.ngInherit&&w(a),w===kf&&(c=!1)}}u=Object.getPrototypeOf(u)}!function rC(a){let u=0,c=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=u+=p.hostVars,p.hostAttrs=Tl(p.hostAttrs,c=Tl(c,p.hostAttrs))}}(h)}function I0(a){return a===mt?{}:a===ut?[]:a}function hR(a,u){const c=a.viewQuery;a.viewQuery=c?(h,p)=>{u(h,p),c(h,p)}:u}function fR(a,u){const c=a.contentQueries;a.contentQueries=c?(h,p,m)=>{u(h,p,m),c(h,p,m)}:u}function pR(a,u){const c=a.hostBindings;a.hostBindings=c?(h,p)=>{u(h,p),c(h,p)}:u}function cC(a){const u=a.inputConfig,c={};for(const h in u)if(u.hasOwnProperty(h)){const p=u[h];Array.isArray(p)&&p[2]&&(c[h]=p[2])}a.inputTransforms=c}function zm(a){return!!Wm(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function Wm(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ui(a,u,c){return!Object.is(a[u],c)&&(a[u]=c,!0)}function hC(a,u,c,h){const p=Me();return ui(p,Fl(),u)&&(un(),ct(en(),p,a,u,c,h)),hC}function Mf(a,u,c,h){return ui(a,Fl(),c)?u+re(c)+h:qt}function AC(a,u,c,h,p,m,I,w){const A=Me(),S=un(),k=a+an,H=S.firstCreatePass?function Jm(a,u,c,h,p,m,I,w,A){const S=u.consts,k=gd(u,a,4,I||null,Ma(S,w));WT(u,c,k,Ma(S,A)),uc(u,k);const H=k.tView=f0(2,k,h,p,m,u.directiveRegistry,u.pipeRegistry,null,u.schemas,S,null);return null!==u.queries&&(u.queries.template(u,k),H.queries=u.queries.embeddedTView(k)),k}(k,S,A,u,c,h,p,m,I):S.data[k];Ro(H,!1);const te=Xm(S,A,H,a);ac()&&yc(S,A,te,H),ji(te,A),Rf(A,A[k]=Mo(te,A,te,H)),xl(H)&&Q1(S,A,H),null!=I&&J1(A,H,w)}let Xm=function $f(a,u,c,h){return ss(!0),u[Pt].createComment("")};function CR(a){return sc(function Fw(){return Mt.lFrame.contextLView}(),an+a)}function x0(a,u,c){const h=Me();return ui(h,Fl(),u)&&Ws(un(),en(),h,a,u,h[Pt],c,!1),x0}function P0(a,u,c,h,p){const I=p?"class":"style";YT(a,c,u.inputs[I],I,h)}function Ya(a,u,c,h){const p=Me(),m=un(),I=an+a,w=p[Pt],A=m.firstCreatePass?function W2(a,u,c,h,p,m){const I=u.consts,A=gd(u,a,2,h,Ma(I,p));return WT(u,c,A,Ma(I,m)),null!==A.attrs&&Pf(A,A.attrs,!1),null!==A.mergedAttrs&&Pf(A,A.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,A),A}(I,m,p,u,c,h):m.data[I],S=e_(m,p,A,w,u,a);p[I]=S;const k=xl(A);return Ro(A,!0),d1(w,S,A),32!=(32&A.flags)&&ac()&&yc(m,p,S,A),0===function uv(){return Mt.lFrame.elementDepthCount}()&&ji(S,p),function cv(){Mt.lFrame.elementDepthCount++}(),k&&(Q1(m,p,A),qT(m,A,p)),null!==h&&J1(p,A),Ya}function Lo(){let a=si();hv()?function fv(){Mt.lFrame.isParent=!1}():(a=a.parent,Ro(a,!1));const u=a;(function Ol(a){return Mt.skipHydrationRootTNode===a})(u)&&function dv(){Mt.skipHydrationRootTNode=null}(),function Ow(){Mt.lFrame.elementDepthCount--}();const c=un();return c.firstCreatePass&&(uc(c,a),Rg(a)&&c.queries.elementEnd(a)),null!=u.classesWithoutHost&&function wv(a){return 0!=(8&a.flags)}(u)&&P0(c,u,Me(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function im(a){return 0!=(16&a.flags)}(u)&&P0(c,u,Me(),u.stylesWithoutHost,!1),Lo}function Gf(a,u,c,h){return Ya(a,u,c,h),Lo(),Gf}let e_=(a,u,c,h,p,m)=>(ss(!0),$v(h,p,function tm(){return Mt.lFrame.currentNamespace}()));function SR(){return Me()}function DC(a){return!!a&&"function"==typeof a.then}function Hf(a){return!!a&&"function"==typeof a.subscribe}function Qa(a,u,c,h){const p=Me(),m=un(),I=si();return function xC(a,u,c,h,p,m,I){const w=xl(h),S=a.firstCreatePass&&iR(a),k=u[pr],H=xf(u);let te=!0;if(3&h.type||I){const We=Ui(h,u),st=I?I(We):We,Ct=H.length,Oe=I?Yt=>I(Rn(Yt[h.index])):h.index;let Vt=null;if(!I&&w&&(Vt=function DR(a,u,c,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const I=p[m];if(I===c&&p[m+1]===h){const w=u[gu],A=p[m+2];return w.length>A?w[A]:null}"string"==typeof I&&(m+=2)}return null}(a,u,p,h.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=m,Vt.__ngLastListenerFn__=m,te=!1;else{m=RR(h,u,k,m,!1);const Yt=c.listen(st,p,m);H.push(m,Yt),S&&S.push(p,Oe,Ct,Ct+1)}}else m=RR(h,u,k,m,!1);const ue=h.outputs;let Pe;if(te&&null!==ue&&(Pe=ue[p])){const We=Pe.length;if(We)for(let st=0;st<We;st+=2){const Nn=u[Pe[st]][Pe[st+1]].subscribe(m),ls=H.length;H.push(m,Nn),S&&S.push(p,h.index,ls,-(ls+1))}}}(m,p,p[Pt],I,a,u,h),Qa}function Dd(a,u,c,h){try{return Do(6,u,c),!1!==c(h)}catch(p){return sR(a,p),!1}finally{Do(7,u,c)}}function RR(a,u,c,h,p){return function m(I){if(I===Function)return h;jm(a.componentOffset>-1?is(a.index,u):u);let A=Dd(u,c,h,I),S=m.__ngNextListenerFn__;for(;S;)A=Dd(u,c,S,I)&&A,S=S.__ngNextListenerFn__;return p&&!1===A&&I.preventDefault(),A}}function xR(a=1){return function Ul(a){return(Mt.lFrame.contextLView=function Xg(a,u){for(;a>0;)u=u[Cs],a--;return u}(a,Mt.lFrame.contextLView))[pr]}(a)}function k0(a,u,c){return t_(a,"",u,"",c),k0}function t_(a,u,c,h,p){const m=Me(),I=Mf(m,u,c,h);return I!==qt&&Ws(un(),en(),m,a,I,m[Pt],p,!1),t_}function xc(a,u){return a<<17|u<<2}function da(a){return a>>17&32767}function Rd(a){return 2|a}function ha(a){return(131068&a)>>2}function MC(a,u){return-131069&a|u<<2}function O0(a){return 1|a}function OC(a,u,c,h,p){const m=a[c+1],I=null===u;let w=h?da(m):ha(m),A=!1;for(;0!==w&&(!1===A||I);){const k=a[w+1];UR(a[w],u)&&(A=!0,a[w+1]=h?O0(k):Rd(k)),w=h?da(k):ha(k)}A&&(a[c+1]=h?Rd(m):O0(m))}function UR(a,u){return null===a||null==u||(Array.isArray(a)?a[1]:a)===u||!(!Array.isArray(a)||"string"!=typeof u)&&gc(a,u)>=0}const Ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LC(a){return a.substring(Ar.key,Ar.keyEnd)}function jR(a,u){const c=Ar.textEnd;return c===u?-1:(u=Ar.keyEnd=function FC(a,u,c){for(;u<c&&a.charCodeAt(u)>32;)u++;return u}(a,Ar.key=u,c),xd(a,u,c))}function xd(a,u,c){for(;u<c&&a.charCodeAt(u)<=32;)u++;return u}function U0(a,u){return function Zs(a,u,c,h){const p=Me(),m=un(),I=qs(2);m.firstUpdatePass&&Pc(m,a,I,h),u!==qt&&ui(p,I,u)&&Vo(m,m.data[Or()],p,p[Pt],a,p[I+1]=function eL(a,u){return null==a||""===a||("string"==typeof u?a+=u:"object"==typeof a&&(a=Q(No(a)))),a}(u,c),h,I)}(a,u,null,!0),U0}function B0(a){!function Fo(a,u,c,h){const p=un(),m=qs(2);p.firstUpdatePass&&Pc(p,null,m,h);const I=Me();if(c!==qt&&ui(I,m,c)){const w=p.data[Or()];if($0(w,h)&&!BC(p,m)){let A=h?w.classesWithoutHost:w.stylesWithoutHost;null!==A&&(c=ae(A,c||"")),P0(p,w,I,c,h)}else!function X2(a,u,c,h,p,m,I,w){p===qt&&(p=ut);let A=0,S=0,k=0<p.length?p[0]:null,H=0<m.length?m[0]:null;for(;null!==k||null!==H;){const te=A<p.length?p[A+1]:void 0,ue=S<m.length?m[S+1]:void 0;let We,Pe=null;k===H?(A+=2,S+=2,te!==ue&&(Pe=H,We=ue)):null===H||null!==k&&k<H?(A+=2,Pe=k):(S+=2,Pe=H,We=ue),null!==Pe&&Vo(a,u,c,h,Pe,We,I,w),k=A<p.length?p[A]:null,H=S<m.length?m[S]:null}}(p,w,I,I[Pt],I[m+1],I[m+1]=function ZR(a,u,c){if(null==c||""===c)return ut;const h=[],p=No(c);if(Array.isArray(p))for(let m=0;m<p.length;m++)a(h,p[m],!0);else if("object"==typeof p)for(const m in p)p.hasOwnProperty(m)&&a(h,m,p[m]);else"string"==typeof p&&u(h,p);return h}(a,u,c),h,m)}}(Zf,pa,a,!0)}function pa(a,u){for(let c=function BR(a){return function qf(a){Ar.key=0,Ar.keyEnd=0,Ar.value=0,Ar.valueEnd=0,Ar.textEnd=a.length}(a),jR(a,xd(a,0,Ar.textEnd))}(u);c>=0;c=jR(u,c))Ii(a,LC(u),!0)}function BC(a,u){return u>=a.expandoStartIndex}function Pc(a,u,c,h){const p=a.data;if(null===p[c+1]){const m=p[Or()],I=BC(a,c);$0(m,h)&&null===u&&!I&&(u=!1),u=function HR(a,u,c,h){const p=function Qg(a){const u=Mt.lFrame.currentDirectiveIndex;return-1===u?null:a[u]}(a);let m=h?u.residualClasses:u.residualStyles;if(null===p)0===(h?u.classBindings:u.styleBindings)&&(c=zi(c=Wf(null,a,u,c,h),u.attrs,h),m=null);else{const I=u.directiveStylingLast;if(-1===I||a[I]!==p)if(c=Wf(p,a,u,c,h),null===m){let A=function qR(a,u,c){const h=c?u.classBindings:u.styleBindings;if(0!==ha(h))return a[da(h)]}(a,u,h);void 0!==A&&Array.isArray(A)&&(A=Wf(null,a,u,A[1],h),A=zi(A,u.attrs,h),function zR(a,u,c,h){a[da(c?u.classBindings:u.styleBindings)]=h}(a,u,h,A))}else m=function WR(a,u,c){let h;const p=u.directiveEnd;for(let m=1+u.directiveStylingLast;m<p;m++)h=zi(h,a[m].hostAttrs,c);return zi(h,u.attrs,c)}(a,u,h)}return void 0!==m&&(h?u.residualClasses=m:u.residualStyles=m),c}(p,m,u,h),function Q2(a,u,c,h,p,m){let I=m?u.classBindings:u.styleBindings,w=da(I),A=ha(I);a[h]=c;let k,S=!1;if(Array.isArray(c)?(k=c[1],(null===k||gc(c,k)>0)&&(S=!0)):k=c,p)if(0!==A){const te=da(a[w+1]);a[h+1]=xc(te,w),0!==te&&(a[te+1]=MC(a[te+1],h)),a[w+1]=function FR(a,u){return 131071&a|u<<17}(a[w+1],h)}else a[h+1]=xc(w,0),0!==w&&(a[w+1]=MC(a[w+1],h)),w=h;else a[h+1]=xc(A,0),0===w?w=h:a[A+1]=MC(a[A+1],h),A=h;S&&(a[h+1]=Rd(a[h+1])),OC(a,k,h,!0),OC(a,k,h,!1),function VR(a,u,c,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof u&&gc(m,u)>=0&&(c[h+1]=O0(c[h+1]))}(u,k,a,h,m),I=xc(w,A),m?u.classBindings=I:u.styleBindings=I}(p,m,u,c,I,h)}}function Wf(a,u,c,h,p){let m=null;const I=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<I&&(m=u[w],h=zi(h,m.hostAttrs,p),m!==a);)w++;return null!==a&&(c.directiveStylingLast=w),h}function zi(a,u,c){const h=c?1:2;let p=-1;if(null!==u)for(let m=0;m<u.length;m++){const I=u[m];"number"==typeof I?p=I:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Ii(a,I,!!c||u[++m]))}return void 0===a?null:a}function Zf(a,u,c){const h=String(u);""!==h&&!h.includes(" ")&&Ii(a,h,c)}function Vo(a,u,c,h,p,m,I,w){if(!(3&u.type))return;const A=a.data,S=A[w+1],k=function Cr(a){return 1==(1&a)}(S)?j0(A,u,c,p,ha(S),I):void 0;Tn(k)||(Tn(m)||function kC(a){return 2==(2&a)}(S)&&(m=j0(A,null,c,p,w,I)),function zv(a,u,c,h,p){if(u)p?a.addClass(c,h):a.removeClass(c,h);else{let m=-1===h.indexOf("-")?void 0:fm.DashCase;null==p?a.removeStyle(c,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=fm.Important),a.setStyle(c,h,p,m))}}(h,I,na(Or(),c),p,m))}function j0(a,u,c,h,p,m){const I=null===u;let w;for(;p>0;){const A=a[p],S=Array.isArray(A),k=S?A[1]:A,H=null===k;let te=c[p+1];te===qt&&(te=H?ut:void 0);let ue=H?pc(te,h):k===h?te:void 0;if(S&&!Tn(ue)&&(ue=pc(A,h)),Tn(ue)&&(w=ue,I))return w;const Pe=a[p+1];p=I?da(Pe):ha(Pe)}if(null!==u){let A=m?u.residualClasses:u.residualStyles;null!=A&&(w=pc(A,h))}return w}function Tn(a){return void 0!==a}function $0(a,u){return 0!=(a.flags&(u?8:16))}function ga(a,u=""){const c=Me(),h=un(),p=a+an,m=h.firstCreatePass?gd(h,p,1,u,null):h.data[p],I=$C(h,c,m,u,a);c[p]=I,ac()&&yc(h,c,I,m),Ro(m,!1)}let $C=(a,u,c,h,p)=>(ss(!0),function oT(a,u){return a.createText(u)}(u[Pt],h));function r_(a){return i_("",a,""),r_}function i_(a,u,c){const h=Me(),p=Mf(h,a,u,c);return p!==qt&&function Lu(a,u,c){const h=na(u,a);!function wO(a,u,c){a.setValue(u,c)}(a[Pt],h,c)}(h,Or(),p),i_}const kc=void 0;var cL=["en",[["a","p"],["AM","PM"],kc],[["AM","PM"],kc,kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kc,"{1} 'at' {0}",kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uL(a){const c=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let tp={};function zC(a){const u=function Bt(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=dL(u);if(c)return c;const h=u.split("-")[0];if(c=dL(h),c)return c;if("en"===h)return cL;throw new se(701,!1)}function QR(a){return zC(a)[Pd.PluralCase]}function dL(a){return a in tp||(tp[a]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[a]),tp[a]}var Pd=function(a){return a[a.LocaleId=0]="LocaleId",a[a.DayPeriodsFormat=1]="DayPeriodsFormat",a[a.DayPeriodsStandalone=2]="DayPeriodsStandalone",a[a.DaysFormat=3]="DaysFormat",a[a.DaysStandalone=4]="DaysStandalone",a[a.MonthsFormat=5]="MonthsFormat",a[a.MonthsStandalone=6]="MonthsStandalone",a[a.Eras=7]="Eras",a[a.FirstDayOfWeek=8]="FirstDayOfWeek",a[a.WeekendRange=9]="WeekendRange",a[a.DateFormat=10]="DateFormat",a[a.TimeFormat=11]="TimeFormat",a[a.DateTimeFormat=12]="DateTimeFormat",a[a.NumberSymbols=13]="NumberSymbols",a[a.NumberFormats=14]="NumberFormats",a[a.CurrencyCode=15]="CurrencyCode",a[a.CurrencySymbol=16]="CurrencySymbol",a[a.CurrencyName=17]="CurrencyName",a[a.Currencies=18]="Currencies",a[a.Directionality=19]="Directionality",a[a.PluralCase=20]="PluralCase",a[a.ExtraData=21]="ExtraData",a}(Pd||{});const Ln="en-US";let it=Ln;function tu(a,u,c,h,p){if(a=xe(a),Array.isArray(a))for(let m=0;m<a.length;m++)tu(a[m],u,c,h,p);else{const m=un(),I=Me(),w=si();let A=ld(a)?a:xe(a.provide);const S=vf(a),k=1048575&w.providerIndexes,H=w.directiveStart,te=w.providerIndexes>>20;if(ld(a)||!a.multi){const ue=new Tr(S,p,Gm),Pe=nu(A,u,p?k:k+te,H);-1===Pe?(Hl(yu(w,I),m,A),Uo(m,a,u.length),u.push(A),w.directiveStart++,w.directiveEnd++,p&&(w.providerIndexes+=1048576),c.push(ue),I.push(ue)):(c[Pe]=ue,I[Pe]=ue)}else{const ue=nu(A,u,k+te,H),Pe=nu(A,u,k,k+te),st=Pe>=0&&c[Pe];if(p&&!st||!p&&!(ue>=0&&c[ue])){Hl(yu(w,I),m,A);const Ct=function Q0(a,u,c,h,p){const m=new Tr(a,c,Gm);return m.multi=[],m.index=u,m.componentProviders=0,ap(m,p,h&&!c),m}(p?up:fx,c.length,p,h,S);!p&&st&&(c[Pe].providerFactory=Ct),Uo(m,a,u.length,0),u.push(A),w.directiveStart++,w.directiveEnd++,p&&(w.providerIndexes+=1048576),c.push(Ct),I.push(Ct)}else Uo(m,a,ue>-1?ue:Pe,ap(c[p?Pe:ue],S,!p&&h));!p&&h&&st&&c[Pe].componentProviders++}}}function Uo(a,u,c,h){const p=ld(u),m=function UO(a){return!!a.useClass}(u);if(p||m){const A=(m?xe(u.useClass):u).prototype.ngOnDestroy;if(A){const S=a.destroyHooks||(a.destroyHooks=[]);if(!p&&u.multi){const k=S.indexOf(c);-1===k?S.push(c,[h,A]):S[k+1].push(h,A)}else S.push(c,A)}}}function ap(a,u,c){return c&&a.componentProviders++,a.multi.push(u)-1}function nu(a,u,c,h){for(let p=c;p<h;p++)if(u[p]===a)return p;return-1}function fx(a,u,c,h){return g_(this.multi,[])}function up(a,u,c,h){const p=this.multi;let m;if(this.providerFactory){const I=this.providerFactory.componentProviders,w=Ba(c,c[et],this.providerFactory.index,h);m=w.slice(0,I),g_(p,m);for(let A=I;A<w.length;A++)m.push(w[A])}else m=[],g_(p,m);return m}function g_(a,u){for(let c=0;c<a.length;c++)u.push((0,a[c])());return u}function jc(a,u=[]){return c=>{c.providersResolver=(h,p)=>function Y0(a,u,c){const h=un();if(h.firstCreatePass){const p=Hs(a);tu(c,h.data,h.blueprint,p,!0),tu(u,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,u)}}class Bu{}class cp{}function px(a,u){return new lp(a,u??null,[])}class lp extends Bu{constructor(u,c,h){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cR(this);const p=ki(u);this._bootstrapComponents=Ou(p.bootstrap),this._r3Injector=MT(u,c,[{provide:Bu,useValue:this},{provide:Vm,useValue:this.componentFactoryResolver},...h],Q(u),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(u)}get injector(){return this._r3Injector}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class Od extends cp{constructor(u){super(),this.moduleType=u}create(u){return new lp(this.moduleType,u,[])}}class mx extends Bu{constructor(u){super(),this.componentFactoryResolver=new cR(this),this.instance=null;const c=new yf([...u.providers,{provide:Bu,useValue:this},{provide:Vm,useValue:this.componentFactoryResolver}],u.parent||Rm(),u.debugName,new Set(["environment"]));this.injector=c,u.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(u){this.injector.onDestroy(u)}}function _x(a,u,c=null){return new mx({providers:a,parent:u,debugName:c,runEnvironmentInitializers:!0}).injector}let yx=(()=>{class a{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const h=Sm(0,c.type),p=h.length>0?_x([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,p)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ot({token:a,providedIn:"environment",factory:()=>new a(Xe(ua))})}return a})();function tA(a){a.getStandaloneInjector=u=>u.get(yx).getOrCreateStandaloneInjector(a)}function J0(a,u,c,h,p,m){const I=u+c;return ui(a,I,p)?function Un(a,u,c){return a[u]=c}(a,I+1,m?h.call(m,p):h(p)):function m_(a,u){const c=a[u];return c===qt?void 0:c}(a,I+1)}function aA(a,u){const c=un();let h;const p=a+an;c.firstCreatePass?(h=function bx(a,u){if(u)for(let c=u.length-1;c>=0;c--){const h=u[c];if(a===h.name)return h}}(u,c.pipeRegistry),c.data[p]=h,h.onDestroy&&(c.destroyHooks??=[]).push(p,h.onDestroy)):h=c.data[p];const m=h.factory||(h.factory=ea(h.type)),w=_n(Gm);try{const A=_u(!1),S=m();return _u(A),function z2(a,u,c,h){c>=a.data.length&&(a.data[c]=null,a.blueprint[c]=null),u[c]=h}(c,Me(),p,S),S}finally{_n(w)}}function Fd(a,u,c){const h=a+an,p=Me(),m=sc(p,h);return function ru(a,u){return a[et].data[u].pure}(p,h)?J0(p,function oi(){const a=Mt.lFrame;let u=a.bindingRootIndex;return-1===u&&(u=a.bindingRootIndex=a.tView.bindingStartIndex),u}(),u,m.transform,c,m):m.transform(c)}function Ps(){return this._results[Symbol.iterator]()}class eI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ko)}constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=eI.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=Ps)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,c){return this._results.reduce(u,c)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,c){const h=this;h.dirty=!1;const p=function Wr(a){return a.flat(Number.POSITIVE_INFINITY)}(u);(this._changesDetected=!function sf(a,u,c){if(a.length!==u.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=u[h];if(c&&(p=c(p),m=c(m)),m!==p)return!1}return!0}(h._results,p,c))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function v_(a,u,c,h=!0){const p=u[et];if(function sa(a,u,c,h){const p=Mr+h,m=c.length;h>0&&(c[p-1][Ts]=u),h<m-Mr?(u[Ts]=c[p],ND(c,Mr+h,u)):(c.push(u),u[Ts]=null),u[On]=c;const I=u[Xu];null!==I&&c!==I&&function gm(a,u){const c=a[ec];u[kr]!==u[On][On][kr]&&(a[Dl]=!0),null===c?a[ec]=[u]:c.push(u)}(I,u);const w=u[Oi];null!==w&&w.insertView(a),u[Gt]|=128}(p,u,a,c),h){const m=pf(c,a),I=u[Pt],w=rd(I,a[Li]);null!==w&&function hf(a,u,c,h,p,m){h[Wn]=p,h[Mi]=u,Ha(a,h,c,1,p,m)}(p,a[Mi],I,u,w,m)}}let iu=(()=>{class a{static#e=this.__NG_ELEMENT_ID__=Rx}return a})();const I_=iu,Dx=class extends I_{constructor(u,c,h){super(),this._declarationLView=u,this._declarationTContainer=c,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(u,c){return this.createEmbeddedViewImpl(u,c)}createEmbeddedViewImpl(u,c,h){const p=function lA(a,u,c,h){const p=u.tView,w=Sf(a,p,c,4096&a[Gt]?4096:16,null,u,null,null,null,h?.injector??null,h?.hydrationInfo??null);w[Xu]=a[u.index];const S=a[Oi];return null!==S&&(w[Oi]=S.createEmbeddedView(p)),Yr(p,w,c),w}(this._declarationLView,this._declarationTContainer,u,{injector:c,hydrationInfo:h});return new _d(p)}};function Rx(){return tI(si(),Me())}function tI(a,u){return 4&a.type?new Dx(u,a,za(a,u)):null}let nI=(()=>{class a{static#e=this.__NG_ELEMENT_ID__=Kt}return a})();function Kt(){return fA(si(),Me())}const jL=nI,rI=class extends jL{constructor(u,c,h){super(),this._lContainer=u,this._hostTNode=c,this._hostLView=h}get element(){return za(this._hostTNode,this._hostLView)}get injector(){return new gr(this._hostTNode,this._hostLView)}get parentInjector(){const u=Gl(this._hostTNode,this._hostLView);if(Kh(u)){const c=Ua(u,this._hostLView),h=lc(u);return new gr(c[et].data[h+8],c)}return new gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const c=hA(this._lContainer);return null!==c&&c[u]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(u,c,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const w=u.createEmbeddedViewImpl(c||{},m,null);return this.insertImpl(w,p,false),w}createComponent(u,c,h,p,m){const I=u&&!function Eu(a){return"function"==typeof a}(u);let w;if(I)w=c;else{const We=c||{};w=We.index,h=We.injector,p=We.projectableNodes,m=We.environmentInjector||We.ngModuleRef}const A=I?u:new yd(on(u)),S=h||this.parentInjector;if(!m&&null==A.ngModule){const st=(I?S:this.parentInjector).get(ua,null);st&&(m=st)}on(A.componentType??{});const ue=A.create(S,p,null,m);return this.insertImpl(ue.hostView,w,false),ue}insert(u,c){return this.insertImpl(u,c,!1)}insertImpl(u,c,h){const p=u._lView;if(function $h(a){return vi(a[On])}(p)){const A=this.indexOf(u);if(-1!==A)this.detach(A);else{const S=p[On],k=new rI(S,S[Mi],S[On]);k.detach(k.indexOf(u))}}const I=this._adjustIndex(c),w=this._lContainer;return v_(w,p,I,!h),u.attachToViewContainerRef(),ND(iI(w),I,u),u}move(u,c){return this.insert(u,c)}indexOf(u){const c=hA(this._lContainer);return null!==c?c.indexOf(u):-1}remove(u){const c=this._adjustIndex(u,-1),h=ff(this._lContainer,c);h&&(wu(iI(this._lContainer),c),aT(h[et],h))}detach(u){const c=this._adjustIndex(u,-1),h=ff(this._lContainer,c);return h&&null!=wu(iI(this._lContainer),c)?new _d(h):null}_adjustIndex(u,c=0){return u??this.length+c}};function hA(a){return a[8]}function iI(a){return a[8]||(a[8]=[])}function fA(a,u){let c;const h=u[a.index];return vi(h)?c=h:(c=Mo(h,u,null,a),u[a.index]=c,Rf(u,c)),kx(c,u,a,h),new rI(c,a,u)}let kx=function Mx(a,u,c,h){if(a[Li])return;let p;p=8&c.type?Rn(h):function sI(a,u){const c=a[Pt],h=c.createComment(""),p=Ui(u,a);return Au(c,rd(c,p),h,function os(a,u){return a.nextSibling(u)}(c,p),!1),h}(u,c),a[Li]=p};class $u{constructor(u){this.queryList=u,this.matches=null}clone(){return new $u(this.queryList)}setDirty(){this.queryList.setDirty()}}class oI{constructor(u=[]){this.queries=u}createEmbeddedView(u){const c=u.queries;if(null!==c){const h=null!==u.contentQueries?u.contentQueries[0]:c.length,p=[];for(let m=0;m<h;m++){const I=c.getByIndex(m);p.push(this.queries[I.indexInDeclarationView].clone())}return new oI(p)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let c=0;c<this.queries.length;c++)null!==ou(u,c).matches&&this.queries[c].setDirty()}}class Hc{constructor(u,c,h=null){this.predicate=u,this.flags=c,this.read=h}}class aI{constructor(u=[]){this.queries=u}elementStart(u,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(u,c)}elementEnd(u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(u)}embeddedTView(u){let c=null;for(let h=0;h<this.length;h++){const p=null!==c?c.length:0,m=this.getByIndex(h).embeddedTView(u,p);m&&(m.indexInDeclarationView=h,null!==c?c.push(m):c=[m])}return null!==c?new aI(c):null}template(u,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(u,c)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class qc{constructor(u,c=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(u,c){this.isApplyingToNode(c)&&this.matchTNode(u,c)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,c){this.elementStart(u,c)}embeddedTView(u,c){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,c),new qc(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=u.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(u,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(u,c,Lx(c,m)),this.matchTNodeWithReadOption(u,c,lo(c,u,m,!1,!1))}else h===iu?4&c.type&&this.matchTNodeWithReadOption(u,c,-1):this.matchTNodeWithReadOption(u,c,lo(c,u,h,!1,!1))}matchTNodeWithReadOption(u,c,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===ku||p===nI||p===iu&&4&c.type)this.addMatch(c.index,-2);else{const m=lo(c,u,p,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,h)}}addMatch(u,c){null===this.matches?this.matches=[u,c]:this.matches.push(u,c)}}function Lx(a,u){const c=a.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===u)return c[h+1];return null}function C_(a,u,c,h){return-1===c?function Fx(a,u){return 11&a.type?za(a,u):4&a.type?tI(a,u):null}(u,a):-2===c?function $L(a,u,c){return c===ku?za(u,a):c===iu?tI(u,a):c===nI?fA(u,a):void 0}(a,u,h):Ba(a,a[et],c,u)}function Vx(a,u,c,h){const p=u[Oi].queries[h];if(null===p.matches){const m=a.data,I=c.matches,w=[];for(let A=0;A<I.length;A+=2){const S=I[A];w.push(S<0?null:C_(u,m[S],I[A+1],c.metadata.read))}p.matches=w}return p.matches}function zn(a,u,c,h){const p=a.queries.getByIndex(c),m=p.matches;if(null!==m){const I=Vx(a,u,p,c);for(let w=0;w<m.length;w+=2){const A=m[w];if(A>0)h.push(I[w/2]);else{const S=m[w+1],k=u[-A];for(let H=Mr;H<k.length;H++){const te=k[H];te[Xu]===te[On]&&zn(te[et],te,S,h)}if(null!==k[ec]){const H=k[ec];for(let te=0;te<H.length;te++){const ue=H[te];zn(ue[et],ue,S,h)}}}}}return h}function A_(a){const u=Me(),c=un(),h=jw();mv(h+1);const p=ou(c,h);if(a.dirty&&function zg(a){return 4==(4&a[Gt])}(u)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?zn(c,u,h,[]):Vx(c,u,p,h);a.reset(m,YO),a.notifyOnChanges()}return!0}return!1}function b_(a,u,c){const h=un();h.firstCreatePass&&(gA(h,new Hc(a,u,c),-1),2==(2&u)&&(h.staticViewQueries=!0)),Bx(h,Me(),u)}function pA(a,u,c,h){const p=un();if(p.firstCreatePass){const m=si();gA(p,new Hc(u,c,h),m.index),function pp(a,u){const c=a.contentQueries||(a.contentQueries=[]);u!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,u)}(p,a),2==(2&c)&&(p.staticContentQueries=!0)}Bx(p,Me(),c)}function Ux(){return function S_(a,u){return a[Oi].queries[u].queryList}(Me(),jw())}function Bx(a,u,c){const h=new eI(4==(4&c));(function C2(a,u,c,h){const p=xf(u);p.push(c),a.firstCreatePass&&iR(a).push(h,p.length-1)})(a,u,h,h.destroy),null===u[Oi]&&(u[Oi]=new oI),u[Oi].queries.push(new $u(h))}function gA(a,u,c){null===a.queries&&(a.queries=new aI),a.queries.track(new qc(u,c))}function ou(a,u){return a.queries.getByIndex(u)}function mA(a,u){return tI(a,u)}function yA(a){return!!ki(a)}const eP=new xn("Application Initializer");let fI=(()=>{class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h}),this.appInits=dt(eP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const p of this.appInits){const m=p();if(DC(m))c.push(m);else if(Hf(m)){const I=new Promise((w,A)=>{m.subscribe({complete:w,error:A})});c.push(I)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{h()}).catch(p=>{this.reject(p)}),0===c.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),au=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"platform"})}return a})();const pI=new xn("LocaleId",{providedIn:"root",factory:()=>dt(pI,bt.Optional|bt.SkipSelf)||function tP(){return typeof $localize<"u"&&$localize.locale||Ln}()}),nP=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let zc=(()=>{class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();class k_{constructor(u,c){this.ngModuleFactory=u,this.componentFactories=c}}let rP=(()=>{class a{compileModuleSync(c){return new Od(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),m=Ou(ki(c).declarations).reduce((I,w)=>{const A=on(w);return A&&I.push(new yd(A)),I},[]);return new k_(h,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const fP=new xn(""),II=new xn("");let Zc,EI=(()=>{class a{constructor(c,h,p){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zc||(function gP(a){Zc=a}(p),p.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:p})}whenStable(c,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,p){return[]}static#e=this.\u0275fac=function(h){return new(h||a)(Xe(wi),Xe(pP),Xe(II))};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac})}return a})(),pP=(()=>{class a{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return Zc?.findTestabilityInTree(this,c,h)??null}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"platform"})}return a})(),Bo=null;const zd=new xn("AllowMultipleToken"),wI=new xn("PlatformDestroyListeners"),TI=new xn("appBootstrapListener");class mP{constructor(u,c){this.name=u,this.token=c}}function _P(a,u,c=[]){const h=`Platform: ${u}`,p=new xn(h);return(m=[])=>{let I=AI();if(!I||I.injector.get(zd,!1)){const w=[...c,...m,{provide:p,useValue:!0}];a?a(w):function Kc(a){if(Bo&&!Bo.get(zd,!1))throw new se(400,!1);(function F_(){!function tv(a){Dw=a}(()=>{throw new se(600,!1)})})(),Bo=a;const u=a.get(yP);(function PA(a){a.get(S1,null)?.forEach(c=>c())})(a)}(function NA(a=[],u){return ca.create({name:u,providers:[{provide:wT,useValue:"platform"},{provide:wI,useValue:new Set([()=>Bo=null])},...a]})}(w,h))}return function Cp(a){const u=AI();if(!u)throw new se(401,!1);return u}()}}function AI(){return Bo?.get(yP)??null}let yP=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const p=function iF(a="zone.js",u){return"noop"===a?new f2:"zone.js"===a?new wi(u):a}(h?.ngZone,function kA(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:a?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:a?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return p.run(()=>{const m=function gx(a,u,c){return new lp(a,u,c)}(c.moduleType,this.injector,function bp(a){return[{provide:wi,useFactory:a},{provide:ud,multi:!0,useFactory:()=>{const u=dt(EP,{optional:!0});return()=>u.initialize()}},{provide:OA,useFactory:sF},{provide:BT,useFactory:p2}]}(()=>p)),I=m.injector.get(Mu,null);return p.runOutsideAngular(()=>{const w=p.onError.subscribe({next:A=>{I.handleError(A)}});m.onDestroy(()=>{bI(this._modules,m),w.unsubscribe()})}),function MA(a,u,c){try{const h=c();return DC(h)?h.catch(p=>{throw u.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw u.runOutsideAngular(()=>a.handleError(h)),h}}(I,p,()=>{const w=m.injector.get(fI);return w.runInitializers(),w.donePromise.then(()=>(function Nd(a){pt(a,"Expected localeId to be defined"),"string"==typeof a&&(it=a.toLowerCase().replace(/_/g,"-"))}(m.injector.get(pI,Ln)||Ln),this._moduleDoBootstrap(m),m))})})}bootstrapModule(c,h=[]){const p=vP({},h);return function cs(a,u,c){const h=new Od(c);return Promise.resolve(h)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(c){const h=c.injector.get(Gu);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new se(-403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(wI,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||a)(Xe(ca))};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"platform"})}return a})();function vP(a,u){return Array.isArray(u)?u.reduce(vP,a):{...a,...u}}let Gu=(()=>{class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=dt(OA),this.zoneIsStable=dt(BT),this.componentTypes=[],this.components=[],this.isStable=dt(zc).hasPendingTasks.pipe((0,ne.w)(c=>c?(0,W.of)(!1):this.zoneIsStable),(0,ce.x)(),(0,ee.B)()),this._injector=dt(ua)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,h){const p=c instanceof Om;if(!this._injector.get(fI).done)throw!p&&Ju(c),new se(405,!1);let I;I=p?c:this._injector.get(Vm).resolveComponentFactory(c),this.componentTypes.push(I.componentType);const w=function CI(a){return a.isBoundToModule}(I)?void 0:this._injector.get(Bu),S=I.create(ca.NULL,[],h||I.selector,w),k=S.location.nativeElement,H=S.injector.get(fP,null);return H?.registerApplication(k),S.onDestroy(()=>{this.detachView(S.hostView),bI(this.components,S),H?.unregisterApplication(k)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;bI(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const h=this._injector.get(TI,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>bI(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new se(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function bI(a,u){const c=a.indexOf(u);c>-1&&a.splice(c,1)}const OA=new xn("",{providedIn:"root",factory:()=>dt(Mu).handleError.bind(void 0)});function sF(){const a=dt(wi),u=dt(Mu);return c=>a.runOutsideAngular(()=>u.handleError(c))}let EP=(()=>{class a{constructor(){this.zone=dt(wi),this.applicationRef=dt(Gu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||a)};static#t=this.\u0275prov=Ot({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function TP(){return!1}let LA=(()=>{class a{static#e=this.__NG_ELEMENT_ID__=Ai}return a})();function Ai(a){return function aF(a,u,c){if(Xo(a)&&!c){const h=is(a.index,u);return new _d(h,h)}return 47&a.type?new _d(u[kr],u):null}(si(),Me(),16==(16&a))}class DP{constructor(){}supports(u){return zm(u)}create(u){return new dF(u)}}const RP=(a,u)=>u;class dF{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||RP}forEachItem(u){let c;for(c=this._itHead;null!==c;c=c._next)u(c)}forEachOperation(u){let c=this._itHead,h=this._removalsHead,p=0,m=null;for(;c||h;){const I=!h||c&&c.currentIndex<Yd(h,p,m)?c:h,w=Yd(I,p,m),A=I.currentIndex;if(I===h)p--,h=h._nextRemoved;else if(c=c._next,null==I.previousIndex)p++;else{m||(m=[]);const S=w-p,k=A-p;if(S!=k){for(let te=0;te<S;te++){const ue=te<m.length?m[te]:m[te]=0,Pe=ue+te;k<=Pe&&Pe<S&&(m[te]=ue+1)}m[I.previousIndex]=k-S}}w!==A&&u(I,w,A)}}forEachPreviousItem(u){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachMovedItem(u){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}forEachIdentityChange(u){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)u(c)}diff(u){if(null==u&&(u=[]),!zm(u))throw new se(900,!1);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let p,m,I,c=this._itHead,h=!1;if(Array.isArray(u)){this.length=u.length;for(let w=0;w<this.length;w++)m=u[w],I=this._trackByFn(w,m),null!==c&&Object.is(c.trackById,I)?(h&&(c=this._verifyReinsertion(c,m,I,w)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,I,w),h=!0),c=c._next}else p=0,function lC(a,u){if(Array.isArray(a))for(let c=0;c<a.length;c++)u(a[c]);else{const c=a[Symbol.iterator]();let h;for(;!(h=c.next()).done;)u(h.value)}}(u,w=>{I=this._trackByFn(p,w),null!==c&&Object.is(c.trackById,I)?(h&&(c=this._verifyReinsertion(c,w,I,p)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,I,p),h=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,c,h,p){let m;return null===u?m=this._itTail:(m=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._reinsertAfter(u,m,p)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._moveAfter(u,m,p)):u=this._addAfter(new xP(c,h),m,p),u}_verifyReinsertion(u,c,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?u=this._reinsertAfter(m,u._prev,p):u.currentIndex!=p&&(u.currentIndex=p,this._addToMoves(u,p)),u}_truncate(u){for(;null!==u;){const c=u._next;this._addToRemovals(this._unlink(u)),u=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const p=u._prevRemoved,m=u._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(u,c,h),this._addToMoves(u,h),u}_moveAfter(u,c,h){return this._unlink(u),this._insertAfter(u,c,h),this._addToMoves(u,h),u}_addAfter(u,c,h){return this._insertAfter(u,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,c,h){const p=null===c?this._itHead:c._next;return u._next=p,u._prev=c,null===p?this._itTail=u:p._prev=u,null===c?this._itHead=u:c._next=u,null===this._linkedRecords&&(this._linkedRecords=new Kd),this._linkedRecords.put(u),u.currentIndex=h,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const c=u._prev,h=u._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,u}_addToMoves(u,c){return u.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kd),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,c){return u.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class xP{constructor(u,c){this.item=u,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hF{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,u))return h;return null}remove(u){const c=u._prevDup,h=u._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class Kd{constructor(){this.map=new Map}put(u){const c=u.trackById;let h=this.map.get(c);h||(h=new hF,this.map.set(c,h)),h.add(u)}get(u,c){const p=this.map.get(u);return p?p.get(u,c):null}remove(u){const c=u.trackById;return this.map.get(c).remove(u)&&this.map.delete(c),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yd(a,u,c){const h=a.previousIndex;if(null===h)return h;let p=0;return c&&h<c.length&&(p=c[h]),h+u+p}class PI{constructor(){}supports(u){return u instanceof Map||Wm(u)}create(){return new NI}}class NI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let c;for(c=this._mapHead;null!==c;c=c._next)u(c)}forEachPreviousItem(u){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)u(c)}forEachChangedItem(u){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}diff(u){if(u){if(!(u instanceof Map||Wm(u)))throw new se(900,!1)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(u,(h,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(p,h);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,c){if(u){const h=u._prev;return c._next=u,c._prev=h,u._prev=c,h&&(h._next=c),u===this._mapHead&&(this._mapHead=c),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(u,c){if(this._records.has(u)){const p=this._records.get(u);this._maybeAddToChanges(p,c);const m=p._prev,I=p._next;return m&&(m._next=I),I&&(I._prev=m),p._next=null,p._prev=null,p}const h=new PP(u);return this._records.set(u,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,c){Object.is(c,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=c,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,c){u instanceof Map?u.forEach(c):Object.keys(u).forEach(h=>c(u[h],h))}}class PP{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UA(){return new kI([new DP])}let kI=(()=>{class a{static#e=this.\u0275prov=Ot({token:a,providedIn:"root",factory:UA});constructor(c){this.factories=c}static create(c,h){if(null!=h){const p=h.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:h=>a.create(c,h||UA()),deps:[[a,new tt,new ve]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(null!=h)return h;throw new se(901,!1)}}return a})();function MI(){return new BA([new PI])}let BA=(()=>{class a{static#e=this.\u0275prov=Ot({token:a,providedIn:"root",factory:MI});constructor(c){this.factories=c}static create(c,h){if(h){const p=h.factories.slice();c=c.concat(p)}return new a(c)}static extend(c){return{provide:a,useFactory:h=>a.create(c,h||MI()),deps:[[a,new tt,new ve]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(h)return h;throw new se(901,!1)}}return a})();const OI=_P(null,"core",[]);let U_=(()=>{class a{constructor(c){}static#e=this.\u0275fac=function(h){return new(h||a)(Xe(Gu))};static#t=this.\u0275mod=bl({type:a});static#n=this.\u0275inj=Jn({})}return a})();function $_(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function IF(a){const u=on(a);if(!u)return null;const c=new yd(u);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return u.standalone},get isSignal(){return u.signals}}}},120:(ze,K,P)=>{"use strict";P.d(K,{Z:()=>l.Z});var l=P(3106);l.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(ze,K,P)=>{"use strict";P.r(K);var l=P(5861),N=P(3106),D=P(6710),L=P(9058),ee=(P(534),P(7879),P(4537));function ne(){return window}function G(){return G=(0,l.Z)(function*(F,B,M){var oe;const{BuildInfo:ke}=ne();(0,D.as)(B.sessionId,"AuthEvent did not contain a session ID");const Xe=yield function De(F){return Ue.apply(this,arguments)}(B.sessionId),Nt={};return(0,D.at)()?Nt.ibi=ke.packageName:(0,D.au)()?Nt.apn=ke.packageName:(0,D.av)(F,"operation-not-supported-in-this-environment"),ke.displayName&&(Nt.appDisplayName=ke.displayName),Nt.sessionId=Xe,(0,D.aw)(F,M,B.type,void 0,null!==(oe=B.eventId)&&void 0!==oe?oe:void 0,Nt)}),G.apply(this,arguments)}function ae(){return(ae=(0,l.Z)(function*(F){const{BuildInfo:B}=ne(),M={};(0,D.at)()?M.iosBundleId=B.packageName:(0,D.au)()?M.androidPackageName=B.packageName:(0,D.av)(F,"operation-not-supported-in-this-environment"),yield(0,D.ax)(F,M)})).apply(this,arguments)}function xe(){return(xe=(0,l.Z)(function*(F,B,M){const{cordova:oe}=ne();let ke=()=>{};try{yield new Promise((Xe,Nt)=>{let dt=null;function fn(){var Ht;Xe();const Ni=null===(Ht=oe.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof Ni&&Ni(),"function"==typeof M?.close&&M.close()}function kt(){dt||(dt=window.setTimeout(()=>{Nt((0,D.az)(F,"redirect-cancelled-by-user"))},2e3))}function Pn(){"visible"===document?.visibilityState&&kt()}B.addPassiveListener(fn),document.addEventListener("resume",kt,!1),(0,D.au)()&&document.addEventListener("visibilitychange",Pn,!1),ke=()=>{B.removePassiveListener(fn),document.removeEventListener("resume",kt,!1),document.removeEventListener("visibilitychange",Pn,!1),dt&&window.clearTimeout(dt)}})}finally{ke()}})).apply(this,arguments)}function Ue(){return(Ue=(0,l.Z)(function*(F){const B=function Ve(F){if((0,D.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const B=new ArrayBuffer(F.length),M=new Uint8Array(B);for(let oe=0;oe<F.length;oe++)M[oe]=F.charCodeAt(oe);return M}(F),M=yield crypto.subtle.digest("SHA-256",B);return Array.from(new Uint8Array(M)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class be extends D.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(B=>{this.resolveInialized=B})}addPassiveListener(B){this.passiveListeners.add(B)}removePassiveListener(B){this.passiveListeners.delete(B)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(B){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(B)),super.onEvent(B)}initialized(){var B=this;return(0,l.Z)(function*(){yield B.initPromise})()}}function Ae(F){return J.apply(this,arguments)}function J(){return(J=(0,l.Z)(function*(F){const B=yield Ye()._get(At(F));return B&&(yield Ye()._remove(At(F))),B})).apply(this,arguments)}function He(){const F=[];for(let M=0;M<20;M++){const oe=Math.floor(62*Math.random());F.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(oe))}return F.join("")}function Ye(){return(0,D.aC)(D.b)}function At(F){return(0,D.aD)("authEvent",F.config.apiKey,F.name)}function bn(F){if(!F?.includes("?"))return{};const[B,...M]=F.split("?");return(0,L.zd)(M.join("?"))}const Ee=class oo{constructor(){this._redirectPersistence=D.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=D.aE,this._overrideRedirectResult=D.aF}_initialize(B){var M=this;return(0,l.Z)(function*(){const oe=B._key();let ke=M.eventManagers.get(oe);return ke||(ke=new be(B),M.eventManagers.set(oe,ke),M.attachCallbackListeners(B,ke)),ke})()}_openPopup(B){(0,D.av)(B,"operation-not-supported-in-this-environment")}_openRedirect(B,M,oe,ke){var Xe=this;return(0,l.Z)(function*(){!function _e(F){var B,M,oe,ke,Xe,Nt,dt,fn,kt,Pn;const Ht=ne();(0,D.aA)("function"==typeof(null===(B=Ht?.universalLinks)||void 0===B?void 0:B.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,D.aA)(typeof(null===(M=Ht?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,D.aA)("function"==typeof(null===(Xe=null===(ke=null===(oe=Ht?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===Xe?void 0:Xe.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aA)("function"==typeof(null===(fn=null===(dt=null===(Nt=Ht?.cordova)||void 0===Nt?void 0:Nt.plugins)||void 0===dt?void 0:dt.browsertab)||void 0===fn?void 0:fn.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.aA)("function"==typeof(null===(Pn=null===(kt=Ht?.cordova)||void 0===kt?void 0:kt.InAppBrowser)||void 0===Pn?void 0:Pn.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(B);const Nt=yield Xe._initialize(B);yield Nt.initialized(),Nt.resetRedirect(),(0,D.aG)(),yield Xe._originValidation(B);const dt=function re(F,B,M=null){return{type:B,eventId:M,urlResponse:null,sessionId:He(),postBody:null,tenantId:F.tenantId,error:(0,D.az)(F,"no-auth-event")}}(B,oe,ke);yield function he(F,B){return Ye()._set(At(F),B)}(B,dt);const fn=yield function U(F,B,M){return G.apply(this,arguments)}(B,dt,M),kt=yield function ge(F){const{cordova:B}=ne();return new Promise(M=>{B.plugins.browsertab.isAvailable(oe=>{let ke=null;oe?B.plugins.browsertab.openUrl(F):ke=B.InAppBrowser.open(F,(0,D.ay)()?"_blank":"_system","location=yes"),M(ke)})})}(fn);return function Be(F,B,M){return xe.apply(this,arguments)}(B,Nt,kt)})()}_isIframeWebStorageSupported(B,M){throw new Error("Method not implemented.")}_originValidation(B){const M=B._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function Q(F){return ae.apply(this,arguments)}(B)),this.originValidationPromises[M]}attachCallbackListeners(B,M){const{universalLinks:oe,handleOpenURL:ke,BuildInfo:Xe}=ne(),Nt=setTimeout((0,l.Z)(function*(){yield Ae(B),M.onEvent(we())}),500),dt=function(){var Pn=(0,l.Z)(function*(Ht){clearTimeout(Nt);const Ni=yield Ae(B);let pu=null;Ni&&Ht?.url&&(pu=function qe(F,B){var M,oe;const ke=function $r(F){const B=bn(F),M=B.link?decodeURIComponent(B.link):void 0,oe=bn(M).link,ke=B.deep_link_id?decodeURIComponent(B.deep_link_id):void 0;return bn(ke).link||ke||oe||M||F}(B);if(ke.includes("/__/auth/callback")){const Xe=bn(ke),Nt=Xe.firebaseError?function xt(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(Xe.firebaseError)):null,dt=null===(oe=null===(M=Nt?.code)||void 0===M?void 0:M.split("auth/"))||void 0===oe?void 0:oe[1],fn=dt?(0,D.az)(dt):null;return fn?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:fn,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:ke,postBody:null}}return null}(Ni,Ht.url)),M.onEvent(pu||we())});return function(Ni){return Pn.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,dt);const fn=ke,kt=`${Xe.packageName.toLowerCase()}://`;ne().handleOpenURL=function(){var Pn=(0,l.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(kt)&&dt({url:Ht}),"function"==typeof fn)try{fn(Ht)}catch(Ni){console.error(Ni)}});return function(Ht){return Pn.apply(this,arguments)}}()}};function we(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,D.az)("no-auth-event")}}function pt(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function Qt(F=(0,L.z$)()){return!("file:"!==pt()&&"ionic:"!==pt()&&"capacitor:"!==pt()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){try{const F=self.localStorage,B=D.aL();if(F)return F.setItem(B,"1"),F.removeItem(B),!function Sn(F=(0,L.z$)()){return function Jt(){return(0,L.w1)()&&11===document?.documentMode}()||function Ot(F=(0,L.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,L.hl)()}catch{return Xn()&&(0,L.hl)()}return!1}function Xn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dn(){return(function Je(){return"http:"===pt()||"https:"===pt()}()||(0,L.ru)()||Qt())&&!function vt(){return(0,L.b$)()||(0,L.UG)()}()&&Jn()&&!Xn()}function lr(){return Qt()&&typeof document<"u"}function es(){return(es=(0,l.Z)(function*(){return!!lr()&&new Promise(F=>{const B=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(B),F(!0)})})})).apply(this,arguments)}const dr={LOCAL:"local",NONE:"none",SESSION:"session"},xi=D.aA,Co="persistence";function Ut(F){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,l.Z)(function*(F){yield F._initializationPromise;const B=Pi(),M=D.aD(Co,F.config.apiKey,F.name);B&&B.setItem(M,F._getPersistence())})).apply(this,arguments)}function Pi(){var F;try{return(null===(F=function Ri(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const Is=D.aA;class Xt{constructor(){this.browserResolver=D.aC(D.k),this.cordovaResolver=D.aC(Ee),this.underlyingResolver=null,this._redirectPersistence=D.a,this._completeRedirectFn=D.aE,this._overrideRedirectResult=D.aF}_initialize(B){var M=this;return(0,l.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(B)})()}_openPopup(B,M,oe,ke){var Xe=this;return(0,l.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openPopup(B,M,oe,ke)})()}_openRedirect(B,M,oe,ke){var Xe=this;return(0,l.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openRedirect(B,M,oe,ke)})()}_isIframeWebStorageSupported(B,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(B,M)}_originValidation(B){return this.assertedUnderlyingResolver._originValidation(B)}get _shouldInitProactively(){return lr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Is(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var B=this;return(0,l.Z)(function*(){if(B.underlyingResolver)return;const M=yield function vs(){return es.apply(this,arguments)}();B.underlyingResolver=M?B.cordovaResolver:B.browserResolver})()}}function hr(F){return F.unwrap()}function gn(F){return jt(F)}function jt(F){const{_tokenResponse:B}=F instanceof L.ZR?F.customData:F;if(!B)return null;if(!(F instanceof L.ZR)&&"temporaryProof"in B&&"phoneNumber"in B)return D.P.credentialFromResult(F);const M=B.providerId;if(!M||M===D.p.PASSWORD)return null;let oe;switch(M){case D.p.GOOGLE:oe=D.V;break;case D.p.FACEBOOK:oe=D.U;break;case D.p.GITHUB:oe=D.W;break;case D.p.TWITTER:oe=D.Z;break;default:const{oauthIdToken:ke,oauthAccessToken:Xe,oauthTokenSecret:Nt,pendingToken:dt,nonce:fn}=B;return Xe||Nt||ke||dt?dt?M.startsWith("saml.")?D.aO._create(M,dt):D.L._fromParams({providerId:M,signInMethod:M,pendingToken:dt,idToken:ke,accessToken:Xe}):new D.X(M).credential({idToken:ke,accessToken:Xe,rawNonce:fn}):null}return F instanceof L.ZR?oe.credentialFromError(F):oe.credentialFromResult(F)}function fr(F,B){return B.catch(M=>{throw M instanceof L.ZR&&function Ra(F,B){var M;const oe=null===(M=B.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===B?.code)B.resolver=new Ao(F,D.aq(F,B));else if(oe){const ke=jt(B),Xe=B;ke&&(Xe.credential=ke,Xe.tenantId=oe.tenantId||void 0,Xe.email=oe.email||void 0,Xe.phoneNumber=oe.phoneNumber||void 0)}}(F,M),M}).then(M=>{const ke=M.user;return{operationType:M.operationType,credential:gn(M),additionalUserInfo:D.ao(M),user:Gr.getOrCreate(ke)}})}function js(F,B){return $s.apply(this,arguments)}function $s(){return($s=(0,l.Z)(function*(F,B){const M=yield B;return{verificationId:M.verificationId,confirm:oe=>fr(F,M.confirm(oe))}})).apply(this,arguments)}class Ao{constructor(B,M){this.resolver=M,this.auth=function zo(F){return F.wrapped()}(B)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(B){return fr(hr(this.auth),this.resolver.resolveSignIn(B))}}class Gr{constructor(B){this._delegate=B,this.multiFactor=D.ar(B)}static getOrCreate(B){return Gr.USER_MAP.has(B)||Gr.USER_MAP.set(B,new Gr(B)),Gr.USER_MAP.get(B)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(B){return this._delegate.getIdTokenResult(B)}getIdToken(B){return this._delegate.getIdToken(B)}linkAndRetrieveDataWithCredential(B){return this.linkWithCredential(B)}linkWithCredential(B){var M=this;return(0,l.Z)(function*(){return fr(M.auth,D.a0(M._delegate,B))})()}linkWithPhoneNumber(B,M){var oe=this;return(0,l.Z)(function*(){return js(oe.auth,D.l(oe._delegate,B,M))})()}linkWithPopup(B){var M=this;return(0,l.Z)(function*(){return fr(M.auth,D.d(M._delegate,B,Xt))})()}linkWithRedirect(B){var M=this;return(0,l.Z)(function*(){return yield Ut(D.aH(M.auth)),D.g(M._delegate,B,Xt)})()}reauthenticateAndRetrieveDataWithCredential(B){return this.reauthenticateWithCredential(B)}reauthenticateWithCredential(B){var M=this;return(0,l.Z)(function*(){return fr(M.auth,D.a1(M._delegate,B))})()}reauthenticateWithPhoneNumber(B,M){return js(this.auth,D.r(this._delegate,B,M))}reauthenticateWithPopup(B){return fr(this.auth,D.e(this._delegate,B,Xt))}reauthenticateWithRedirect(B){var M=this;return(0,l.Z)(function*(){return yield Ut(D.aH(M.auth)),D.h(M._delegate,B,Xt)})()}sendEmailVerification(B){return D.ae(this._delegate,B)}unlink(B){var M=this;return(0,l.Z)(function*(){return yield D.an(M._delegate,B),M})()}updateEmail(B){return D.aj(this._delegate,B)}updatePassword(B){return D.ak(this._delegate,B)}updatePhoneNumber(B){return D.u(this._delegate,B)}updateProfile(B){return D.ai(this._delegate,B)}verifyBeforeUpdateEmail(B,M){return D.af(this._delegate,B,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gr.USER_MAP=new WeakMap;const Hr=D.aA;let ni=(()=>{class F{constructor(M,oe){if(this.app=M,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=M.options;Hr(ke,"invalid-api-key",{appName:M.name}),Hr(ke,"invalid-api-key",{appName:M.name});const Xe=typeof window<"u"?Xt:void 0;this._delegate=oe.initialize({options:{persistence:er(ke,M.name),popupRedirectResolver:Xe}}),this._delegate._updateErrorMap(D.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,oe){D.I(this._delegate,M,oe)}applyActionCode(M){return D.a5(this._delegate,M)}checkActionCode(M){return D.a6(this._delegate,M)}confirmPasswordReset(M,oe){return D.a4(this._delegate,M,oe)}createUserWithEmailAndPassword(M,oe){var ke=this;return(0,l.Z)(function*(){return fr(ke._delegate,D.a8(ke._delegate,M,oe))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return D.ad(this._delegate,M)}isSignInWithEmailLink(M){return D.ab(this._delegate,M)}getRedirectResult(){var M=this;return(0,l.Z)(function*(){Hr(Dn(),M._delegate,"operation-not-supported-in-this-environment");const oe=yield D.j(M._delegate,Xt);return oe?fr(M._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function Re(F,B){(0,D.aH)(F)._logFramework(B)}(this._delegate,M)}onAuthStateChanged(M,oe,ke){const{next:Xe,error:Nt,complete:dt}=ts(M,oe,ke);return this._delegate.onAuthStateChanged(Xe,Nt,dt)}onIdTokenChanged(M,oe,ke){const{next:Xe,error:Nt,complete:dt}=ts(M,oe,ke);return this._delegate.onIdTokenChanged(Xe,Nt,dt)}sendSignInLinkToEmail(M,oe){return D.aa(this._delegate,M,oe)}sendPasswordResetEmail(M,oe){return D.a3(this._delegate,M,oe||void 0)}setPersistence(M){var oe=this;return(0,l.Z)(function*(){let ke;switch(function bt(F,B){xi(Object.values(dr).includes(B),F,"invalid-persistence-type"),(0,L.b$)()?xi(B!==dr.SESSION,F,"unsupported-persistence-type"):(0,L.UG)()?xi(B===dr.NONE,F,"unsupported-persistence-type"):Xn()?xi(B===dr.NONE||B===dr.LOCAL&&(0,L.hl)(),F,"unsupported-persistence-type"):xi(B===dr.NONE||Jn(),F,"unsupported-persistence-type")}(oe._delegate,M),M){case dr.SESSION:ke=D.a;break;case dr.LOCAL:ke=(yield D.aC(D.i)._isAvailable())?D.i:D.b;break;case dr.NONE:ke=D.N;break;default:return D.av("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return fr(this._delegate,D._(this._delegate))}signInWithCredential(M){return fr(this._delegate,D.$(this._delegate,M))}signInWithCustomToken(M){return fr(this._delegate,D.a2(this._delegate,M))}signInWithEmailAndPassword(M,oe){return fr(this._delegate,D.a9(this._delegate,M,oe))}signInWithEmailLink(M,oe){return fr(this._delegate,D.ac(this._delegate,M,oe))}signInWithPhoneNumber(M,oe){return js(this._delegate,D.s(this._delegate,M,oe))}signInWithPopup(M){var oe=this;return(0,l.Z)(function*(){return Hr(Dn(),oe._delegate,"operation-not-supported-in-this-environment"),fr(oe._delegate,D.c(oe._delegate,M,Xt))})()}signInWithRedirect(M){var oe=this;return(0,l.Z)(function*(){return Hr(Dn(),oe._delegate,"operation-not-supported-in-this-environment"),yield Ut(oe._delegate),D.f(oe._delegate,M,Xt)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return D.a7(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=dr,F})();function ts(F,B,M){let oe=F;"function"!=typeof F&&({next:oe,error:B,complete:M}=F);const ke=oe;return{next:Nt=>ke(Nt&&Gr.getOrCreate(Nt)),error:B,complete:M}}function er(F,B){const M=function _n(F,B){const M=Pi();if(!M)return[];const oe=D.aD(Co,F,B);switch(M.getItem(oe)){case dr.NONE:return[D.N];case dr.LOCAL:return[D.i,D.a];case dr.SESSION:return[D.a];default:return[]}}(F,B);if(typeof self<"u"&&!M.includes(D.i)&&M.push(D.i),typeof window<"u")for(const oe of[D.b,D.a])M.includes(oe)||M.push(oe);return M.includes(D.N)||M.push(D.N),M}class Wo{constructor(){this.providerId="phone",this._delegate=new D.P(hr(N.Z.auth()))}static credential(B,M){return D.P.credential(B,M)}verifyPhoneNumber(B,M){return this._delegate.verifyPhoneNumber(B,M)}unwrap(){return this._delegate}}Wo.PHONE_SIGN_IN_METHOD=D.P.PHONE_SIGN_IN_METHOD,Wo.PROVIDER_ID=D.P.PROVIDER_ID;const Es=D.aA;class ao{constructor(B,M,oe=N.Z.app()){var ke;Es(null===(ke=oe.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new D.R(B,M,oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(F){F.INTERNAL.registerComponent(new ee.wA("auth-compat",B=>{const M=B.getProvider("app-compat").getImmediate(),oe=B.getProvider("auth");return new ni(M,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:D.A.EMAIL_SIGNIN,PASSWORD_RESET:D.A.PASSWORD_RESET,RECOVER_EMAIL:D.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:D.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:D.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:D.A.VERIFY_EMAIL}},EmailAuthProvider:D.Q,FacebookAuthProvider:D.U,GithubAuthProvider:D.W,GoogleAuthProvider:D.V,OAuthProvider:D.X,SAMLAuthProvider:D.Y,PhoneAuthProvider:Wo,PhoneMultiFactorGenerator:D.m,RecaptchaVerifier:ao,TwitterAuthProvider:D.Z,Auth:ni,AuthCredential:D.J,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}(N.Z)},3106:(ze,K,P)=>{"use strict";P.d(K,{Z:()=>Be});var l=P(9058),N=P(4537),D=P(534),L=P(7879);class ${constructor(_e,De){this._delegate=_e,this.firebase=De,(0,D._addComponent)(_e,new N.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,D.deleteApp)(this._delegate)))}_getService(_e,De=D._DEFAULT_ENTRY_NAME){var Ue;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(_e);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Ue=Ve.getComponent())||void 0===Ue?void 0:Ue.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:De})}_removeServiceInstance(_e,De=D._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(De)}_addComponent(_e){(0,D._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,D._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ee=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ce(){const xe=function ne(xe){const _e={},De={__esModule:!0,initializeApp:function se(Ae,J={}){const qe=D.initializeApp(Ae,J);if((0,l.r3)(_e,qe.name))return _e[qe.name];const He=new xe(qe,De);return _e[qe.name]=He,He},app:Ve,registerVersion:D.registerVersion,setLogLevel:D.setLogLevel,onLog:D.onLog,apps:null,SDK_VERSION:D.SDK_VERSION,INTERNAL:{registerComponent:function re(Ae){const J=Ae.name,qe=J.replace("-compat","");if(D._registerComponent(Ae)&&"PUBLIC"===Ae.type){const He=(Ye=Ve())=>{if("function"!=typeof Ye[qe])throw ee.create("invalid-app-argument",{appName:J});return Ye[qe]()};void 0!==Ae.serviceProps&&(0,l.ZB)(He,Ae.serviceProps),De[qe]=He,xe.prototype[qe]=function(...Ye){return this._getService.bind(this,J).apply(this,Ae.multipleInstances?Ye:[])}}return"PUBLIC"===Ae.type?De[qe]:null},removeApp:function Ue(Ae){delete _e[Ae]},useAsService:function he(Ae,J){return"serverAuth"===J?null:J},modularAPIs:D}};function Ve(Ae){if(!(0,l.r3)(_e,Ae=Ae||D._DEFAULT_ENTRY_NAME))throw ee.create("no-app",{appName:Ae});return _e[Ae]}return De.default=De,Object.defineProperty(De,"apps",{get:function be(){return Object.keys(_e).map(Ae=>_e[Ae])}}),Ve.App=xe,De}($);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function _e(De){(0,l.ZB)(xe,De)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),xe}(),G=new L.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=U;!function ge(xe){(0,D.registerVersion)("@firebase/app-compat","0.2.13",xe)}()},534:(ze,K,P)=>{"use strict";P.r(K),P.d(K,{FirebaseError:()=>L.ZR,SDK_VERSION:()=>js,_DEFAULT_ENTRY_NAME:()=>bt,_addComponent:()=>Pi,_addOrOverwriteComponent:()=>Is,_apps:()=>Lt,_clearComponents:()=>gn,_components:()=>_n,_getProvider:()=>hr,_registerComponent:()=>Xt,_removeServiceInstance:()=>zo,deleteApp:()=>Hr,getApp:()=>Ao,getApps:()=>Gr,initializeApp:()=>$s,onLog:()=>er,registerVersion:()=>ts,setLogLevel:()=>Wo});var l=P(5861),N=P(4537),D=P(7879),L=P(9058);const $=(Ce,de)=>de.some($e=>Ce instanceof $e);let W,ee;const U=new WeakMap,G=new WeakMap,Q=new WeakMap,ae=new WeakMap,ge=new WeakMap;let _e={get(Ce,de,$e){if(Ce instanceof IDBTransaction){if("done"===de)return G.get(Ce);if("objectStoreNames"===de)return Ce.objectStoreNames||Q.get(Ce);if("store"===de)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return se(Ce[de])},set:(Ce,de,$e)=>(Ce[de]=$e,!0),has:(Ce,de)=>Ce instanceof IDBTransaction&&("done"===de||"store"===de)||de in Ce};function Ve(Ce){return"function"==typeof Ce?function Ue(Ce){return Ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ce)?function(...de){return Ce.apply(be(this),de),se(U.get(this))}:function(...de){return se(Ce.apply(be(this),de))}:function(de,...$e){const mt=Ce.call(be(this),de,...$e);return Q.set(mt,de.sort?de.sort():[de]),se(mt)}}(Ce):(Ce instanceof IDBTransaction&&function xe(Ce){if(G.has(Ce))return;const de=new Promise(($e,mt)=>{const ut=()=>{Ce.removeEventListener("complete",$t),Ce.removeEventListener("error",mn),Ce.removeEventListener("abort",mn)},$t=()=>{$e(),ut()},mn=()=>{mt(Ce.error||new DOMException("AbortError","AbortError")),ut()};Ce.addEventListener("complete",$t),Ce.addEventListener("error",mn),Ce.addEventListener("abort",mn)});G.set(Ce,de)}(Ce),$(Ce,function ne(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ce,_e):Ce)}function se(Ce){if(Ce instanceof IDBRequest)return function Be(Ce){const de=new Promise(($e,mt)=>{const ut=()=>{Ce.removeEventListener("success",$t),Ce.removeEventListener("error",mn)},$t=()=>{$e(se(Ce.result)),ut()},mn=()=>{mt(Ce.error),ut()};Ce.addEventListener("success",$t),Ce.addEventListener("error",mn)});return de.then($e=>{$e instanceof IDBCursor&&U.set($e,Ce)}).catch(()=>{}),ge.set(de,Ce),de}(Ce);if(ae.has(Ce))return ae.get(Ce);const de=Ve(Ce);return de!==Ce&&(ae.set(Ce,de),ge.set(de,Ce)),de}const be=Ce=>ge.get(Ce),Ae=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],qe=new Map;function He(Ce,de){if(!(Ce instanceof IDBDatabase)||de in Ce||"string"!=typeof de)return;if(qe.get(de))return qe.get(de);const $e=de.replace(/FromIndex$/,""),mt=de!==$e,ut=J.includes($e);if(!($e in(mt?IDBIndex:IDBObjectStore).prototype)||!ut&&!Ae.includes($e))return;const $t=function(){var mn=(0,l.Z)(function*(Nr,...tr){const yi=this.transaction(Nr,ut?"readwrite":"readonly");let bo=yi.store;return mt&&(bo=bo.index(tr.shift())),(yield Promise.all([bo[$e](...tr),ut&&yi.done]))[0]});return function(tr){return mn.apply(this,arguments)}}();return qe.set(de,$t),$t}!function De(Ce){_e=Ce(_e)}(Ce=>({...Ce,get:(de,$e,mt)=>He(de,$e)||Ce.get(de,$e,mt),has:(de,$e)=>!!He(de,$e)||Ce.has(de,$e)}));class Ye{constructor(de){this.container=de}getPlatformInfoString(){return this.container.getProviders().map($e=>{if(function At(Ce){const de=Ce.getComponent();return"VERSION"===de?.type}($e)){const mt=$e.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter($e=>$e).join(" ")}}const xt="@firebase/app",bn=new D.Yd("@firebase/app"),bt="[DEFAULT]",Ut={[xt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Lt=new Map,_n=new Map;function Pi(Ce,de){try{Ce.container.addComponent(de)}catch($e){bn.debug(`Component ${de.name} failed to register with FirebaseApp ${Ce.name}`,$e)}}function Is(Ce,de){Ce.container.addOrOverwriteComponent(de)}function Xt(Ce){const de=Ce.name;if(_n.has(de))return bn.debug(`There were multiple attempts to register component ${de}.`),!1;_n.set(de,Ce);for(const $e of Lt.values())Pi($e,Ce);return!0}function hr(Ce,de){const $e=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return $e&&$e.triggerHeartbeat(),Ce.container.getProvider(de)}function zo(Ce,de,$e=bt){hr(Ce,de).clearInstance($e)}function gn(){_n.clear()}const jt=new L.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fr{constructor(de,$e,mt){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},$e),this._name=$e.name,this._automaticDataCollectionEnabled=$e.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new N.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const js="9.23.0";function $s(Ce,de={}){let $e=Ce;"object"!=typeof de&&(de={name:de});const mt=Object.assign({name:bt,automaticDataCollectionEnabled:!1},de),ut=mt.name;if("string"!=typeof ut||!ut)throw jt.create("bad-app-name",{appName:String(ut)});if($e||($e=(0,L.aH)()),!$e)throw jt.create("no-options");const $t=Lt.get(ut);if($t){if((0,L.vZ)($e,$t.options)&&(0,L.vZ)(mt,$t.config))return $t;throw jt.create("duplicate-app",{appName:ut})}const mn=new N.H0(ut);for(const tr of _n.values())mn.addComponent(tr);const Nr=new fr($e,mt,mn);return Lt.set(ut,Nr),Nr}function Ao(Ce=bt){const de=Lt.get(Ce);if(!de&&Ce===bt&&(0,L.aH)())return $s();if(!de)throw jt.create("no-app",{appName:Ce});return de}function Gr(){return Array.from(Lt.values())}function Hr(Ce){return ni.apply(this,arguments)}function ni(){return(ni=(0,l.Z)(function*(Ce){const de=Ce.name;Lt.has(de)&&(Lt.delete(de),yield Promise.all(Ce.container.getProviders().map($e=>$e.delete())),Ce.isDeleted=!0)})).apply(this,arguments)}function ts(Ce,de,$e){var mt;let ut=null!==(mt=Ut[Ce])&&void 0!==mt?mt:Ce;$e&&(ut+=`-${$e}`);const $t=ut.match(/\s|\//),mn=de.match(/\s|\//);if($t||mn){const Nr=[`Unable to register library "${ut}" with version "${de}":`];return $t&&Nr.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),$t&&mn&&Nr.push("and"),mn&&Nr.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void bn.warn(Nr.join(" "))}Xt(new N.wA(`${ut}-version`,()=>({library:ut,version:de}),"VERSION"))}function er(Ce,de){if(null!==Ce&&"function"!=typeof Ce)throw jt.create("invalid-log-argument");(0,D.Am)(Ce,de)}function Wo(Ce){(0,D.Ub)(Ce)}const Es="firebase-heartbeat-database",ao=1,X="firebase-heartbeat-store";let Y=null;function F(){return Y||(Y=function re(Ce,de,{blocked:$e,upgrade:mt,blocking:ut,terminated:$t}={}){const mn=indexedDB.open(Ce,de),Nr=se(mn);return mt&&mn.addEventListener("upgradeneeded",tr=>{mt(se(mn.result),tr.oldVersion,tr.newVersion,se(mn.transaction),tr)}),$e&&mn.addEventListener("blocked",tr=>$e(tr.oldVersion,tr.newVersion,tr)),Nr.then(tr=>{$t&&tr.addEventListener("close",()=>$t()),ut&&tr.addEventListener("versionchange",yi=>ut(yi.oldVersion,yi.newVersion,yi))}).catch(()=>{}),Nr}(Es,ao,{upgrade:(Ce,de)=>{0===de&&Ce.createObjectStore(X)}}).catch(Ce=>{throw jt.create("idb-open",{originalErrorMessage:Ce.message})})),Y}function M(){return(M=(0,l.Z)(function*(Ce){try{return yield(yield F()).transaction(X).objectStore(X).get(Xe(Ce))}catch(de){if(de instanceof L.ZR)bn.warn(de.message);else{const $e=jt.create("idb-get",{originalErrorMessage:de?.message});bn.warn($e.message)}}})).apply(this,arguments)}function oe(Ce,de){return ke.apply(this,arguments)}function ke(){return(ke=(0,l.Z)(function*(Ce,de){try{const mt=(yield F()).transaction(X,"readwrite");yield mt.objectStore(X).put(de,Xe(Ce)),yield mt.done}catch($e){if($e instanceof L.ZR)bn.warn($e.message);else{const mt=jt.create("idb-set",{originalErrorMessage:$e?.message});bn.warn(mt.message)}}})).apply(this,arguments)}function Xe(Ce){return`${Ce.name}!${Ce.options.appId}`}class fn{constructor(de){this.container=de,this._heartbeatsCache=null;const $e=this.container.getProvider("app").getImmediate();this._storage=new Ht($e),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var de=this;return(0,l.Z)(function*(){const mt=de.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=kt();if(null===de._heartbeatsCache&&(de._heartbeatsCache=yield de._heartbeatsCachePromise),de._heartbeatsCache.lastSentHeartbeatDate!==ut&&!de._heartbeatsCache.heartbeats.some($t=>$t.date===ut))return de._heartbeatsCache.heartbeats.push({date:ut,agent:mt}),de._heartbeatsCache.heartbeats=de._heartbeatsCache.heartbeats.filter($t=>{const mn=new Date($t.date).valueOf();return Date.now()-mn<=2592e6}),de._storage.overwrite(de._heartbeatsCache)})()}getHeartbeatsHeader(){var de=this;return(0,l.Z)(function*(){if(null===de._heartbeatsCache&&(yield de._heartbeatsCachePromise),null===de._heartbeatsCache||0===de._heartbeatsCache.heartbeats.length)return"";const $e=kt(),{heartbeatsToSend:mt,unsentEntries:ut}=function Pn(Ce,de=1024){const $e=[];let mt=Ce.slice();for(const ut of Ce){const $t=$e.find(mn=>mn.agent===ut.agent);if($t){if($t.dates.push(ut.date),Ni($e)>de){$t.dates.pop();break}}else if($e.push({agent:ut.agent,dates:[ut.date]}),Ni($e)>de){$e.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:$e,unsentEntries:mt}}(de._heartbeatsCache.heartbeats),$t=(0,L.L)(JSON.stringify({version:2,heartbeats:mt}));return de._heartbeatsCache.lastSentHeartbeatDate=$e,ut.length>0?(de._heartbeatsCache.heartbeats=ut,yield de._storage.overwrite(de._heartbeatsCache)):(de._heartbeatsCache.heartbeats=[],de._storage.overwrite(de._heartbeatsCache)),$t})()}}function kt(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(de){this.app=de,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,L.hl)()&&(0,L.eu)().then(()=>!0).catch(()=>!1)})()}read(){var de=this;return(0,l.Z)(function*(){return(yield de._canUseIndexedDBPromise)&&(yield function B(Ce){return M.apply(this,arguments)}(de.app))||{heartbeats:[]}})()}overwrite(de){var $e=this;return(0,l.Z)(function*(){var mt;if(yield $e._canUseIndexedDBPromise){const $t=yield $e.read();return oe($e.app,{lastSentHeartbeatDate:null!==(mt=de.lastSentHeartbeatDate)&&void 0!==mt?mt:$t.lastSentHeartbeatDate,heartbeats:de.heartbeats})}})()}add(de){var $e=this;return(0,l.Z)(function*(){var mt;if(yield $e._canUseIndexedDBPromise){const $t=yield $e.read();return oe($e.app,{lastSentHeartbeatDate:null!==(mt=de.lastSentHeartbeatDate)&&void 0!==mt?mt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...de.heartbeats]})}})()}}function Ni(Ce){return(0,L.L)(JSON.stringify({version:2,heartbeats:Ce})).length}!function pu(Ce){Xt(new N.wA("platform-logger",de=>new Ye(de),"PRIVATE")),Xt(new N.wA("heartbeat",de=>new fn(de),"PRIVATE")),ts(xt,"0.9.13",Ce),ts(xt,"0.9.13","esm2017"),ts("fire-js","")}("")},4537:(ze,K,P)=>{"use strict";P.d(K,{H0:()=>ne,wA:()=>D});var l=P(5861),N=P(9058);class D{constructor(U,G,Q){this.name=U,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const L="[DEFAULT]";class ${constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const Q=new N.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const ae=this.getOrInitializeService({instanceIdentifier:G});ae&&Q.resolve(ae)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const Q=this.normalizeInstanceIdentifier(U?.identifier),ae=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(ge){if(ae)return null;throw ge}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ee(ce){return"EAGER"===ce.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:L})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const ae=this.normalizeInstanceIdentifier(G);try{const ge=this.getOrInitializeService({instanceIdentifier:ae});Q.resolve(ge)}catch{}}}}clearInstance(U=L){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,l.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=L){return this.instances.has(U)}getOptions(U=L){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,Q=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ae=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[ge,Be]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(ge)&&Be.resolve(ae);return ae}onInit(U,G){var Q;const ae=this.normalizeInstanceIdentifier(G),ge=null!==(Q=this.onInitCallbacks.get(ae))&&void 0!==Q?Q:new Set;ge.add(U),this.onInitCallbacks.set(ae,ge);const Be=this.instances.get(ae);return Be&&U(Be,ae),()=>{ge.delete(U)}}invokeOnInitCallbacks(U,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const ae of Q)try{ae(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let Q=this.instances.get(U);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=U,ce===L?void 0:ce),options:G}),this.instances.set(U,Q),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(Q,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,Q)}catch{}var ce;return Q||null}normalizeInstanceIdentifier(U=L){return this.component?this.component.multipleInstances?U:L:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ne{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new $(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(ze,K,P)=>{"use strict";P.d(K,{Am:()=>ce,Ub:()=>ne,Yd:()=>ee,in:()=>N});const l=[];var N=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(N||{});const D={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},L=N.INFO,$={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},W=(U,G,...Q)=>{if(G<U.logLevel)return;const ae=(new Date).toISOString(),ge=$[G];if(!ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ge](`[${ae}]  ${U.name}:`,...Q)};class ee{constructor(G){this.name=G,this._logLevel=L,this._logHandler=W,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in N))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?D[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...G),this._logHandler(this,N.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...G),this._logHandler(this,N.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,N.INFO,...G),this._logHandler(this,N.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,N.WARN,...G),this._logHandler(this,N.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...G),this._logHandler(this,N.ERROR,...G)}}function ne(U){l.forEach(G=>{G.setLogLevel(U)})}function ce(U,G){for(const Q of l){let ae=null;G&&G.level&&(ae=D[G.level]),Q.userLogHandler=null===U?null:(ge,Be,...xe)=>{const _e=xe.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");Be>=(ae??ge.logLevel)&&U({level:N[Be].toLowerCase(),message:_e,args:xe,type:ge.name})}}}},5861:(ze,K,P)=>{"use strict";function l(D,L,$,W,ee,ne,ce){try{var U=D[ne](ce),G=U.value}catch(Q){return void $(Q)}U.done?L(G):Promise.resolve(G).then(W,ee)}function N(D){return function(){var L=this,$=arguments;return new Promise(function(W,ee){var ne=D.apply(L,$);function ce(G){l(ne,W,ee,ce,U,"next",G)}function U(G){l(ne,W,ee,ce,U,"throw",G)}ce(void 0)})}}P.d(K,{Z:()=>N})},7582:(ze,K,P)=>{"use strict";function L(Ee,we){var Re={};for(var me in Ee)Object.prototype.hasOwnProperty.call(Ee,me)&&we.indexOf(me)<0&&(Re[me]=Ee[me]);if(null!=Ee&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(me=Object.getOwnPropertySymbols(Ee);Ne<me.length;Ne++)we.indexOf(me[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Ee,me[Ne])&&(Re[me[Ne]]=Ee[me[Ne]])}return Re}function Q(Ee,we,Re,me){return new(Re||(Re=Promise))(function(Ze,pt){function Je(Jt){try{vt(me.next(Jt))}catch(Ot){pt(Ot)}}function Qt(Jt){try{vt(me.throw(Jt))}catch(Ot){pt(Ot)}}function vt(Jt){Jt.done?Ze(Jt.value):function Ne(Ze){return Ze instanceof Re?Ze:new Re(function(pt){pt(Ze)})}(Jt.value).then(Je,Qt)}vt((me=me.apply(Ee,we||[])).next())})}function se(Ee){return this instanceof se?(this.v=Ee,this):new se(Ee)}function be(Ee,we,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,me=Re.apply(Ee,we||[]),Ze=[];return Ne={},pt("next"),pt("throw"),pt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function pt(Sn){me[Sn]&&(Ne[Sn]=function(Jn){return new Promise(function(Xn,Dn){Ze.push([Sn,Jn,Xn,Dn])>1||Je(Sn,Jn)})})}function Je(Sn,Jn){try{!function Qt(Sn){Sn.value instanceof se?Promise.resolve(Sn.value.v).then(vt,Jt):Ot(Ze[0][2],Sn)}(me[Sn](Jn))}catch(Xn){Ot(Ze[0][3],Xn)}}function vt(Sn){Je("next",Sn)}function Jt(Sn){Je("throw",Sn)}function Ot(Sn,Jn){Sn(Jn),Ze.shift(),Ze.length&&Je(Ze[0][0],Ze[0][1])}}function he(Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,we=Ee[Symbol.asyncIterator];return we?we.call(Ee):(Ee=function xe(Ee){var we="function"==typeof Symbol&&Symbol.iterator,Re=we&&Ee[we],me=0;if(Re)return Re.call(Ee);if(Ee&&"number"==typeof Ee.length)return{next:function(){return Ee&&me>=Ee.length&&(Ee=void 0),{value:Ee&&Ee[me++],done:!Ee}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ee),Re={},me("next"),me("throw"),me("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function me(Ze){Re[Ze]=Ee[Ze]&&function(pt){return new Promise(function(Je,Qt){!function Ne(Ze,pt,Je,Qt){Promise.resolve(Qt).then(function(vt){Ze({value:vt,done:Je})},pt)}(Je,Qt,(pt=Ee[Ze](pt)).done,pt.value)})}}}P.d(K,{FC:()=>be,KL:()=>he,_T:()=>L,mG:()=>Q,qq:()=>se}),"function"==typeof SuppressedError&&SuppressedError}},ze=>{ze(ze.s=2274)}]);